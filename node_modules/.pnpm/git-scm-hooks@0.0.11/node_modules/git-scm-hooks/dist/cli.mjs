import{O as w}from"./shared/git-scm-hooks.d565bff1.mjs";import"node:fs";import"node:path";import"tty";import"unreadconfig";const _={black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",console_color:"\x1B[0m"},v=(s,t)=>{const e=`${_[t]}${s}${_.console_color}`;return console.log(e)};async function L(s=process.cwd(),t=process.argv){try{w(s,t)}catch(e){v("[ERROR], Was not able to set git hooks. Error: "+e,"red")}}const c={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},y={silent:{level:-1},fatal:{level:c.fatal},error:{level:c.error},warn:{level:c.warn},log:{level:c.log},info:{level:c.info},success:{level:c.success},fail:{level:c.fail},ready:{level:c.info},start:{level:c.info},box:{level:c.info},debug:{level:c.debug},trace:{level:c.trace},verbose:{level:c.verbose}};function h(s){return s!==null&&typeof s=="object"}function u(s,t,e=".",r){if(!h(t))return u(s,{},e,r);const o=Object.assign({},t);for(const n in s){if(n==="__proto__"||n==="constructor")continue;const l=s[n];l!=null&&(r&&r(o,n,l,e)||(Array.isArray(l)&&Array.isArray(o[n])?o[n]=[...l,...o[n]]:h(l)&&h(o[n])?o[n]=u(l,o[n],(e?`${e}.`:"")+n.toString(),r):o[n]=l))}return o}function b(s){return(...t)=>t.reduce((e,r)=>u(e,r,"",s),{})}const k=b();function S(s){return Object.prototype.toString.call(s)==="[object Object]"}function T(s){return!(!S(s)||!s.message&&!s.args||s.stack)}let f=!1;const m=[];class i{constructor(t={}){const e=t.types||y;this.options=k({...t,defaults:{...t.defaults},level:g(t.level,e),reporters:[...t.reporters||[]]},{types:y,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const r in e){const o={type:r,...this.options.defaults,...e[r]};this[r]=this._wrapLogFn(o),this[r].raw=this._wrapLogFn(o,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=g(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){const e=new i({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){const e=this.options.reporters.indexOf(t);if(e>=0)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(const t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=r=>{this[e].raw(String(r).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){f=!0}resumeLogs(){f=!1;const t=m.splice(0);for(const e of t)e[0]._logFn(e[1],e[2])}mockTypes(t){const e=t||this.options.mockFn;if(this._mockFn=e,typeof e=="function")for(const r in this.options.types)this[r]=e(r,this.options.types[r])||this[r],this[r].raw=this[r]}_wrapLogFn(t,e){return(...r)=>{if(f){m.push([this,t,r,e]);return}return this._logFn(t,r,e)}}_logFn(t,e,r){if((t.level||0)>this.level)return!1;const o={date:new Date,args:[],...t,level:g(t.level,this.options.types)};!r&&e.length===1&&T(e[0])?Object.assign(o,e[0]):o.args=[...e],o.message&&(o.args.unshift(o.message),delete o.message),o.additional&&(Array.isArray(o.additional)||(o.additional=o.additional.split(`
`)),o.args.push(`
`+o.additional.join(`
`)),delete o.additional),o.type=typeof o.type=="string"?o.type.toLowerCase():"log",o.tag=typeof o.tag=="string"?o.tag:"";const n=(a=!1)=>{const p=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&p>0){const d=[...this._lastLog.object.args];p>1&&d.push(`(repeated ${p} times)`),this._log({...this._lastLog.object,args:d}),this._lastLog.count=1}a&&(this._lastLog.object=o,this._log(o))};clearTimeout(this._lastLog.timeout);const l=this._lastLog.time&&o.date?o.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=o.date,l<this.options.throttle)try{const a=JSON.stringify([o.type,o.tag,o.args]),p=this._lastLog.serialized===a;if(this._lastLog.serialized=a,p&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(n,this.options.throttle);return}}catch{}n(!0)}_log(t){for(const e of this.options.reporters)e.log(t,{options:this.options})}}function g(s,t={},e=3){return s===void 0?e:typeof s=="number"?s:t[s]&&t[s].level!==void 0?t[s].level:e}i.prototype.add=i.prototype.addReporter,i.prototype.remove=i.prototype.removeReporter,i.prototype.clear=i.prototype.removeReporter,i.prototype.withScope=i.prototype.withTag,i.prototype.mock=i.prototype.mockTypes,i.prototype.pause=i.prototype.pauseLogs,i.prototype.resume=i.prototype.resumeLogs;function F(s={}){return new i(s)}class C{constructor(t){this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:t===1?console.__warn||console.warn:console.__log||console.log}log(t){const e=this._getLogFn(t.level),r=t.type==="log"?"":t.type,o=t.tag||"",l=`
      background: ${this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,a=`%c${[o,r].filter(Boolean).join(":")}`;typeof t.args[0]=="string"?e(`${a}%c ${t.args[0]}`,l,"",...t.args.slice(1)):e(a,l,...t.args)}}function x(s={}){return F({reporters:s.reporters||[new C({})],prompt(e,r={}){return r.type==="confirm"?Promise.resolve(confirm(e)):Promise.resolve(prompt(e))},...s})}const B=x();class E extends Error{constructor(t){super(t),this.name=this.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(t).stack}}function A(s){s instanceof E&&B.error(s.message),process.exitCode=1}L().catch(A);
