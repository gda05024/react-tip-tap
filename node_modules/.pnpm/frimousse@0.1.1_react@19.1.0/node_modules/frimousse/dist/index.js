var ct=Object.defineProperty;var ut=(e,t)=>{for(var o in t)ct(e,o,{get:t[o],enumerable:!0})};var at={};ut(at,{ActiveEmoji:()=>it,Empty:()=>nt,List:()=>tt,Loading:()=>rt,Root:()=>Je,Search:()=>qe,SkinTone:()=>st,SkinToneSelector:()=>ot,Viewport:()=>Ge});import{Fragment as Vt,forwardRef as z,memo as K,useCallback as D,useEffect as ee,useImperativeHandle as oe,useMemo as te,useRef as V,useState as Ye}from"react";var J="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif",O=["none","light","medium-light","medium","medium-dark","dark"];function q(e){return e.charAt(0).toUpperCase()+e.slice(1)}var A=2,T=null;function ne(e){try{T??=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{}if(!T||(queueMicrotask(()=>{T&&(T=null)}),T.canvas.width=A,T.canvas.height=A,T.font=`2px ${J}`,T.textBaseline="middle",T.measureText(e).width>=A*2))return!1;T.fillStyle="#00f",T.fillText(e,0,0);let t=T.getImageData(0,0,A,A).data;T.clearRect(0,0,A,A),T.fillStyle="#f00",T.fillText(e,0,0);let o=T.getImageData(0,0,A,A).data;for(let r=0;r<A*A*4;r+=4)if(t[r]!==o[r]||t[r+1]!==o[r+1]||t[r+2]!==o[r+2])return!1;return!0}function ie(e,t,o){try{let r=e.getItem(t);if(!r)throw new Error(`No value found for "${t}".`);let n=JSON.parse(r);return o(n)}catch{return null}}function se(e,t,o){e.setItem(t,JSON.stringify(o))}function ae(e){return t=>t===void 0?void 0:e(t)}function ce(e){return t=>t===null?null:e(t)}function S(e){if(typeof e!="string")throw new Error;return e}function _(e){if(typeof e!="number")throw new Error;return e}function ue(e){if(typeof e!="boolean")throw new Error;return e}function M(e){return t=>{if(typeof t!="object"||t===null)throw new Error;let o={};for(let r in e){let n=t[r];n===void 0&&e[r](void 0),o[r]=e[r](n)}return o}}function G(e){return t=>{if(!Array.isArray(t))throw new Error;return t.length>0&&e(t[0]),t}}var mt="latest",je=`https://cdn.jsdelivr.net/npm/emojibase-data@${mt}`,ke=e=>`${je}/${e}/data.json`,we=e=>`${je}/${e}/messages.json`,dt=["bn","da","de","en-gb","en","es-mx","es","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","vi","zh-hant","zh"],ge="en",ye=e=>`frimousse/data/${e}`,pe="frimousse/metadata";async function Ee(e,t){try{return(await fetch(e,{method:"HEAD",signal:t})).headers.get("etag")}catch{return null}}async function ft(e,t){let[{emojis:o,emojisEtag:r},{messages:n,messagesEtag:i}]=await Promise.all([fetch(ke(e),{signal:t}).then(async a=>({emojis:await a.json(),emojisEtag:a.headers.get("etag")})),fetch(we(e),{signal:t}).then(async a=>({messages:await a.json(),messagesEtag:a.headers.get("etag")}))]);return{emojis:o,messages:n,emojisEtag:r,messagesEtag:i}}async function gt(e,t){let[o,r]=await Promise.all([Ee(ke(e),t),Ee(we(e),t)]);return{emojisEtag:o,messagesEtag:r}}function pt(e){return e.skins?e.skins.filter(o=>typeof o.tone=="number").reduce((o,r)=>{let n=O[r.tone];return o[n]=r.emoji,o},{}):void 0}async function he(e,t){let{emojis:o,emojisEtag:r,messages:n,messagesEtag:i}=await ft(e,t),a=n.subgroups.find(u=>u.key==="country-flag"||u.key==="subdivision-flag"),s=n.groups.filter(u=>u.key!=="component"),l=o.filter(u=>"group"in u),c=s.map(u=>({index:u.order,label:q(u.message)})),g=n.skinTones.reduce((u,h)=>(u[h.key]=q(h.message),u),{}),m=l.map(u=>({emoji:u.emoji,category:u.group,version:u.version,label:q(u.label),tags:u.tags??[],countryFlag:a&&u.subgroup===a.order||void 0,skins:pt(u)})),d={locale:e,emojis:m,categories:c,skinTones:g};return se(localStorage,ye(e),{data:d,metadata:{emojisEtag:r,messagesEtag:i}}),d}function Et(e){let t=new Map;for(let i of e)t.has(i.version)||t.set(i.version,i.emoji);let o=[...t.keys()].sort((i,a)=>a-i),r=o[0]??0,n=ne("\u{1F1EA}\u{1F1FA}");for(let i of o){let a=t.get(i);if(ne(a))return{emojiVersion:i,countryFlags:n}}return{emojiVersion:r,countryFlags:n}}var ht=M({emojiVersion:_,countryFlags:ue}),jt=M({data:M({locale:S,emojis:G(M({emoji:S,category:_,label:S,version:_,tags:G(S),countryFlag:ae(ue),skins:ae(M({light:S,"medium-light":S,medium:S,"medium-dark":S,dark:S}))})),categories:G(M({index:_,label:S})),skinTones:M({light:S,"medium-light":S,medium:S,"medium-dark":S,dark:S})}),metadata:M({emojisEtag:ce(S),messagesEtag:ce(S)})});async function Se(e,t=Number.POSITIVE_INFINITY,o){let r=ie(sessionStorage,pe,ht),n=ie(localStorage,ye(e),jt),i;if(!n)i=await he(e,o);else if(r)i=n.data;else try{let{emojisEtag:s,messagesEtag:l}=await gt(e,o);i=!s||!l||s!==n.metadata.emojisEtag||l!==n.metadata.messagesEtag?await he(e,o):n.data}catch{i=n.data}r??=Et(i.emojis),se(sessionStorage,pe,r);let a=i.emojis.filter(s=>{let l=s.version<=r.emojiVersion&&s.version<=t;return s.countryFlag?l&&r.countryFlags:l});return{locale:e,emojis:a,categories:i.categories,skinTones:i.skinTones}}function le(e){return dt.includes(e)?e:(console.warn(`Locale "${e}" is not supported, using "${ge}" instead.`),ge)}function me(e){return O.includes(e)?e:(console.warn(`Skin tone "${e}" is not valid, using "none" instead.`),"none")}function ve(e,t){let o=[];if(t<=0)return o;for(let r=0,n=e.length;r<n;r+=t)o.push(e.slice(r,r+t));return o}function kt(e,t){if(!t)return e;let o=t.toLowerCase().trim(),r=new WeakMap;return e.filter(n=>{let i=0;n.label.toLowerCase().includes(o)&&(i+=10);for(let a of n.tags)a.toLowerCase().includes(o)&&(i+=1);return i>0?(r.set(n,i),!0):!1}).sort((n,i)=>(r.get(i)??0)-(r.get(n)??0))}function Pe(e,t,o,r){let n=kt(e.emojis,r),i=[],a=[],s=[],l={},c=0,g=0;for(let m of n)l[m.category]||(l[m.category]=[]),l[m.category].push({emoji:o&&o!=="none"&&m.skins?m.skins[o]:m.emoji,label:m.label});for(let m of e.categories){let d=l[m.index];if(!d||d.length===0)continue;let u=ve(Array.from(d),t).map(h=>({categoryIndex:c,emojis:h}));i.push(...u),a.push({label:m.label,rowsCount:u.length,startRowIndex:g}),s.push(g),c++,g+=u.length}return{count:n.length,categories:a,categoriesStartRowIndices:s,rows:i,skinTones:e.skinTones}}import{useCallback as Lt,useDeferredValue as It,useMemo as Ht}from"react";import{createContext as wt,useCallback as yt,useContext as St,useDebugValue as vt,useEffect as Pt,useState as be}from"react";import{jsx as bt}from"react/jsx-runtime";function Te(e){let t={},o=null,r=null,n=new Set,i=()=>{if(o){t=o,o=null;for(let c of n)c(t)}r=null},a=()=>o??t,s=c=>{o??=t,Object.assign(o,typeof c=="function"?c(a()):c),r||(r=requestAnimationFrame(i))},l=c=>(n.add(c),()=>n.delete(c));return t=e(s,a),{get:a,set:s,subscribe:l}}function xe(e){let[t]=be(e);return t}function Ce(e){let t=wt(null);return{useStore:()=>{let n=St(t);if(!n)throw new Error(e);return n},Provider:({store:n,children:i})=>bt(t.Provider,{value:n,children:i})}}function R(e,t,o=Object.is){let[r,n]=be(()=>t(e.get()));return Pt(()=>e.subscribe(()=>{let i=t(e.get());n(a=>o(a,i)?a:i)}),[e,t,o]),vt(r),r}function $(e,t,o){let r=yt(n=>n[t],[t]);return R(e,r,o)}var Re=2;function Le(e,t,o,r){let n=0;return Te((i,a)=>({locale:t,columns:o,skinTone:r,onEmojiSelect:e,data:null,search:"",interaction:"none",activeColumnIndex:0,activeRowIndex:0,rowHeight:null,categoryHeaderHeight:null,viewportWidth:null,viewportHeight:null,viewportCurrentCategoryIndex:null,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0,rootRef:null,searchRef:null,viewportRef:null,listRef:null,updateViewportState:s=>{let l=a(),c=s?.data??l.data,g=s?.categoryHeaderHeight??l.categoryHeaderHeight,m=s?.rowHeight??l.rowHeight,d=s?.viewportHeight??l.viewportHeight;if(!c||c.rows.length===0||!g||!m||!d)return i({...s,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0});let u=0,h=0;for(let C of c.categories)if(h++*g+C.startRowIndex*m<n)u+=g;else break;let E=c.categories.length*g+c.rows.length*m,y=Math.floor(Re*m/2),w=Math.ceil(Re*m/2),v=Math.min(n-u-y,E-d),f=v+d+w,j=Math.max(0,Math.floor(v/m)),P=Math.min(c.rows.length-1,Math.ceil(f/m)),L=c.rows[j]?.categoryIndex;return i(L===void 0&&s?s:{...s,viewportStartCategoryIndex:L,viewportStartRowIndex:j,viewportEndRowIndex:P})},onDataChange:s=>{a().updateViewportState({data:s,activeColumnIndex:0,activeRowIndex:0})},onSearchChange:s=>{i({search:s,interaction:s?"keyboard":"none"})},onActiveEmojiChange:(s,l,c)=>{if(i({interaction:s,activeColumnIndex:l,activeRowIndex:c}),s!=="keyboard")return;let{listRef:g,viewportRef:m,rowHeight:d,viewportHeight:u,categoryHeaderHeight:h}=a(),E=g?.current,y=m?.current;if(!E||!y||!d||!h||!u)return;let w=c;w===0&&y.scrollTo({top:0,behavior:"instant"});let v=E.querySelector(`[aria-rowindex="${w}"]`);if(!(v instanceof HTMLElement))return;let f=v.offsetTop,j=getComputedStyle(v),P=Number.parseFloat(j.scrollMarginTop),L=Number.parseFloat(j.scrollMarginBottom),C=n+P;f<n+u/2&&(C+=h);let F=C+u-L;(f<C||f+d>F)&&y.scrollTo({top:Math.max(f<C+h?f-Math.max(h,P):f-u+d+L,0),behavior:"instant"})},onActiveEmojiReset:()=>{i({interaction:"none",activeColumnIndex:0,activeRowIndex:0})},onRowHeightChange:s=>{a().updateViewportState({rowHeight:s})},onCategoryHeaderHeightChange:s=>{a().updateViewportState({categoryHeaderHeight:s})},onViewportSizeChange:(s,l)=>{a().updateViewportState({viewportWidth:s,viewportHeight:l})},onViewportScroll:s=>{n=s,a().updateViewportState()}}))}var{useStore:x,Provider:Ie}=Ce("EmojiPicker.Root is missing.");function He(e){return e.search}function N(e){return e.interaction==="none"?void 0:e.data?.rows[e.activeRowIndex]?.emojis[e.activeColumnIndex]}function De(e){return e.data===void 0||typeof e.data?.count=="number"&&e.data.count===0}function Ae(e){return e.data===null||e.viewportHeight===null||e.rowHeight===null||e.categoryHeaderHeight===null}function de(e){return e.data?.rows.length}function $e(e){return e.data?.categories.length}function Me(e){return e.data?.categoriesStartRowIndices}function Ve(e){return e.data?.skinTones}function fe(e,t){return e?.emoji===t?.emoji}function Fe(e,t){return e?.categoryIndex!==t?.categoryIndex||e?.emojis.length!==t?.emojis.length?!1:!!e?.emojis.every((o,r)=>fe(o,t?.emojis[r]))}var W="\u200D",Oe=/\p{Emoji_Modifier_Base}/u,Tt=/\uFE0F$/,xt=/\u{1F3FB}|\u{1F3FC}|\u{1F3FD}|\u{1F3FE}|\u{1F3FF}/gu,Ct={light:"\u{1F3FB}","medium-light":"\u{1F3FC}",medium:"\u{1F3FD}","medium-dark":"\u{1F3FE}",dark:"\u{1F3FF}"};function Rt(e,t){if(!e.split(W).some(r=>Oe.test(r)))return e;let o=e.split(W).map(r=>r.replace(xt,"")).join(W);return t==="none"?o:o.split(W).map((r,n,i)=>{let a=i.length>1;return!Oe.test(r)||a&&r==="\u{1F91D}"?r:r.replace(Tt,"")+Ct[t]}).join(W)}function _e(e){return O.map(t=>({skinTone:t,emoji:Rt(e,t)}))}function Z(){let e=x(),t=R(e,N,fe);return It(t)}function X(e="\u270B"){let t=x(),o=$(t,"skinTone"),r=Ht(()=>_e(e),[e]),n=Lt(i=>{t.set({skinTone:i})},[]);return[o,n,r]}function Q(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||typeof t!="object"||e===null||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let o=Object.keys(e),r=Object.keys(t);return o.length!==r.length?!1:o.every(n=>n in t&&e[n]===t[n])}function Ne(...e){}function We(e,t){let o=null;if(typeof window.requestIdleCallback=="function")o=window.requestIdleCallback(e,t);else{let r=Date.now();o=window.setTimeout(()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,(t?.timeout??50)-(Date.now()-r))})},10)}return()=>{typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(o):window.clearTimeout(o)}}import{useEffect as Dt,useLayoutEffect as At}from"react";var H=typeof window<"u"?At:Dt;import{useCallback as $t,useRef as Mt}from"react";function Be(e){let t=Mt(e);return H(()=>{t.current=e}),$t((...o)=>t.current(...o),[])}import{jsx as p,jsxs as B}from"react/jsx-runtime";function Ft({emojiVersion:e}){let[t,o]=Ye(void 0),r=x(),n=$(r,"locale"),i=$(r,"columns"),a=$(r,"skinTone"),s=$(r,"search");return ee(()=>{let l=new AbortController,c=l.signal;return Se(n,e,c).then(g=>{o(g)}).catch(g=>{c.aborted||console.error(g)}),()=>{l.abort()}},[e,n]),ee(()=>{if(t)return We(()=>{r.get().onDataChange(Pe(t,i,a,s))},{timeout:100})},[t,i,a,s]),null}var Je=z(({locale:e="en",columns:t=9,skinTone:o="none",onEmojiSelect:r=Ne,emojiVersion:n,onFocusCapture:i,onBlurCapture:a,children:s,style:l,...c},g)=>{let m=Be(r),d=xe(()=>Le(m,le(e),t,me(o))),[u,h]=Ye(!1),E=V(null),y=D(f=>{f&&(E.current=f,d.set({rootRef:E}))},[]);H(()=>{d.set({locale:le(e)})},[e]),H(()=>{d.set({columns:t})},[t]),H(()=>{d.set({skinTone:me(o)})},[o]);let w=D(f=>{i?.(f);let{searchRef:j,viewportRef:P}=d.get(),L=f.target===j?.current||f.target.hasAttribute("frimousse-search"),C=f.target===P?.current||f.target.hasAttribute("frimousse-viewport");f.isDefaultPrevented()||(h(L||C),f.isDefaultPrevented()||(h(L||C),C?d.get().onActiveEmojiChange("keyboard",0,0):L&&d.get().search===""&&d.set({interaction:"none"})))},[i]),v=D(f=>{a?.(f),!f.isDefaultPrevented()&&!f.currentTarget.contains(f.relatedTarget)&&h(!1)},[a]);return H(()=>{u||d.get().onActiveEmojiReset()},[u]),oe(g,()=>E.current),ee(()=>{if(!u)return;function f(j){if(j.defaultPrevented||!j.key.startsWith("Arrow")&&j.key!=="Enter")return;let{data:P,onEmojiSelect:L,onActiveEmojiChange:C,interaction:F,activeColumnIndex:U,activeRowIndex:Y}=d.get();if(j.key==="Enter"){let b=N(d.get());b&&(j.preventDefault(),L(b))}if(j.key.startsWith("Arrow")){let b=U,k=Y;if(j.preventDefault(),F!=="none"){if(P?.rows&&P.rows.length>0)switch(j.key){case"ArrowLeft":{if(b===0){let I=k-1,re=P.rows[I];re&&(k=I,b=re.emojis.length-1)}else b-=1;break}case"ArrowRight":{if(b===P.rows[k].emojis.length-1){let I=k+1;P.rows[I]&&(k=I,b=0)}else b+=1;break}case"ArrowUp":{let I=P.rows[k-1];I&&(k-=1,I.emojis[b]||(b=I.emojis.length-1));break}case"ArrowDown":{let I=P.rows[k+1];I&&(k+=1,I.emojis[b]||(b=I.emojis.length-1));break}}C("keyboard",b,k)}else C("keyboard",0,0)}}return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[u]),H(()=>{let f=null,j=null,P=null,L=null,C=d.subscribe(k=>{E.current&&(f!==k.viewportWidth&&(f=k.viewportWidth,E.current.style.setProperty("--frimousse-viewport-width",`${k.viewportWidth}px`)),j!==k.viewportHeight&&(j=k.viewportHeight,E.current.style.setProperty("--frimousse-viewport-height",`${k.viewportHeight}px`)),P!==k.rowHeight&&(P=k.rowHeight,E.current.style.setProperty("--frimousse-row-height",`${k.rowHeight}px`)),L!==k.categoryHeaderHeight&&(L=k.categoryHeaderHeight,E.current.style.setProperty("--frimousse-category-header-height",`${k.categoryHeaderHeight}px`)))}),{viewportWidth:F,viewportHeight:U,rowHeight:Y,categoryHeaderHeight:b}=d.get();return F&&E.current.style.setProperty("--frimousse-viewport-width",`${F}px`),U&&E.current.style.setProperty("--frimousse-viewport-height",`${U}px`),Y&&E.current.style.setProperty("--frimousse-row-height",`${Y}px`),b&&E.current.style.setProperty("--frimousse-category-header-height",`${b}px`),C},[]),p("div",{"data-focused":u?"":void 0,"frimousse-root":"",onBlurCapture:v,onFocusCapture:w,...c,ref:y,style:{"--frimousse-emoji-font":J,...l},children:B(Ie,{store:d,children:[p(Ft,{emojiVersion:n}),s]})})}),qe=z(({value:e,defaultValue:t,onChange:o,...r},n)=>{let i=x(),a=V(null),s=D(m=>{m&&(a.current=m,i.set({searchRef:a}))},[]),l=typeof e=="string",c=V(l);ee(()=>{process.env.NODE_ENV!=="production"&&c.current!==l&&console.warn(`EmojiPicker.Search is changing from ${c?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}.`),c.current=l},[l]),H(()=>{i.set({search:typeof e=="string"?e:typeof t=="string"?t:""})},[]),H(()=>{typeof e=="string"&&i.get().onSearchChange(e)},[e]);let g=D(m=>{o?.(m),m.isDefaultPrevented()||i.get().onSearchChange(m.target.value)},[o]);return oe(n,()=>a.current),p("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",enterKeyHint:"done","frimousse-search":"",placeholder:"Search\u2026",spellCheck:!1,type:"search",...r,defaultValue:t,onChange:g,ref:s,value:e})}),Ot=K(()=>{let e=Z();return e?p("div",{"aria-live":"polite",style:{border:0,clip:"rect(0, 0, 0, 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1,wordWrap:"normal"},children:e.label}):null}),Ge=z(({children:e,onScroll:t,onKeyDown:o,style:r,...n},i)=>{let a=x(),s=V(null),l=D(d=>{d&&(s.current=d,a.set({viewportRef:s}))},[]),c=R(a,de),g=R(a,$e),m=D(d=>{t?.(d),a.get().onViewportScroll(d.currentTarget.scrollTop)},[t]);return H(()=>{if(!s.current)return;let d=new ResizeObserver(([u])=>{let h=u?.borderBoxSize[0]?.inlineSize??0,E=u?.borderBoxSize[0]?.blockSize??0,{onViewportSizeChange:y,viewportHeight:w,viewportWidth:v}=a.get();(w!==E||v!==h)&&y(h,E)});return d.observe(s.current),a.get().onViewportSizeChange(s.current.offsetWidth,s.current.clientHeight),()=>{d.disconnect()}},[]),oe(i,()=>s.current),B("div",{"frimousse-viewport":"",...n,onScroll:m,ref:l,style:{position:"relative",boxSizing:"border-box",contain:"layout paint",containIntrinsicSize:typeof c=="number"&&typeof g=="number"?`var(--frimousse-viewport-width, auto) calc(${c} * var(--frimousse-row-height) + ${g} * var(--frimousse-category-header-height))`:void 0,overflowY:"auto",overscrollBehavior:"contain",scrollbarGutter:"stable",willChange:"scroll-position",...r},children:[p(Ot,{}),e]})});function Ze(e,t,o){return{emoji:{...e,isActive:o},role:"gridcell","aria-colindex":t,"aria-selected":o||void 0,"aria-label":e.label,"data-active":o?"":void 0,"frimousse-emoji":"",style:{fontFamily:"var(--frimousse-emoji-font)"},tabIndex:-1}}function Xe(e,t=!1){return{role:t?void 0:"row","aria-rowindex":t?void 0:e,"frimousse-row":"",style:{contain:t?void 0:"content",height:t?void 0:"var(--frimousse-row-height)",display:"flex"}}}function Qe(e,t){return{"frimousse-category":"",style:{contain:"content",top:t?`calc(${e} * var(--frimousse-category-header-height) + ${t.startRowIndex} * var(--frimousse-row-height))`:void 0,height:t?`calc(var(--frimousse-category-header-height) + ${t.rowsCount} * var(--frimousse-row-height))`:void 0,width:"100%",pointerEvents:"none",position:"absolute"}}}function et(e,t=!1){return{category:e,"frimousse-category-header":"",style:{contain:t?void 0:"layout paint",height:t?void 0:"var(--frimousse-category-header-height)",pointerEvents:"auto",position:"sticky",top:0}}}function ze(e,t,o,r){return{"frimousse-list-sizer":"",style:{position:"relative",boxSizing:"border-box",height:`calc(${e} * var(--frimousse-row-height) + ${t} * var(--frimousse-category-header-height))`,paddingTop:`calc(${o} * var(--frimousse-row-height) + ${r} * var(--frimousse-category-header-height))`}}}function Ke(e,t,o){return{"aria-colcount":e,"aria-rowcount":t,"frimousse-list":"",style:{"--frimousse-list-columns":e,...o},role:"grid"}}function _t(e){e.preventDefault()}var Nt=K(({Emoji:e,emoji:t,columnIndex:o,rowIndex:r})=>{let n=x(),i=R(n,c=>N(c)?.emoji===t.emoji),a=D(()=>{n.get().onEmojiSelect(t)},[t]),s=D(()=>{n.get().onActiveEmojiChange("pointer",o,r)},[o,r]),l=D(()=>{n.get().onActiveEmojiReset()},[]);return p(e,{...Ze(t,o,i),onClick:a,onPointerDown:_t,onPointerEnter:s,onPointerLeave:l})}),Wt=K(({Row:e,Emoji:t,rowIndex:o})=>{let r=x(),n=R(r,i=>i.data?.rows[o],Fe);return n?p(e,{...Xe(o),children:n.emojis.map((i,a)=>p(Nt,{Emoji:t,columnIndex:a,emoji:i,rowIndex:o},i.label))}):null}),Bt=K(({CategoryHeader:e,categoryIndex:t})=>{let o=x(),r=R(o,n=>n.data?.categories[t],Q);return r?p("div",{...Qe(t,r),children:p(e,{...et({label:r.label})})}):null}),Ue=K(({CategoryHeader:e,Row:t,Emoji:o})=>{let r=V(null),n=x(),i=$(n,"columns"),a=te(()=>Array(i).fill({emoji:"\u{1F642}",label:""}),[i]),s=te(()=>({label:"Category"}),[]),l=V(null),c=V(null);return H(()=>{let g=r.current?.parentElement?.parentElement;if(!g||!l.current||!c.current)return;let m=new ResizeObserver(h=>{for(let E of h){let y=E.contentRect.height,{onRowHeightChange:w,onCategoryHeaderHeightChange:v,rowHeight:f,categoryHeaderHeight:j}=n.get();E.target===l.current&&f!==y&&w(y),E.target===c.current&&j!==y&&v(y)}});m.observe(g),m.observe(l.current),m.observe(c.current);let{onRowHeightChange:d,onCategoryHeaderHeightChange:u}=n.get();return d(l.current.clientHeight),u(c.current.clientHeight),()=>{m.disconnect()}},[]),B("div",{"aria-hidden":!0,ref:r,style:{height:0,visibility:"hidden"},children:[p("div",{"frimousse-row-sizer":"",ref:l,children:p(t,{...Xe(-1,!0),children:a.map((g,m)=>p(o,{...Ze(g,m,!1)},m))})}),p("div",{...Qe(-1),children:p("div",{"frimousse-category-header-sizer":"",ref:c,children:p(e,{...et(s,!0)})})})]})});function zt({category:e,...t}){return p("div",{...t,children:e.label})}function Kt({emoji:e,...t}){return p("button",{type:"button",...t,children:e.emoji})}function Ut({...e}){return p("div",{...e})}var tt=z(({style:e,components:t,...o},r)=>{let n=x(),i=V(null),a=D(w=>{w&&(i.current=w,n.set({listRef:i}))},[]),s=t?.CategoryHeader??zt,l=t?.Emoji??Kt,c=t?.Row??Ut,g=$(n,"columns"),m=$(n,"viewportStartRowIndex"),d=$(n,"viewportEndRowIndex"),u=R(n,de),h=R(n,Me,Q),E=te(()=>h?.filter(w=>w<m).length??0,[h,m]),y=h?.length??0;return oe(r,()=>i.current),!u||!h||y===0?p("div",{...Ke(g,0,e),...o,children:p("div",{...ze(0,0,0,0),children:p(Ue,{CategoryHeader:s,Emoji:l,Row:c})})}):p("div",{...Ke(g,u,e),...o,ref:a,children:B("div",{...ze(u,y,m,E),children:[p(Ue,{CategoryHeader:s,Emoji:l,Row:c}),Array.from({length:d-m+1},(w,v)=>{let f=m+v,j=h.indexOf(f);return B(Vt,{children:[j>=0&&p("div",{style:{height:"var(--frimousse-category-header-height)"}}),p(Wt,{Emoji:l,Row:c,rowIndex:f})]},f)}),Array.from({length:y},(w,v)=>p(Bt,{CategoryHeader:s,categoryIndex:v},v))]})})}),ot=z(({emoji:e,onClick:t,"aria-label":o="Change skin tone",...r},n)=>{let i=x(),a=R(i,Ve,Q),[s,l,c]=X(e),g=te(()=>Math.max(0,c.findIndex(w=>w.skinTone===s)),[s,c]),m=c[g],u=c[(g+1)%c.length].skinTone,h=s==="none"?void 0:a?.[s],E=u==="none"?void 0:a?.[u],y=D(w=>{t?.(w),w.isDefaultPrevented()||l(u)},[t,l,u]);return p("button",{type:"button",...r,"aria-label":o+(E?` (${E})`:""),"aria-live":"polite","aria-valuetext":h,"frimousse-skin-tone-selector":"",onClick:y,ref:n,children:m.emoji})});function rt({children:e,...t}){let o=x();return R(o,Ae)?p("span",{"frimousse-loading":"",...t,children:e}):null}function Yt({children:e}){let t=x(),o=R(t,He);return e({search:o})}function nt({children:e,...t}){let o=x();return R(o,De)?p("span",{"frimousse-empty":"",...t,children:typeof e=="function"?p(Yt,{children:e}):e}):null}function it({children:e}){let t=Z();return e({emoji:t})}function st({children:e,emoji:t}){let[o,r,n]=X(t);return e({skinTone:o,setSkinTone:r,skinToneVariations:n})}Je.displayName="EmojiPicker.Root";qe.displayName="EmojiPicker.Search";Ge.displayName="EmojiPicker.Viewport";tt.displayName="EmojiPicker.List";rt.displayName="EmojiPicker.Loading";nt.displayName="EmojiPicker.Empty";ot.displayName="EmojiPicker.SkinToneSelector";it.displayName="EmojiPicker.ActiveEmoji";st.displayName="EmojiPicker.SkinTone";export{at as EmojiPicker,Z as useActiveEmoji,X as useSkinTone};
//# sourceMappingURL=index.js.map