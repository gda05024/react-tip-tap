{"version":3,"file":"RichTextEditor-aaUynZc2.js","sources":["../src/lib/utils.ts","../src/utils/plateform.ts","../src/components/ActionButton.tsx","../src/store/fast-context.tsx","../src/store/store.ts","../src/utils/customEvents/customEvents.ts","../src/utils/customEvents/events.constant.ts","../src/store/editableEditor.ts","../src/utils/delete-node.ts","../src/utils/utils.ts","../src/components/ui/button.tsx","../src/components/ui/dropdown-menu.tsx","../src/components/ui/input.tsx","../src/components/ui/label.tsx","../src/components/ui/popover.tsx","../src/components/ui/separator.tsx","../src/components/ui/switch.tsx","../src/components/ui/tabs.tsx","../src/components/ui/toast.tsx","../src/components/ui/toggle.tsx","../src/components/ui/tooltip.tsx","../src/components/ui/use-toast.ts","../src/components/ui/checkbox.tsx","../src/components/icons/AspectRatio.tsx","../src/components/icons/Blockquote.tsx","../src/components/icons/DeleteColumn.tsx","../src/components/icons/DeleteRow.tsx","../src/components/icons/FileWordOutline.tsx","../src/components/icons/Icon.tsx","../src/components/icons/LineHeight.tsx","../src/components/icons/MenuDown.tsx","../src/components/icons/SizeL.tsx","../src/components/icons/SizeM.tsx","../src/components/icons/SizeS.tsx","../src/components/icons/ColumnAddLeft.tsx","../src/components/icons/ColumnAddRight.tsx","../src/components/icons/Direction.tsx","../src/components/icons/Excalidraw.tsx","../src/components/icons/ExportPdf.tsx","../src/components/icons/ExportWord.tsx","../src/components/icons/GIfIcon.tsx","../src/components/icons/LeftToRight.tsx","../src/components/icons/Mermaid.tsx","../src/components/icons/RightToLeft.tsx","../src/components/icons/Twitter.tsx","../src/components/icons/ImportWord.tsx","../src/components/icons/icons.ts","../src/extensions/Highlight/components/HighlightActionButton.tsx","../src/extensions/Link/components/LinkEditBlock.tsx","../src/utils/columns.ts","../src/extensions/MultiColumn/MultiColumn.ts","../src/extensions/MultiColumn/Column.ts","../src/utils/indent.ts","../src/extensions/Image/store.ts","../src/components/ui/dialog.tsx","../src/utils/file.ts","../src/extensions/Image/components/ImageCropper.tsx","../src/extensions/Image/components/ActionImageButton.tsx","../src/extensions/Image/components/ImageView.tsx","../src/plugins/image-upload.ts","../src/extensions/Image/Image.ts","../src/extensions/Video/components/ActiveVideoButton.tsx","../src/extensions/Video/Video.ts","../src/extensions/Iframe/components/IframeNodeView.tsx","../src/utils/dom-dataset.ts","../src/extensions/Iframe/Iframe.ts","../src/components/ui/textarea.tsx","../src/hooks/useAttributes.tsx","../src/extensions/Katex/components/KatexActiveButton.tsx","../src/theme/theme.ts","../src/utils/color.ts","../src/extensions/Katex/components/KatexWrapper.tsx","../src/extensions/Katex/Katex.ts","../src/utils/_event.ts","../src/extensions/Excalidraw/components/ExcalidrawActiveButton.tsx","../src/extensions/Excalidraw/components/NodeViewExcalidraw/NodeViewExcalidraw.tsx","../src/extensions/Excalidraw/Excalidraw.ts","../src/extensions/ImageGif/components/ImageGifActionButton.tsx","../src/extensions/ImageGif/components/ImageGifView.tsx","../src/extensions/ImageGif/ImageGif.ts","../src/utils/shortId.ts","../src/extensions/Mermaid/components/MermaidActiveButton.tsx","../src/extensions/Mermaid/components/NodeViewMermaid/NodeViewMermaid.tsx","../src/extensions/Mermaid/Mermaid.ts","../src/extensions/Twitter/components/NodeViewTweet.tsx","../src/extensions/Twitter/components/FormEditLinkTwitter.tsx","../src/extensions/Twitter/components/TwitterActiveButton.tsx","../src/extensions/Twitter/Twitter.ts","../src/extensions/Drawer/components/ControlDrawer/icon.tsx","../src/extensions/Drawer/components/ControlDrawer/ControlDrawer.tsx","../src/extensions/Drawer/components/DrawerActiveButton.tsx","../src/extensions/Drawer/components/NodeViewDrawer/NodeViewDrawer.tsx","../src/extensions/Drawer/Drawer.ts","../src/extensions/Drawer/components/EditDrawerBlock.tsx","../src/hooks/useExtension.tsx","../src/components/menus/components/BubbleMenuDrawer.tsx","../src/components/SizeSetter/SizeSetter.tsx","../src/utils/editor-container-size.ts","../src/components/menus/components/BubbleMenuExcalidraw.tsx","../src/components/menus/components/BubbleMenuIframe.tsx","../src/components/menus/components/BubbleMenuKatex.tsx","../src/extensions/Mermaid/components/EditMermaidBlock.tsx","../src/components/menus/components/BubbleMenuMermaid.tsx","../src/components/menus/components/BubbleMenuTwitter.tsx","../src/components/BubbleMenu.tsx","../src/components/icons/NoFill.tsx","../src/components/ColorPicker.tsx","../src/components/Toolbar.tsx","../src/components/menus/bubble.ts","../src/plugins/DragHandle/range.ts","../src/plugins/DragHandle/utils.ts","../src/plugins/DragHandle/index.ts","../src/components/menus/components/ContentMenu.tsx","../src/components/menus/components/BubbleMenuText.tsx","../src/components/menus/components/TableBubbleMenu.tsx","../src/extensions/Link/components/LinkViewBlock.tsx","../src/components/menus/components/BubbleMenuLink.tsx","../src/components/menus/components/BubbleMenuMedia.tsx","../src/components/menus/components/ColumnsBubbleMenu.tsx","../src/components/CharactorCount.tsx","../src/components/ui/toaster.tsx","../src/constants/resetCSS.ts","../src/store/ProviderRichText.tsx","../src/utils/dynamicCSS.ts","../src/components/RichTextEditor.tsx"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n// asd\n","// We'll cache the result of isMac() and isTouchDevice(), since they shouldn't\n// change during a session. That way repeated calls don't require any logic and\n// are rapid.\nlet isMacResult: boolean | undefined;\nlet isTouchDeviceResult: boolean | undefined;\n\n/**\n * Return true if the user is using a Mac (as opposed to Windows, etc.) device.\n */\nexport function isMac(): boolean {\n  if (isMacResult === undefined) {\n    isMacResult = navigator.platform.includes('Mac');\n  }\n  return isMacResult;\n}\n\n/**\n * 根据 Mac 和非 Mac 平台，返回应该用于键盘快捷键的修饰键的可读版本。用于直观地指示应该按哪个键。\n */\nexport function getShortcutKey(key: string): string {\n  if (`${key}`.toLowerCase() === 'mod') {\n    return isMac() ? '⌘' : 'Ctrl';\n  } else if (`${key}`.toLowerCase() === 'alt') {\n    return isMac() ? '⌥' : 'Alt';\n  } else if (`${key}`.toLowerCase() === 'shift') {\n    return isMac() ? '⇧' : 'Shift';\n  } else {\n    return key;\n  }\n}\nexport function getShortcutKeys(keys: string[]): string {\n  return keys.map(getShortcutKey).join(' ');\n}\n\n/** Return true if the user is using a touch-based device. */\nexport function isTouchDevice(): boolean {\n  if (isTouchDeviceResult === undefined) {\n    // This technique is taken from\n    // https://hacks.mozilla.org/2013/04/detecting-touch-its-the-why-not-the-how/\n    // (and https://stackoverflow.com/a/4819886/4543977)\n    isTouchDeviceResult\n      = (window && 'ontouchstart' in window)\n        || navigator.maxTouchPoints > 0\n      // @ts-expect-error: msMaxTouchPoints is IE-specific, so needs to be ignored\n        || navigator.msMaxTouchPoints > 0;\n  }\n\n  return isTouchDeviceResult;\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/display-name */\nimport React from 'react';\n\nimport { Slot } from '@radix-ui/react-slot';\nimport type { TooltipContentProps } from '@radix-ui/react-tooltip';\n\nimport { Toggle, Tooltip, TooltipContent, TooltipTrigger, icons } from '@/components';\nimport { cn } from '@/lib/utils';\nimport type { ButtonViewReturnComponentProps } from '@/types';\nimport { getShortcutKeys } from '@/utils/plateform';\n\nexport interface ActionButtonProps {\n  /* Icon name to display */\n  icon?: string\n  /* Button title */\n  title?: string\n  /* Tooltip text */\n  tooltip?: string\n  /* Whether the button is disabled */\n  disabled?: boolean\n  /* Keyboard shortcut keys */\n  shortcutKeys?: string[]\n  /* Custom CSS class */\n  customClass?: string\n  /* Loading state */\n  loading?: boolean\n  /* Tooltip options */\n  tooltipOptions?: TooltipContentProps\n  /* Button color */\n  color?: string\n  /* Click action handler */\n  action?: ButtonViewReturnComponentProps['action']\n  /* Active state checker */\n  isActive?: ButtonViewReturnComponentProps['isActive']\n  /* Child components */\n  children?: React.ReactNode\n  /* Whether to render as child */\n  asChild?: boolean\n  /* Whether it's an upload button */\n  upload?: boolean\n}\n\nconst ActionButton = React.forwardRef<HTMLButtonElement, Partial<ActionButtonProps>>(\n  (props, ref) => {\n    const {\n      icon = undefined,\n      // title = undefined,\n      tooltip = undefined,\n      disabled = false,\n      customClass = '',\n      // color = undefined,\n      loading = undefined,\n      shortcutKeys = undefined,\n      tooltipOptions = {},\n      action = undefined,\n      isActive = undefined,\n      children,\n      asChild = false,\n      upload = false,\n      ...rest\n    } = props;\n\n    const Icon = icons[icon as string];\n    const Comp = asChild ? Slot : Toggle;\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Comp\n            data-state={isActive?.() ? 'on' : 'off'}\n            onClick={action}\n            ref={ref}\n            size=\"sm\"\n            className={cn('richtext-w-[32px] richtext-h-[32px]', customClass)}\n            // pressed={isActive?.() || false}\n            disabled={disabled}\n            {...(rest as Omit<typeof rest, 'loading'>)}\n          >\n            {Icon && <Icon className=\"richtext-size-4\" />}\n            {children}\n          </Comp>\n        </TooltipTrigger>\n\n        {tooltip && (\n          <TooltipContent {...tooltipOptions}>\n            <div className=\"richtext-flex richtext-max-w-24 richtext-flex-col richtext-items-center richtext-text-center\">\n              <div>\n                {tooltip}\n              </div>\n\n              {!!shortcutKeys?.length && <span>\n                {getShortcutKeys(shortcutKeys)}\n              </span>}\n            </div>\n          </TooltipContent>\n        )}\n      </Tooltip>\n    );\n  },\n);\n\nexport {\n  ActionButton,\n};\n","import React, {\n  useRef,\n  createContext,\n  useContext,\n  useCallback,\n  useSyncExternalStore,\n} from 'react';\n\nexport default function createFastContext<Store>(initialState: Store) {\n  function useStoreData(): {\n    get: () => Store;\n    set: (value: Partial<Store>) => void;\n    subscribe: (callback: () => void) => () => void; } {\n    const store = useRef(initialState);\n\n    const get = useCallback(() => store.current, []);\n\n    const subscribers = useRef(new Set<() => void>());\n\n    const set = useCallback((value: Partial<Store>) => {\n      store.current = { ...store.current, ...value };\n      subscribers.current.forEach((callback) => callback());\n    }, []);\n\n    const subscribe = useCallback((callback: () => void) => {\n      subscribers.current.add(callback);\n      return () => subscribers.current.delete(callback);\n    }, []);\n\n    return {\n      get,\n      set,\n      subscribe,\n    };\n  }\n\n  type UseStoreDataReturnType = ReturnType<typeof useStoreData>;\n\n  const StoreContext = createContext<UseStoreDataReturnType | null>(null);\n\n  function Provider({ children }: { children: React.ReactNode }) {\n    return (\n      <StoreContext.Provider value={useStoreData()}>\n        {children}\n      </StoreContext.Provider>\n    );\n  }\n\n  function useStore<SelectorOutput>(\n    selector: (store: Store) => SelectorOutput\n  ): [SelectorOutput, (value: Partial<Store>) => void] {\n    const store = useContext(StoreContext);\n    if (!store) {\n      throw new Error('Store not found');\n    }\n\n    const state = useSyncExternalStore(\n      store.subscribe,\n      () => selector(store.get()),\n      () => selector(initialState),\n    );\n\n    return [state, store.set];\n  }\n\n  return {\n    Provider,\n    useStore,\n  };\n}\n","import { createSignal } from 'reactjs-signal';\n\nimport createFastContext from '@/store/fast-context';\n\nconst { Provider: ProviderUploadImage, useStore: useStoreUploadImage } = createFastContext({\n  value: false\n});\n\nconst { Provider: ProviderUploadVideo, useStore: useStoreUploadVideo } = createFastContext({\n  value: false\n});\n\nconst { Provider: ProviderEditableEditor, useStore: useStoreEditableEditor } = createFastContext({\n  value: false\n});\n\nconst { Provider: ProviderTheme, useStore: useStoreTheme } = createFastContext({\n  value: 'light'\n});\n\nexport const atomID = createSignal('0');\n\nexport {\n  ProviderUploadImage,\n  useStoreUploadImage,\n\n  ProviderUploadVideo,\n  useStoreUploadVideo,\n\n  ProviderEditableEditor,\n  useStoreEditableEditor,\n\n  ProviderTheme,\n  useStoreTheme,\n};\n","import { type EventValues } from '@/utils/customEvents/events.constant';\n\nexport function listenEvent (eventName: EventValues, callback: any) {\n  window.addEventListener(eventName, callback);\n\n  return () => {\n    window.removeEventListener(eventName, callback);\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function dispatchEvent (eventName: EventValues, detail?: any) {\n  window.dispatchEvent(\n    new CustomEvent(eventName, {\n      detail,\n    }),\n  );\n}\n","export const EVENTS = {\n  UPLOAD_IMAGE: (id: any) => `UPLOAD_IMAGE-${id}`,\n  UPLOAD_VIDEO: (id: string) => `UPLOAD_VIDEO-${id}`,\n  EDIT: (id: string) => `EDIT-${id}`,\n  UPDATE_THEME: (id: string) => `UPDATE_THEME-${id}`,\n\n  SEARCH_REPLCE:  'SEARCH_REPLACE',\n} as const;\n\n// type EventsType = typeof EVENTS;\nexport type EventValues = any;\n","import { useStoreEditableEditor } from '@/store/store';\nimport { dispatchEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nexport function useEditableEditor() {\n  const [v] = useStoreEditableEditor(store => store.value);\n\n  return v;\n}\n\nexport const editableEditorActions = {\n  setDisable: (id: any, disable: boolean) => {\n    dispatchEvent(EVENTS.EDIT(id), disable);\n  },\n};\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport type { Editor } from '@tiptap/core';\n\nexport function deleteNode(nodeType: string, editor: Editor) {\n  const { state } = editor;\n  const $pos = state.selection.$anchor;\n  let done = false;\n\n  if ($pos.depth) {\n    for (let d = $pos.depth; d > 0; d--) {\n      const node = $pos.node(d);\n      if (node.type.name === nodeType) {\n        // @ts-ignore\n        if (editor.dispatchTransaction)\n          // @ts-ignore\n          editor.dispatchTransaction(state.tr.delete($pos.before(d), $pos.after(d)).scrollIntoView());\n        done = true;\n      }\n    }\n  } else {\n    // @ts-ignore\n    const node = state.selection.node;\n    if (node && node.type.name === nodeType) {\n      editor.chain().deleteSelection().run();\n      done = true;\n    }\n  }\n\n  if (!done) {\n    const pos = $pos.pos;\n\n    if (pos) {\n      const node = state.tr.doc.nodeAt(pos);\n\n      if (node && node.type.name === nodeType) {\n        // @ts-ignore\n        if (editor.dispatchTransaction)\n          // @ts-ignore\n          editor.dispatchTransaction(state.tr.delete(pos, pos + node.nodeSize));\n        done = true;\n      }\n    }\n  }\n\n  return done;\n}\n","import type { Editor } from '@tiptap/core';\n\nimport type { NameValueOption } from '@/types';\n\nexport function clamp(val: number, min: number, max: number) {\n  if (val < min) {\n    return min;\n  }\n  if (val > max) {\n    return max;\n  }\n  return val;\n}\n\nexport const isNumber = (value: unknown): value is number => typeof value === 'number';\n\nexport const isString = (value: unknown): value is string => typeof value === 'string';\n\nexport const isBoolean = (value: unknown): value is boolean => typeof value === 'boolean';\n\nexport const isFunction = (value: unknown): boolean => typeof value === 'function';\n\nexport function getCssUnitWithDefault(value?: string | number, defaultUnit = 'px') {\n  if (!value)\n    return value;\n\n  const stringValue = isNumber(value) ? String(value) : value;\n\n  const num = Number.parseFloat(stringValue);\n  const unitMatch = stringValue.match(/[%a-z]+$/i);\n  const unit = unitMatch ? unitMatch[0] : defaultUnit;\n\n  return Number.isNaN(num) ? value : num + unit;\n}\n\n/**\n * Checks if the editor has a specific extension method with the given name.\n *\n * @param {Editor} editor - An instance of the editor.\n * @param {string} name - The name of the extension method.\n * @returns {boolean} - Returns true if the specified extension method is present, otherwise returns false.\n */\nexport function hasExtension(editor: Editor, name: string): boolean {\n  if (!editor) {\n    return false;\n  }\n\n  // Retrieve the extension manager of the editor, defaulting to an empty array if it doesn't exist\n  const { extensions = [] } = editor?.extensionManager ?? {};\n\n  // Check if the extension method with the specified name is present in the extension manager\n  const find = extensions.find(i => i.name === name);\n\n  // Return false if the extension method with the specified name is not found, otherwise return true\n  if (!find) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Normalizes an array of strings or objects to an array of objects with 'value' and 'name' properties.\n */\nexport function ensureNameValueOptions(arr: (string | NameValueOption)[]) {\n  return arr.map((item) => {\n    if (isString(item)) {\n      return { value: item, name: item };\n    }\n    return item;\n  });\n}\n","import * as React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { type VariantProps, cva } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst buttonVariants = cva(\n  'richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50',\n  {\n    variants: {\n      variant: {\n        default: '!richtext-bg-primary !richtext-text-primary-foreground hover:!richtext-bg-primary/90',\n        destructive:\n          'richtext-bg-destructive richtext-text-destructive-foreground hover:richtext-bg-destructive/90',\n        outline:\n          'richtext-border richtext-border-input richtext-bg-background hover:richtext-bg-accent hover:richtext-text-accent-foreground',\n        secondary:\n          'richtext-bg-secondary richtext-text-secondary-foreground hover:richtext-bg-secondary/80',\n        ghost: 'hover:richtext-bg-accent hover:richtext-text-accent-foreground',\n        link: 'richtext-text-primary richtext-underline-offset-4 hover:richtext-underline',\n      },\n      size: {\n        default: 'richtext-h-10 richtext-px-4 richtext-py-2',\n        sm: 'richtext-h-9 richtext-rounded-md richtext-px-3',\n        lg: 'richtext-h-11 richtext-rounded-md richtext-px-8',\n        icon: 'richtext-h-10 richtext-w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n  VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n","'use client';\n\nimport * as React from 'react';\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      'richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none focus:richtext-bg-accent data-[state=open]:richtext-bg-accent',\n      inset && 'richtext-pl-8',\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"richtext-ml-auto richtext-h-4 richtext-w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n));\nDropdownMenuSubTrigger.displayName\n  = DropdownMenuPrimitive.SubTrigger.displayName;\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      'richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-lg data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName\n  = DropdownMenuPrimitive.SubContent.displayName;\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        'richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-md data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n        className,\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n));\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      'richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50',\n      inset && 'richtext-pl-8',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      'richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50',\n      className,\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"richtext-h-4 richtext-w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n));\nDropdownMenuCheckboxItem.displayName\n  = DropdownMenuPrimitive.CheckboxItem.displayName;\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      'richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50',\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"richtext-h-2 richtext-w-2 richtext-fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n));\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      'richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-font-semibold',\n      inset && 'richtext-pl-8',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn('richtext--mx-1 richtext-my-1 richtext-h-px richtext-bg-muted', className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span\n      className={cn('richtext-ml-auto richtext-text-xs richtext-tracking-widest richtext-opacity-60', className)}\n      {...props}\n    />\n  );\n}\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut';\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n};\n","import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'richtext-flex richtext-h-10 richtext-w-full richtext-rounded-md !richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background file:richtext-border-0 file:richtext-bg-transparent file:richtext-text-sm file:richtext-font-medium placeholder:richtext-text-muted-foreground focus-visible:richtext-outline-none  disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = 'Input';\n\nexport { Input };\n","'use client';\n\nimport * as React from 'react';\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { type VariantProps, cva } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst labelVariants = cva(\n  'richtext-text-sm richtext-font-medium richtext-leading-none peer-disabled:richtext-cursor-not-allowed peer-disabled:richtext-opacity-70',\n);\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n  VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n","'use client';\n\nimport * as React from 'react';\nimport * as PopoverPrimitive from '@radix-ui/react-popover';\n\nimport { cn } from '@/lib/utils';\n\nconst Popover = PopoverPrimitive.Root;\n\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = 'center', sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        'richtext-z-50 richtext-w-72 richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-4 richtext-text-popover-foreground richtext-shadow-md richtext-outline-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n        className,\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n));\nPopoverContent.displayName = PopoverPrimitive.Content.displayName;\n\nexport { Popover, PopoverTrigger, PopoverContent };\n","'use client';\n\nimport * as React from 'react';\nimport * as SeparatorPrimitive from '@radix-ui/react-separator';\n\nimport { cn } from '@/lib/utils';\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = 'horizontal', decorative = true, ...props },\n    ref,\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        'richtext-shrink-0 richtext-bg-border',\n        orientation === 'horizontal' ? 'richtext-h-[1px] richtext-w-full' : 'richtext-h-full richtext-w-[1px]',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSeparator.displayName = SeparatorPrimitive.Root.displayName;\n\nexport { Separator };\n","'use client';\n\nimport * as React from 'react';\nimport * as SwitchPrimitives from '@radix-ui/react-switch';\n\nimport { cn } from '@/lib/utils';\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      'richtext-peer richtext-inline-flex richtext-h-6 richtext-w-11 richtext-shrink-0 richtext-cursor-pointer richtext-items-center richtext-rounded-full richtext-border-2 richtext-border-transparent richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 focus-visible:richtext-ring-offset-background disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50 data-[state=checked]:richtext-bg-primary data-[state=unchecked]:richtext-bg-input',\n      className,\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        'richtext-pointer-events-none richtext-block richtext-h-5 richtext-w-5 richtext-rounded-full richtext-bg-background richtext-shadow-lg richtext-ring-0 richtext-transition-transform data-[state=checked]:richtext-translate-x-5 data-[state=unchecked]:richtext-translate-x-0',\n      )}\n    />\n  </SwitchPrimitives.Root>\n));\nSwitch.displayName = SwitchPrimitives.Root.displayName;\n\nexport { Switch };\n","'use client';\n\nimport * as React from 'react';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\n\nimport { cn } from '@/lib/utils';\n\nconst Tabs = TabsPrimitive.Root;\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      'richtext-inline-flex richtext-h-10 richtext-items-center richtext-justify-center richtext-rounded-md richtext-bg-muted richtext-p-1 richtext-text-muted-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsList.displayName = TabsPrimitive.List.displayName;\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-sm richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-all focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=active]:richtext-bg-background data-[state=active]:richtext-text-foreground data-[state=active]:richtext-shadow-sm',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      'richtext-mt-2 richtext-ring-offset-background focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n","'use client';\n\nimport * as React from 'react';\nimport * as ToastPrimitives from '@radix-ui/react-toast';\nimport { type VariantProps, cva } from 'class-variance-authority';\nimport { X } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst ToastProvider = ToastPrimitives.Provider;\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      'richtext-fixed richtext-top-0 richtext-z-[100] richtext-flex richtext-max-h-screen richtext-w-full richtext-flex-col-reverse richtext-p-4 sm:richtext-bottom-0 sm:richtext-right-0 sm:richtext-top-auto sm:richtext-flex-col md:richtext-max-w-[420px]',\n      className,\n    )}\n    {...props}\n  />\n));\nToastViewport.displayName = ToastPrimitives.Viewport.displayName;\n\nconst toastVariants = cva(\n  'richtext-group richtext-pointer-events-auto richtext-relative richtext-flex richtext-w-full richtext-items-center richtext-justify-between richtext-space-x-4 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-p-6 richtext-pr-8 richtext-shadow-lg richtext-transition-all data-[swipe=cancel]:richtext-translate-x-0 data-[swipe=end]:richtext-translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:richtext-translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:richtext-transition-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[swipe=end]:richtext-animate-out data-[state=closed]:richtext-fade-out-80 data-[state=closed]:richtext-slide-out-to-right-full data-[state=open]:richtext-slide-in-from-top-full data-[state=open]:sm:richtext-slide-in-from-bottom-full',\n  {\n    variants: {\n      variant: {\n        default: 'richtext-border richtext-bg-background richtext-text-foreground',\n        destructive:\n          'richtext-destructive richtext-group richtext-border-destructive richtext-bg-destructive richtext-text-destructive-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n);\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n  VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  );\n});\nToast.displayName = ToastPrimitives.Root.displayName;\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      'richtext-inline-flex richtext-h-8 richtext-shrink-0 richtext-items-center richtext-justify-center richtext-rounded-md !richtext-border richtext-bg-transparent richtext-px-3 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-secondary focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 group-[.destructive]:richtext-border-muted/40 group-[.destructive]:hover:richtext-border-destructive/30 group-[.destructive]:hover:richtext-bg-destructive group-[.destructive]:hover:richtext-text-destructive-foreground group-[.destructive]:focus:richtext-ring-destructive',\n      className,\n    )}\n    {...props}\n  />\n));\nToastAction.displayName = ToastPrimitives.Action.displayName;\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      'richtext-absolute richtext-right-2 richtext-top-2 richtext-rounded-md richtext-p-1 richtext-text-foreground/50 richtext-opacity-0 richtext-transition-opacity hover:richtext-text-foreground focus:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 group-hover:richtext-opacity-100 group-[.destructive]:richtext-text-red-300 group-[.destructive]:hover:richtext-text-red-50 group-[.destructive]:focus:richtext-ring-red-400 group-[.destructive]:focus:richtext-ring-offset-red-600',\n      className,\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"richtext-h-4 richtext-w-4\" />\n  </ToastPrimitives.Close>\n));\nToastClose.displayName = ToastPrimitives.Close.displayName;\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn('richtext-text-sm richtext-font-semibold', className)}\n    {...props}\n  />\n));\nToastTitle.displayName = ToastPrimitives.Title.displayName;\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn('richtext-text-sm richtext-opacity-90', className)}\n    {...props}\n  />\n));\nToastDescription.displayName = ToastPrimitives.Description.displayName;\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>;\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n};\n","'use client';\n\nimport * as React from 'react';\nimport * as TogglePrimitive from '@radix-ui/react-toggle';\nimport { type VariantProps, cva } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst toggleVariants = cva(\n  'richtext-inline-flex richtext-items-center richtext-justify-center richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-muted hover:richtext-text-muted-foreground focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=on]:richtext-bg-accent data-[state=on]:richtext-text-accent-foreground',\n  {\n    variants: {\n      variant: {\n        default: 'richtext-bg-transparent',\n        outline:\n          'richtext-border richtext-border-input richtext-bg-transparent hover:richtext-bg-accent hover:richtext-text-accent-foreground',\n      },\n      size: {\n        default: 'richtext-h-10 richtext-px-3',\n        sm: 'richtext-h-9 richtext-px-2',\n        lg: 'richtext-h-11 richtext-px-5',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n  VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","'use client';\n\nimport * as React from 'react';\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip';\n\nimport { cn } from '@/lib/utils';\n\nconst TooltipProvider = TooltipPrimitive.Provider;\n\nconst Tooltip = TooltipPrimitive.Root;\n\nconst TooltipTrigger = TooltipPrimitive.Trigger;\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      'richtext-z-50 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-text-popover-foreground richtext-shadow-md richtext-animate-in richtext-fade-in-0 richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTooltipContent.displayName = TooltipPrimitive.Content.displayName;\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n","/* eslint-disable unused-imports/no-unused-vars */\n'use client';\n\n// Inspired by react-hot-toast library\nimport * as React from 'react';\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from '@/components/ui/toast';\n\nconst TOAST_LIMIT = 1;\nconst TOAST_REMOVE_DELAY = 1000000;\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const;\n\nlet count = 0;\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER;\n  return count.toString();\n}\n\ntype ActionType = typeof actionTypes;\n\ntype Action =\n  | {\n    type: ActionType['ADD_TOAST']\n    toast: ToasterToast\n  }\n  | {\n    type: ActionType['UPDATE_TOAST']\n    toast: Partial<ToasterToast>\n  }\n  | {\n    type: ActionType['DISMISS_TOAST']\n    toastId?: ToasterToast['id']\n  }\n  | {\n    type: ActionType['REMOVE_TOAST']\n    toastId?: ToasterToast['id']\n  };\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n\nfunction addToRemoveQueue(toastId: string) {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId,\n    });\n  }, TOAST_REMOVE_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n}\n\nexport function reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map(t =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      };\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action;\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map(t =>\n          t.id === toastId || toastId === undefined\n            ? {\n              ...t,\n              open: false,\n            }\n            : t,\n        ),\n      };\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter(t => t.id !== action.toastId),\n      };\n  }\n}\n\nconst listeners: Array<(state: State) => void> = [];\n\nlet memoryState: State = { toasts: [] };\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach((listener) => {\n    listener(memoryState);\n  });\n}\n\ntype Toast = Omit<ToasterToast, 'id'>;\n\nfunction toast({ ...props }: Toast) {\n  const id = genId();\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    });\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id });\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open)\n          dismiss();\n      },\n    },\n  });\n\n  return {\n    id,\n    dismiss,\n    update,\n  };\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState);\n\n  React.useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  };\n}\n\nexport { useToast, toast };\n","'use client';\n\nimport * as React from 'react';\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox';\nimport { Check } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      '!richtext-peer !richtext-h-4 !richtext-w-4 !richtext-p-0 !richtext-shrink-0 !richtext-rounded-sm !richtext-border !richtext-border-primary !richtext-ring-offset-background focus-visible:!richtext-outline-none focus-visible:!richtext-ring-2 focus-visible:!richtext-ring-ring focus-visible:!richtext-ring-offset-2 disabled:!richtext-cursor-not-allowed disabled:!richtext-opacity-50 data-[state=checked]:!richtext-bg-primary data-[state=checked]:!richtext-text-primary-foreground',\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn('!richtext-flex !richtext-p-0 !richtext-items-center !richtext-justify-center !richtext-text-current')}\n    >\n      <Check className=\"!richtext-h-4 !richtext-w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\n\nexport { Checkbox };\n","import type { SVGProps } from 'react';\n\nexport function AspectRatio(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M19 12h-2v3h-3v2h5zM7 9h3V7H5v5h2zm14-6H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H3V5h18z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function BlockquoteLeft(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M6 15h15m0 4H6m9-8h6m0-4h-6M9 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2M3 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2\"\n      >\n      </path>\n    </svg>\n  );\n}\n","function DeleteColumn() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      className=\"richtext-w-4 richtext-h-4\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n        d=\"M5.5 3c1.404 0 2.107 0 2.611.38c.219.164.406.375.552.62C9 4.568 9 5.358 9 6.938v10.125c0 1.58 0 2.37-.337 2.937a2.1 2.1 0 0 1-.552.621c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C2 19.432 2 18.642 2 17.062V6.938c0-1.58 0-2.37.337-2.938a2.1 2.1 0 0 1 .552-.62C3.393 3 4.096 3 5.5 3M20 11.938v5.124c0 1.58 0 2.37-.337 2.938a2.1 2.1 0 0 1-.552.62c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C13 19.433 13 18.642 13 17.063V6.938c0-1.58 0-2.37.337-2.938M22 9l-6-6m6 0l-6 6\"\n        color=\"currentColor\"\n      />\n    </svg>\n  );\n}\n\nexport { DeleteColumn };\n","function DeleteRow() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      className=\"richtext-w-4 richtext-h-4\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n        d=\"M21 18.5c0 1.404 0 2.107-.38 2.611a2.1 2.1 0 0 1-.62.552c-.567.337-1.358.337-2.937.337H6.938c-1.58 0-2.37 0-2.938-.337a2.1 2.1 0 0 1-.62-.552C3 20.607 3 19.904 3 18.5s0-2.107.38-2.611c.163-.218.374-.406.62-.552C4.567 15 5.357 15 6.938 15h10.125c1.58 0 2.37 0 2.937.337c.246.146.457.334.62.552c.38.504.38 1.207.38 2.611M12.063 4H6.937C5.358 4 4.568 4 4 4.337a2.1 2.1 0 0 0-.62.552C3 5.393 3 6.096 3 7.5s0 2.107.38 2.611c.163.218.374.406.62.552C4.567 11 5.357 11 6.938 11h10.125c1.58 0 2.37 0 2.937-.337M21 8l-6-6m6 0l-6 6\"\n        color=\"currentColor\"\n      />\n    </svg>\n  );\n}\n\nexport { DeleteRow };\n","import type { SVGProps } from 'react';\n\nexport function FileWordOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import React from 'react';\nimport { icons } from '@/components';\n\nexport interface IconComponentProps {\n  name: string\n  className?: string\n  onClick?: React.MouseEventHandler<SVGElement>\n}\n\nfunction IconComponent(props: IconComponentProps) {\n  const Icon = icons[props.name];\n\n  return Icon ? <Icon onClick={props?.onClick} className={`richtext-w-4 richtext-h-4 ${props?.className || ''}`} /> : null;\n}\n\nexport { IconComponent };\n","import type { SVGProps } from 'react';\n\nexport function FormatLineHeight(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M21 22H3v-2h18zm0-18H3V2h18zm-11 9.7h4l-2-5.4zM11.2 6h1.7l4.7 12h-2l-.9-2.6H9.4L8.5 18h-2z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function MenuDown(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 48 48\"\n      {...props}\n    >\n      <path\n        fill=\"currentColor\"\n        stroke=\"currentColor\"\n        strokeLinejoin=\"round\"\n        strokeWidth={4}\n        d=\"M36 19L24 31L12 19z\"\n      />\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function SizeL(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path fill=\"currentColor\" d=\"M9 7v10h6v-2h-4V7z\"></path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function SizeM(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M9 7c-1.1 0-2 .9-2 2v8h2V9h2v7h2V9h2v8h2V9a2 2 0 0 0-2-2z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function SizeS(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M11 7c-1.1 0-2 .9-2 2v2a2 2 0 0 0 2 2h2v2H9v2h4c1.11 0 2-.89 2-2v-2a2 2 0 0 0-2-2h-2V9h4V7z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","export function ColumnAddLeft() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m-9 8h4m-2-2v4\"></path>\n    </svg>\n  );\n}\n","export function ColumnAddRight() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m9 8h4m-2-2v4\"></path>\n    </svg>\n  );\n}\n","export function Direction() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 21v-4m0-4V9m0-4V3m-2 18h4M8 5v4h11l2-2l-2-2zm6 8v4H6l-2-2l2-2z\"></path>\n    </svg>\n  );\n}\n","export function Excalidraw() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"currentColor\" d=\"M23.943 19.806a.2.2 0 0 0-.168-.034c-1.26-1.855-2.873-3.61-4.419-5.315l-.252-.284c-.001-.073-.067-.12-.134-.15l-.084-.084c-.05-.1-.169-.167-.286-.1c-.47.234-.907.585-1.327.919c-.554.434-1.109.87-1.63 1.354a5 5 0 0 0-.588.618c-.084.117-.017.217.084.267c-.37.368-.74.736-1.109 1.12a.2.2 0 0 0-.05.134c0 .05.033.1.067.117l.655.502v.016c.924.92 2.554 2.173 4.285 3.527c.251.201.52.402.773.602c.117.134.234.285.335.418c.05.066.169.084.236.033c.033.034.084.067.118.1a.24.24 0 0 0 .1.034a.15.15 0 0 0 .135-.066a.24.24 0 0 0 .033-.1c.017 0 .017.016.034.016a.2.2 0 0 0 .134-.05l3.058-3.327c.12-.116.014-.267 0-.267m-7.628-.134l-1.546-1.17l-.15-.1c-.035-.017-.068-.05-.102-.067l-.117-.1c.66-.66 1.33-1.308 2-1.956c-.488.484-1.463 1.906-1.261 2.373c.002 0 .018.042.067.084zm4.1 3.126l-1.277-.97a27 27 0 0 0-1.58-1.504c.69.518 1.277.97 1.361 1.053c.673.585.638.485 1.093.87l.554.4c-.074.103-.151.148-.151.151m.336.25l-.034-.016a1 1 0 0 0 .152-.117zM.588 3.476c.033.217.084.435.117.636c.201 1.103.403 2.106.772 2.858l.152.568c.05.217.134.485.219.552a67 67 0 0 0 3.578 2.942a.18.18 0 0 0 .219 0s0 .016.016.016a.15.15 0 0 0 .118.05a.2.2 0 0 0 .134-.05c1.798-1.989 3.142-3.627 4.1-4.998c.068-.066.084-.167.084-.25c.067-.067.118-.151.185-.201c.067-.067.067-.184 0-.235l-.017-.016c0-.033-.017-.084-.05-.1c-.42-.401-.722-.685-1.042-.986a94 94 0 0 1-2.352-2.273c-.017-.017-.034-.034-.067-.034c-.336-.117-1.025-.234-1.882-.385c-1.277-.216-3.008-.517-4.57-.986c0 0-.101 0-.118.017l-.05.05C.05.714.022.707 0 .718c.017.1.017.167.05.284c0 .033.068.301.068.334zm7.19 4.78l-.033.034a.036.036 0 0 1 .033-.034M6.553 2.238c.101.1.521.502.622.585c-.437-.2-1.529-.702-2.034-.869c.505.1 1.194.201 1.412.284M.79 1.403c.252.434.454 1.939.655 3.41c-.118-.469-.201-.936-.302-1.372C.992 2.673.84 1.988.638 1.386c.124 0 .152.021.152.017m-.286-.369c0-.016 0-.033-.017-.033c.085 0 .135.017.202.05c0 .006-.145-.017-.185-.017m23.17-.217c.017-.066-.336-.367-.219-.384c.253-.017.253-.401 0-.401c-.335.017-.688.1-1.008.15c-.587.117-1.192.234-1.78.367a80 80 0 0 0-3.949.937c-.403.117-.857.2-1.243.401c-.135.067-.118.2-.05.284c-.034.017-.051.017-.085.034c-.117.017-.218.034-.335.05c-.102.017-.152.1-.135.2c0 .017.017.05.017.067c-.706.936-1.496 1.923-2.353 2.976c-.84.969-1.73 1.989-2.62 3.042c-2.84 3.31-6.05 7.07-9.594 10.38a.16.16 0 0 0 0 .234c.016.016.033.033.05.033c-.05.05-.101.085-.152.134q-.05.05-.05.1a.4.4 0 0 0-.067.084c-.067.067-.067.184.017.234c.067.066.185.066.235-.017c.017-.017.017-.033.033-.033a.265.265 0 0 1 .37 0c.202.217.404.435.588.618l-.42-.35c-.067-.067-.184-.05-.234.016c-.068.066-.051.184.016.234l4.469 3.727c.034.034.067.034.118.034a.15.15 0 0 0 .117-.05l.101-.1c.017.016.05.016.067.016c.05 0 .084-.016.118-.05c6.049-6.05 10.922-10.614 16.5-14.693c.05-.033.067-.1.067-.15c.067 0 .118-.05.15-.117c1.026-3.125 1.228-5.9 1.295-7.27c0-.059.016-.038.016-.068c.017-.033.017-.05.017-.05a.98.98 0 0 0-.067-.619m-10.82 4.915c.268-.301.537-.619.806-.903c-1.73 2.273-4.603 5.767-8.67 9.929c2.773-3.059 5.562-6.218 7.864-9.026M5.14 23.466c-.016-.017-.016-.017 0-.017zm2.504-2.156c.135-.15.27-.284.42-.434c0 0 0 .016.017.016c-.224.198-.433.418-.437.418m.69-.668c.099-.1.14-.173.284-.318c.992-1.02 2.017-2.04 3.059-3.076l.016-.016c.252-.2.555-.418.824-.619a228 228 0 0 0-4.184 4.029M14.852 3.91c-.554.719-1.176 1.671-1.697 2.423c-1.646 2.374-6.94 8.174-7.057 8.274a1190 1190 0 0 1-4.839 4.597l-.1.1c-.085-.1-.085-.25.016-.334C8.652 11.966 13.19 6.133 15.021 3.576c-.05.116-.084.216-.168.334zm2.906 3.427c-.671-.386-.99-.987-.806-1.572l.05-.2a.8.8 0 0 1 .085-.167a1.9 1.9 0 0 1 .756-.703c.016 0 .033 0 .05-.016c-.017-.034-.017-.084-.017-.134c.017-.1.085-.167.202-.167c.202 0 .824.184 1.059.384c.067.05.134.117.202.184c.084.1.218.268.285.401c.034.017.067.184.118.268c.033.134.067.284.05.418c-.017.016 0 .116-.017.116a1.6 1.6 0 0 1-.218.619c-.03.03.006.012-.05.067a1.2 1.2 0 0 1-.32.334a1.49 1.49 0 0 1-1.26.234a2 2 0 0 0-.169-.066m4.37 1.403c0 .017-.017.05 0 .067c-.034 0-.05.017-.085.034a110 110 0 0 0-3.915 3.025c1.11-.986 2.218-1.989 3.378-2.975c.336-.301.571-.686.638-1.12l.168-1.003v-.033c.085-.201.404-.118.353.1c-.004-.001-.173.795-.537 1.905\"></path>\n    </svg>\n  );\n}\n","export function ExportPdf() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\">\n      <path fill=\"currentColor\" d=\"M30 18v-2h-6v10h2v-4h3v-2h-3v-2zm-11 8h-4V16h4a3.003 3.003 0 0 1 3 3v4a3.003 3.003 0 0 1-3 3m-2-2h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2zm-6-8H6v10h2v-3h3a2.003 2.003 0 0 0 2-2v-3a2 2 0 0 0-2-2m-3 5v-3h3l.001 3z\"></path>\n      <path fill=\"currentColor\" d=\"M22 14v-4a.91.91 0 0 0-.3-.7l-7-7A.9.9 0 0 0 14 2H4a2.006 2.006 0 0 0-2 2v24a2 2 0 0 0 2 2h16v-2H4V4h8v6a2.006 2.006 0 0 0 2 2h6v2Zm-8-4V4.4l5.6 5.6Z\"></path>\n    </svg>\n  );\n}\n","import React from 'react';\n\nfunction ExportWord() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"1em\"\n      height=\"1em\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M679.253 402.364 618.77 561.015l-60.348-158.651a30.04 30.04 0 0 0-30.447-18.637 29.76 29.76 0 0 0-30.447 18.637l-60.416 158.651-60.416-158.651a30.515 30.515 0 0 0-38.843-17.272 28.945 28.945 0 0 0-17.954 37.547l88.815 233.267c4.369 11.469 15.7 19.115 28.398 19.115a30.31 30.31 0 0 0 28.468-19.115l62.395-163.908 62.396 163.84c4.437 11.605 15.701 19.183 28.4 19.183a30.31 30.31 0 0 0 28.466-19.115l88.747-233.267a28.945 28.945 0 0 0-17.886-37.547 30.447 30.447 0 0 0-38.912 17.272zm219.478 395.605-51.883-29.218c-28.672-16.18-52.224-3.072-52.224 29.082v.273H643.209a29.833 29.833 0 0 0-30.31 29.354c0 16.18 13.584 29.218 30.31 29.218h151.825c1.092 30.516 24.03 43.077 52.224 27.648l51.063-27.989c29.013-15.906 29.15-42.189.41-58.368\"\n      />\n      <path\n        fill=\"currentColor\"\n        d=\"m810.667 913.135-.478.068H201.796c-19.865 0-36.727-11.673-36.727-25.6v-618.36h154.965c51.268 0 92.911-39.39 92.911-87.858v-87.86H810.19c19.797 0 36.522 11.742 36.522 25.669V739.26h61.987V119.262c0-46.421-44.169-84.241-98.51-84.241H328.364l-225.28 194.56v658.09c0 46.285 44.236 84.105 98.713 84.105H810.19c43.759 0 80.554-24.713 93.32-58.573h-92.842zM350.89 94.89v86.562c0 16.11-13.858 29.286-30.925 29.286H216.815L350.959 94.891z\"\n      />\n    </svg>\n  );\n}\n\nexport default ExportWord;\n","export function GifIcon() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <g fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" color=\"currentColor\">\n        <path d=\"M14.86 22h-4.312c-3.291 0-4.937 0-6.08-.798a4.2 4.2 0 0 1-.863-.805c-.855-1.066-.855-2.6-.855-5.67v-2.545c0-2.963 0-4.445.473-5.628c.761-1.903 2.37-3.403 4.41-4.113C8.9 2 10.49 2 13.667 2c1.816 0 2.723 0 3.448.252c1.166.406 2.085 1.263 2.52 2.35c.27.676.27 1.523.27 3.216V10\"></path>\n        <path d=\"M2.75 12c0-1.84 1.506-3.333 3.364-3.333c.672 0 1.464.116 2.117-.057a1.67 1.67 0 0 0 1.19-1.179c.174-.647.057-1.432.057-2.098C9.478 3.493 10.984 2 12.84 2m.002 16h2.523m-4.949-4.15c-.126-.8-.281-.801-1.61-.85h-1.01c-.557 0-1.009.448-1.009 1v3c0 .552.452 1 1.01 1h1.816c.39 0 .803-.313.803-.7v-1.1c0-.11-.113-.304-.224-.304H9.068M12.842 13h1.261m0 0h1.262m-1.262 0v4.875M21.251 13h-2.523c-.557 0-1.009.448-1.009 1v1.5m0 0V18m0-2.5h2.523\"></path>\n      </g>\n    </svg>\n  );\n}\n","export function LeftToRight() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 20 20\">\n      <path fill=\"currentColor\" d=\"M6.5 3a.75.75 0 0 1 .697.471l3 7.5a.75.75 0 0 1-1.393.557L7.992 9.5H5.008l-.811 2.028a.75.75 0 0 1-1.393-.556l3-7.5A.75.75 0 0 1 6.5 3m0 2.77L5.608 8h1.784zm8.28-1.55a.75.75 0 1 0-1.06 1.06l.72.72h-3.69a.75.75 0 0 0 0 1.5h3.69l-.72.72a.75.75 0 0 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06zm0 7.5a.75.75 0 1 0-1.06 1.06l.72.72H3.75a.75.75 0 0 0 0 1.5h10.69l-.72.72a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06z\"></path>\n    </svg>\n  );\n}\n","export function Mermaid() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 48 48\">\n      <g fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\">\n        <circle cx=\"10\" cy=\"24\" r=\"4\"></circle>\n        <circle cx=\"38\" cy=\"10\" r=\"4\"></circle>\n        <circle cx=\"38\" cy=\"24\" r=\"4\"></circle>\n        <circle cx=\"38\" cy=\"38\" r=\"4\"></circle>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M34 38H22V10h12M14 24h20\"></path>\n      </g>\n    </svg>\n  );\n}\n","export function RightToLeft() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 20 20\">\n      <path fill=\"currentColor\" d=\"M13.5 3a.75.75 0 0 0-.697.471l-3 7.5a.75.75 0 0 0 1.393.557l.812-2.028h2.984l.811 2.028a.75.75 0 0 0 1.393-.556l-3-7.5A.75.75 0 0 0 13.5 3m0 2.77L14.392 8h-1.784zM5.22 4.22a.75.75 0 0 1 1.06 1.06L5.56 6h3.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06zm0 7.5a.75.75 0 0 1 1.06 1.06l-.72.72h10.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 1 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06z\"></path>\n    </svg>\n  );\n}\n","export function Twitter() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"m3 21l7.548-7.548M21 3l-7.548 7.548m0 0L8 3H3l7.548 10.452m2.904-2.904L21 21h-5l-5.452-7.548\" color=\"currentColor\"></path>\n    </svg>\n  );\n}\n","import React from 'react';\n\nfunction ImportWord() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z\"\n      />\n    </svg>\n\n  );\n}\n\nexport default ImportWord;\n","import {\n  TextAlignCenterIcon,\n  TextAlignJustifyIcon,\n  TextAlignLeftIcon,\n  TextAlignRightIcon,\n} from '@radix-ui/react-icons';\nimport {\n  BetweenHorizonalEnd,\n  BetweenHorizonalStart,\n  BetweenVerticalEnd,\n  BetweenVerticalStart,\n  Bold,\n  BookMarked,\n  ChevronDown,\n  ChevronUp,\n  ChevronsUpDown,\n  Clipboard,\n  Code,\n  CodeXml,\n  Columns2,\n  Columns3,\n  Columns4,\n  Copy,\n  CropIcon,\n  Eraser,\n  Eye,\n  FlipHorizontal,\n  FlipVertical,\n  Frame,\n  GripVertical,\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  ImageUp,\n  IndentDecrease,\n  IndentIncrease,\n  Italic,\n  Link,\n  List,\n  ListOrdered,\n  ListTodo,\n  LoaderCircle,\n  Maximize,\n  Minimize,\n  Minus,\n  PaintRoller,\n  PanelLeft,\n  PanelRight,\n  Paperclip,\n  Pencil,\n  Plus,\n  Quote,\n  Redo2,\n  Replace,\n  Settings,\n  Sigma,\n  SmilePlus,\n  SmilePlusIcon,\n  Sparkles,\n  Strikethrough,\n  Subscript,\n  Superscript,\n  Table,\n  TableCellsMerge,\n  TableCellsSplit,\n  Trash,\n  Trash2,\n  Type,\n  Underline,\n  Undo2,\n  Unlink,\n  Video,\n  ZoomIn,\n  ZoomOut,\n  PencilRuler\n} from 'lucide-react';\n\nimport {\n  AspectRatio,\n  BlockquoteLeft,\n  DeleteColumn,\n  DeleteRow,\n  FileWordOutline,\n  FormatLineHeight,\n  MenuDown,\n  SizeL,\n  SizeM,\n  SizeS,\n} from '@/components/icons';\nimport { ColumnAddLeft } from '@/components/icons/ColumnAddLeft';\nimport { ColumnAddRight } from '@/components/icons/ColumnAddRight';\nimport { Direction } from '@/components/icons/Direction';\nimport { Excalidraw } from '@/components/icons/Excalidraw';\nimport { ExportPdf } from '@/components/icons/ExportPdf';\nimport ExportWord from '@/components/icons/ExportWord';\nimport { GifIcon } from '@/components/icons/GIfIcon';\nimport { LeftToRight } from '@/components/icons/LeftToRight';\nimport { Mermaid } from '@/components/icons/Mermaid';\nimport { RightToLeft } from '@/components/icons/RightToLeft';\nimport { Twitter } from '@/components/icons/Twitter';\n\nimport ImportWord from './ImportWord';\n\nexport const icons = {\n  Bold,\n  LoaderCircle,\n  Italic,\n  Underline,\n  Quote,\n  TextQuote: BlockquoteLeft,\n  Strikethrough,\n  Minus,\n  Eraser,\n  PaintRoller,\n  Redo2,\n  Undo2,\n  AlignCenter: TextAlignCenterIcon,\n  AlignJustify: TextAlignJustifyIcon,\n  AlignLeft: TextAlignLeftIcon,\n  AlignRight: TextAlignRightIcon,\n  ChevronDown,\n  Subscript,\n  Superscript,\n  Code,\n  Code2: CodeXml,\n  Type,\n  IndentIncrease,\n  IndentDecrease,\n  List,\n  ListOrdered,\n  ListTodo,\n  Link,\n  ImageUp,\n  Video,\n  Maximize,\n  Minimize,\n  Table,\n  Sparkles,\n  Pencil,\n  Unlink,\n  BetweenHorizonalEnd,\n  BetweenHorizonalStart,\n  BetweenVerticalStart,\n  BetweenVerticalEnd,\n  TableCellsMerge,\n  TableCellsSplit,\n  Trash2,\n  Trash,\n  Replace,\n  ChevronsUpDown,\n  LineHeight: FormatLineHeight,\n  Word: FileWordOutline,\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  Columns2,\n  Columns3,\n  Columns4,\n  Plus,\n  Grip: GripVertical,\n  Copy,\n  Clipboard,\n  PanelLeft,\n  PanelRight,\n  Columns: Columns2,\n  Iframe: Frame,\n\n  MenuDown,\n  SizeS,\n  SizeM,\n  SizeL,\n  AspectRatio,\n\n  Emoji: SmilePlus,\n\n  DeleteColumn,\n  DeleteRow,\n  SearchAndReplace: Replace,\n  EmojiIcon: SmilePlusIcon,\n  KatexIcon: Sigma,\n  ExportPdf,\n  ExportWord,\n  ImportWord,\n  ColumnAddLeft,\n  ColumnAddRight,\n  BookMarked,\n  Excalidraw,\n  ZoomIn,\n  ZoomOut,\n  Settings,\n  Eye,\n\n  TextDirection: Direction,\n  LeftToRight,\n  RightToLeft,\n\n  Attachment: Paperclip,\n  GifIcon,\n  ChevronUp,\n  Crop: CropIcon,\n  Mermaid,\n  Twitter,\n  FlipX: FlipVertical,\n  FlipY: FlipHorizontal,\n  PencilRuler\n} as any;\n","import React, { useCallback, useState } from 'react';\n\nimport type { TooltipContentProps } from '@radix-ui/react-tooltip';\nimport { debounce } from 'lodash-es';\n\nimport { ActionButton, Button, ColorPicker } from '@/components';\nimport { IconComponent } from '@/components/icons';\nimport type { ButtonViewReturnComponentProps } from '@/types';\n\ninterface IPropsHighlightActionButton {\n  editor: any\n  tooltip?: string\n  disabled?: boolean\n  action?: ButtonViewReturnComponentProps['action']\n  isActive?: ButtonViewReturnComponentProps['isActive']\n  tooltipOptions?: TooltipContentProps\n  shortcutKeys?: string[]\n}\n\nfunction IconC({ fill }: any) {\n  return (\n    <svg\n      width=\"18px\"\n      height=\"18px\"\n      viewBox=\"0 0 256 256\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g id=\"icon/填充色\" stroke=\"none\" strokeWidth={1} fill=\"none\" fillRule=\"evenodd\">\n        <g id=\"icon/背景颜色\">\n          <g id=\"编组\" fill=\"currentColor\">\n            <g\n              transform=\"translate(119.502295, 137.878331) rotate(-135.000000) translate(-119.502295, -137.878331) translate(48.002295, 31.757731)\"\n              id=\"矩形\"\n            >\n              <path\n                d=\"M100.946943,60.8084699 L43.7469427,60.8084699 C37.2852111,60.8084699 32.0469427,66.0467383 32.0469427,72.5084699 L32.0469427,118.70847 C32.0469427,125.170201 37.2852111,130.40847 43.7469427,130.40847 L100.946943,130.40847 C107.408674,130.40847 112.646943,125.170201 112.646943,118.70847 L112.646943,72.5084699 C112.646943,66.0467383 107.408674,60.8084699 100.946943,60.8084699 Z M93.646,79.808 L93.646,111.408 L51.046,111.408 L51.046,79.808 L93.646,79.808 Z\"\n                fillRule=\"nonzero\"\n              />\n              <path\n                d=\"M87.9366521,16.90916 L87.9194966,68.2000001 C87.9183543,69.4147389 86.9334998,70.399264 85.7187607,70.4 L56.9423078,70.4 C55.7272813,70.4 54.7423078,69.4150264 54.7423078,68.2 L54.7423078,39.4621057 C54.7423078,37.2523513 55.5736632,35.1234748 57.0711706,33.4985176 L76.4832996,12.4342613 C78.9534987,9.75382857 83.1289108,9.5834005 85.8093436,12.0535996 C87.1658473,13.303709 87.9372691,15.0644715 87.9366521,16.90916 Z\"\n                fillRule=\"evenodd\"\n              />\n              <path\n                d=\"M131.3,111.241199 L11.7,111.241199 C5.23826843,111.241199 0,116.479467 0,122.941199 L0,200.541199 C0,207.002931 5.23826843,212.241199 11.7,212.241199 L131.3,212.241199 C137.761732,212.241199 143,207.002931 143,200.541199 L143,122.941199 C143,116.479467 137.761732,111.241199 131.3,111.241199 Z M124,130.241 L124,193.241 L19,193.241 L19,130.241 L124,130.241 Z\"\n                fillRule=\"nonzero\"\n              />\n            </g>\n          </g>\n          <path\n            d=\"M51,218 L205,218 C211.075132,218 216,222.924868 216,229 C216,235.075132 211.075132,240 205,240 L51,240 C44.9248678,240 40,235.075132 40,229 C40,222.924868 44.9248678,218 51,218 Z\"\n            id=\"矩形\"\n            fill={fill || '#FBDE28'}\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nfunction HighlightActionButton(props: IPropsHighlightActionButton) {\n  // const { action, isActive, disabled, icon, tooltip } = props as any;\n  const [selectedColor, setSelectedColor] = useState<any>(undefined);\n\n  function onChange(color: string | undefined) {\n    props.action?.(color);\n  }\n\n  function toggleColor() {\n    props.action?.(selectedColor);\n  }\n\n  const setSelectedColorDebounce = useCallback(\n    debounce((color: any) => {\n      setSelectedColor(color);\n    }, 350),\n    [],\n  );\n\n  return (\n    <div className=\"richtext-flex richtext-items-center richtext-h-[32px]\">\n      <ActionButton\n        tooltip={props?.tooltip}\n        disabled={props?.disabled}\n        action={toggleColor}\n        tooltipOptions={props?.tooltipOptions}\n        shortcutKeys={props?.shortcutKeys}\n      >\n        <span className=\"richtext-flex richtext-items-center richtext-justify-center richtext-text-sm\">\n          <IconC fill={selectedColor} />\n        </span>\n      </ActionButton>\n      <ColorPicker\n        selectedColor={selectedColor}\n        setSelectedColor={setSelectedColorDebounce}\n        onChange={onChange}\n        highlight\n        disabled={props?.disabled}\n      >\n        <Button variant=\"ghost\" size=\"icon\" className=\"!richtext-w-3 !richtext-h-[32px]\" disabled={props?.disabled}>\n          <IconComponent className=\"!richtext-w-3 !richtext-h-3 richtext-text-zinc-500\" name=\"MenuDown\" />\n        </Button>\n      </ColorPicker>\n    </div>\n  );\n}\n\nexport default HighlightActionButton;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useEffect, useState } from 'react';\n\nimport { Button, IconComponent, Input, Label, Switch } from '@/components';\nimport { useLocale } from '@/locales';\n\ninterface IPropsLinkEditBlock {\n  editor: any\n  onSetLink: (link: string, text?: string, openInNewTab?: boolean) => void\n}\n\nfunction LinkEditBlock(props: IPropsLinkEditBlock) {\n  const { t } = useLocale();\n\n  const [form, setForm] = useState({\n    text: '',\n    link: '',\n  });\n  const [openInNewTab, setOpenInNewTab] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (props?.editor) {\n      const { href: link, target } = props.editor?.getAttributes('link');\n\n      const { from, to } = props.editor.state.selection;\n      const text = props.editor.state.doc.textBetween(from, to, ' ');\n      setForm({\n        link,\n        text,\n      });\n      setOpenInNewTab(target === '_blank');\n    }\n  }, [props?.editor]);\n\n  function handleSubmit(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    props?.onSetLink(form.link, form.text, openInNewTab);\n  }\n\n  return (\n    <div className=\"border-neutral-200 richtext-rounded-lg !richtext-border richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black\">\n      <form className=\"richtext-flex richtext-flex-col richtext-gap-2\"\n        onSubmit={handleSubmit}\n      >\n        <Label className=\"mb-[6px]\">\n          {t('editor.link.dialog.text')}\n        </Label>\n\n        <div className=\"richtext-mb-[10px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center\">\n            <Input\n              className=\"richtext-w-80\"\n              onChange={e => setForm({ ...form, text: e.target.value })}\n              placeholder=\"Text\"\n              required\n              type=\"text\"\n              value={form.text}\n            />\n          </div>\n        </div>\n\n        <Label className=\"mb-[6px]\">\n          {t('editor.link.dialog.link')}\n        </Label>\n\n        <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center\">\n            <Input\n              className=\"richtext-pl-10\"\n              onChange={e => setForm({ ...form, link: e.target.value })}\n              required\n              type=\"url\"\n              value={form.link}\n            />\n\n            <span className=\"richtext-absolute richtext-inset-y-0 richtext-start-0 richtext-flex richtext-items-center richtext-justify-center richtext-px-2\">\n              <IconComponent className=\"richtext-size-5 richtext-text-muted-foreground\"\n                name=\"Link\"\n              />\n            </span>\n          </div>\n        </div>\n\n        <div className=\"richtext-flex richtext-items-center richtext-space-x-2\">\n          <Label>\n            {t('editor.link.dialog.openInNewTab')}\n          </Label>\n\n          <Switch\n            checked={openInNewTab}\n            onCheckedChange={(e) => {\n              setOpenInNewTab(e);\n            }}\n          />\n        </div>\n\n        <Button className=\"richtext-mt-2 richtext-self-end\"\n          type=\"submit\"\n        >\n          {t('editor.link.dialog.button.apply')}\n        </Button>\n      </form>\n    </div>\n  );\n}\n\nexport default LinkEditBlock;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { findParentNode } from '@tiptap/core';\nimport { Node } from '@tiptap/pm/model';\nimport { type EditorState, TextSelection } from '@tiptap/pm/state';\n\nimport { Column, MultiColumn } from '@/extensions/MultiColumn';\n\nexport function createColumn(colType: any, index: any, colContent = null) {\n  if (colContent) {\n    return colType.createChecked({ index }, colContent);\n  }\n\n  return colType.createAndFill({ index });\n}\n\nexport function getColumnsNodeTypes(schema: any) {\n  if (schema.cached.columnsNodeTypes) {\n    return schema.cached.columnsNodeTypes;\n  }\n\n  const roles = {\n    columns: schema.nodes.columns,\n    column: schema.nodes.column,\n  };\n\n  schema.cached.columnsNodeTypes = roles;\n\n  return roles;\n}\n\nexport function createColumns(schema: any, colsCount: any, colContent = null) {\n  const types = getColumnsNodeTypes(schema);\n  const cols = [];\n\n  for (let index = 0; index < colsCount; index += 1) {\n    const col = createColumn(types.column, index, colContent);\n\n    if (col) {\n      // @ts-ignore\n      cols.push(col);\n    }\n  }\n\n  return types.columns.createChecked({ cols: colsCount }, cols);\n}\n\nexport function addOrDeleteCol({\n  state,\n  dispatch,\n  type,\n}: {\n  state: EditorState\n  dispatch: any\n  type: 'addBefore' | 'addAfter' | 'delete'\n}) {\n  const maybeColumns = findParentNode((node: Node) => node.type.name === MultiColumn.name)(state.selection);\n  const maybeColumn = findParentNode((node: Node) => node.type.name === Column.name)(state.selection);\n\n  if (dispatch && maybeColumns && maybeColumn) {\n    const cols = maybeColumns.node;\n    const colIndex = maybeColumn.node.attrs.index;\n    const colsJSON = cols.toJSON();\n\n    let nextIndex = colIndex;\n\n    if (type === 'delete') {\n      nextIndex = colIndex - 1;\n      colsJSON.content.splice(colIndex, 1);\n    } else {\n      nextIndex = type === 'addBefore' ? colIndex : colIndex + 1;\n      colsJSON.content.splice(nextIndex, 0, {\n        type: 'column',\n        attrs: {\n          index: colIndex,\n        },\n        content: [\n          {\n            type: 'paragraph',\n          },\n        ],\n      });\n    }\n\n    colsJSON.attrs.cols = colsJSON.content.length;\n\n    colsJSON.content.forEach((colJSON: any, index: any) => {\n      colJSON.attrs.index = index;\n    });\n\n    const nextCols = Node.fromJSON(state.schema, colsJSON);\n\n    let nextSelectPos = maybeColumns.pos;\n    nextCols.content.forEach((col, pos, index) => {\n      if (index < nextIndex) {\n        nextSelectPos += col.nodeSize;\n      }\n    });\n\n    const tr = state.tr.setTime(Date.now());\n\n    tr.replaceWith(maybeColumns.pos, maybeColumns.pos + maybeColumns.node.nodeSize, nextCols).setSelection(\n      TextSelection.near(tr.doc.resolve(nextSelectPos)),\n    );\n\n    dispatch(tr);\n  }\n\n  return true;\n}\n\nexport function gotoCol({ state, dispatch, type }: { state: EditorState, dispatch: any, type: 'before' | 'after' }) {\n  const maybeColumns = findParentNode((node: Node) => node.type.name === MultiColumn.name)(state.selection);\n  const maybeColumn = findParentNode((node: Node) => node.type.name === Column.name)(state.selection);\n\n  if (dispatch && maybeColumns && maybeColumn) {\n    const cols = maybeColumns.node;\n    const colIndex = maybeColumn.node.attrs.index;\n\n    let nextIndex = 0;\n\n    if (type === 'before') {\n      nextIndex = (colIndex - 1 + cols.attrs.cols) % cols.attrs.cols;\n    } else {\n      nextIndex = (colIndex + 1) % cols.attrs.cols;\n    }\n\n    let nextSelectPos = maybeColumns.pos;\n    cols.content.forEach((col, pos, index) => {\n      if (index < nextIndex) {\n        nextSelectPos += col.nodeSize;\n      }\n    });\n\n    const tr = state.tr.setTime(Date.now());\n\n    tr.setSelection(TextSelection.near(tr.doc.resolve(nextSelectPos)));\n    dispatch(tr);\n    return true;\n  }\n\n  return false;\n}\n","import { Node, mergeAttributes } from '@tiptap/core';\n\nimport { TextSelection } from '@tiptap/pm/state';\nimport { addOrDeleteCol, createColumns, gotoCol } from '@/utils/columns';\n\nexport const EXTENSION_PRIORITY_HIGHEST = 200;\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    columns: {\n      insertColumns: (attrs?: { cols: number }) => ReturnType\n      addColBefore: () => ReturnType\n      addColAfter: () => ReturnType\n      deleteCol: () => ReturnType\n    }\n  }\n}\n\nexport const MultiColumn = Node.create({\n  name: 'columns',\n  group: 'block',\n  defining: true,\n  isolating: true,\n  allowGapCursor: false,\n  content: 'column{1,}',\n  priority: EXTENSION_PRIORITY_HIGHEST,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {\n        class: 'columns',\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      cols: {\n        default: 2,\n        parseHTML: element => element.getAttribute('cols'),\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=grid]',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['div', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n\n  addCommands() {\n    return {\n      insertColumns:\n        attrs =>\n          ({ tr, dispatch, editor }) => {\n            const node = createColumns(editor.schema, (attrs && attrs.cols) || 3);\n\n            if (dispatch) {\n              const offset = tr.selection.anchor + 1;\n\n              tr.replaceSelectionWith(node)\n                .scrollIntoView()\n                .setSelection(TextSelection.near(tr.doc.resolve(offset)));\n            }\n\n            return true;\n          },\n      addColBefore:\n        () =>\n          ({ dispatch, state }) => {\n            return addOrDeleteCol({ dispatch, state, type: 'addBefore' });\n          },\n      addColAfter:\n        () =>\n          ({ dispatch, state }) => {\n            return addOrDeleteCol({ dispatch, state, type: 'addAfter' });\n          },\n      deleteCol:\n        () =>\n          ({ dispatch, state }) => {\n            return addOrDeleteCol({ dispatch, state, type: 'delete' });\n          },\n    };\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Alt-G': () => this.editor.commands.insertColumns(),\n      'Tab': () => {\n        return gotoCol({\n          state: this.editor.state,\n          dispatch: this.editor.view.dispatch,\n          type: 'after',\n        });\n      },\n      'Shift-Tab': () => {\n        return gotoCol({\n          state: this.editor.state,\n          dispatch: this.editor.view.dispatch,\n          type: 'before',\n        });\n      },\n    };\n  },\n});\n","import { Node, mergeAttributes } from '@tiptap/core';\n\nexport const Column = Node.create({\n  name: 'column',\n  content: 'block+',\n  isolating: true,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {\n        class: 'column',\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      index: {\n        default: 0,\n        parseHTML: element => element.getAttribute('index'),\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=column]',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['div', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n});\n","/* eslint-disable no-restricted-syntax */\nimport type { Command, Editor } from '@tiptap/core';\nimport { isList } from '@tiptap/core';\nimport type { Transaction } from '@tiptap/pm/state';\nimport { AllSelection, TextSelection } from '@tiptap/pm/state';\n\nexport const enum IndentProps {\n  max = 7,\n  min = 0,\n\n  more = 1,\n  less = -1,\n}\n\nexport function clamp(val: number, min: number, max: number): number {\n  if (val < min) {\n    return min;\n  }\n  if (val > max) {\n    return max;\n  }\n  return val;\n}\nfunction updateIndentLevel(\n  tr: Transaction,\n  delta: number,\n  types: string[],\n  editor: Editor,\n): Transaction {\n  const { doc, selection } = tr;\n\n  if (!doc || !selection) {\n    return tr;\n  }\n\n  if (!(selection instanceof TextSelection || selection instanceof AllSelection)) {\n    return tr;\n  }\n\n  const { from, to } = selection;\n\n  doc.nodesBetween(from, to, (node, pos) => {\n    const nodeType = node.type;\n\n    if (types.includes(nodeType.name)) {\n      tr = setNodeIndentMarkup(tr, pos, delta);\n      return false;\n    } else if (isList(node.type.name, editor.extensionManager.extensions)) {\n      return false;\n    }\n    return true;\n  });\n\n  return tr;\n}\n\nexport function setNodeIndentMarkup(tr: Transaction, pos: number, delta: number): Transaction {\n  if (!tr.doc) {\n    return tr;\n  }\n\n  const node = tr.doc.nodeAt(pos);\n  if (!node) {\n    return tr;\n  }\n\n  const minIndent = IndentProps.min;\n  const maxIndent = IndentProps.max;\n\n  const indent = clamp((node.attrs.indent || 0) + delta, minIndent, maxIndent);\n\n  if (indent === node.attrs.indent) {\n    return tr;\n  }\n\n  const nodeAttrs = {\n    ...node.attrs,\n    indent,\n  };\n\n  return tr.setNodeMarkup(pos, node.type, nodeAttrs, node.marks);\n}\n\nexport function createIndentCommand({ delta, types }: { delta: number, types: string[] }): Command {\n  return ({ state, dispatch, editor }) => {\n    const { selection } = state;\n    let { tr } = state;\n    tr = tr.setSelection(selection);\n    tr = updateIndentLevel(tr, delta, types, editor);\n\n    if (tr.docChanged) {\n      if (dispatch)\n        dispatch(tr);\n      return true;\n    }\n\n    return false;\n  };\n}\n","import { useStoreUploadImage } from '@/store/store';\nimport { dispatchEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nexport function useDialogImage() {\n  const [v] = useStoreUploadImage(store => store.value);\n\n  return v;\n}\n\nexport const actionDialogImage = {\n  setOpen: (id: any, value: boolean) => {\n    dispatchEvent(EVENTS.UPLOAD_IMAGE(id), value);\n  },\n};\n","'use client';\n\nimport * as React from 'react';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { X } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'richtext-fixed richtext-inset-0 richtext-z-50 richtext-bg-black/80 richtext- data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0',\n      className,\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'richtext-dialog-content richtext-fixed richtext-left-[50%] richtext-top-[50%] richtext-z-50 richtext-grid richtext-w-full richtext-max-w-lg richtext-translate-x-[-50%] richtext-translate-y-[-50%] richtext-gap-4 richtext-border richtext-bg-background richtext-p-6 richtext-shadow-lg richtext-duration-200 data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[state=closed]:richtext-slide-out-to-left-1/2 data-[state=closed]:richtext-slide-out-to-top-[48%] data-[state=open]:richtext-slide-in-from-left-1/2 data-[state=open]:richtext-slide-in-from-top-[48%] sm:richtext-rounded-lg',\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"richtext-absolute richtext-right-4 richtext-top-4 richtext-rounded-sm richtext-opacity-70 richtext-ring-offset-background richtext-transition-opacity hover:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none data-[state=open]:richtext-bg-accent data-[state=open]:richtext-text-muted-foreground\">\n        <X className=\"richtext-h-4 richtext-w-4\" />\n        <span className=\"richtext-sr-only\">\n          Close\n        </span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nfunction DialogHeader({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'richtext-flex richtext-flex-col richtext-space-y-1.5 richtext-text-center sm:richtext-text-left',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogHeader.displayName = 'DialogHeader';\n\nfunction DialogFooter({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'richtext-flex richtext-flex-col-reverse sm:richtext-flex-row sm:richtext-justify-end sm:richtext-space-x-2',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogFooter.displayName = 'DialogFooter';\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      'richtext-text-lg richtext-font-semibold richtext-leading-none richtext-tracking-tight',\n      className,\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('richtext-text-sm richtext-text-muted-foreground', className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n","/* eslint-disable unicorn/prefer-add-event-listener */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n/**\n * 获取文件名\n *\n * @example\n *   > extractFilename('https://gitlab.com/images/logo-full.png')\n *   < 'logo-full'\n *\n * @param {string} src The URL to extract filename from\n * @returns {string}\n */\nexport function extractFilename(src: any) {\n  return src.replace(/^.*\\/|\\..+$/g, '');\n}\n\n/**\n * extractFileExtension\n * @param {string} fileName The file name to extract extension from\n * @returns  {string}\n */\nexport function extractFileExtension(fileName: any) {\n  return fileName.split('.').pop();\n}\n\nexport function normalizeFileSize(size: any) {\n  if (size < 1024) {\n    return `${size} Byte`;\n  }\n  if (size < 1024 * 1024) {\n    return `${(size / 1024).toFixed(2)} KB`;\n  }\n  return `${(size / 1024 / 1024).toFixed(2)} MB`;\n}\n\nexport type FileType = 'image' | 'audio' | 'video' | 'pdf' | 'word' | 'excel' | 'ppt' | 'file';\n\nexport function normalizeFileType(fileType: any): FileType {\n  if (!fileType)\n    return 'file';\n\n  if (fileType === 'application/pdf')\n    return 'pdf';\n\n  if (fileType.startsWith('application/') && ['.document', 'word'].some(type => fileType.includes(type)))\n    return 'word';\n\n  if (fileType.startsWith('application/') && ['presentation'].some(type => fileType.includes(type)))\n    return 'excel';\n\n  if (fileType.startsWith('application/') && ['sheet'].some(type => fileType.includes(type)))\n    return 'ppt';\n\n  if (fileType.startsWith('image')) {\n    return 'image';\n  }\n\n  if (fileType.startsWith('audio')) {\n    return 'audio';\n  }\n\n  if (fileType.startsWith('video')) {\n    return 'video';\n  }\n\n  return 'file';\n}\n\nexport function readImageAsBase64(file: File): Promise<{ alt: string, src: string }> {\n  return new Promise((resolve) => {\n    const reader = new FileReader();\n    reader.addEventListener(\n      'load',\n      () => {\n        resolve({\n          alt: file.name,\n          src: reader.result as string,\n        });\n      },\n      false,\n    );\n    reader.readAsDataURL(file);\n  });\n}\n\nexport function getImageWidthHeight(url: string): Promise<{ width: number | string, height: number | string }> {\n  return new Promise((resolve) => {\n    const img = document.createElement('img');\n    img.addEventListener('load', () => {\n      resolve({ width: img.width, height: img.height });\n    });\n    img.onerror = () => {\n      resolve({ width: 'auto', height: 'auto' });\n    };\n    img.src = url;\n  });\n}\n\nexport const FILE_CHUNK_SIZE = 2 * 1024 * 1024;\n\nexport function dataURLtoFile(dataurl: string, filename: string) {\n  const arr = dataurl.split(',');\n  // @ts-expect-error\n  const mime = arr[0].match(/:(.*?);/)[1];\n  const bstr = atob(arr[arr.length - 1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new File([u8arr], filename, { type: mime });\n}\n","import React, { useRef, useState } from 'react';\n\nimport ReactCrop, {\n  type Crop,\n  type PixelCrop,\n} from 'react-image-crop';\n\nimport { IconComponent } from '@/components';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Image as ExtensionImage } from '@/extensions';\nimport { useLocale } from '@/locales';\nimport { dataURLtoFile, readImageAsBase64 } from '@/utils/file';\n\nexport function ImageCropper({ editor, imageInline, onClose }: any) {\n  const { t } = useLocale();\n\n  const [dialogOpen, setDialogOpen] = useState(false);\n\n  const imgRef = React.useRef<HTMLImageElement | null>(null);\n\n  const [crop, setCrop] = React.useState<Crop>();\n  const [croppedImageUrl, setCroppedImageUrl] = React.useState<string>('');\n  const fileInput = useRef<HTMLInputElement>(null);\n  const [urlUpload, setUrlUpload] = useState<any>({\n    src: '',\n    file: null,\n  });\n\n  function onCropComplete(crop: PixelCrop) {\n    if (imgRef.current && crop.width && crop.height) {\n      const croppedImageUrl = getCroppedImg(imgRef.current, crop);\n      setCroppedImageUrl(croppedImageUrl);\n    }\n  }\n\n  function getCroppedImg(image: HTMLImageElement, crop: PixelCrop): string {\n    const canvas = document.createElement('canvas');\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n\n    canvas.width = crop.width * scaleX;\n    canvas.height = crop.height * scaleY;\n\n    const ctx = canvas.getContext('2d');\n\n    if (ctx) {\n      ctx.imageSmoothingEnabled = false;\n\n      ctx.drawImage(\n        image,\n        crop.x * scaleX,\n        crop.y * scaleY,\n        crop.width * scaleX,\n        crop.height * scaleY,\n        0,\n        0,\n        crop.width * scaleX,\n        crop.height * scaleY,\n      );\n    }\n\n    return canvas.toDataURL('image/png', 1.0);\n  }\n\n  async function onCrop() {\n    try {\n      const fileCrop = dataURLtoFile(croppedImageUrl, urlUpload?.file?.name || 'image.png');\n\n      const uploadOptions = editor.extensionManager.extensions.find(\n        (extension: any) => extension.name === ExtensionImage.name,\n      )?.options;\n\n      let src = '';\n      if (uploadOptions.upload) {\n        src = await uploadOptions.upload(fileCrop);\n      } else {\n        src = URL.createObjectURL(fileCrop);\n      }\n\n      editor.chain().focus().setImageInline({ src, inline: imageInline }).run();\n\n      setDialogOpen(false);\n\n      setUrlUpload({\n        src: '',\n        file: null,\n      });\n      onClose();\n    } catch (error) {\n      console.log('Error cropping image', error);\n    }\n  }\n\n  function handleClick(e: any) {\n    e.preventDefault();\n    fileInput.current?.click();\n  }\n\n  const handleFile = async (event: any) => {\n    const files = event?.target?.files;\n    if (!editor || editor.isDestroyed || files.length === 0) {\n      return;\n    }\n    const file = files[0];\n\n    const base64 = await readImageAsBase64(file);\n\n    setDialogOpen(true);\n    setUrlUpload({\n      src: base64.src,\n      file,\n    });\n  };\n\n  return (\n    <>\n      <Button className=\"richtext-mt-1 richtext-w-full\"\n        onClick={handleClick}\n        size=\"sm\"\n      >\n        {t('editor.image.dialog.tab.uploadCrop')}\n      </Button>\n\n      <Dialog open={dialogOpen}>\n        <DialogTrigger />\n\n        <DialogContent>\n          <DialogTitle>\n            {t('editor.image.dialog.tab.uploadCrop')}\n          </DialogTitle>\n\n          <div>\n            {urlUpload.src && (\n              <ReactCrop\n                className=\"richtext-w-full\"\n                crop={crop}\n                onChange={c => setCrop(c)}\n                onComplete={c => onCropComplete(c)}\n              >\n                <img\n                  alt=\"Crop me\"\n                  ref={imgRef}\n                  src={urlUpload.src}\n                />\n              </ReactCrop>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button\n              onClick={() => {\n                setDialogOpen(false);\n                setUrlUpload({\n                  src: '',\n                  file: null,\n                });\n              }}\n            >\n              {t('editor.imageUpload.cancel')}\n\n              <IconComponent className=\"richtext-ml-[4px]\"\n                name=\"Trash2\"\n              />\n            </Button>\n\n            <Button className=\"richtext-w-fit\"\n              onClick={onCrop}\n            >\n              {t('editor.imageUpload.crop')}\n\n              <IconComponent className=\"richtext-ml-[4px]\"\n                name=\"Crop\"\n              />\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <input\n        accept=\"image/*\"\n        multiple\n        onChange={handleFile}\n        ref={fileInput}\n        type=\"file\"\n        style={{\n          display: 'none',\n        }}\n      />\n    </>\n  );\n}\n","import { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { ActionButton, Button, Checkbox, Input, Label, Tabs, TabsContent, TabsList, TabsTrigger } from '@/components';\nimport { Dialog, DialogContent, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { ImageCropper } from '@/extensions/Image/components/ImageCropper';\nimport Image from '@/extensions/Image/Image';\nimport { actionDialogImage } from '@/extensions/Image/store';\nimport { useLocale } from '@/locales';\nimport { listenEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nfunction ActionImageButton(props: any) {\n  const { t } = useLocale();\n  const [open, setOpen] = useState(false);\n\n  const handleUploadImage = (evt: any) => {\n    setOpen(evt.detail);\n  };\n\n  const [link, setLink] = useState<string>('');\n  const fileInput = useRef<HTMLInputElement>(null);\n\n  const [imageInline, setImageInline] = useState(props.editor.extensionManager.extensions.find(\n    (extension: any) => extension.name === Image.name,\n  )?.options.defaultInline || false);\n\n  const uploadOptions = useMemo(() => {\n    const uploadOptions = props.editor.extensionManager.extensions.find(\n      (extension: any) => extension.name === Image.name,\n    )?.options;\n\n    return uploadOptions;\n  }, [props.editor]);\n\n  useEffect(() => {\n    const rm1 = listenEvent(EVENTS.UPLOAD_IMAGE(props.editor.id), handleUploadImage);\n\n    return () => {\n      rm1();\n    };\n  }, []);\n\n  async function handleFile(event: any) {\n    const files = event?.target?.files;\n    if (!props.editor || props.editor.isDestroyed || files.length === 0) {\n      return;\n    }\n\n    const file = files[0];\n\n    let src = '';\n    if (uploadOptions.upload) {\n      src = await uploadOptions.upload(file);\n    } else {\n      src = URL.createObjectURL(file);\n    }\n\n    props.editor.chain().focus().setImageInline({ src, inline: imageInline }).run();\n    setOpen(false);\n    setImageInline(false);\n  }\n  function handleLink(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    props.editor.chain().focus().setImageInline({ src: link, inline: imageInline }).run();\n    setOpen(false);\n    setImageInline(false);\n    setLink('');\n  }\n\n  function handleClick(e: any) {\n    e.preventDefault();\n    fileInput.current?.click();\n  }\n\n  return (\n    <Dialog\n      onOpenChange={setOpen}\n      open={open}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => setOpen(true)}\n          icon={props.icon}\n          tooltip={props.tooltip}\n        />\n      </DialogTrigger>\n\n      <DialogContent>\n        <DialogTitle>\n          {t('editor.image.dialog.title')}\n        </DialogTitle>\n\n        <Tabs\n          activationMode=\"manual\"\n          defaultValue={\n            uploadOptions.resourceImage === 'both' || uploadOptions.resourceImage === 'upload'\n              ? 'upload'\n              : 'link'\n          }\n        >\n          <TabsList className=\"richtext-grid richtext-w-full richtext-grid-cols-2\">\n            {uploadOptions.resourceImage === 'both' || uploadOptions.resourceImage === 'upload'\n              ? (\n                <TabsTrigger value=\"upload\">\n                  {t('editor.image.dialog.tab.upload')}\n                </TabsTrigger>\n              )\n              : <></>}\n\n            {uploadOptions.resourceImage === 'both' || uploadOptions.resourceImage === 'link'\n              ? (\n                <TabsTrigger value=\"link\">\n                  {t('editor.image.dialog.tab.url')}\n                </TabsTrigger>\n              )\n              : <></>}\n          </TabsList>\n\n          <div className=\"richtext-my-[10px] richtext-flex richtext-items-center richtext-gap-[4px]\">\n            <Checkbox\n              checked={imageInline}\n              onCheckedChange={(v) => {\n                setImageInline(v as boolean);\n              }}\n            />\n\n            <Label>\n              {t('editor.link.dialog.inline')}\n            </Label>\n          </div>\n\n          <TabsContent value=\"upload\">\n            <div className=\"richtext-flex richtext-items-center richtext-gap-[10px]\">\n              <Button className=\"richtext-mt-1 richtext-w-full\"\n                onClick={handleClick}\n                size=\"sm\"\n              >\n                {t('editor.image.dialog.tab.upload')}\n              </Button>\n\n              <ImageCropper\n                editor={props.editor}\n                imageInline={imageInline}\n                onClose={() => actionDialogImage.setOpen(props.editor.id, false)}\n              />\n            </div>\n\n            <input\n              accept=\"image/*\"\n              multiple\n              onChange={handleFile}\n              ref={fileInput}\n              type=\"file\"\n              style={{\n                display: 'none',\n              }}\n            />\n          </TabsContent>\n\n          <TabsContent value=\"link\">\n            <form onSubmit={handleLink}>\n              <div className=\"richtext-flex richtext-items-center richtext-gap-2\">\n                <Input\n                  autoFocus\n                  onChange={e => setLink(e.target.value)}\n                  placeholder={t('editor.image.dialog.placeholder')}\n                  required\n                  type=\"url\"\n                  value={link}\n                />\n\n                <Button type=\"submit\">\n                  {t('editor.image.dialog.button.apply')}\n                </Button>\n              </div>\n            </form>\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default ActionImageButton;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport { clamp, isNumber, throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nfunction ImageView(props: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align, inline } = props?.node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h, flipX, flipY } = props?.node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    const transformStyles: any = [];\n\n    if (flipX)\n      transformStyles.push('rotateX(180deg)');\n    if (flipY)\n      transformStyles.push('rotateY(180deg)');\n    const transform = transformStyles.join(' ');\n\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n        transform: transform || 'none',\n      },\n    };\n  }, [props?.node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    const { editor, getPos } = props;\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { editor } = props;\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [props?.editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(props.node.attrs.width);\n    let height = Number(props.node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n      // const dy = (e.clientY - y) * (/t/.test(dir) ? -1 : 1)\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = null;\n\n      props.updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, props.updateAttributes],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(props.editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [props.editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper\n      as={inline ? 'span' : 'div'}\n      className=\"image-view\"\n      style={{ ...imageMaxStyle, textAlign: align, display: inline ? 'inline' : 'block' }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={imageMaxStyle}\n        className={`image-view__body ${props?.selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {props?.editor.view.editable && (props?.selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n\nexport default ImageView;\n","import type { EditorState } from '@tiptap/pm/state';\nimport { Plugin, PluginKey } from '@tiptap/pm/state';\nimport type { EditorView } from '@tiptap/pm/view';\nimport { Decoration, DecorationSet } from '@tiptap/pm/view';\n\nconst uploadKey = new PluginKey('upload-image');\n\ninterface UploadAction {\n  add?: Array<{ id: string, pos: number, src: string }>\n  remove?: string[]\n}\n\nexport function UploadImagesPlugin() {\n  return new Plugin({\n    key: uploadKey,\n    state: {\n      init() {\n        return DecorationSet.empty;\n      },\n      apply(tr: any, set: any) {\n        set = set.map(tr.mapping, tr.doc);\n        const action = tr.getMeta(uploadKey) as UploadAction;\n\n        if (action?.add) {\n          for (const { id, pos, src } of action.add) {\n            const placeholder = createPlaceholder(src);\n            const deco = Decoration.widget(pos, placeholder, { id });\n            set = set.add(tr.doc, [deco]);\n          }\n        } else if (action?.remove) {\n          for (const id of action.remove) {\n            set = set.remove(set.find(undefined, undefined, (spec: any) => spec.id === id));\n          }\n        }\n\n        return set;\n      },\n    },\n    props: {\n      decorations(state) {\n        return this.getState(state);\n      },\n    },\n  });\n}\n\nfunction createPlaceholder(src: string): HTMLElement {\n  const placeholder = document.createElement('div');\n  const image = document.createElement('img');\n  image.setAttribute('class', 'opacity-50');\n  image.src = src;\n  image.addEventListener('load', () => {\n    placeholder.setAttribute('class', 'img-placeholder');\n  });\n  placeholder.append(image);\n  return placeholder;\n}\n\nfunction findPlaceholder(state: EditorState, id: string): number | null {\n  const decos = uploadKey.getState(state) as DecorationSet;\n  const found = decos.find(undefined, undefined, spec => spec.id === id);\n  return found.length > 0 ? found[0]?.from : null;\n}\n\nexport interface ImageUploadOptions {\n  validateFn?: (file: File) => boolean\n  onUpload: (file: File) => Promise<string | object>\n  postUpload?: (src: string) => Promise<string>\n  defaultInline?: boolean\n}\n\nexport type UploadFn = (files: File[], view: EditorView, pos: number) => void;\n\nexport function createImageUpload({ validateFn, onUpload, postUpload, defaultInline = false }: ImageUploadOptions): UploadFn {\n  return (files, view, pos) => {\n    for (const file of files) {\n      if (validateFn && !validateFn(file)) {\n        continue;\n      }\n\n      const id = Date.now().toString();\n      const tr = view.state.tr;\n      if (!tr.selection.empty) {\n        tr.deleteSelection();\n      }\n\n      const result = URL.createObjectURL(file);\n      tr.setMeta(uploadKey, {\n        add: [{ id, pos, src: result }],\n      });\n      view.dispatch(tr);\n\n      onUpload(file).then(\n        async (src) => {\n          if (postUpload && typeof src === 'string') {\n            src = await postUpload(src);\n          }\n\n          const { schema } = view.state;\n          let placeholderPos = findPlaceholder(view.state, id);\n          if (placeholderPos === null) {\n            return;\n          }\n\n          const imageSrc = typeof src === 'object' ? result : src;\n          const node = schema.nodes.image?.create({\n            src: imageSrc,\n            inline: defaultInline\n          });\n          if (!node) {\n            return;\n          }\n\n          // check position larger than doc.content.size\n          const { doc } = view.state;\n          if (placeholderPos > doc.content.size) {\n            placeholderPos = doc.content.size - 1;\n          }\n\n          const transaction = view.state.tr\n            .replaceWith(placeholderPos, placeholderPos, node)\n            .setMeta(uploadKey, { remove: [id] });\n\n          view.dispatch(transaction);\n        },\n        () => {\n          const transaction = view.state.tr.delete(pos, pos).setMeta(uploadKey, { remove: [id] });\n          view.dispatch(transaction);\n        },\n      );\n    }\n  };\n}\n\nexport function handleImagePaste(view: EditorView, event: ClipboardEvent, uploadFn: UploadFn): boolean {\n  const files = [...(event.clipboardData?.files || [])];\n  if (files.length > 0) {\n    event.preventDefault();\n    const pos = view.state.selection.from;\n    uploadFn(files, view, pos + 1);\n    return true;\n  }\n  return false;\n}\n\nexport function handleImageDrop(view: EditorView, event: DragEvent, moved: boolean, uploadFn: UploadFn): boolean {\n  const files = [...(event.dataTransfer?.files || [])];\n  if (!moved && files.length > 0) {\n    event.preventDefault();\n    const coordinates = view.posAtCoords({\n      left: event.clientX,\n      top: event.clientY,\n    });\n    if (coordinates) {\n      uploadFn(files, view, coordinates.pos + 1);\n      return true;\n    }\n  }\n  return false;\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { mergeAttributes } from '@tiptap/core';\nimport TiptapImage from '@tiptap/extension-image';\nimport { Plugin } from '@tiptap/pm/state';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport ActionImageButton from '@/extensions/Image/components/ActionImageButton';\nimport ImageView from '@/extensions/Image/components/ImageView';\nimport { UploadImagesPlugin, createImageUpload, handleImageDrop, handleImagePaste } from '@/plugins/image-upload';\nimport type { GeneralOptions } from '@/types';\n\nexport interface SetImageAttrsOptions {\n  src?: string\n  /** The alternative text for the image. */\n  alt?: string\n  /** The caption of the image. */\n  caption?: string\n  /** The width of the image. */\n  width?: number | string | null\n  /** The alignment of the image. */\n  align?: 'left' | 'center' | 'right'\n  /** Whether the image is inline. */\n  inline?: boolean\n  /** image FlipX */\n  flipX?: boolean\n  /** image FlipY */\n  flipY?: boolean\n}\n\nconst DEFAULT_OPTIONS: any = {\n  acceptMimes: ['image/jpeg', 'image/gif', 'image/png', 'image/jpg'],\n  maxSize: 1024 * 1024 * 5, // 5MB\n  resourceImage: 'both',\n  defaultInline: false,\n};\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    imageUpload: {\n      /**\n       * Add an image\n       */\n      setImageInline: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Update an image\n       */\n      updateImage: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Set image alignment\n       */\n      setAlignImage: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport interface IImageOptions extends GeneralOptions<IImageOptions> {\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n\n  HTMLAttributes?: any\n\n  acceptMimes?: string[]\n  maxSize?: number\n\n  /** The source URL of the image */\n  resourceImage: 'upload' | 'link' | 'both'\n  defaultInline?: boolean\n}\n\nexport const Image = TiptapImage.extend<IImageOptions>({\n  group: 'inline',\n  inline: true,\n  defining: true,\n  draggable: true,\n  selectable: true,\n\n  addOptions() {\n    return {\n      ...DEFAULT_OPTIONS,\n      ...this.parent?.(),\n      upload: () => Promise.reject('Image Upload Function'),\n      button: ({\n        editor,\n        extension,\n        t,\n      }: {\n        editor: any\n        extension: any\n        t: (key: string) => string\n      }) => ({\n        component: ActionImageButton,\n        componentProps: {\n          action: () => {\n            return true;\n          },\n          upload: extension.options.upload,\n          /* If setImage is not available(when Image Component is not imported), the button is disabled */\n          disabled: !editor.can().setImage?.({}),\n          icon: 'ImageUp',\n          tooltip: t('editor.image.tooltip'),\n          editor,\n        },\n      }),\n    };\n  },\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      flipX: {\n        default: false,\n      },\n      flipY: {\n        default: false,\n      },\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const width = element.style.width || element.getAttribute('width') || null;\n          return !width ? null : Number.parseInt(width, 10);\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n      inline: {\n        default: false,\n        parseHTML: element => Boolean(element.getAttribute('inline')),\n        renderHTML: (attributes) => {\n          return {\n            inline: attributes.inline,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(ImageView);\n  },\n  addCommands() {\n    return {\n      ...this.parent?.(),\n      setImageInline: (options: any) => ({ commands }: any) => {\n        return commands.insertContent({\n          type: this.name,\n          attrs: {\n            ...options,\n            inline: options.inline ?? this.options.defaultInline,\n          },\n        });\n      },\n      updateImage:\n        options =>\n          ({ commands }) => {\n            return commands.updateAttributes(this.name, options);\n          },\n      setAlignImage:\n          align =>\n            ({ commands }) => {\n              return commands.updateAttributes(this.name, { align });\n            },\n    };\n  },\n  renderHTML({ HTMLAttributes }) {\n    const { flipX, flipY, align, inline } = HTMLAttributes;\n\n    const transformStyle\n      = flipX || flipY ? `transform: rotateX(${flipX ? '180' : '0'}deg) rotateY(${flipY ? '180' : '0'}deg);` : '';\n\n    const textAlignStyle = align ? `text-align: ${align};` : '';\n\n    return [\n      inline ? 'span' : 'div',\n      {\n        style: textAlignStyle,\n        class: 'image',\n      },\n      [\n        'img',\n        mergeAttributes(\n          {\n            height: 'auto',\n            style: transformStyle,\n          },\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'span.image img',\n        getAttrs: (img) => {\n          const element = img?.parentElement;\n\n          const width = img?.getAttribute('width');\n\n          const flipX = img?.getAttribute('flipx') || false;\n          const flipY = img?.getAttribute('flipy') || false;\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            caption: img?.getAttribute('caption'),\n            width: width ? Number.parseInt(width, 10) : null,\n            align: img?.getAttribute('align') || element?.style?.textAlign || null,\n            inline: img?.getAttribute('inline') || false,\n            flipX: flipX === 'true',\n            flipY: flipY === 'true',\n          };\n        },\n      },\n      {\n        tag: 'div[class=image]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n          const flipX = img?.getAttribute('flipx') || false;\n          const flipY = img?.getAttribute('flipy') || false;\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            caption: img?.getAttribute('caption'),\n            width: width ? Number.parseInt(width, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n            inline: img?.getAttribute('inline') || false,\n            flipX: flipX === 'true',\n            flipY: flipY === 'true',\n          };\n        },\n      },\n    ];\n  },\n  addProseMirrorPlugins() {\n    const validateFile = (file: File): boolean => {\n      // @ts-expect-error\n      if (!this.options.acceptMimes.includes(file.type)) {\n        // toast({ description: t.value('editor.imageUpload.fileTypeNotSupported'), duration: 2000 });\n        return false;\n      }\n      // @ts-expect-error\n      if (file.size > this.options.maxSize) {\n        // toast({\n        //   description: `${t.value('editor.imageUpload.fileSizeTooBig')} ${formatFileSize(\n        //     this.options.maxSize,\n        //   )}.`,\n        //   duration: 2000,\n        // });\n        return false;\n      }\n      return true;\n    };\n\n    const uploadFn = createImageUpload({\n      validateFn: validateFile,\n      onUpload: this.options.upload as any,\n      // postUpload: this.options.postUpload,\n      defaultInline: this.options.defaultInline,\n    });\n\n    return [\n      new Plugin({\n        props: {\n          handlePaste: (view, event) => {\n            if (!event.clipboardData) {\n              return false;\n            }\n            const items = [...(event.clipboardData.files || [])];\n            if (items.some(x => x.type === 'text/html')) {\n              return false;\n            }\n            return handleImagePaste(view, event, uploadFn);\n          },\n          handleDrop: (view, event, _, moved) => {\n            if (!(event instanceof DragEvent) || !event.dataTransfer) {\n              return false;\n            }\n            handleImageDrop(view, event, moved, uploadFn);\n            return false;\n          },\n        },\n      }),\n      UploadImagesPlugin(),\n    ];\n  },\n});\n\nexport default Image;\n","import { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { ActionButton, Button, Input, Tabs, TabsContent, TabsList, TabsTrigger } from '@/components';\nimport { Dialog, DialogContent, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Video } from '@/extensions/Video/Video';\nimport { useLocale } from '@/locales';\nimport { listenEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nfunction checkIsVideo(url: string) {\n  return /\\.(?:mp4|webm|ogg|mov)$/i.test(url);\n}\n\nfunction ActionVideoButton(props: any) {\n  const { t } = useLocale();\n\n  const [link, setLink] = useState<string>('');\n  const fileInput = useRef<HTMLInputElement>(null);\n\n  const [error, setError] = useState<string>('');\n\n  const [open, setOpen] = useState(false);\n\n  const handleUploadVideo = (evt: any) => {\n    setOpen(evt.detail);\n  };\n\n  useEffect(() => {\n    const rm1 = listenEvent(EVENTS.UPLOAD_VIDEO(props.editor.id), handleUploadVideo);\n\n    return () => {\n      rm1();\n    };\n  }, []);\n\n  const uploadOptions = useMemo(() => {\n    const uploadOptions = props.editor.extensionManager.extensions.find(\n      (extension: any) => extension.name === Video.name,\n    )?.options;\n\n    return uploadOptions;\n  }, [props.editor]);\n\n  async function handleFile(event: any) {\n    const files = event?.target?.files;\n    if (!props.editor || props.editor.isDestroyed || files.length === 0) {\n      return;\n    }\n    const file = files[0];\n\n    let src = '';\n    if (uploadOptions.upload) {\n      src = await uploadOptions.upload(file);\n    } else {\n      src = URL.createObjectURL(file);\n    }\n\n    props.editor\n      .chain()\n      .focus()\n      .setVideo({\n        src,\n        width: '100%',\n      })\n      .run();\n    setOpen(false);\n  }\n  function handleLink(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!link) {\n      return;\n    }\n\n    props.editor\n      .chain()\n      .focus()\n      .setVideo({\n        src: link,\n        width: '100%',\n      })\n      .run();\n    setOpen(false);\n  }\n\n  function handleClick(e: any) {\n    e.preventDefault();\n    fileInput.current?.click();\n  }\n\n  return (\n    <Dialog onOpenChange={setOpen}\n      open={open}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => setOpen(true)}\n          icon={props.icon}\n          tooltip={props.tooltip}\n        />\n      </DialogTrigger>\n\n      <DialogContent>\n        <DialogTitle>\n          {t('editor.video.dialog.title')}\n        </DialogTitle>\n\n        <Tabs\n          activationMode=\"manual\"\n          defaultValue={\n            (uploadOptions?.resourceVideo === 'both' || uploadOptions?.resourceVideo === 'upload') ? 'upload' : 'link'\n          }\n        >\n          <TabsList className=\"richtext-grid richtext-w-full richtext-grid-cols-2\">\n            {(uploadOptions?.resourceVideo === 'both' || uploadOptions?.resourceVideo === 'upload') && (\n              <TabsTrigger value=\"upload\">\n                {t('editor.video.dialog.tab.upload')}\n              </TabsTrigger>\n            )}\n\n            {(uploadOptions?.resourceVideo === 'both' || uploadOptions?.resourceVideo === 'link') && (\n              <TabsTrigger value=\"link\">\n                {t('editor.video.dialog.link')}\n              </TabsTrigger>\n            )}\n          </TabsList>\n\n          <TabsContent value=\"upload\">\n            <div className=\"richtext-flex richtext-items-center richtext-gap-[10px]\">\n              <Button className=\"richtext-mt-1 richtext-w-full\"\n                onClick={handleClick}\n                size=\"sm\"\n              >\n                {t('editor.video.dialog.tab.upload')}\n              </Button>\n            </div>\n\n            <input\n              accept=\"video/*\"\n              multiple\n              onChange={handleFile}\n              ref={fileInput}\n              type=\"file\"\n              style={{\n                display: 'none',\n              }}\n            />\n          </TabsContent>\n\n          <TabsContent value=\"link\">\n            <form onSubmit={handleLink}>\n              <div className=\"richtext-flex richtext-items-center richtext-gap-2\">\n                <Input\n                  autoFocus\n                  placeholder={t('editor.video.dialog.placeholder')}\n                  required\n                  type=\"url\"\n                  value={link}\n                  onChange={(e) => {\n                    const url = e.target.value;\n\n                    const isVideoUrl = checkIsVideo(url);\n\n                    if (!isVideoUrl) {\n                      setError('Invalid video URL');\n                      setLink('');\n                      return;\n                    }\n                    setError('');\n                    setLink(url);\n                  }}\n                />\n\n                <Button type=\"submit\">\n                  {t('editor.video.dialog.button.apply')}\n                </Button>\n              </div>\n            </form>\n\n            {error && <div className=\"richtext-my-[5px] richtext-text-red-500\">\n              {error}\n            </div>}\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default ActionVideoButton;\n","import { Node } from '@tiptap/core';\n\nimport { VIDEO_SIZE } from '@/constants';\nimport ActionVideoButton from '@/extensions/Video/components/ActiveVideoButton';\nimport type { GeneralOptions } from '@/types';\nimport { getCssUnitWithDefault } from '@/utils/utils';\n\n/**\n * Represents the interface for video options, extending GeneralOptions.\n */\nexport interface VideoOptions extends GeneralOptions<VideoOptions> {\n  /**\n   * Indicates whether fullscreen play is allowed\n   *\n   * @default true\n   */\n  allowFullscreen: boolean\n  /**\n   * Indicates whether to display the frameborder\n   *\n   * @default false\n   */\n  frameborder: boolean\n  /**\n   * Width of the video, can be a number or string\n   *\n   * @default VIDEO_SIZE['size-medium']\n   */\n  width: number | string\n  /** HTML attributes object for passing additional attributes */\n  HTMLAttributes: {\n    [key: string]: any\n  }\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n\n  /** The source URL of the video */\n  resourceVideo: 'upload' | 'link' | 'both'\n}\n\n/**\n * Represents the type for setting video options\n */\ninterface SetVideoOptions {\n  /** The source URL of the video */\n  src: string\n  /** The width of the video */\n  width: string | number\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    video: {\n      /**\n       * Add an video\n       */\n      setVideo: (options: Partial<SetVideoOptions>) => ReturnType\n      /**\n       * Update an video\n       */\n      updateVideo: (options: Partial<SetVideoOptions>) => ReturnType\n    }\n  }\n}\n\nfunction linkConvert(src: string) {\n  // Convert youtube links\n  src = src\n    .replace('https://youtu.be/', 'https://www.youtube.com/watch?v=')\n    .replace('watch?v=', 'embed/');\n\n  // Convert vimeo links\n  src = src.replace('https://vimeo.com/', 'https://player.vimeo.com/video/');\n\n  // Convert bilibili links\n  const isBilibiliLink = /^https?:\\/\\/www.bilibili.com\\/video\\/.*/i.test(src);\n  if (isBilibiliLink) {\n    src = src\n      .replace(/\\?.*$/, '')\n      .replace('https://www.bilibili.com/video/', 'https://player.bilibili.com/player.html?bvid=');\n  }\n\n  // Convert google drive links\n  if (src.includes('drive.google.com')) {\n    src = src.replace('/view', '/preview');\n  }\n\n  return src;\n}\n\nexport const Video = Node.create<VideoOptions>({\n  name: 'video',\n  group: 'block',\n  atom: true,\n  draggable: true,\n\n  addOptions() {\n    return {\n      divider: false,\n      spacer: false,\n      allowFullscreen: true,\n      upload: undefined,\n      frameborder: false,\n      resourceVideo: 'both',\n      width: VIDEO_SIZE['size-medium'],\n      HTMLAttributes: {\n        class: 'iframe-wrapper',\n        style: 'display: flex;justify-content: center;',\n      },\n      button: ({ editor, t }: any) => {\n        return {\n          component: ActionVideoButton,\n          componentProps: {\n            action: () => {\n              return;\n            },\n            isActive: () => editor.isActive('video') || false,\n            /* If setVideo is not available(when Video Component is not imported), the button is disabled */\n            disabled: !editor.can().setVideo?.({}),\n            icon: 'Video',\n            tooltip: t('editor.video.tooltip'),\n            editor,\n          },\n        };\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      src: {\n        default: null,\n        renderHTML: ({ src }) => ({\n          src: src ? linkConvert(src) : null,\n        }),\n      },\n      width: {\n        default: this.options.width,\n        renderHTML: ({ width }) => ({\n          width: getCssUnitWithDefault(width),\n        }),\n      },\n      frameborder: {\n        default: this.options.frameborder ? 1 : 0,\n        parseHTML: () => (this.options.frameborder ? 1 : 0),\n      },\n      allowfullscreen: {\n        default: this.options.allowFullscreen,\n        parseHTML: () => this.options.allowFullscreen,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[data-video] iframe',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    const { width = '100%' } = HTMLAttributes ?? {};\n\n    const iframeHTMLAttributes = {\n      ...HTMLAttributes,\n      width: '100%',\n      height: '100%',\n    };\n\n    const responsiveStyle = `position: relative;overflow: hidden;display: flex;flex: 1;max-width: ${width};`;\n    const responsiveSizesStyle = `flex: 1;padding-bottom: ${(9 / 16) * 100}%;`;\n\n    const iframeDOM = ['iframe', iframeHTMLAttributes];\n    const sizesDOM = ['div', { style: responsiveSizesStyle }];\n    const responsiveDOM = ['div', { style: responsiveStyle }, sizesDOM, iframeDOM];\n\n    const divAttrs = {\n      ...this.options.HTMLAttributes,\n      'data-video': '',\n    };\n\n    return ['div', divAttrs, responsiveDOM];\n  },\n\n  addCommands() {\n    return {\n      setVideo:\n        options =>\n          ({ commands }) => {\n            return commands.insertContent({\n              type: this.name,\n              attrs: options,\n            });\n          },\n      updateVideo:\n        options =>\n          ({ commands }) => {\n            return commands.updateAttributes(this.name, options);\n          },\n    };\n  },\n\n});\n","import { useCallback, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport clsx from 'clsx';\nimport { Resizable } from 're-resizable';\n\n// import { getEditorContainerDOMSize } from '@/utils'\nimport { Button, Input } from '@/components/ui';\nimport { Iframe } from '@/extensions/Iframe/Iframe';\nimport { useEditableEditor } from '@/store/editableEditor';\n\nimport styles from './index.module.scss';\n\nfunction IframeNodeView({ editor, node, updateAttributes }: any) {\n  const isEditable = useEditableEditor();\n\n  const { url, width, height } = node.attrs;\n  // const { width: maxWidth } = getEditorContainerDOMSize(editor)\n\n  const [originalLink, setOriginalLink] = useState<string>('');\n\n  function handleConfirm() {\n    if (!originalLink) {\n      return;\n    }\n\n    editor\n      .chain()\n      .updateAttributes(Iframe.name, {\n        url: originalLink,\n      })\n      .setNodeSelection(editor.state.selection.from)\n      .focus()\n      .run();\n  }\n\n  const onResize = useCallback(\n    (size: any) => {\n      updateAttributes({ width: size.width, height: size.height });\n    },\n    [updateAttributes],\n  );\n\n  return (\n    <NodeViewWrapper>\n      {!url && (\n        <div className=\"richtext-mx-auto richtext-my-[12px] richtext-flex richtext-max-w-[600px] richtext-items-center richtext-justify-center richtext-gap-[10px] richtext-rounded-[12px] richtext-border richtext-border-solid richtext-border-[#ccc] richtext-p-[10px]\">\n          <Input\n            autoFocus\n            className=\"richtext-flex-1\"\n            onInput={(e: any) => setOriginalLink(e.target.value)}\n            placeholder=\"Enter link\"\n            type=\"url\"\n            value={originalLink}\n          />\n\n          <Button className=\"richtext-w-[60px]\"\n            onClick={handleConfirm}\n          >\n            OK\n          </Button>\n        </div>\n      )}\n\n      {url && (\n        <Resizable\n          size={{ width: Number.parseInt(width), height: Number.parseInt(height) }}\n          onResizeStop={(e, direction, ref, d) => {\n            onResize({\n              width: Number.parseInt(width) + d.width,\n              height: Number.parseInt(height) + d.height,\n            });\n          }}\n        >\n          <div className={clsx(styles.wrap, 'render-wrapper')}>\n            <div className={styles.innerWrap}\n              style={{ pointerEvents: !isEditable ? 'auto' : 'none' }}\n            >\n              <iframe\n                className=\"richtext-my-[12px] \"\n                src={url}\n              >\n              </iframe>\n            </div>\n          </div>\n        </Resizable>\n      )}\n    </NodeViewWrapper>\n  );\n}\n\nexport default IframeNodeView;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n \nimport { safeJSONParse } from '@/utils/json';\n\n/**\n * @param json\n */\nexport function jsonToStr(json: Record<string, unknown>) {\n  try {\n    return JSON.stringify(json);\n  } catch {\n    return JSON.stringify({});\n  }\n}\n\n/**\n * @param str\n */\nexport function strToJSON(str: string) {\n  return safeJSONParse(str);\n}\n\n/**\n * @param element\n * @param json\n */\nexport function jsonToDOMDataset(json: Record<string, unknown>) {\n  return Object.keys(json).map((key) => {\n    let value = json[key];\n\n    if (typeof value === 'object') {\n      value = JSON.stringify(value);\n    }\n\n    return {\n      key: `data-${key}`,\n      value: encodeURIComponent(value as string),\n    };\n  });\n}\n\n/**\n * @param element\n * @param attribute\n * @param transformToJSON\n */\nexport function getDatasetAttribute(attribute: string, transformToJSON = false) {\n  return (element: HTMLElement) => {\n    const dataKey = attribute.startsWith('data-') ? attribute : `data-${attribute}`;\n    // @ts-ignore\n    let value = decodeURIComponent(element.getAttribute(dataKey));\n\n    if (value == null || (typeof value === 'string' && value === 'null')) {\n      try {\n        const html = element.outerHTML;\n\n        const texts = html.match(/([\\S\\s])+?=\"([\\S\\s])+?\"/g);\n        if (texts && texts.length > 0) {\n          const params = texts\n            .map(str => str.trim())\n            .reduce((accu, item) => {\n              const i = item.indexOf('=');\n              const arr = [item.slice(0, i), item.slice(i + 1).slice(1, -1)];\n              // @ts-expect-error\n              accu[arr[0]] = arr[1];\n              return accu;\n            }, {});\n\n          // @ts-expect-error\n          value = (params[attribute.toLowerCase()] || '').replaceAll('&quot;', '\"');\n        }\n      } catch (e: any) {\n        console.error('Error getDatasetAttribute ', e.message, element);\n      }\n    }\n\n    if (transformToJSON) {\n      try {\n        return JSON.parse(value);\n      } catch {\n        return {};\n      }\n    }\n\n    if (value.includes('%') || value.includes('auto')) {\n      return value;\n    }\n\n    const toNumber = Number.parseInt(value);\n    return toNumber !== toNumber ? value : toNumber;\n  };\n}\n\n/**\n * 将节点属性转换为 dataset\n * @param node\n * @returns\n */\nexport function nodeAttrsToDataset(node: Node) {\n  const { attrs } = node as any;\n\n  return Object.keys(attrs).reduce((accu, key) => {\n    const value = attrs[key];\n\n    if (value == null) {\n      return accu;\n    }\n\n    let encodeValue = '';\n\n    if (typeof value === 'object') {\n      encodeValue = jsonToStr(value);\n    } else {\n      encodeValue = value;\n    }\n\n    accu[key] = encodeValue;\n\n    return accu;\n  }, Object.create(null));\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { ActionButton } from '@/components';\nimport IframeNodeView from '@/extensions/Iframe/components/IframeNodeView';\nimport { getDatasetAttribute } from '@/utils/dom-dataset';\n\nexport interface IIframeAttrs {\n  width?: number | string\n  height?: number\n  url?: string\n  defaultShowPicker?: boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    iframe: {\n      /**\n       * Add an iframe\n       */\n      setIframe: (options: { src: string, service: string }) => ReturnType\n    }\n  }\n}\n\nexport const Iframe = Node.create({\n  name: 'iframe',\n  content: '',\n  marks: '',\n  group: 'block',\n  selectable: true,\n  atom: true,\n  draggable: true,\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      HTMLAttributes: {\n        class: 'iframe',\n      },\n      button: ({\n        editor,\n        extension,\n        t,\n      }: {\n        editor: any\n        extension: any\n        t: (key: string) => string\n      }) => ({\n        component: ActionButton,\n        componentProps: {\n          action: (options: { src: string, service: string }) => editor.commands.setIframe(options),\n          upload: extension.options.upload,\n          disabled: !editor.can().setIframe({}),\n          icon: 'Iframe',\n          tooltip: t('editor.iframe.tooltip'),\n        },\n      }),\n    };\n  },\n\n  addAttributes() {\n    return {\n      width: {\n        default: 600,\n        parseHTML: getDatasetAttribute('width'),\n      },\n      height: {\n        default: 300,\n        parseHTML: getDatasetAttribute('height'),\n      },\n      url: {\n        default: null,\n        parseHTML: getDatasetAttribute('url'),\n      },\n      defaultShowPicker: {\n        default: false,\n      },\n      frameborder: {\n        default: 0,\n      },\n      allowfullscreen: {\n        default: this.options.allowFullscreen,\n        parseHTML: () => this.options.allowFullscreen,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'iframe',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['iframe', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\n  },\n\n  addCommands() {\n    return {\n      setIframe:\n        options =>\n          ({ tr, commands, chain }) => {\n          // @ts-ignore\n            if (tr.selection?.node?.type?.name == this.name) {\n              return commands.updateAttributes(this.name, options);\n            }\n\n            const attrs = options || { url: '' };\n            // const { selection } = editor.state\n\n            return chain()\n              .insertContent({\n                type: this.name,\n                attrs,\n              })\n              .run();\n          },\n    };\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: /^\\$iframe\\$$/,\n        type: this.type,\n        getAttributes: () => {\n          return { width: '100%' };\n        },\n      }),\n    ];\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(IframeNodeView);\n  },\n});\n","import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'richtext-flex richtext-min-h-[80px] richtext-w-full richtext-rounded-md !richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background placeholder:richtext-text-muted-foreground focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nTextarea.displayName = 'Textarea';\n\nexport { Textarea };\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport deepEqual from 'deep-equal';\n\ntype MapFn<T, R> = (arg: T) => R;\n\nfunction mapSelf<T>(d: T): T {\n  return d;\n}\n\nexport function useAttributes<T, R = T>(editor: Editor, attrbute: string, defaultValue?: T, map?: (arg: T) => R) {\n  const mapFn = (map || mapSelf) as MapFn<T, R>;\n  const [value, setValue] = useState<R>(mapFn(defaultValue as any));\n  const prevValueCache = useRef<R>(value);\n\n  useEffect(() => {\n    const listener = () => {\n      const attrs = { ...defaultValue, ...editor.getAttributes(attrbute) } as any;\n      Object.keys(attrs).forEach((key) => {\n        if (attrs[key] === null || attrs[key] === undefined) {\n          // @ts-ignore\n          attrs[key] = defaultValue ? defaultValue[key] : null;\n        }\n      });\n      const nextAttrs = mapFn(attrs);\n      if (deepEqual(prevValueCache.current, nextAttrs)) {\n        return;\n      }\n      setValue(nextAttrs);\n      prevValueCache.current = nextAttrs;\n    };\n\n    editor.on('selectionUpdate', listener);\n    editor.on('transaction', listener);\n\n    return () => {\n      editor.off('selectionUpdate', listener);\n      editor.off('transaction', listener);\n    };\n  }, [editor, defaultValue, attrbute, mapFn]);\n\n  return value;\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport katex from 'katex';\nimport { HelpCircle } from 'lucide-react';\n\nimport { ActionButton, Button, Label, Popover, PopoverContent, PopoverTrigger } from '@/components';\nimport { Textarea } from '@/components/ui/textarea';\nimport type { IKatexAttrs } from '@/extensions/Katex/Katex';\nimport { Katex } from '@/extensions/Katex/Katex';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { useLocale } from '@/locales';\n\nfunction KatexActiveButton({ editor, ...props }: any) {\n  const { t } = useLocale();\n\n  const attrs = useAttributes<IKatexAttrs>(editor, Katex.name, {\n    text: '',\n    defaultShowPicker: false,\n  });\n  const { text, defaultShowPicker } = attrs;\n\n  const [currentValue, setCurrentValue] = useState('');\n\n  const submit = useCallback(() => {\n    editor.chain().focus().setKatex({ text: currentValue }).run();\n    setCurrentValue('');\n  }, [editor, currentValue]);\n\n  useEffect(() => {\n    if (defaultShowPicker) {\n      editor.chain().updateAttributes(Katex.name, { defaultShowPicker: false }).focus().run();\n    }\n  }, [editor, defaultShowPicker]);\n\n  const formatText = useMemo(() => {\n    try {\n      return katex.renderToString(`${currentValue}`);\n    } catch {\n      return currentValue;\n    }\n  }, [currentValue]);\n\n  const previewContent = useMemo(\n    () => {\n      if (`${currentValue}`.trim()) {\n        return (\n          <span contentEditable={false}\n            dangerouslySetInnerHTML={{ __html: formatText || '' }}\n          >\n          </span>\n        );\n      }\n\n      return null;\n    },\n    [currentValue, formatText],\n  );\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild>\n        <ActionButton\n          icon={props?.icon}\n          tooltip={props?.tooltip}\n        />\n      </PopoverTrigger>\n\n      <PopoverContent align=\"start\"\n        className=\"richtext-size-full richtext-p-2\"\n        hideWhenDetached\n        side=\"bottom\"\n      >\n        <Label className=\"richtext-mb-[6px]\">\n          {t('editor.formula.dialog.text')}\n        </Label>\n\n        <div className=\"richtext-mb-[16px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm\">\n            <Textarea\n              autoFocus\n              className=\"richtext-w-full\"\n              defaultValue={text}\n              onChange={e => setCurrentValue(e.target.value)}\n              placeholder=\"Text\"\n              required\n              rows={3}\n              value={currentValue}\n            />\n          </div>\n        </div>\n\n        {previewContent && (\n          <div className=\"richtext-my-[10px] richtext-max-w-[286px] richtext-overflow-auto richtext-whitespace-nowrap richtext-rounded-[6px] !richtext-border richtext-p-[10px]\">\n            {previewContent}\n          </div>\n        )}\n\n        <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-gap-[6px]\">\n          <Button className=\"richtext-flex-1\"\n            onClick={submit}\n          >\n            Submit\n          </Button>\n\n          <a href=\"https://katex.org/docs/supported\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            <HelpCircle size={16} />\n          </a>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport default KatexActiveButton;\n","import { useStoreTheme } from '@/store/store';\nimport { dispatchEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nexport function useTheme() {\n  const [v] = useStoreTheme(store => store.value);\n\n  return v;\n}\n\nexport const themeActions = {\n  setTheme: (id: any, theme: string) => {\n    dispatchEvent(EVENTS.UPDATE_THEME(id), theme);\n  },\n};\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nconst colors = [\n  '#47A1FF',\n  '#59CB74',\n  '#FFB952',\n  '#FC6980',\n  '#6367EC',\n  '#DA65CC',\n  '#FBD54A',\n  '#ADDF84',\n  '#6CD3FF',\n  '#659AEC',\n  '#9F8CF1',\n  '#ED8CCE',\n  '#A2E5FF',\n  '#4DCCCB',\n  '#F79452',\n  '#84E0BE',\n  '#5982F6',\n  '#E37474',\n  '#3FDDC7',\n  '#9861E5',\n];\n\nconst total = colors.length;\nexport const getRandomColor = () => colors[Math.trunc(Math.random() * total)];\n\n/**\n * @param hexCode\n * @param opacity\n * @returns\n */\nexport function convertColorToRGBA(hexCode: string, opacity = 1) {\n  let r = 0;\n  let g = 0;\n  let b = 0;\n\n  if (hexCode.startsWith('rgb')) {\n    // @ts-expect-error\n    const rgb = hexCode\n      .replace(/\\s/g, '')\n      .match(/rgb\\((.*)\\)$/)[1]\n      .split(',');\n\n    r = +rgb[0];\n    g = +rgb[1];\n    b = +rgb[2];\n  } else if (hexCode.startsWith('#')) {\n    let hex = hexCode.replace('#', '');\n\n    if (hex.length === 3) {\n      hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n    }\n\n    r = Number.parseInt(hex.substring(0, 2), 16);\n    g = Number.parseInt(hex.substring(2, 4), 16);\n    b = Number.parseInt(hex.substring(4, 6), 16);\n  } else {\n    return hexCode;\n  }\n\n  if (opacity > 1 && opacity <= 100) {\n    opacity = opacity / 100;\n  }\n\n  return `rgba(${r},${g},${b},${opacity})`;\n}\n","import { useMemo } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\n\nimport katex from 'katex';\nimport { useTheme } from '@/theme/theme';\nimport { convertColorToRGBA } from '@/utils/color';\n\nexport function KatexWrapper({ node }: any) {\n  const theme = useTheme();\n  const { text } = node.attrs;\n\n  const backgroundColor = useMemo(() => {\n    const color = 'rgb(254, 242, 237)';\n    if (theme === 'dark')\n      return convertColorToRGBA(color, 0.75);\n    return color;\n  }, [theme]);\n\n  const formatText = useMemo(() => {\n    try {\n      return katex.renderToString(`${text}`);\n    } catch {\n      return text;\n    }\n  }, [text]);\n\n  const content = useMemo(\n    () =>\n      text.trim()\n        ? (\n          <span contentEditable={false} dangerouslySetInnerHTML={{ __html: formatText }}></span>\n        )\n        : (\n          <span contentEditable={false}>\n            Not enter a formula\n          </span>\n        ),\n    [text, formatText],\n  );\n\n  return (\n    <NodeViewWrapper\n      style={{\n        display: 'inline-block',\n        backgroundColor,\n      }}\n      as=\"span\"\n    >\n      {content}\n    </NodeViewWrapper>\n  );\n}\n","import { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport KatexActiveButton from '@/extensions/Katex/components/KatexActiveButton';\nimport { KatexWrapper } from '@/extensions/Katex/components/KatexWrapper';\n\nexport interface IKatexAttrs {\n  text?: string\n  defaultShowPicker?: boolean\n}\n\ninterface IKatexOptions {\n  HTMLAttributes: Record<string, any>\n}\n\nfunction getDatasetAttribute(attribute: string) {\n  return (element: any) => {\n    return element.getAttribute(attribute);\n  };\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    katex: {\n      setKatex: (arg?: IKatexAttrs) => ReturnType\n    }\n  }\n}\n\nexport const Katex = Node.create<IKatexOptions>({\n  name: 'katex',\n  group: 'inline',\n  inline: true,\n  defining: true,\n  draggable: true,\n  selectable: true,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {\n        class: 'katex',\n      },\n      button: ({ editor, t }: any) => {\n        return {\n          component: KatexActiveButton,\n          componentProps: {\n            editor,\n            action: () => {\n              return true;\n            },\n            isActive: () => false,\n            disabled: false,\n            icon: 'KatexIcon',\n            tooltip: t('editor.katex.tooltip'),\n          },\n        };\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      text: {\n        default: '',\n        parseHTML: getDatasetAttribute('text'),\n      },\n      defaultShowPicker: {\n        default: false,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [{ tag: 'span.katex' }];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['span', mergeAttributes((this.options && this.options.HTMLAttributes) || {}, HTMLAttributes)];\n  },\n\n  addCommands() {\n    return {\n      setKatex:\n        options =>\n          ({ commands }) => {\n            return commands.insertContent({\n              type: this.name,\n              attrs: options,\n            });\n          },\n    };\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: /^\\$katex\\$$/,\n        type: this.type,\n        getAttributes: () => {\n          return { defaultShowPicker: true };\n        },\n      }),\n    ];\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(KatexWrapper);\n  },\n});\n","import mitt from '@/utils/mitt';\n\nlet event: any;\nfunction getEventEmitter() {\n  try {\n    if (!event) {\n      event = mitt();\n    }\n    return event;\n  } catch {\n    throw new Error('Error EventEmitter');\n  }\n}\n\nexport const OPEN_COUNT_SETTING_MODAL = 'OPEN_COUNT_SETTING_MODAL';\nexport const OPEN_LINK_SETTING_MODAL = 'OPEN_LINK_SETTING_MODAL';\nexport const OPEN_FLOW_SETTING_MODAL = 'OPEN_FLOW_SETTING_MODAL';\nexport const OPEN_MIND_SETTING_MODAL = 'OPEN_MIND_SETTING_MODAL';\nexport const OPEN_EXCALIDRAW_SETTING_MODAL = 'OPEN_EXCALIDRAW_SETTING_MODAL';\nexport const OPEN_DRAWER_SETTING_MODAL = 'OPEN_DRAWER_SETTING_MODAL';\n\nexport function subject(eventName: any, handler: any) {\n  const event = getEventEmitter();\n  event.on(eventName, handler);\n}\n\nexport function cancelSubject(eventName: any, handler: any) {\n  const event = getEventEmitter();\n  event.off(eventName, handler);\n}\n\nexport function triggerOpenCountSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_COUNT_SETTING_MODAL, data);\n}\n\nexport function triggerOpenLinkSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_LINK_SETTING_MODAL, data);\n}\n\nexport function triggerOpenFlowSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_FLOW_SETTING_MODAL, data);\n}\n\nexport function triggerOpenMindSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_MIND_SETTING_MODAL, data);\n}\n\nexport function triggerOpenExcalidrawSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_EXCALIDRAW_SETTING_MODAL, data);\n}\n","/* eslint-disable @typescript-eslint/no-unused-expressions */\n/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { useCallback, useEffect, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { OPEN_EXCALIDRAW_SETTING_MODAL, cancelSubject, subject } from '@/utils/_event';\n\ninterface IProps {\n  editor: Editor\n}\n\nexport const ExcalidrawActiveButton: React.FC<IProps> = ({ editor }) => {\n  const [Excalidraw, setExcalidraw] = useState<any>(null);\n  const [data, setData] = useState({});\n  const [initialData, setInitialData] = useState({ elements: [], appState: { isLoading: false }, files: null });\n  const [visible, toggleVisible] = useState(false);\n  const [loading, toggleLoading] = useState(true);\n  const [error, setError] = useState<any>(null);\n\n  const renderEditor = useCallback(\n    (div: any) => {\n      if (!div)\n        return;\n\n      import('@excalidraw/excalidraw')\n        .then((res) => {\n          setExcalidraw(res.Excalidraw);\n        })\n        .catch(setError)\n        .finally(() => toggleLoading(false));\n    },\n    [toggleLoading],\n  );\n\n  const renderExcalidraw: any = useCallback((app: any) => {\n    setTimeout(() => {\n      app.refresh();\n    });\n  }, []);\n\n  const onChange = useCallback((elements: any, appState: any, files: any) => {\n    // appState.collaborators = [];\n    setData({\n      elements,\n      appState: { isLoading: false },\n      files,\n    });\n  }, []);\n\n  const save = useCallback(() => {\n    if (!Excalidraw) {\n      toggleVisible(false);\n      return;\n    }\n\n    // const currentScrollTop = document.querySelector('main#js-tocs-container')?.scrollTop\n    editor.chain().focus().setExcalidraw({ data }).run();\n    // setTimeout(() => {\n    //   // @ts-expect-error\n    //   document.querySelector('main#js-tocs-container').scrollTop = currentScrollTop\n    // })\n    toggleVisible(false);\n  }, [Excalidraw, editor, data, toggleVisible]);\n\n  useEffect(() => {\n    const handler = (data: any) => {\n      toggleVisible(true);\n      data && setInitialData(data.data);\n    };\n\n    subject(OPEN_EXCALIDRAW_SETTING_MODAL, handler);\n\n    return () => {\n      cancelSubject(OPEN_EXCALIDRAW_SETTING_MODAL, handler);\n    };\n  }, [editor, toggleVisible]);\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Excalidraw\"\n          tooltip=\"Excalidraw\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Excalidraw\n        </DialogTitle>\n\n        <div style={{ height: '100%', borderWidth: 1 }}>\n          {loading && (\n            <p>\n              Loading...\n            </p>\n          )}\n\n          {error && <p>\n            {(error && error.message) || 'Error'}\n          </p>}\n\n          <div ref={renderEditor}\n            style={{ width: '100%', height: 600 }}\n          >\n            {!loading && !error && Excalidraw\n              ? (\n                <Excalidraw initialData={initialData}\n                  langCode=\"en\"\n                  onChange={onChange}\n                  ref={renderExcalidraw}\n                />\n              )\n              : null}\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={save}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport clsx from 'clsx';\nimport deepEqual from 'deep-equal';\nimport { Resizable } from 're-resizable';\nimport VisibilitySensor from 'react-visibility-sensor';\n\n// import { clamp, getEditorContainerDOMSize } from '@/utils'\nimport { ActionButton } from '@/components/ActionButton';\nimport { Excalidraw } from '@/extensions/Excalidraw/Excalidraw';\nimport { clamp } from '@/utils/utils';\n\nimport styles from './index.module.scss';\n\nconst MIN_ZOOM = 10;\nconst MAX_ZOOM = 200;\nconst ZOOM_STEP = 15;\n\nconst INHERIT_SIZE_STYLE = { width: '100%', height: '100%', maxWidth: '100%' };\n\nfunction NodeViewExcalidraw({ editor, node, updateAttributes }: any) {\n  const exportToSvgRef: any = useRef(null);\n  // const isEditable = editor.isEditable\n  const isActive = editor.isActive(Excalidraw.name);\n  // const { width: maxWidth } = getEditorContainerDOMSize(editor)\n  const { data, width, height } = node.attrs;\n  const [Svg, setSvg] = useState<SVGElement | null>(null);\n  const [loading, toggleLoading] = useState(true);\n  const [error, setError] = useState<any>(null);\n  const [visible, toggleVisible] = useState(false);\n  const [zoom, setZoomState] = useState(100);\n\n  const onViewportChange = useCallback(\n    (visible: any) => {\n      if (visible) {\n        toggleVisible(true);\n      }\n    },\n    [toggleVisible],\n  );\n\n  const setZoom = useCallback((type: 'minus' | 'plus') => {\n    return () => {\n      setZoomState(currentZoom =>\n        clamp(type === 'minus' ? currentZoom - ZOOM_STEP : currentZoom + ZOOM_STEP, MIN_ZOOM, MAX_ZOOM),\n      );\n    };\n  }, []);\n\n  useEffect(() => {\n    let isUnmount = false;\n\n    import('@excalidraw/excalidraw')\n      .then((res) => {\n        if (!isUnmount) {\n          exportToSvgRef.current = res.exportToSvg;\n        }\n      })\n      .catch(err => !isUnmount && setError(err))\n      .finally(() => !isUnmount && toggleLoading(false));\n\n    return () => {\n      isUnmount = true;\n    };\n  }, [toggleLoading, data]);\n\n  useEffect(() => {\n    let isUnmount = false;\n\n    const setContent = async () => {\n      if (isUnmount || loading || error || !visible || !data)\n        return;\n\n      const svg: SVGElement = await exportToSvgRef.current(data);\n\n      if (isUnmount)\n        return;\n\n      svg.setAttribute('width', '100%');\n      svg.setAttribute('height', '100%');\n      svg.setAttribute('display', 'block');\n\n      setSvg(svg);\n    };\n\n    setContent();\n\n    return () => {\n      isUnmount = true;\n    };\n  }, [data, loading, error, visible]);\n\n  const onResize = (size: any) => {\n    updateAttributes({ width: size.width, height: size.height });\n  };\n\n  return (\n    <NodeViewWrapper className={clsx(styles.wrap, isActive && styles.isActive)}>\n      <VisibilitySensor onChange={onViewportChange}>\n        <Resizable\n          size={{ width: Number.parseInt(width), height: Number.parseInt(height) }}\n          onResizeStop={(e, direction, ref, d) => {\n            onResize({\n              width: Number.parseInt(width) + d.width,\n              height: Number.parseInt(height) + d.height,\n            });\n          }}\n        >\n          <div\n            className={clsx(styles.renderWrap, 'render-wrapper')}\n            style={{ ...INHERIT_SIZE_STYLE, overflow: 'hidden' }}\n          >\n            {error && (\n              <div style={INHERIT_SIZE_STYLE}>\n                <p>\n                  {error.message || error}\n                </p>\n              </div>\n            )}\n\n            {loading && <p>\n              Loading...\n            </p>}\n\n            {!loading && !error && visible && (\n              <div\n                dangerouslySetInnerHTML={{ __html: Svg?.outerHTML ?? '' }}\n                style={{\n                  height: '100%',\n                  maxHeight: '100%',\n                  padding: 24,\n                  overflow: 'hidden',\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  transform: `scale(${zoom / 100})`,\n                  transition: 'all ease-in-out .3s',\n                }}\n              />\n            )}\n\n            <div className={styles.title}>\n              {/* <Space>\n                <span className={styles.icon}>\n                  <IconMind />\n                </span>\n                绘图\n              </Space> */}\n            </div>\n\n            <div className={styles.handlerWrap}>\n              <ActionButton\n                action={setZoom('minus')}\n                icon=\"ZoomOut\"\n                tooltip=\"Zoom Out\"\n              />\n\n              <ActionButton\n                action={setZoom('plus')}\n                icon=\"ZoomIn\"\n                tooltip=\"Zoom In\"\n              />\n            </div>\n          </div>\n        </Resizable>\n      </VisibilitySensor>\n    </NodeViewWrapper>\n  );\n}\n\nexport default React.memo(NodeViewExcalidraw, (prevProps, nextProps) => {\n  if (deepEqual(prevProps.node.attrs, nextProps.node.attrs)) {\n    return true;\n  }\n\n  return false;\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { ExcalidrawActiveButton } from '@/extensions/Excalidraw/components/ExcalidrawActiveButton';\nimport NodeViewExcalidraw from '@/extensions/Excalidraw/components/NodeViewExcalidraw/NodeViewExcalidraw';\nimport { getDatasetAttribute, nodeAttrsToDataset } from '@/utils/dom-dataset';\n\nconst DEFAULT_MIND_DATA = { elements: [] };\n\nexport interface IExcalidrawAttrs {\n  defaultShowPicker?: boolean\n  createUser?: any\n  width?: number | string\n  height?: number\n  data?: Record<string, unknown>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    excalidraw: {\n      setExcalidraw: (attrs?: IExcalidrawAttrs) => ReturnType\n    }\n  }\n}\n\nexport const Excalidraw = Node.create({\n  name: 'excalidraw',\n  group: 'block',\n  selectable: true,\n  atom: true,\n  draggable: true,\n  inline: false,\n\n  addAttributes() {\n    return {\n      defaultShowPicker: {\n        default: false,\n      },\n      createUser: {\n        default: null,\n      },\n      width: {\n        default: '100%',\n        parseHTML: getDatasetAttribute('width'),\n      },\n      height: {\n        default: 240,\n        parseHTML: getDatasetAttribute('height'),\n      },\n      data: {\n        default: DEFAULT_MIND_DATA,\n        parseHTML: getDatasetAttribute('data', true),\n      },\n    };\n  },\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      HTMLAttributes: {\n        class: 'excalidraw',\n      },\n      button: ({ editor }: any) => ({\n        component: ExcalidrawActiveButton,\n        componentProps: {\n          editor,\n        },\n      }),\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=excalidraw]',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes, node }: any) {\n    return ['div', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes, nodeAttrsToDataset(node))];\n  },\n\n  addCommands() {\n    return {\n      setExcalidraw:\n        options =>\n          ({ tr, commands, chain }) => {\n            options = options || {};\n            options.data = options.data || DEFAULT_MIND_DATA;\n\n            // @ts-ignore\n            if (tr.selection?.node?.type?.name == this.name) {\n              return commands.updateAttributes(this.name, options);\n            }\n\n            return chain()\n              .insertContent({\n                type: this.name,\n                attrs: options,\n              })\n              .run();\n          },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewExcalidraw);\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: /^\\$excalidraw\\$$/,\n        type: this.type,\n        getAttributes: () => {\n          return { width: '100%' };\n        },\n      }),\n    ];\n  },\n});\n","import type React from 'react';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { debounce } from 'lodash-es';\n\nimport { ActionButton, Input, Popover, PopoverContent, PopoverTrigger } from '@/components';\n\ninterface IProps {\n  showClear?: boolean\n  selectImage: (arg: string) => void\n  children: React.ReactNode\n  giphyApiKey: string\n}\n\nfunction ImageGifWrap({ selectImage, giphyApiKey, children }: IProps) {\n  const [gifs, setGifs] = useState([]);\n  const [limit] = useState(15);\n\n  const inputRef = useRef(null);\n\n  const search = (term: any, kind: any = 'search') => {\n    if (!giphyApiKey) {\n      return;\n    }\n\n    const url\n      = kind === 'search'\n        ? `https://api.giphy.com/v1/gifs/search?q=${term}`\n        : `https://api.giphy.com/v1/gifs/trending?q=${term}`;\n    const link = `${url}&limit=${limit}&api_key=${giphyApiKey}`;\n\n    fetch(link).then(r => r.json()).then((response) => {\n      // handle success\n      setGifs(response.data);\n    })\n      .catch((error) => {\n        // handle error\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    search('', 'trend');\n  }, []);\n\n  const handleInputChange = useCallback(\n    debounce((event: React.ChangeEvent<HTMLInputElement>) => {\n      if (!event.target.value) {\n        search('', 'trend');\n        return;\n      }\n      // Add your logic here\n      search(event.target.value);\n    }, 350), // Adjust the debounce delay as needed\n    [],\n  );\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild>\n        {children}\n      </PopoverTrigger>\n\n      <PopoverContent align=\"start\"\n        className=\"richtext-size-full richtext-p-2\"\n        hideWhenDetached\n        side=\"bottom\"\n      >\n\n        {\n          giphyApiKey\n            ? (\n              <>\n                <div className=\"richtext-mb-[10px] richtext-w-full\">\n                  <Input\n                    onChange={handleInputChange}\n                    placeholder=\"Search GIF\"\n                    ref={inputRef}\n                    type=\"text\"\n                  />\n                </div>\n\n                <div className=\"richtext-max-h-[280px] richtext-overflow-y-auto\">\n                  <div className=\"richtext-grid richtext-grid-cols-2 richtext-gap-1 \">\n\n                    {gifs?.length\n                      ? gifs?.map((o: any) => (\n                        <img\n                          alt=\"giphy\"\n                          className=\"richtext-cursor-pointer richtext-text-center\"\n                          height={o.images.fixed_width_downsampled.height}\n                          key={`giphy-${o.id}`}\n                          onClick={() => selectImage(o)}\n                          src={o.images.fixed_width_downsampled.url}\n                          width={o.images.fixed_width_downsampled.width}\n                        />\n                      ))\n                      : <p>\n                        No GIFs found\n                      </p>}\n                  </div>\n                </div>\n              </>\n            )\n            : (\n              <div>\n                <p>\n                  Missing Giphy API Key\n                </p>\n              </div>\n            )\n        }\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport function ImageGifActionButton({ editor, icon, giphyApiKey, ...props }: any) {\n  const selectImage = (giphyblock: any) => {\n    const { url } = giphyblock.images.original;\n\n    editor.chain().focus().setImageGif({ src: url }).run();\n  };\n\n  return (\n    <ImageGifWrap\n      giphyApiKey={giphyApiKey}\n      selectImage={selectImage}\n    >\n      <ActionButton\n        icon={icon}\n        tooltip={props?.tooltip}\n      />\n    </ImageGifWrap>\n  );\n}\n\nexport default ImageGifActionButton;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport { clamp, isNumber, throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nfunction ImageGifView(props: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align } = props?.node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h } = props?.node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n      },\n    };\n  }, [props?.node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    const { editor, getPos } = props;\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { editor } = props;\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [props?.editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(props.node.attrs.width);\n    let height = Number(props.node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n      // const dy = (e.clientY - y) * (/t/.test(dir) ? -1 : 1)\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = null;\n\n      props.updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, props.updateAttributes],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(props.editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [props.editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper className=\"image-view\"\n      style={{ ...imageMaxStyle, width: '100%', textAlign: align }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={imageMaxStyle}\n        className={`image-view__body ${props?.selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {props?.editor.view.editable && (props?.selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n\nexport default ImageGifView;\n","import { mergeAttributes } from '@tiptap/core';\nimport type { ImageOptions } from '@tiptap/extension-image';\nimport TiptapImage from '@tiptap/extension-image';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport ImageGifActionButton from '@/extensions/ImageGif/components/ImageGifActionButton';\nimport ImageGifView from '@/extensions/ImageGif/components/ImageGifView';\n\nexport interface SetImageAttrsOptions {\n  src?: string\n  /** The alternative text for the image. */\n  alt?: string\n  /** The title of the image. */\n  title?: string\n  /** The width of the image. */\n  width?: number | string | null\n  /** The alignment of the image. */\n  align?: 'left' | 'center' | 'right'\n}\n\ninterface ImageGifOptions extends ImageOptions {\n  /**\n   * The key for the gif https://giphy.com/\n   */\n  GIPHY_API_KEY: string\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    imageGifUpload: {\n      /**\n       * Add an image gif\n       */\n      setImageGif: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Update an image gif\n       */\n      updateImageGif: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Set image alignment\n       */\n      setAlignImageGif: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport const ImageGif = TiptapImage.extend<ImageGifOptions>({\n  name: 'imageGif',\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      inline: false,\n      content: '',\n      marks: '',\n      group: 'block',\n      GIPHY_API_KEY: '',\n      draggable: false,\n      selectable: true,\n      atom: true,\n      button: ({ editor, extension, t }: any) => {\n        const giphyApiKey = extension?.options?.GIPHY_API_KEY || '';\n\n        return {\n          component: ImageGifActionButton,\n          componentProps: {\n            editor,\n            action: () => {\n              return;\n            },\n            isActive: () => false,\n            disabled: false,\n            icon: 'GifIcon',\n            tooltip: t('editor.imageGif.tooltip'),\n            giphyApiKey,\n          },\n        };\n      },\n    };\n  },\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const width = element.style.width || element.getAttribute('width') || '10';\n          return width === undefined ? null : Number.parseInt(`${width}`, 10);\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(ImageGifView);\n  },\n  addCommands() {\n    return {\n      ...this.parent?.(),\n      setImageGif: (options: any) => ({ commands }: any) => {\n        return commands.insertContent({\n          type: this.name,\n          attrs: options,\n        });\n      },\n      updateImageGif:\n        (options: any) =>\n          ({ commands }: any) => {\n            return commands.updateAttributes(this.name, options);\n          },\n      setAlignImageGif:\n          (align: any) =>\n            ({ commands }: any) => {\n              return commands.updateAttributes(this.name, { align });\n            },\n    };\n  },\n  renderHTML({ HTMLAttributes }) {\n    const { align } = HTMLAttributes;\n\n    const style = align ? `text-align: ${align};` : '';\n    return [\n      'div', // Parent element\n      {\n        style,\n        class: 'imageGIf',\n      },\n      [\n        'img',\n        mergeAttributes(\n          // Always render the `height=\"auto\"`\n          {\n            height: 'auto',\n          },\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=imageGIf]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            title: img?.getAttribute('title'),\n            width: width ? Number.parseInt(width, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n          };\n        },\n      },\n    ];\n  },\n});\n\nexport default ImageGif;\n","export function shortId(length = 8) {\n  return Math.random()\n    .toString(36)\n    .substring(2, length + 2);\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport mermaid from 'mermaid';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\ninterface IProps {\n  editor: Editor, upload?: any\n}\n\nconst defaultCode = 'graph TB\\na-->b';\n\nexport const MermaidActiveButton: React.FC<IProps> = ({ editor, upload }) => {\n  const [mermaidCode, setMermaidCode] = useState(defaultCode);\n  const [svgCode, setSvgCode] = useState('');\n  const [visible, toggleVisible] = useState(false);\n  const mermaidRef = useRef<HTMLElement | null>(null);\n\n  const renderMermaid = async (value: any) => {\n    try {\n      const { svg } = await mermaid.render('mermaid-svg', value);\n      setSvgCode(svg);\n    } catch {\n      setSvgCode('');\n    }\n  };\n\n  const mermaidInit = () => {\n    mermaid.initialize({\n      darkMode: false,\n      startOnLoad: false,\n      // fontFamily:'',\n      fontSize: 12,\n      theme: 'base',\n    });\n    renderMermaid(mermaidCode);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      mermaidInit();\n    }\n  }, [visible]);\n\n  useEffect(() => {\n    if (visible) {\n      renderMermaid(mermaidCode);\n    }\n  }, [mermaidCode]);\n\n  const setMermaid = async () => {\n    if (mermaidCode === '') {\n      return;\n    }\n    if (mermaidCode) {\n      const svg = mermaidRef.current!.querySelector('svg') as unknown as HTMLElement;\n      const { width, height } = svg.getBoundingClientRect();\n      const name = `mermaid-${shortId()}.svg`;\n      // const { size } = new Blob([svg.outerHTML], {\n      //   type: 'image/svg+xml',\n      // })\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setMermaid(\n          {\n            type: 'mermaid',\n            src,\n            alt: encodeURIComponent(mermaidCode),\n            width,\n            height,\n          },\n          !!mermaidCode,\n        )\n        .run();\n    }\n    toggleVisible(false);\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Mermaid\"\n          tooltip=\"Mermaid\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Mermaid\n        </DialogTitle>\n\n        <div style={{ height: '100%', borderWidth: 1 }}>\n          <div className=\"richtext-flex richtext-gap-[10px] richtext-rounded-[10px] richtext-p-[10px]\">\n            <Textarea\n              autoFocus\n              className=\"richtext-flex-1\"\n              defaultValue={defaultCode}\n              onChange={e => setMermaidCode(e.target.value)}\n              placeholder=\"Text\"\n              required\n              rows={10}\n              value={mermaidCode}\n              style={{\n                color: 'hsl(var(--richtext-foreground))',\n              }}\n            />\n\n            <div\n              className=\"richtext-flex richtext-flex-1 richtext-items-center richtext-justify-center richtext-rounded-[10px] richtext-p-[10px]\"\n              dangerouslySetInnerHTML={{ __html: svgCode }}\n              ref={mermaidRef as any}\n              style={{ height: '100%', borderWidth: 1, minHeight: 500, background: '#fff' }}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setMermaid}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper, isNumber } from '@tiptap/react';\nimport { throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\nimport { clamp } from '@/utils/utils';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nexport function NodeViewMermaid({ editor, node, updateAttributes, getPos, selected }: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align } = node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h } = node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n      },\n    };\n  }, [node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(node.attrs.width);\n    let height = Number(node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n      // const dy = (e.clientY - y) * (/t/.test(dir) ? -1 : 1)\n      const { width: wI, height: hI } = node?.attrs;\n      const ratio = wI / hI;\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = Math.round(width / ratio);\n\n      updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, updateAttributes, node?.attrs],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper className=\"image-view\"\n      style={{ ...imageMaxStyle, width: '100%', textAlign: align }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={{ ...imageMaxStyle, background: '#fff' }}\n        className={`image-view__body ${selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {editor.view.editable && (selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport type { CommandProps } from '@tiptap/core';\nimport { mergeAttributes } from '@tiptap/core';\nimport TiptapImage from '@tiptap/extension-image';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { MermaidActiveButton } from '@/extensions/Mermaid/components/MermaidActiveButton';\nimport { NodeViewMermaid } from '@/extensions/Mermaid/components/NodeViewMermaid/NodeViewMermaid';\nimport type { GeneralOptions } from '@/types';\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    mermaid: {\n      setMermaid: (options: any, replace?: any) => ReturnType\n      setAlignImageMermaid: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport interface MermaidOptions extends GeneralOptions<MermaidOptions> {\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n}\n\nexport const Mermaid = TiptapImage.extend<MermaidOptions>({\n  name: 'mermaid',\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      inline: false,\n      content: '',\n      marks: '',\n      group: 'block',\n      draggable: false,\n      selectable: true,\n      atom: true,\n      HTMLAttributes: {\n        class: 'mermaid',\n      },\n      button: ({ editor, t, extension }: any) => ({\n        component: MermaidActiveButton,\n        componentProps: {\n          action: () => {\n            return true;\n          },\n          isActive: () => false,\n          disabled: false,\n          editor,\n          icon: 'Mermaid',\n          tooltip: t('editor.mermaid.tooltip'),\n          upload: extension?.options?.upload,\n        },\n      }),\n    };\n  },\n\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const width = img?.getAttribute('width');\n\n          return width ? Number.parseInt(width, 10) : 320;\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      height: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const height = img?.getAttribute('height');\n\n          return height ? Number.parseInt(height, 10) : 212;\n        },\n        renderHTML: (attributes) => {\n          return {\n            height: attributes.height,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewMermaid);\n  },\n\n  // @ts-ignore\n  addCommands() {\n    return {\n      setMermaid:\n          (\n            options: { src: string, alt?: string },\n            replace?: boolean,\n          ) =>\n            ({ commands, editor }: CommandProps) => {\n              if (replace) {\n                return commands.insertContent({\n                  type: this.name,\n                  attrs: options,\n                });\n              }\n              return commands.insertContentAt(editor.state.selection.anchor, {\n                type: this.name,\n                attrs: options,\n              });\n            },\n\n      setAlignImageMermaid:\n            (align: any) =>\n              ({ commands }: any) => {\n                return commands.updateAttributes(this.name, { align });\n              },\n    };\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    const { align } = HTMLAttributes;\n\n    const style = align ? `text-align: ${align};` : '';\n    return [\n      'div', // Parent element\n      {\n        style,\n        class: 'imageMermaid',\n      },\n      [\n        'img',\n        mergeAttributes(\n          // @ts-ignore\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=imageMermaid]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n          const height = img?.getAttribute('height');\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            width: width ? Number.parseInt(width, 10) : null,\n            height: height ? Number.parseInt(height, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n          };\n        },\n      },\n    ];\n  },\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { NodeViewWrapper, type ReactNodeViewRendererOptions } from '@tiptap/react';\nimport { Tweet } from 'react-tweet';\n\nexport const TWITTER_REGEX_GLOBAL = /(https?:\\/\\/)?(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?/g;\nexport const TWITTER_REGEX = /^https?:\\/\\/(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?$/;\n\nexport function isValidTwitterUrl(url: string) {\n  return url.match(TWITTER_REGEX);\n}\n\nfunction NodeViewTweet({ node }: { node: Partial<ReactNodeViewRendererOptions> }) {\n  // @ts-expect-error\n  const url = node?.attrs?.src || '';\n  const tweetId = url?.split('/').pop();\n\n  if (!tweetId) {\n    return null;\n  }\n\n  return (\n    <NodeViewWrapper>\n      <div data-twitter=\"\">\n        <Tweet id={tweetId} />\n      </div>\n    </NodeViewWrapper>\n  );\n}\n\nexport default NodeViewTweet;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { useEffect, useState } from 'react';\n\nimport { Button, Input, Label } from '@/components';\nimport { Twitter } from '@/extensions/Twitter/Twitter';\nimport { useLocale } from '@/locales';\n\ninterface IPropsFormEditLinkTwitter {\n  editor: any\n  onSetLink: (src: string) => void\n}\n\nfunction FormEditLinkTwitter(props: IPropsFormEditLinkTwitter) {\n  const { t } = useLocale();\n\n  const [src, setSrc] = useState('');\n\n  useEffect(() => {\n    if (props?.editor) {\n      const { src: srcInit } = props.editor?.getAttributes(Twitter.name);\n\n      if (srcInit) {\n        setSrc(srcInit);\n      }\n    }\n  }, [props?.editor]);\n\n  function handleSubmit(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    props?.onSetLink(src);\n  }\n\n  return (\n    <div className=\"border-neutral-200 richtext-rounded-lg !richtext-border richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black\">\n      <form className=\"richtext-flex richtext-flex-col richtext-gap-2\"\n        onSubmit={handleSubmit}\n      >\n        <Label className=\"mb-[6px]\">\n          {t('editor.link.dialog.text')}\n        </Label>\n\n        <div className=\"richtext-mb-[10px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center\">\n            <Input\n              className=\"richtext-w-80\"\n              onChange={e => setSrc(e.target.value)}\n              placeholder=\"Text\"\n              required\n              type=\"text\"\n              value={src}\n            />\n          </div>\n        </div>\n\n        <Button className=\"richtext-mt-2 richtext-self-end\"\n          type=\"submit\"\n        >\n          {t('editor.link.dialog.button.apply')}\n        </Button>\n      </form>\n    </div>\n  );\n}\n\nexport default FormEditLinkTwitter;\n","import { ActionButton, IconComponent, Popover, PopoverContent, PopoverTrigger } from '@/components';\nimport FormEditLinkTwitter from '@/extensions/Twitter/components/FormEditLinkTwitter';\nimport type { ButtonViewReturnComponentProps } from '@/types';\n\ninterface IPropsTwitterActiveButton {\n  editor: any\n  icon?: any\n  title?: string\n  tooltip?: string\n  disabled?: boolean\n  shortcutKeys?: string[]\n  isActive?: ButtonViewReturnComponentProps['isActive']\n  action?: ButtonViewReturnComponentProps['action']\n}\n\nfunction TwitterActiveButton(props: IPropsTwitterActiveButton) {\n  function onSetLink(src: string) {\n    if (props.action) {\n      props.action(src);\n    }\n  }\n\n  return (\n    <Popover modal>\n      <PopoverTrigger disabled={props?.disabled} asChild>\n        <ActionButton\n          tooltip={props?.tooltip}\n          isActive={props?.isActive}\n          disabled={props?.disabled}\n        >\n          <IconComponent name={props?.icon} />\n        </ActionButton>\n      </PopoverTrigger>\n      <PopoverContent hideWhenDetached className=\"richtext-w-full\" align=\"start\" side=\"bottom\">\n        <FormEditLinkTwitter editor={props.editor} onSetLink={onSetLink} />\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport default TwitterActiveButton;\n","import { Node, mergeAttributes, nodePasteRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\nimport NodeViewTweet from '@/extensions/Twitter/components/NodeViewTweet';\nimport TwitterActiveButton from '@/extensions/Twitter/components/TwitterActiveButton';\n\nconst TWITTER_REGEX_GLOBAL = /(https?:\\/\\/)?(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?/g;\nconst TWITTER_REGEX = /^https?:\\/\\/(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?$/;\n\nfunction isValidTwitterUrl(url: string) {\n  return url.match(TWITTER_REGEX);\n}\n\ninterface TwitterOptions {\n  /**\n   * Controls if the paste handler for tweets should be added.\n   * @default true\n   * @example false\n   */\n  addPasteHandler: boolean\n\n  // biome-ignore lint/suspicious/noExplicitAny: <explanation>\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * Controls if the twitter node should be inline or not.\n   * @default false\n   * @example true\n   */\n  inline: boolean\n\n  /**\n   * The origin of the tweet.\n   * @default ''\n   * @example 'https://tiptap.dev'\n   */\n  origin: string\n}\n\n/**\n * The options for setting a tweet.\n */\ninterface SetTweetOptions {\n  src: string \n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    twitter: {\n      /**\n       * Insert a tweet\n       * @param options The tweet attributes\n       * @example editor.commands.setTweet({ src: 'https://x.com/seanpk/status/1800145949580517852' })\n       */\n      setTweet: (options: SetTweetOptions) => ReturnType\n      updateTweet: (options: SetTweetOptions) => ReturnType\n    }\n  }\n}\n\n/**\n * This extension adds support for tweets.\n */\nexport const Twitter = Node.create<TwitterOptions>({\n  name: 'twitter',\n  draggable: true,\n  selectable: true,\n\n  addOptions() {\n    return {\n      addPasteHandler: true,\n      HTMLAttributes: {},\n      inline: false,\n      origin: '',\n      button: ({ editor, t }: any) => ({\n        component: TwitterActiveButton,\n        componentProps: {\n          action: (src: string) => {\n            editor.commands.setTweet({ src });\n          },\n          isActive: () => false,\n          disabled: false,\n          icon: 'Twitter',\n          tooltip: t('editor.twitter.tooltip'),\n          editor,\n        },\n      }),\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewTweet, { attrs: this.options.HTMLAttributes });\n  },\n\n  inline() {\n    return this.options.inline;\n  },\n\n  group() {\n    return this.options.inline ? 'inline' : 'block';\n  },\n\n  addAttributes() {\n    return {\n      src: {\n        default: null,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[data-twitter]',\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setTweet:\n        (options: SetTweetOptions) =>\n          ({ commands }) => {\n            if (!isValidTwitterUrl(options.src)) {\n              return false;\n            }\n\n            return commands.insertContent({\n              type: this.name,\n              attrs: options,\n            });\n          },\n      updateTweet: (options: SetTweetOptions) => ({ commands }: any) => {\n        if (!isValidTwitterUrl(options.src)) {\n          return false;\n        }\n\n        return commands.updateAttributes(this.name, { src: options.src });\n      },\n    };\n  },\n\n  addPasteRules() {\n    if (!this.options.addPasteHandler) {\n      return [];\n    }\n\n    return [\n      nodePasteRule({\n        find: TWITTER_REGEX_GLOBAL,\n        type: this.type,\n        getAttributes: (match) => {\n          return { src: match.input };\n        },\n      }),\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['div', mergeAttributes({ 'data-twitter': '' }, HTMLAttributes)];\n  },\n});\n","import { type SVGProps } from 'react';\n\nexport function HugeiconsCursorRectangleSelection01(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path color=\"currentColor\"\n        d=\"M2 9.2v3.6M12.8 2H9.2M7.5 20H9M20 7.5V9M2.133 4.699c.155-.727.415-1.274.854-1.712c.426-.426.954-.684 1.652-.84m15.228 2.552c-.155-.727-.415-1.274-.854-1.712c-.417-.417-.932-.673-1.608-.83M4.64 19.853c-.698-.156-1.226-.414-1.652-.84c-.43-.43-.69-.965-.845-1.673m11.638 3.626c-1.812.125-3.607-8.326-2.374-9.559s9.684.561 9.559 2.373c-.087 1.187-2.095 1.656-2.037 2.711c.018.309.408.59 1.188 1.154c.543.39 1.096.77 1.629 1.175a.66.66 0 0 1 .234.687a3.35 3.35 0 0 1-2.472 2.473a.66.66 0 0 1-.688-.235c-.404-.533-.784-1.086-1.175-1.628c-.563-.78-.844-1.17-1.153-1.188c-1.055-.059-1.524 1.95-2.71 2.037\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MdiFormatLetterCase(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M20.06 18a4 4 0 0 1-.2-.89c-.67.7-1.48 1.05-2.41 1.05c-.83 0-1.52-.24-2.05-.71c-.53-.45-.8-1.06-.8-1.79c0-.88.33-1.56 1-2.05s1.61-.73 2.83-.73h1.4v-.64q0-.735-.45-1.17c-.3-.29-.75-.43-1.33-.43c-.52 0-.95.12-1.3.36c-.35.25-.52.54-.52.89h-1.46c0-.43.15-.84.45-1.24c.28-.4.71-.71 1.22-.94c.51-.21 1.06-.35 1.69-.35c.98 0 1.74.24 2.29.73s.84 1.16.86 2.02V16c0 .8.1 1.42.3 1.88V18zm-2.4-1.12c.45 0 .88-.11 1.29-.32c.4-.21.7-.49.88-.83v-1.57H18.7c-1.77 0-2.66.47-2.66 1.41c0 .43.15.73.46.96c.3.23.68.35 1.16.35m-12.2-3.17h4.07L7.5 8.29zM6.64 6h1.72l4.71 12h-1.93l-.97-2.57H4.82L3.86 18H1.93z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsEdit(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function PhHighlighter(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 256 256\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M253.66 106.34a8 8 0 0 0-11.32 0L192 156.69L107.31 72l50.35-50.34a8 8 0 1 0-11.32-11.32L96 60.69a16 16 0 0 0-2.82 18.81L72 100.69a16 16 0 0 0 0 22.62l4.69 4.69l-58.35 58.34a8 8 0 0 0 3.13 13.25l72 24A7.9 7.9 0 0 0 96 224a8 8 0 0 0 5.66-2.34L136 187.31l4.69 4.69a16 16 0 0 0 22.62 0l21.19-21.18a16 16 0 0 0 18.81-2.82l50.35-50.34a8 8 0 0 0 0-11.32M93.84 206.85l-55-18.35L88 139.31L124.69 176ZM152 180.69L83.31 112L104 91.31L172.69 160Z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function OuiEraser(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 16 16\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"m2.648 9.937l7.29-7.288a2.21 2.21 0 0 1 3.124 0l2.29 2.288a2.21 2.21 0 0 1 0 3.126L10.413 13H12.5a.5.5 0 0 1 0 1H4.501a2.2 2.2 0 0 1-1.563-.647l.707-.707c.227.226.535.354.856.354h4.005a1.2 1.2 0 0 0 .848-.354l1.292-1.293l-4-4l-3.29 3.291a1.21 1.21 0 0 0 0 1.712l.29.29l-.708.707l-.29-.29a2.21 2.21 0 0 1 0-3.126M8 6h6.89a1.2 1.2 0 0 0-.246-.356L14 5H9zm2-2h3l-.645-.644a1.21 1.21 0 0 0-1.71 0zm4.89 3H7.708l1 1H14l.644-.644A1.2 1.2 0 0 0 14.891 7zM9.708 9l1.646 1.646L13 9z\"\n        fill=\"currentColor\"\n      >\n      </path>\n\n      <path d=\"M14 11.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0m1.5-.5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1m-1 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MdiSquareOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M3 3h18v18H3zm2 2v14h14V5z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsRectangleOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M2 20V4h20v16zm2-2h16V6H4zm0 0V6z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsCircleOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function TablerTriangle(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M10.363 3.591L2.257 17.125a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636-2.87L13.637 3.59a1.914 1.914 0 0 0-3.274 0z\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsHexagonOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"m6.8 21l-5.2-9l5.2-9h10.4l5.2 9l-5.2 9zm1.15-2h8.1l4.025-7l-4.025-7h-8.1L3.9 12zM12 12\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MingcuteDiamondSquareLine(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g fill=\"none\"\n        fillRule=\"evenodd\"\n      >\n        <path d=\"m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z\"></path>\n\n        <path d=\"M10.586 2.807a2 2 0 0 1 2.828 0l7.778 7.779a2 2 0 0 1 0 2.828l-7.778 7.778a2 2 0 0 1-2.828 0l-7.778-7.778a2 2 0 0 1 0-2.828zM12 4.222L4.222 12L12 19.778L19.778 12z\"\n          fill=\"currentColor\"\n        >\n        </path>\n      </g>\n    </svg>\n  );\n}\n\nexport function IcSharpArrowRightAlt(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function SolarUndoLeftRoundBold(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path clipRule=\"evenodd\"\n        d=\"M7.53 3.47a.75.75 0 0 1 0 1.06L5.81 6.25H15a5.75 5.75 0 0 1 0 11.5H8a.75.75 0 0 1 0-1.5h7a4.25 4.25 0 0 0 0-8.5H5.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 0\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function SolarUndoRightRoundBold(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path clipRule=\"evenodd\"\n        d=\"M16.47 3.47a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a4.25 4.25 0 0 0 0 8.5h7a.75.75 0 0 1 0 1.5H9a5.75 5.75 0 0 1 0-11.5h9.19l-1.72-1.72a.75.75 0 0 1 0-1.06\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsDelete(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function HugeiconsSvg01(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g color=\"currentColor\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n      >\n        <path d=\"M3.5 13v-.804c0-2.967 0-4.45.469-5.636c.754-1.905 2.348-3.407 4.37-4.118C9.595 2 11.168 2 14.318 2c1.798 0 2.698 0 3.416.253c1.155.406 2.066 1.264 2.497 2.353c.268.677.268 1.525.268 3.22V13\"></path>\n        <path d=\"M3.5 12a3.333 3.333 0 0 1 3.333-3.333c.666 0 1.451.116 2.098-.057a1.67 1.67 0 0 0 1.179-1.18c.173-.647.057-1.432.057-2.098A3.333 3.333 0 0 1 13.5 2m.509 14l-1.673 4.695c-.31.87-.465 1.305-.71 1.305s-.4-.435-.71-1.305L9.242 16M20.5 17c-.09-1.018-.913-1-1.781-1c-.85 0-1.276 0-1.54.293s-.264.764-.264 1.707v2c0 .943 0 1.414.264 1.707s.69.293 1.54.293s1.275 0 1.54-.293c.264-.293.264-.764.264-1.707c0-.704-1.353-.5-1.353-.5M6.04 16H4.93c-.444 0-.666 0-.842.076c-.596.26-.588.869-.588 1.424s-.008 1.165.588 1.424c.176.076.398.076.842.076s.666 0 .841.076c.597.26.589.869.589 1.424s.008 1.165-.589 1.424C5.596 22 5.374 22 4.93 22H3.72\"></path>\n      </g>\n    </svg>\n  );\n}\n\nexport function GardenUploadStroke12(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 12 12\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"m4.5 8l1.6-1.6c.2-.2.5-.2.7 0L8.5 8m-2 2.5v-4m2 4c1.7-.1 3-1.5 3-3.2C11.5 5.5 10 4 8.2 4h-.3c-.3-1.4-1.6-2.5-3.1-2.5C3 1.5 1.5 3 1.5 4.8c0 .4.1.8.2 1.1C1 6.3.5 7.1.5 8c0 1.4 1.1 2.5 2.5 2.5h1.5\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function HugeiconsPng01(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g color=\"currentColor\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n      >\n        <path d=\"M3.5 13.01v-.805c0-2.97 0-4.456.469-5.642c.754-1.907 2.348-3.411 4.37-4.123c1.257-.442 2.83-.442 5.98-.442c1.798 0 2.698 0 3.416.253c1.155.406 2.066 1.266 2.497 2.356c.268.677.268 1.526.268 3.224v5.179\"></path>\n        <path d=\"M3.5 12.009a3.335 3.335 0 0 1 3.333-3.337c.666 0 1.451.117 2.098-.057a1.67 1.67 0 0 0 1.179-1.18c.173-.648.057-1.434.057-2.1A3.335 3.335 0 0 1 13.5 1.998m-10 19.998V16.03h1.987c.733 0 1.384.526 1.41 1.254q.009.236 0 .468c-.027.731-.682 1.261-1.418 1.261H4.256M20.5 17.025c-.04-.81-.502-1.014-2-.995h-.765c-.553 0-1 .445-1 .995V21c0 .55.447.995 1 .995h2.264c.277 0 .5-.223.5-.497v-1.492a.5.5 0 0 0-.5-.497h-1m-9.251 2.492l.08-5.564c0-.26.269-.193.323-.11l3.139 5.386c.16.282.443.005.443-.094v-5.624\"></path>\n      </g>\n    </svg>\n  );\n}\n\nexport function IcSharpGrid4x4(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M22 7V5h-3V2h-2v3h-4V2h-2v3H7V2H5v3H2v2h3v4H2v2h3v4H2v2h3v3h2v-3h4v3h2v-3h4v3h2v-3h3v-2h-3v-4h3v-2h-3V7zM7 7h4v4H7zm0 10v-4h4v4zm10 0h-4v-4h4zm0-6h-4V7h4z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function AkarIconsDotGridFill(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path clipRule=\"evenodd\"\n        d=\"M4 2a2 2 0 1 1 0 4a2 2 0 0 1 0-4m8 0a2 2 0 1 1 0 4a2 2 0 0 1 0-4m10 2a2 2 0 1 0-4 0a2 2 0 0 0 4 0M4 10a2 2 0 1 1 0 4a2 2 0 0 1 0-4m10 2a2 2 0 1 0-4 0a2 2 0 0 0 4 0m6-2a2 2 0 1 1 0 4a2 2 0 0 1 0-4M6 20a2 2 0 1 0-4 0a2 2 0 0 0 4 0m6-2a2 2 0 1 1 0 4a2 2 0 0 1 0-4m10 2a2 2 0 1 0-4 0a2 2 0 0 0 4 0\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MageImageUpload(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeWidth=\"1.5\"\n      >\n        <path d=\"M21.25 13V8.5a5 5 0 0 0-5-5h-8.5a5 5 0 0 0-5 5v7a5 5 0 0 0 5 5h6.26\"\n          strokeLinejoin=\"round\"\n        >\n        </path>\n\n        <path d=\"m3.01 17l2.74-3.2a2.2 2.2 0 0 1 2.77-.27a2.2 2.2 0 0 0 2.77-.27l2.33-2.33a4 4 0 0 1 5.16-.43l2.47 1.91M8.01 10.17a1.66 1.66 0 1 0-.02-3.32a1.66 1.66 0 0 0 .02 3.32\"\n          strokeLinejoin=\"round\"\n        >\n        </path>\n\n        <path d=\"M18.707 15v5\"\n          strokeMiterlimit=\"10\"\n        >\n        </path>\n\n        <path d=\"m21 17.105l-1.967-1.967a.46.46 0 0 0-.652 0l-1.967 1.967\"\n          strokeLinejoin=\"round\"\n        >\n        </path>\n      </g>\n    </svg>\n  );\n}\n\nexport function FluentColorBackground24Filled(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M2 12.414V17.5A2.5 2.5 0 0 0 4.5 20h15a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 19.5 4h-8.944l2.422 2.422a3 3 0 0 1 .719 3.09c.38.042.75.21 1.04.501l.003.002l.003.004l.01.009l.02.02a8 8 0 0 1 .311.338c.192.216.45.525.712.89c.26.36.545.808.77 1.3c.22.478.434 1.106.434 1.799C17 16.23 15.606 18 13.5 18S10 16.23 10 14.375c0-.29.037-.569.097-.83l-1.362 1.362a3 3 0 0 1-4.243 0zm9.342.58c-.188.409-.342.888-.342 1.381C11 15.765 12.029 17 13.5 17c1.47 0 2.5-1.235 2.5-2.625c0-.493-.154-.972-.342-1.381a7 7 0 0 0-.674-1.134a10 10 0 0 0-.649-.812l-.305-.328a.75.75 0 0 0-1.06 0l-.006.005c-.058.062-.214.226-.3.323c-.175.199-.411.48-.649.812a7 7 0 0 0-.673 1.134m2.158-.61q.13.162.265.35c.202.281.392.586.53.886c.14.305.205.56.205.755c0 .691-.481 1.125-1 1.125c-.52 0-1-.434-1-1.125c0-.194.064-.45.205-.755c.137-.3.327-.605.529-.886q.136-.188.266-.35M6.75 1a.75.75 0 0 0-.75.75v1.756l-.093.087l-4.243 4.243a2 2 0 0 0 0 2.828L5.199 14.2a2 2 0 0 0 2.829 0l4.243-4.243a2 2 0 0 0 0-2.828L8.735 3.593A2 2 0 0 0 7.5 3.015V1.75A.75.75 0 0 0 6.75 1M6 5.621v.629a.75.75 0 1 0 1.5 0V4.54a.5.5 0 0 1 .174.114l3.536 3.535c.09.09.138.205.145.322H3.11zm.26 7.518l-3.128-3.128h6.964l-3.129 3.128a.5.5 0 0 1-.707 0\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function PhLineSegmentFill(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 256 256\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M211.81 83.79a28 28 0 0 1-33.12 4.83l-90.07 90.07a28 28 0 1 1-44.43-6.48a28 28 0 0 1 33.12-4.83l90.07-90.07a28 28 0 1 1 44.43 6.48\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function IcSharpFavorite(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE */}\n      <path d=\"M12 20.325q-.35 0-.712-.125t-.638-.4l-1.725-1.575q-2.65-2.425-4.788-4.812T2 8.15Q2 5.8 3.575 4.225T7.5 2.65q1.325 0 2.5.562t2 1.538q.825-.975 2-1.537t2.5-.563q2.35 0 3.925 1.575T22 8.15q0 2.875-2.125 5.275T15.05 18.25l-1.7 1.55q-.275.275-.637.4t-.713.125M11.05 6.75q-.725-1.025-1.55-1.563t-2-.537q-1.5 0-2.5 1t-1 2.5q0 1.3.925 2.763t2.213 2.837t2.65 2.575T12 18.3q.85-.775 2.213-1.975t2.65-2.575t2.212-2.837T20 8.15q0-1.5-1-2.5t-2.5-1q-1.175 0-2 .538T12.95 6.75q-.175.25-.425.375T12 7.25t-.525-.125t-.425-.375m.95 4.725\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsKidStar(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE */}\n      <path d=\"m7.625 6.4l2.8-3.625q.3-.4.713-.587T12 2t.863.188t.712.587l2.8 3.625l4.25 1.425q.65.2 1.025.738t.375 1.187q0 .3-.088.6t-.287.575l-2.75 3.9l.1 4.1q.025.875-.575 1.475t-1.4.6q-.05 0-.55-.075L12 19.675l-4.475 1.25q-.125.05-.275.063T6.975 21q-.8 0-1.4-.6T5 18.925l.1-4.125l-2.725-3.875q-.2-.275-.288-.575T2 9.75q0-.625.363-1.162t1.012-.763zM8.85 8.125L4 9.725L7.1 14.2L7 18.975l5-1.375l5 1.4l-.1-4.8L20 9.775l-4.85-1.65L12 4zM12 11.5\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsCloud(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Google Material Icons by Material Design Authors - https://github.com/material-icons/material-icons/blob/master/LICENSE */}\n      <path d=\"M12.01 6c2.61 0 4.89 1.86 5.4 4.43l.3 1.5l1.52.11c1.56.11 2.78 1.41 2.78 2.96c0 1.65-1.35 3-3 3h-13c-2.21 0-4-1.79-4-4c0-2.05 1.53-3.76 3.56-3.97l1.07-.11l.5-.95A5.46 5.46 0 0 1 12.01 6m0-2C9.12 4 6.6 5.64 5.35 8.04C2.35 8.36.01 10.91.01 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.64-4.96C18.68 6.59 15.65 4 12.01 4\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function AkarIconsParallelogram(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Akar Icons by Arturo Wibawa - https://github.com/artcoholic/akar-icons/blob/master/LICENSE */}\n      <path d=\"M5.586 6.45A2 2 0 0 1 7.509 5h11.84a2 2 0 0 1 1.923 2.55l-2.858 10A2 2 0 0 1 16.491 19H4.651a2 2 0 0 1-1.923-2.55z\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import React, { useState } from 'react';\n\nimport {\n  Color4\n} from 'easydrawer';\n\nimport { cn } from '@/lib/utils';\n\nimport styles from './ControlDrawer.module.scss';\nimport { MingcuteDiamondSquareLine, HugeiconsCursorRectangleSelection01, IcSharpArrowRightAlt, MaterialSymbolsCircleOutline, MaterialSymbolsEdit, MaterialSymbolsHexagonOutline, MaterialSymbolsRectangleOutline, MdiFormatLetterCase, MdiSquareOutline, OuiEraser, PhHighlighter, TablerTriangle, PhLineSegmentFill, IcSharpFavorite, MaterialSymbolsKidStar, MaterialSymbolsCloud, AkarIconsParallelogram, SolarUndoLeftRoundBold, SolarUndoRightRoundBold, MaterialSymbolsDelete } from './icon';\n\nconst enum ShapeType {\n  square = 0,\n  rectangle = 1,\n  circle = 2,\n  triangle = 3,\n  hexagonal = 4,\n  diamond = 5,\n  arrow = 6,\n  line = 7,\n  heart = 8,\n  star = 9,\n  cloud = 10,\n  parallelogram = 11\n}\n\nconst highlightC = [\n  Color4.blackHighlight,\n  Color4.ofRGBA(166/255, 81/255, 167/255, 0.3),\n  Color4.ofRGBA(247/255, 78/255, 158/255, 0.3),\n  Color4.ofRGBA(166/255, 83/255, 88/255, 0.3),\n  Color4.ofRGBA(246/255, 130/255, 28/255, 0.3),\n  Color4.ofRGBA(166/255, 198/255, 0, 0.3),\n  Color4.ofRGBA(98/255, 186/255, 70/255, 0.3),\n];\n\nconst COLOR = [\n  Color4.black,\n  Color4.fromHex('#007AFF'),\n  Color4.fromHex('#A651A7'),\n  Color4.fromHex('#F74E9E'),\n  Color4.fromHex('#FF5358'),\n  Color4.fromHex('#F6821C'),\n  Color4.fromHex('#FFC600'),\n\n  Color4.fromHex('#62BA46'),\n  Color4.fromHex('#E6BFE8'),\n  Color4.fromHex('#FEA3D2'),\n  Color4.fromHex('#FFA0A3'),\n  Color4.fromHex('#FBC276'),\n  Color4.fromHex('#FFFB85'),\n  Color4.fromHex('#AADC99'),\n];\n\nfunction ColorPickerHighlight ({ onChange }: any) {\n  const [selected, setSelected] = useState(Color4.blackHighlight);\n\n  return (\n    <div className={styles.colorWrap}>\n      {\n        highlightC.map((color, index) => (\n          <button\n            key={index}\n            style={{ backgroundColor: color.toHexString() }}\n            className={cn(styles.color, {\n              [styles.colorActive]: selected.toHexString() === color.toHexString(),\n            })}\n            onClick={() => {\n              setSelected(color);\n              onChange(color);\n            }}\n          >\n          </button>\n        ))\n      }\n    </div>\n  );\n}\n\nfunction ColorPicker ({ onChange }: any) {\n  const [selected, setSelected] = useState(Color4.black);\n\n  return (\n    <>\n      <div className={styles.colorWrap}>\n        {\n          COLOR.slice(0, 7).map((color, index) => (\n            <button\n              key={index}\n              style={{ backgroundColor: color.toHexString() }}\n              className={cn(styles.color, {\n                [styles.colorActive]: selected.toHexString() === color.toHexString(),\n              })}\n              onClick={() => {\n                setSelected(color);\n                onChange(color);\n              }}\n            >\n            </button>\n          ))\n        }\n      </div>\n\n      <div className={styles.colorWrap}>\n        {\n          COLOR.slice(7).map((color, index) => (\n            <button\n              key={index}\n              style={{ backgroundColor: color.toHexString() }}\n              className={cn(styles.color, {\n                [styles.colorActive]: selected.toHexString() === color.toHexString(),\n              })}\n              onClick={() => {\n                setSelected(color);\n                onChange(color);\n              }}\n            >\n            </button>\n          ))\n        }\n      </div>\n    </>\n  );\n}\n\nfunction PencilOption({ setColorPen, setThicknessPen }: any) {\n  const [thickness, setThickness] = useState(2);\n\n  return (\n    <div className={styles.options}>\n      <div>\n        <ColorPicker\n          onChange={(color: any) => setColorPen(color)}\n        />\n      </div>\n\n      <div className={styles.line}></div>\n\n      <div>\n        <input max={10}\n          min={1}\n          step={0.1}\n          type=\"range\"\n          value={thickness}\n          onChange={(e) => {\n            setThicknessPen(Number.parseFloat(e.target.value));\n            setThickness(Number.parseFloat(e.target.value));\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction HighlightOption({ setColorHighlight }: any) {\n  return (\n    <div className={styles.options}>\n      <ColorPickerHighlight\n        onChange={(color: any) => setColorHighlight(color)}\n      />\n    </div>\n  );\n}\n\nfunction ShapeOption({ changeColorShape, changeBorderColorShape,\n  onThicknessChange\n}: any) {\n\n  return (\n    <div className={styles.options}>\n      <div>\n        <ColorPicker\n          onChange={(color: any) => changeColorShape(color)}\n        />\n      </div>\n\n      <div className={styles.line}></div>\n\n      <div>\n        <ColorPicker\n          onChange={(color: any) => changeBorderColorShape(color)}\n        />\n      </div>\n\n      <div className={styles.line}></div>\n\n      <div>\n        <input defaultValue={0}\n          max={20}\n          min={0}\n          step={1}\n          type=\"range\"\n          // value={thickness}\n          onChange={(e) => {\n            onThicknessChange(Number.parseFloat(e.target.value));\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction ControlDrawer(props: any) {\n  const {\n    setColorPen,\n    refEditor,\n    setThicknessPen,\n    setColorHighlight,\n    changeBorderColorShape,\n    onUndo,\n    changeColorShape,\n    changeShape,\n    onThicknessChange,\n    onRedo,\n    onClear,\n  } = props;\n  const [tool, setTool] = useState<'select' | 'text' | 'pencil' | 'highlighter' | 'eraser' | 'shapes' | null>(null);\n\n  const [type, setType] = useState(ShapeType.square);\n\n  return (\n    <>\n      <div\n        className={styles.wrapper}\n      >\n        <div className={styles.pen}>\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'select',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'select') {\n                setTool(null);\n                penTool[0].setEnabled(false);\n\n                return;\n              }\n              setTool('select');\n              penTool[0].setEnabled(true);\n            }}\n          >\n            <HugeiconsCursorRectangleSelection01 />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'text',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[1]);\n              if (tool === 'text') {\n                penTool[1].setEnabled(false);\n\n                setTool(null);\n                return;\n              }\n              setTool('text');\n              penTool[1].setEnabled(true);\n            }}\n          >\n            <MdiFormatLetterCase />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'pencil',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'pencil') {\n                setTool(null);\n                penTool[2].setEnabled(false);\n                return;\n              }\n              setTool('pencil');\n              penTool[2].setEnabled(true);\n            }}\n          >\n            <MaterialSymbolsEdit />\n          </button>\n\n          <button\n\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'highlighter',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'highlighter') {\n                setTool(null);\n                penTool[3].setEnabled(false);\n                return;\n              }\n              setTool('highlighter');\n              penTool[3].setEnabled(true);\n            }}\n          >\n            <PhHighlighter />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'eraser',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'eraser') {\n                setTool(null);\n                penTool[4].setEnabled(false);\n                return;\n              }\n              setTool('eraser');\n              penTool[4].setEnabled(true);\n            }}\n          >\n            <OuiEraser />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button className={cn(styles.tool, {\n            [styles.active]: tool === 'shapes' && type === ShapeType.square,\n          })}\n          onClick={() => {\n            const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n            refEditor.current!.toolController.setToolEnabled(penTool[5]);\n            setTool('shapes');\n            penTool[5].setEnabled(true);\n\n            changeShape(ShapeType.square);\n            setType(ShapeType.square);\n          }}\n          >\n            <MdiSquareOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.rectangle,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.rectangle);\n              setType(ShapeType.rectangle);\n            }}\n          >\n            <MaterialSymbolsRectangleOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.circle,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.circle);\n              setType(ShapeType.circle);\n            }}\n          >\n            <MaterialSymbolsCircleOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.triangle,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.triangle);\n              setType(ShapeType.triangle);\n            }}\n          >\n            <TablerTriangle />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.hexagonal,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.hexagonal);\n              setType(ShapeType.hexagonal);\n            }}\n          >\n            <MaterialSymbolsHexagonOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.diamond,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.diamond);\n              setType(ShapeType.diamond);\n            }}\n          >\n            <MingcuteDiamondSquareLine />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.arrow,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.arrow);\n              setType(ShapeType.arrow);\n            }}\n          >\n            <IcSharpArrowRightAlt />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.line,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.line);\n              setType(ShapeType.line);\n            }}\n          >\n            <PhLineSegmentFill />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.heart,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.heart);\n              setType(ShapeType.heart);\n            }}\n          >\n            <IcSharpFavorite />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.star,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.star);\n              setType(ShapeType.star);\n            }}\n          >\n            <MaterialSymbolsKidStar />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.cloud,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.cloud);\n              setType(ShapeType.cloud);\n            }}\n          >\n            <MaterialSymbolsCloud />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.parallelogram,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.parallelogram);\n              setType(ShapeType.parallelogram);\n            }}\n          >\n            <AkarIconsParallelogram />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool)}\n            onClick={onUndo}\n          >\n            <SolarUndoLeftRoundBold />\n          </button>\n\n          <button\n            className={cn(styles.tool)}\n\n            onClick={onRedo}\n\n          >\n            <SolarUndoRightRoundBold />\n          </button>\n\n          <button\n            className={cn(styles.tool)}\n\n            onClick={onClear}\n\n          >\n            <MaterialSymbolsDelete />\n          </button>\n        </div>\n\n        <div className={styles.optionsWrap}>\n          {tool === 'pencil' && <PencilOption\n            setColorPen={setColorPen}\n            setThicknessPen={setThicknessPen}\n          />}\n\n          {tool === 'highlighter' && <HighlightOption setColorHighlight={setColorHighlight} />}\n\n          {tool === 'shapes' && <ShapeOption\n            changeBorderColorShape={changeBorderColorShape}\n            changeColorShape={changeColorShape}\n            changeShape={changeShape}\n            onThicknessChange={onThicknessChange}\n          />}\n        </div>\n      </div>\n\n    </>\n  );\n}\n\nexport default ControlDrawer;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport {\n  makeDropdownToolbar,\n  Editor as Editor4,\n} from 'easydrawer';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport ControlDrawer from '@/extensions/Drawer/components/ControlDrawer/ControlDrawer';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\ninterface IProps {\n  editor: Editor, upload?: any\n}\n\nlet clear = false;\n\nexport const DrawerActiveButton: React.FC<IProps> = ({ editor, upload }) => {\n  const [visible, toggleVisible] = useState(false);\n  const refEditor = useRef<Editor4 | null>(null);\n  const refWidget = useRef<any>(null);\n\n  const mermaidInit = () => {\n    const init = async () => {\n      const parentElement = document.querySelector('#easydrawer');\n\n      if (!parentElement) return;\n\n      refEditor.current = new Editor4(parentElement as any, {\n        wheelEventsEnabled: false,\n        disableZoom: true,\n      });\n\n      refWidget.current = makeDropdownToolbar(refEditor.current);\n      refWidget.current.addDefaultToolWidgets();\n    };\n\n    init();\n  };\n\n  useEffect(() => {\n    if (visible) {\n      setTimeout(() => {\n        mermaidInit();\n      }, 200);\n    }\n  }, [visible]);\n\n  const setSvg = async () => {\n    if (refEditor.current) {\n      const svg = refEditor.current.toSVG() as unknown as HTMLElement;\n      const contentHtml = svg.outerHTML;\n      // const { width, height } = svg.getBoundingClientRect();\n      const name = `drawer-${shortId()}.svg`;\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setDrawer(\n          {\n            type: 'drawer',\n            src,\n            alt: encodeURIComponent(contentHtml),\n            width: 426,\n            height: 212\n          },\n          !!contentHtml,\n        )\n        .run();\n    }\n    toggleVisible(false);\n  };\n\n  const setColorPen = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setThicknessPen = (thickness: number) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(thickness);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setColorHighlight = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[3] as any;\n\n    const shapeWidget = refWidget.current.getWidgetById('pen-2');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeShape = (type: any) => {\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (shapeWidget) {\n      shapeWidget.setShapeType(type);\n    }\n  };\n\n  const changeColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onThicknessChange = (v: any) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(v);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeBorderColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setBorderColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onUndo =() => {\n    if (clear) {\n      while (refEditor.current!.history.redoStackSize > 0) {\n        refEditor.current!.history.redo();\n      }\n      clear = false;\n      return;\n    }\n\n    refEditor.current!.history.undo();\n  };\n\n  const onRedo =() => {\n    if (clear) {\n      return;\n    }\n\n    refEditor.current!.history.redo();\n  };\n\n  const onClear =() => {\n    if (clear) {\n      return;\n    }\n\n    while (refEditor.current!.history.undoStackSize > 0) {\n      onUndo();\n    }\n    clear = true;\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"PencilRuler\"\n          tooltip=\"Drawer\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Drawer\n        </DialogTitle>\n\n        <div style={{ height: '600px', width: '100%', borderWidth: 1, background: 'white', position: 'relative' }}>\n          <div\n            className='richtext-size-full'\n            id='easydrawer'\n          >\n          </div>\n\n          <ControlDrawer\n            changeBorderColorShape={changeBorderColorShape}\n            changeColorShape={changeColorShape}\n            changeShape={changeShape}\n            onClear={onClear}\n            onRedo={onRedo}\n            onThicknessChange={onThicknessChange}\n            onUndo={onUndo}\n            refEditor={refEditor}\n            setColorHighlight={setColorHighlight}\n            setColorPen={setColorPen}\n            setThicknessPen={setThicknessPen}\n          />\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setSvg}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper, isNumber } from '@tiptap/react';\nimport { throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\nimport { clamp } from '@/utils/utils';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nexport function NodeViewDrawer({ editor, node, updateAttributes, getPos, selected }: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align } = node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h } = node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n      },\n    };\n  }, [node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(node.attrs.width);\n    let height = Number(node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n\n      const { width: wI, height: hI } = node?.attrs;\n      const ratio = wI / hI;\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = Math.round(width / ratio);\n\n      updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, updateAttributes, node?.attrs],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper className=\"image-view\"\n      style={{ ...imageMaxStyle, width: '100%', textAlign: align }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={{ ...imageMaxStyle, background: '#fff' }}\n        className={`image-view__body ${selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {editor.view.editable && (selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport type { CommandProps } from '@tiptap/core';\nimport { mergeAttributes } from '@tiptap/core';\nimport TiptapImage from '@tiptap/extension-image';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { DrawerActiveButton } from '@/extensions/Drawer/components/DrawerActiveButton';\nimport { NodeViewDrawer } from '@/extensions/Drawer/components/NodeViewDrawer/NodeViewDrawer';\nimport type { GeneralOptions } from '@/types';\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    drawer: {\n      setDrawer: (options: any, replace?: any) => ReturnType\n      setAlignImageDrawer: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport interface DrawerOptions extends GeneralOptions<DrawerOptions> {\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n}\n\nexport const Drawer = TiptapImage.extend<DrawerOptions>({\n  name: 'drawer',\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      inline: false,\n      content: '',\n      marks: '',\n      group: 'block',\n      draggable: false,\n      selectable: true,\n      atom: true,\n      HTMLAttributes: {\n        class: 'drawer',\n      },\n      button: ({ editor, t, extension }: any) => ({\n        component: DrawerActiveButton,\n        componentProps: {\n          action: () => {\n            return true;\n          },\n          isActive: () => false,\n          disabled: false,\n          editor,\n          icon: 'PencilRuler',\n          tooltip: t('editor.drawer.tooltip'),\n          upload: extension?.options?.upload,\n        },\n      }),\n    };\n  },\n\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const width = img?.getAttribute('width');\n\n          return width ? Number.parseInt(width, 10) : 320;\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      height: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const height = img?.getAttribute('height');\n\n          return height ? Number.parseInt(height, 10) : 212;\n        },\n        renderHTML: (attributes) => {\n          return {\n            height: attributes.height,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewDrawer);\n  },\n\n  // @ts-ignore\n  addCommands() {\n    return {\n      setDrawer:\n          (\n            options: { src: string, alt?: string },\n            replace?: boolean,\n          ) =>\n            ({ commands, editor }: CommandProps) => {\n              if (replace) {\n                return commands.insertContent({\n                  type: this.name,\n                  attrs: options,\n                });\n              }\n              return commands.insertContentAt(editor.state.selection.anchor, {\n                type: this.name,\n                attrs: options,\n              });\n            },\n\n      setAlignImageDrawer:\n            (align: any) =>\n              ({ commands }: any) => {\n                return commands.updateAttributes(this.name, { align });\n              },\n    };\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    const { align } = HTMLAttributes;\n    const style = align ? `text-align: ${align};` : '';\n\n    return [\n      'div', // Parent element\n      {\n        style,\n        class: 'imageDrawer',\n      },\n      [\n        'img',\n        mergeAttributes(\n          // @ts-ignore\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=imageDrawer]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n          const height = img?.getAttribute('height');\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            width: width ? Number.parseInt(width, 10) : null,\n            height: height ? Number.parseInt(height, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n          };\n        },\n      },\n    ];\n  },\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport {\n  makeDropdownToolbar,\n  Editor as Editor4,\n} from 'easydrawer';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport ControlDrawer from '@/extensions/Drawer/components/ControlDrawer/ControlDrawer';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\nlet clear = false;\n\nexport function EditDrawerBlock ({ editor, attrs, extension }: any) {\n  const [visible, toggleVisible] = useState(false);\n  const refEditor = useRef<Editor4 | null>(null);\n  const refWidget = useRef<any>(null);\n  const { alt, align } = attrs;\n  const upload = extension?.options.upload;\n\n  const mermaidInit = () => {\n    const init = async () => {\n      const parentElement = document.querySelector('#easydrawer');\n\n      if (!parentElement) return;\n\n      refEditor.current = new Editor4(parentElement as any, {\n        wheelEventsEnabled: false,\n        disableZoom: true,\n      });\n\n      refWidget.current = makeDropdownToolbar(refEditor.current);\n      refWidget.current.addDefaultToolWidgets();\n\n      refEditor.current.loadFromSVG(decodeURIComponent(alt));\n    };\n\n    init();\n  };\n\n  useEffect(() => {\n    if (visible) {\n      setTimeout(() => {\n        mermaidInit();\n      }, 200);\n    }\n  }, [visible]);\n\n  const setSvg = async () => {\n    if (refEditor.current) {\n      const svg = refEditor.current.toSVG() as unknown as HTMLElement;\n      const contentHtml = svg.outerHTML;\n      const name = `drawer-${shortId()}.svg`;\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setDrawer(\n          {\n            type: 'drawer',\n            src,\n            alt: encodeURIComponent(contentHtml),\n            width: 426,\n            height: 212\n          },\n          !!contentHtml,\n        )\n        .run();\n      editor?.commands.setAlignImageDrawer(align);\n    }\n    toggleVisible(false);\n  };\n\n  const setColorPen = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setThicknessPen = (thickness: number) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(thickness);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setColorHighlight = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[3] as any;\n\n    const shapeWidget = refWidget.current.getWidgetById('pen-2');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeShape = (type: any) => {\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (shapeWidget) {\n      shapeWidget.setShapeType(type);\n    }\n  };\n\n  const changeColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onThicknessChange = (v: any) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(v);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeBorderColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setBorderColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onUndo =() => {\n    if (clear) {\n      while (refEditor.current!.history.redoStackSize > 0) {\n        refEditor.current!.history.redo();\n      }\n      clear = false;\n      return;\n    }\n\n    refEditor.current!.history.undo();\n  };\n\n  const onRedo =() => {\n    if (clear) {\n      return;\n    }\n\n    refEditor.current!.history.redo();\n  };\n\n  const onClear =() => {\n    if (clear) {\n      return;\n    }\n\n    while (refEditor.current!.history.undoStackSize > 0) {\n      onUndo();\n    }\n    clear = true;\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Pencil\"\n          tooltip=\"Edit Drawer\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Edit Drawer\n        </DialogTitle>\n\n        <div style={{ height: '100%', borderWidth: 1, background: 'white', position: 'relative' }}>\n          <div\n            className='richtext-size-full'\n            id='easydrawer'\n          >\n          </div>\n\n          <ControlDrawer\n            changeBorderColorShape={changeBorderColorShape}\n            changeColorShape={changeColorShape}\n            changeShape={changeShape}\n            onClear={onClear}\n            onRedo={onRedo}\n            onThicknessChange={onThicknessChange}\n            onUndo={onUndo}\n            refEditor={refEditor}\n            setColorHighlight={setColorHighlight}\n            setColorPen={setColorPen}\n            setThicknessPen={setThicknessPen}\n          />\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setSvg}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\n\nexport function useExtension(editor: Editor, attrbute: string) {\n  const [extension, setExtension] = useState<any>(undefined);\n\n  useEffect(() => {\n    const listener = () => {\n      const extension = editor.extensionManager.extensions.find(extension => extension.name === attrbute);\n\n      if (!extension) {\n        return;\n      }\n\n      setExtension(extension as any);\n    };\n\n    editor.on('selectionUpdate', listener);\n    editor.on('transaction', listener);\n\n    return () => {\n      editor.off('selectionUpdate', listener);\n      editor.off('transaction', listener);\n    };\n  }, [editor, attrbute]);\n\n  return extension;\n}\n","import { Fragment, useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu as BubbleMenuReact } from '@tiptap/react';\n\nimport { Separator, getBubbleDrawer } from '@/components';\nimport { Drawer } from '@/extensions';\nimport { EditDrawerBlock } from '@/extensions/Drawer/components/EditDrawerBlock';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { useExtension } from '@/hooks/useExtension';\nimport { useLocale } from '@/locales';\n\ninterface IPropsBubbleMenu {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Fragment>\n      {item.type === 'divider'\n        ? (\n          <Separator className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n            orientation=\"vertical\"\n          />\n        )\n        : (\n          <Comp\n            {...item.componentProps}\n            disabled={disabled || item?.componentProps?.disabled}\n            editor={editor}\n          />\n        )}\n    </Fragment>\n  );\n}\n\nfunction isDrawerNode(node: any) {\n  return node.type.name === 'drawer';\n}\n\nfunction BubbleMenuDrawer(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const attrs = useAttributes<any>(props.editor, Drawer.name);\n\n  const extension = useExtension(props.editor, Drawer.name);\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isDrawer = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isDrawerNode(node)) {\n        isDrawer = true;\n        return false; // Stop iteration if an mermaid is found\n      }\n    });\n\n    return isDrawer;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleDrawer(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  if (item.type === 'edit' && attrs?.src) {\n                    return (\n                      <EditDrawerBlock\n                        attrs={attrs}\n                        editor={props.editor}\n                        extension={extension}\n                        key={`bubbleMenu-drawer-${key}`}\n                      />\n                    );\n                  }\n\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-drawer-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nexport { BubbleMenuDrawer };\n","import { useEffect, useState } from 'react';\nimport { Button, Input, Label, Popover, PopoverContent, PopoverTrigger } from '@/components/ui';\nimport { useLocale } from '@/locales';\n\ninterface ISize {\n  width: number | string, height: number | string \n}\n\ninterface IProps {\n  width: number | string\n  maxWidth?: number | string\n  height: number | string\n  onOk: (arg: ISize) => void\n  children: React.ReactNode\n}\n\nconst containerStyle = { padding: '0 12px 12px' };\n\nexport const SizeSetter: React.FC<IProps> = ({ width, maxWidth, height, onOk, children }: any) => {\n  const { t } = useLocale();\n\n  const [form, setForm] = useState({\n    width: '',\n    height: '',\n    maxWidth: '',\n  });\n\n  useEffect(() => {\n    setForm({\n      width,\n      height,\n      maxWidth,\n    });\n  }, [height, maxWidth, width]);\n\n  function handleSubmit(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    onOk(form);\n  }\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild>\n        {children}\n      </PopoverTrigger>\n\n      <PopoverContent>\n        <div style={containerStyle}>\n          <form className=\"richtext-flex richtext-flex-col richtext-gap-2\" onSubmit={handleSubmit}>\n            <Label className=\"mb-[6px]\">\n              Width\n            </Label>\n\n            <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n              <div className=\"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm\">\n                <Input\n                  type=\"number\"\n                  value={form.width}\n                  required\n                  onChange={e => setForm({ ...form, width: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <Label className=\"mb-[6px]\">\n              Max Width\n            </Label>\n\n            <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n              <div className=\"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm\">\n                <Input\n                  type=\"number\"\n                  value={form.maxWidth}\n                  required\n                  onChange={e => setForm({ ...form, maxWidth: e.target.value })}\n                />\n              </div>\n            </div>\n            <Label className=\"mb-[6px]\">\n              Height\n            </Label>\n            <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n              <div className=\"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm\">\n                <Input\n                  type=\"number\"\n                  value={form.height}\n                  required\n                  onChange={e => setForm({ ...form, height: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <Button type=\"submit\" className=\"richtext-self-end richtext-mt-2\">\n              {t('editor.link.dialog.button.apply')}\n            </Button>\n          </form>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n","import type { Editor } from '@tiptap/core';\n\nconst cache = new Map();\n\nexport function getEditorContainerDOMSize(editor: Editor): { width: number } {\n  const targetNode = editor.options.element as HTMLElement;\n\n  if (!cache.has('width')) {\n    cache.set('width', targetNode.clientWidth);\n  }\n\n  if (cache.has('width') && cache.get('width') <= 0) {\n    cache.set('width', targetNode.clientWidth);\n  }\n\n  const config = { attributes: true, childList: true, subtree: true };\n  const callback = function () {\n    cache.set('width', targetNode.clientWidth);\n  };\n  const observer = new MutationObserver(callback);\n  observer.observe(targetNode, config);\n\n  editor.on('destroy', () => {\n    observer.disconnect();\n  });\n\n  return { width: cache.get('width') };\n}\n","import { useCallback, useEffect } from 'react';\n\nimport { BubbleMenu } from '@tiptap/react';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { ActionButton } from '@/components/ActionButton';\nimport { SizeSetter } from '@/components/SizeSetter/SizeSetter';\nimport { useLocale } from '@/locales';\nimport type { IExcalidrawAttrs } from '@/extensions/Excalidraw';\nimport { Excalidraw } from '@/extensions/Excalidraw';\nimport { triggerOpenExcalidrawSettingModal } from '@/utils/_event';\nimport { deleteNode } from '@/utils/delete-node';\nimport { getEditorContainerDOMSize } from '@/utils/editor-container-size';\n\nexport function BubbleMenuExcalidraw({ editor }: any) {\n  const { t } = useLocale();\n  const { width: maxWidth } = getEditorContainerDOMSize(editor);\n  const attrs = useAttributes<IExcalidrawAttrs>(editor, Excalidraw.name, {\n    defaultShowPicker: false,\n    createUser: '',\n    width: 0,\n    height: 0,\n  });\n  const { defaultShowPicker, createUser, width, height } = attrs;\n\n  const setSize = useCallback(\n    (size: any) => {\n      editor\n        .chain()\n        .updateAttributes(Excalidraw.name, size)\n        .setNodeSelection(editor.state.selection.from)\n        .focus()\n        .run();\n    },\n    [editor],\n  );\n  const openEditLinkModal = useCallback(() => {\n    triggerOpenExcalidrawSettingModal(attrs);\n  }, [editor, attrs]);\n  const shouldShow = useCallback(() => editor.isActive(Excalidraw.name), [editor]);\n  const deleteMe = useCallback(() => deleteNode(Excalidraw.name, editor), [editor]);\n\n  useEffect(() => {\n    if (defaultShowPicker) {\n      openEditLinkModal();\n      editor.chain().updateAttributes(Excalidraw.name, { defaultShowPicker: false }).focus().run();\n    }\n  }, [createUser, defaultShowPicker, editor, openEditLinkModal]);\n\n  return (\n    <BubbleMenu\n      className=\"bubble-menu\"\n      editor={editor}\n      pluginKey=\"excalidraw-bubble-menu\"\n      shouldShow={shouldShow}\n      tippyOptions={{\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        placement: 'bottom-start',\n        offset: [-2, 16],\n        zIndex: 9999,\n        // onHidden: () => {\n        //   toggleVisible(false)\n        // },\n      }}\n    >\n      <div className=\"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background\">\n\n        <ActionButton\n          icon=\"Pencil\"\n          action={openEditLinkModal}\n          tooltip={t('editor.edit')}\n        />\n\n        <SizeSetter width={width as any} maxWidth={maxWidth} height={height as any} onOk={setSize}>\n          <ActionButton\n            icon=\"Settings\"\n            tooltip={t('editor.settings')}\n          />\n        </SizeSetter>\n\n        <ActionButton\n          icon=\"Trash2\"\n          action={deleteMe}\n          tooltip={t('editor.delete')}\n        />\n\n      </div>\n    </BubbleMenu>\n  );\n}\n","import { useCallback, useEffect, useState } from 'react';\n\nimport { BubbleMenu } from '@tiptap/react';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { ActionButton } from '@/components/ActionButton';\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button, Input } from '@/components/ui';\nimport { SizeSetter } from '@/components/SizeSetter/SizeSetter';\nimport { useLocale } from '@/locales';\nimport type { IIframeAttrs } from '@/extensions/Iframe';\nimport { Iframe } from '@/extensions/Iframe';\nimport { deleteNode } from '@/utils/delete-node';\n\nexport function BubbleMenuIframe({ editor }: any) {\n  const { t } = useLocale();\n  const { width, height, url } = useAttributes<IIframeAttrs>(editor, Iframe.name, {\n    width: 0,\n    height: 0,\n    url: '',\n    defaultShowPicker: false,\n  });\n  const [visible, toggleVisible] = useState(false);\n  const [formUrl, setFormUrl] = useState('');\n\n  const handleCancel = useCallback(() => {\n    toggleVisible(false);\n  }, [toggleVisible]);\n\n  useEffect(() => {\n    if (visible)\n      setFormUrl(url as any);\n  }, [visible, url]);\n\n  const handleOk = useCallback(() => {\n    editor\n      .chain()\n      .updateAttributes(Iframe.name, {\n        url: formUrl,\n      })\n      .setNodeSelection(editor.state.selection.from)\n      .focus()\n      .run();\n    toggleVisible(false);\n  }, [editor, formUrl, toggleVisible]);\n\n  const visitLink = useCallback(() => {\n    window.open(url, '_blank');\n  }, [url]);\n\n  const openEditLinkModal = useCallback(() => {\n    toggleVisible(true);\n  }, [toggleVisible]);\n\n  const setSize = useCallback(\n    (size: any) => {\n      editor.chain().updateAttributes(Iframe.name, size).setNodeSelection(editor.state.selection.from).focus().run();\n    },\n    [editor],\n  );\n  const shouldShow = useCallback(() => editor.isActive(Iframe.name) && !url, [editor, url]);\n  const deleteMe = useCallback(() => deleteNode(Iframe.name, editor), [editor]);\n\n  return (\n    <>\n      <BubbleMenu\n        className=\"bubble-menu\"\n        editor={editor}\n        pluginKey=\"iframe-bubble-menu\"\n        shouldShow={shouldShow}\n        tippyOptions={{\n          popperOptions: {\n            modifiers: [{ name: 'flip', enabled: false }],\n          },\n          placement: 'bottom-start',\n          offset: [-2, 16],\n          zIndex: 9999,\n        // onHidden: () => {\n        //   toggleVisible(false)\n        // },\n        }}\n      >\n\n        <div className=\"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background\">\n          <ActionButton\n            action={visitLink}\n            icon=\"Eye\"\n            tooltip=\"Visit Link\"\n          />\n          <ActionButton\n            action={openEditLinkModal}\n            icon=\"Pencil\"\n            tooltip=\"Open Edit Link\"\n          />\n\n          <SizeSetter width={width as any} height={height as any} onOk={setSize}>\n            <ActionButton\n              icon=\"Settings\"\n              tooltip={t('editor.settings')}\n            />\n          </SizeSetter>\n\n          <ActionButton\n            action={deleteMe}\n            icon=\"Trash2\"\n            tooltip={t('editor.delete')}\n          />\n        </div>\n      </BubbleMenu>\n\n      <Dialog\n        open={visible}\n        onOpenChange={toggleVisible}\n      >\n        <DialogTrigger />\n\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>\n              Edit Link Iframe\n            </DialogTitle>\n          </DialogHeader>\n\n          <Input\n            value={formUrl}\n            onInput={(e: any) => setFormUrl(e.target.value)}\n            type=\"url\"\n            autoFocus\n            placeholder=\"Enter link\"\n          />\n\n          <DialogFooter>\n            <Button onClick={handleCancel}>\n              Cancel\n            </Button>\n            <Button onClick={handleOk}>\n              OK\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","import { BubbleMenu } from '@tiptap/react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { HelpCircle, Pencil, Trash2 } from 'lucide-react';\nimport katex from 'katex';\nimport { Katex } from '@/extensions';\nimport { deleteNode } from '@/utils/delete-node';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport type { IKatexAttrs } from '@/extensions/Katex';\nimport { Textarea } from '@/components/ui/textarea';\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\n\nfunction BubbleMenuKatex({ editor, ...props }: any) {\n  const attrs = useAttributes<IKatexAttrs>(editor, Katex.name, {\n    text: '',\n    defaultShowPicker: false,\n  });\n  const { text, defaultShowPicker } = attrs;\n\n  const [currentValue, setCurrentValue] = useState('');\n  const [visible, toggleVisible] = useState(false);\n\n  const shouldShow = useCallback(() => editor.isActive(Katex.name), [editor]);\n\n  const deleteMe = useCallback(() => deleteNode(Katex.name, editor), [editor]);\n\n  const submit = useCallback(() => {\n    editor.chain().focus().setKatex({ text: currentValue }).run();\n    toggleVisible(false);\n  }, [editor, currentValue]);\n\n  useEffect(() => {\n    if (defaultShowPicker) {\n      toggleVisible(true);\n      editor.chain().updateAttributes(Katex.name, { defaultShowPicker: false }).focus().run();\n    }\n  }, [editor, defaultShowPicker, toggleVisible]);\n\n  useEffect(() => {\n    if (visible)\n      setCurrentValue(text || '');\n  }, [visible]);\n\n  const formatText = useMemo(() => {\n    try {\n      return katex.renderToString(`${currentValue}`);\n    } catch {\n      return currentValue;\n    }\n  }, [currentValue]);\n\n  const previewContent = useMemo(\n    () => {\n      if (`${currentValue}`.trim()) {\n        return (\n          <span contentEditable={false} dangerouslySetInnerHTML={{ __html: formatText || '' }}></span>\n        );\n      }\n\n      return null;\n    },\n    [currentValue, formatText],\n  );\n\n  return (\n    <BubbleMenu\n      editor={editor}\n      pluginKey=\"Katex-bubble-menu\"\n      shouldShow={shouldShow}\n      tippyOptions={{\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        placement: 'bottom-start',\n        offset: [-2, 16],\n        zIndex: 9999,\n        onHidden: () => {\n          toggleVisible(false);\n        },\n      }}\n    >\n      {props?.disabled\n        ? (\n          <></>\n        )\n        : (\n          <div className=\"richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800\">\n            {visible\n              ? (\n                <>\n                  <Textarea\n                    value={currentValue}\n                    onChange={e => setCurrentValue(e.target.value)}\n                    autoFocus\n                    placeholder=\"Formula text\"\n                    rows={3}\n                    defaultValue={text}\n                    style={{ marginBottom: 8 }}\n                  />\n\n                  {previewContent && (\n                    <div className=\"richtext-my-[10px] richtext-p-[10px] richtext-rounded-[6px] !richtext-border-[1px] richtext-whitespace-nowrap richtext-overflow-auto\">\n                      {previewContent}\n                    </div>\n                  )}\n\n                  <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-gap-[6px]\">\n                    <Button onClick={submit} className=\"richtext-flex-1\">\n                      Submit\n                    </Button>\n\n                    <a href=\"https://katex.org/docs/supported\" target=\"_blank\" rel=\"noreferrer noopener\">\n                      <HelpCircle size={16} />\n                    </a>\n                  </div>\n                </>\n              )\n              : (\n                <div className=\"richtext-flex richtext-items-center richtext-justify-center richtext-gap-[6px]\">\n                  <ActionButton tooltip=\"Edit\" action={() => toggleVisible(!visible)}>\n                    <Pencil size={16} />\n                  </ActionButton>\n\n                  <ActionButton tooltip=\"Delete\" action={deleteMe}>\n                    <Trash2 size={16} />\n                  </ActionButton>\n                </div>\n              )}\n          </div>\n        )}\n\n    </BubbleMenu>\n  );\n}\n\nexport default BubbleMenuKatex;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport mermaid from 'mermaid';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\ninterface IProps {\n  editor: Editor, attrs?: any, extension?: any\n}\n\nconst defaultCode = 'graph TB\\na-->b';\n\nexport const EditMermaidBlock: React.FC<IProps> = ({ editor, attrs, extension }) => {\n  const { alt, align } = attrs;\n  const [mermaidCode, setMermaidCode] = useState(decodeURIComponent(alt ?? defaultCode));\n  const [svgCode, setSvgCode] = useState('');\n  const [visible, toggleVisible] = useState(false);\n  const mermaidRef = useRef<HTMLElement | null>(null);\n\n  const upload = extension?.options.upload;\n\n  const renderMermaid = async (value: any) => {\n    try {\n      const { svg } = await mermaid.render('mermaid-svg', value);\n      setSvgCode(svg);\n    } catch {\n      setSvgCode('');\n    }\n  };\n\n  const mermaidInit = () => {\n    mermaid.initialize({\n      darkMode: false,\n      startOnLoad: false,\n      // fontFamily:'',\n      fontSize: 12,\n      theme: 'base',\n    });\n    renderMermaid(mermaidCode);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      mermaidInit();\n    }\n  }, [visible]);\n\n  useEffect(() => {\n    if (visible) {\n      renderMermaid(mermaidCode);\n    }\n  }, [mermaidCode]);\n\n  const setMermaid = async () => {\n    if (mermaidCode === '') {\n      return;\n    }\n    if (mermaidCode) {\n      const svg = mermaidRef.current!.querySelector('svg') as unknown as HTMLElement;\n      const { width, height } = svg.getBoundingClientRect();\n      const name = `mermaid-${shortId()}.svg`;\n      // const { size } = new Blob([svg.outerHTML], {\n      //   type: 'image/svg+xml',\n      // })\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setMermaid(\n          {\n            type: 'mermaid',\n            src,\n            alt: encodeURIComponent(mermaidCode),\n            width,\n            height,\n          },\n          !!mermaidCode,\n        )\n        .run();\n      editor?.commands.setAlignImageMermaid(align);\n    }\n    toggleVisible(false);\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Pencil\"\n          tooltip=\"Edit Mermaid\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Edit Mermaid\n        </DialogTitle>\n\n        <div style={{ height: '100%', border: '1px solid hsl(var(--border))' }}>\n          <div className=\"richtext-flex richtext-gap-[10px] richtext-rounded-[10px] richtext-p-[10px]\">\n            <Textarea\n              autoFocus\n              className=\"richtext-flex-1\"\n              defaultValue={defaultCode}\n              onChange={e => setMermaidCode(e.target.value)}\n              placeholder=\"Text\"\n              required\n              rows={10}\n              value={mermaidCode}\n              style={{\n                color: 'hsl(var(--richtext-foreground))',\n              }}\n            />\n\n            <div\n              className=\"richtext-flex richtext-flex-1 richtext-items-center richtext-justify-center richtext-rounded-[10px] richtext-p-[10px]\"\n              dangerouslySetInnerHTML={{ __html: svgCode }}\n              ref={mermaidRef as any}\n              style={{ height: '100%', border: '1px solid hsl(var(--border))', minHeight: 500, background: '#fff' }}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setMermaid}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { Fragment, useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu as BubbleMenuReact } from '@tiptap/react';\n\nimport { Separator, getBubbleMermaid } from '@/components';\nimport { Mermaid } from '@/extensions';\nimport { EditMermaidBlock } from '@/extensions/Mermaid/components/EditMermaidBlock';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { useExtension } from '@/hooks/useExtension';\nimport { useLocale } from '@/locales';\n\ninterface IPropsBubbleMenu {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Fragment>\n      {item.type === 'divider'\n        ? (\n          <Separator className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n            orientation=\"vertical\"\n          />\n        )\n        : (\n          <Comp\n            {...item.componentProps}\n            disabled={disabled || item?.componentProps?.disabled}\n            editor={editor}\n          />\n        )}\n    </Fragment>\n  );\n}\n\nfunction isMermaidNode(node: any) {\n  return node.type.name === 'mermaid';\n}\n\nfunction BubbleMenuMermaid(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const attrs = useAttributes<any>(props.editor, Mermaid.name);\n\n  const extension = useExtension(props.editor, Mermaid.name);\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isMermaid = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isMermaidNode(node)) {\n        isMermaid = true;\n        return false; // Stop iteration if an mermaid is found\n      }\n    });\n\n    return isMermaid;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleMermaid(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  if (item.type === 'edit' && attrs?.src) {\n                    return (\n                      <EditMermaidBlock\n                        attrs={attrs}\n                        editor={props.editor}\n                        extension={extension}\n                        key={`bubbleMenu-mermaid-${key}`}\n                      />\n                    );\n                  }\n\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-mermaid-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nexport { BubbleMenuMermaid };\n","import { useCallback, useState } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu } from '@tiptap/react';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Twitter } from '@/extensions';\nimport FormEditLinkTwitter from '@/extensions/Twitter/components/FormEditLinkTwitter';\nimport { useLocale } from '@/locales';\nimport { deleteNode } from '@/utils/delete-node';\n\nexport interface BubbleMenuTwitterProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nfunction BubbleMenuTwitter({ editor, disabled }: BubbleMenuTwitterProps) {\n  const [showEdit, setShowEdit] = useState(false);\n  const { t } = useLocale();\n\n  const shouldShow = useCallback(({ editor }: { editor: Editor }) => {\n    const isActive = editor.isActive(Twitter.name);\n    return isActive;\n  }, []);\n\n  const onSetLink = (src: string) => {\n    editor.commands.updateTweet({ src });\n    setShowEdit(false);\n  };\n\n  const deleteMe = useCallback(() => deleteNode(Twitter.name, editor), [editor]);\n\n  return (\n    <>\n      <BubbleMenu\n        editor={editor}\n        shouldShow={shouldShow}\n        tippyOptions={{\n          popperOptions: {\n            modifiers: [{ name: 'flip', enabled: false }],\n          },\n          placement: 'bottom-start',\n          offset: [-2, 16],\n          zIndex: 9999,\n          onHidden: () => {\n            setShowEdit(false);\n          },\n        }}\n      >\n        {disabled\n          ? (\n            <></>\n          )\n          : (\n            <>\n              {showEdit\n                ? (\n                  <FormEditLinkTwitter\n                    editor={editor}\n                    onSetLink={onSetLink}\n                  />\n                )\n                : (\n                  <div className=\"richtext-flex richtext-items-center richtext-gap-2 richtext-rounded-lg !richtext-border richtext-border-neutral-200 richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black\">\n                    <div className=\"richtext-flex richtext-flex-nowrap\">\n                      <ActionButton\n                        icon=\"Pencil\"\n                        tooltip={t('editor.link.edit.tooltip')}\n                        tooltipOptions={{ sideOffset: 15 }}\n                        action={() => {\n                          setShowEdit(true);\n                        }}\n                      />\n\n                      <ActionButton\n                        action={deleteMe}\n                        icon=\"Trash\"\n                        tooltip={t('editor.delete')}\n                        tooltipOptions={{ sideOffset: 15 }}\n                      />\n                    </div>\n                  </div>\n                )}\n            </>\n          )}\n      </BubbleMenu>\n    </>\n  );\n}\n\nexport { BubbleMenuTwitter };\n","import type { Editor } from '@tiptap/core';\n\nimport { BubbleMenuImage, BubbleMenuImageGif, BubbleMenuLink, BubbleMenuText, BubbleMenuVideo, ColumnsBubbleMenu, ContentMenu, TableBubbleMenu } from '@/components';\nimport { BubbleMenuDrawer } from '@/components/menus/components/BubbleMenuDrawer';\nimport { BubbleMenuExcalidraw } from '@/components/menus/components/BubbleMenuExcalidraw';\nimport { BubbleMenuIframe } from '@/components/menus/components/BubbleMenuIframe';\nimport BubbleMenuKatex from '@/components/menus/components/BubbleMenuKatex';\nimport { BubbleMenuMermaid } from '@/components/menus/components/BubbleMenuMermaid';\nimport { BubbleMenuTwitter } from '@/components/menus/components/BubbleMenuTwitter';\nimport { Image, ImageGif } from '@/extensions';\nimport type { BubbleMenuProps as BubbleMenuPropsType } from '@/types';\n\nexport interface BubbleMenuComponentProps {\n  editor: Editor\n  disabled?: boolean\n  bubbleMenu?: BubbleMenuPropsType\n}\n\n/**\n * Bubble Menu Component\n *\n * @param editor Editor instance\n * @param disabled Whether the menu is disabled\n * @param bubbleMenu Bubble menu configuration\n * @returns Bubble menu component\n */\nexport function BubbleMenu({ editor, disabled, bubbleMenu }: BubbleMenuComponentProps) {\n  const extensionsNames = editor.extensionManager.extensions.map(ext => ext.name);\n\n  const renderMenuItems = () => [\n    extensionsNames.includes('columns') && !bubbleMenu?.columnConfig?.hidden ? <ColumnsBubbleMenu editor={editor}\n      key=\"columns\"\n    /> : null,\n    extensionsNames.includes('table') && !bubbleMenu?.tableConfig?.hidden ? <TableBubbleMenu editor={editor}\n      key=\"table\"\n    /> : null,\n    extensionsNames.includes('link') && !bubbleMenu?.linkConfig?.hidden ? <BubbleMenuLink disabled={disabled}\n      editor={editor}\n      key=\"link\"\n    /> : null,\n    extensionsNames.includes(Image.name) && !bubbleMenu?.imageConfig?.hidden ? <BubbleMenuImage disabled={disabled}\n      editor={editor}\n      key=\"image\"\n    /> : null,\n    extensionsNames.includes(ImageGif.name) && !bubbleMenu?.imageGifConfig?.hidden ? <BubbleMenuImageGif disabled={disabled}\n      editor={editor}\n      key=\"imageGif\"\n    /> : null,\n    extensionsNames.includes('video') && !bubbleMenu?.videoConfig?.hidden ? <BubbleMenuVideo disabled={disabled}\n      editor={editor}\n      key=\"video\"\n    /> : null,\n    extensionsNames.includes('katex') && !bubbleMenu?.katexConfig?.hidden ? <BubbleMenuKatex disabled={disabled}\n      editor={editor}\n      key=\"katex\"\n    /> : null,\n    extensionsNames.includes('excalidraw') && !bubbleMenu?.excalidrawConfig?.hidden ? <BubbleMenuExcalidraw disabled={disabled}\n      editor={editor}\n      key=\"excalidraw\"\n    /> : null,\n    extensionsNames.includes('mermaid') && !bubbleMenu?.mermaidConfig?.hidden ? <BubbleMenuMermaid disabled={disabled}\n      editor={editor}\n      key=\"mermaid\"\n    /> : null,\n    extensionsNames.includes('iframe') && !bubbleMenu?.iframeConfig?.hidden ? <BubbleMenuIframe disabled={disabled}\n      editor={editor}\n      key=\"iframe\"\n    /> : null,\n    extensionsNames.includes('twitter') && !bubbleMenu?.twitterConfig?.hidden ? <BubbleMenuTwitter disabled={disabled}\n      editor={editor}\n      key=\"twitter\"\n    /> : null,\n    !bubbleMenu?.floatingMenuConfig?.hidden ? <ContentMenu disabled={disabled}\n      editor={editor}\n      key=\"content\"\n    /> : null,\n    !bubbleMenu?.textConfig?.hidden ? <BubbleMenuText disabled={disabled}\n      editor={editor}\n      key=\"text\"\n    /> : null,\n    extensionsNames.includes('drawer') && !bubbleMenu?.drawerConfig?.hidden ? <BubbleMenuDrawer disabled={disabled}\n      editor={editor}\n      key=\"drawer\"\n    /> : null,\n  ];\n\n  if (bubbleMenu?.render) {\n    return bubbleMenu.render({ editor, disabled: disabled || false, bubbleMenu }, renderMenuItems());\n  }\n\n  return renderMenuItems().filter(Boolean);\n}\n","export function NoFill() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"currentColor\" d=\"M18 14c0-4-6-10.8-6-10.8s-1.33 1.51-2.73 3.52l8.59 8.59c.09-.42.14-.86.14-1.31m-.88 3.12L12.5 12.5L5.27 5.27L4 6.55l3.32 3.32C6.55 11.32 6 12.79 6 14c0 3.31 2.69 6 6 6c1.52 0 2.9-.57 3.96-1.5l2.63 2.63l1.27-1.27z\"></path>\n    </svg>\n  );\n}\n","import React, { useEffect, useMemo, useState } from 'react';\n\nimport { Plus } from 'lucide-react';\nimport { HexColorPicker } from 'react-colorful';\n\nimport { Button, Input, Popover, PopoverContent, PopoverTrigger, Separator } from '@/components';\nimport { NoFill } from '@/components/icons/NoFill';\nimport { COLORS_LIST as DEFAULT_COLORS_LIST } from '@/constants';\nimport { useLocale } from '@/locales';\n\nexport interface ColorPickerProps {\n  highlight?: boolean\n  disabled?: boolean\n  colors?: string[]\n  defaultColor?: string\n  children: React.ReactNode\n  onChange?: (color: string | undefined) => void\n  setSelectedColor?: (color: string | undefined) => void\n  selectedColor?: string\n}\n\nfunction ColorPicker(props: ColorPickerProps) {\n  const { t } = useLocale();\n\n  const {\n    highlight = false,\n    disabled = false,\n    selectedColor,\n    setSelectedColor,\n    onChange,\n    colors = DEFAULT_COLORS_LIST,\n  } = props;\n\n  const chunkedColors = useMemo(() => {\n    const colorsArray = colors;\n    const chunked: string[][] = [];\n    for (let i = 0; i < colorsArray.length; i += 10) {\n      chunked.push(colorsArray.slice(i, i + 10));\n    }\n    return chunked;\n  }, [colors]);\n\n  const [recentColorsStore, setRecentColorsStore] = useState<string[]>([]);\n\n  const setRecentColor = (color: string) => {\n    const newRecentColors = [...recentColorsStore];\n    const index = newRecentColors.indexOf(color);\n    if (index !== -1) {\n      newRecentColors.splice(index, 1);\n    }\n    newRecentColors.unshift(color);\n    if (newRecentColors.length > 10) {\n      newRecentColors.pop();\n    }\n    setRecentColorsStore(newRecentColors);\n  };\n\n  function setColor(color: string | undefined) {\n    if (color === undefined) {\n      // clear color\n      setSelectedColor?.(color);\n      onChange?.(color);\n      return;\n    }\n    // check if color is correct\n    const isCorrectColor = /^#([\\da-f]{3}){1,2}$/i.test(color);\n    if (isCorrectColor) {\n      setSelectedColor?.(color);\n      onChange?.(color);\n      setRecentColor(color);\n    }\n  }\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild\n        className=\"!richtext-p-0\"\n        disabled={disabled}\n      >\n        {props?.children}\n      </PopoverTrigger>\n\n      <PopoverContent align=\"start\"\n        className=\"richtext-size-full richtext-p-2\"\n        hideWhenDetached\n        side=\"bottom\"\n      >\n        <div className=\"richtext-flex richtext-flex-col\">\n          {highlight\n            ? (\n              <div\n                className=\"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent\"\n                onClick={() => setColor(undefined)}\n              >\n                <NoFill />\n\n                <span className=\"richtext-ml-1 richtext-text-sm\">\n                  {t('editor.nofill')}\n                </span>\n              </div>\n            )\n            : (\n              <div\n                className=\"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent\"\n                onClick={() => {\n                  setColor(undefined);\n                }}\n              >\n                <NoFill />\n\n                <span className=\"richtext-ml-1 richtext-text-sm\">\n                  {t('editor.default')}\n                </span>\n              </div>\n            )}\n\n          {chunkedColors.map((items: string[], index: number) => {\n            return (\n              <span className=\"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2\"\n                key={index}\n              >\n                {items.map((item: string, idx) => {\n                  return (\n                    <span\n                      className=\"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm\"\n                      key={`sub-color-${idx}`}\n                      onClick={() => setColor(item)}\n                    >\n                      <span\n                        className=\"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent\"\n                        style={{\n                          backgroundColor: item,\n                        }}\n                      >\n                        {item === selectedColor\n                          ? (\n                            <svg\n                              className=\"richtext-absolute -richtext-top-px richtext-left-px richtext-block richtext-size-3\"\n                              viewBox=\"0 0 18 18\"\n                              style={{\n                                fill: 'rgb(255, 255, 255)',\n                              }}\n                            >\n                              <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path>\n                            </svg>\n                          )\n                          : (\n                            <svg\n                              viewBox=\"0 0 18 18\"\n                              style={{\n                                fill: 'rgb(255, 255, 255)',\n                                display: 'none',\n                              }}\n                            >\n                              <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path>\n                            </svg>\n                          )}\n                      </span>\n                    </span>\n                  );\n                })}\n              </span>\n            );\n          })}\n\n          <div>\n            <div className=\"richtext-my-1 richtext-text-sm\">\n              {t('editor.recent')}\n            </div>\n\n            <span className=\"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2\">\n              {recentColorsStore?.map((item, index) => {\n                return (\n                  <span\n                    className=\"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm\"\n                    key={`sub-color-recent-${index}`}\n                    onClick={() => setColor(item)}\n                  >\n                    <span\n                      className=\"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent\"\n                      style={{\n                        backgroundColor: item,\n                      }}\n                    >\n                      <svg\n                        viewBox=\"0 0 18 18\"\n                        style={{\n                          fill: 'rgb(255, 255, 255)',\n                          display: 'none',\n                        }}\n                      >\n                        <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path>\n                      </svg>\n                    </span>\n                  </span>\n                );\n              })}\n            </span>\n          </div>\n\n          <AddMoreColor setColor={setColor} />\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\ninterface AddMoreColorProps {\n  setColor: (color: string) => void\n}\n\nfunction AddMoreColor({ setColor }: AddMoreColorProps) {\n  const [colorMore, setColorMore] = useState('#000000');\n  const [openColorMore, setOpenColorMore] = useState(false);\n  const { t } = useLocale();\n\n  useEffect(() => {\n    return () => {\n      setOpenColorMore(false);\n    };\n  }, []);\n\n  return (\n    <Popover open={openColorMore}>\n      <PopoverTrigger asChild>\n        <div\n          className=\"richtext-p-1.5 richtext-text-sm hover:richtext-cursor-pointer hover:richtext-bg-accent\"\n          onClick={(e) => {\n            e.preventDefault();\n            setOpenColorMore(true);\n          }}\n        >\n          {t('editor.color.more')}\n          ...\n        </div>\n      </PopoverTrigger>\n\n      <PopoverContent>\n        <div className=\"richtext-flex richtext-flex-col richtext-items-center richtext-justify-center\">\n          <HexColorPicker color={colorMore}\n            onChange={setColorMore}\n          />\n\n          <Input\n            className=\"richtext-mt-[8px] richtext-w-full\"\n            type=\"text\"\n            value={colorMore.slice(1)}\n            onChange={(e) => {\n              e.preventDefault();\n              setColorMore(`#${e.target.value}`);\n            }}\n          />\n        </div>\n\n        <Separator className=\"richtext-my-[10px]\" />\n\n        <Button\n          className=\"richtext-w-full\"\n          onClick={(e: React.MouseEvent<HTMLButtonElement>) => {\n            e.preventDefault();\n            setColor(colorMore);\n            setOpenColorMore(false);\n          }}\n        >\n          <Plus size={16} />\n        </Button>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport { ColorPicker };\n","import React, { useMemo } from 'react';\nimport type { Editor } from '@tiptap/core';\nimport type { ToolbarItemProps, ToolbarProps } from '@/types';\n\nimport { Separator } from '@/components';\nimport { useLocale } from '@/locales';\nimport { isFunction } from '@/utils/utils';\n\nexport interface ToolbarComponentProps {\n  editor: Editor\n  disabled?: boolean\n  toolbar?: ToolbarProps\n}\n\nfunction Toolbar({ editor, disabled, toolbar }: ToolbarComponentProps) {\n  const { t, lang } = useLocale();\n\n  const toolbarItems = useMemo(() => {\n    const extensions = [...editor.extensionManager.extensions];\n    const sortExtensions = extensions.sort((arr, acc) => {\n      const a = (arr.options).sort ?? -1;\n      const b = (acc.options).sort ?? -1;\n      return a - b;\n    });\n\n    let menus: ToolbarItemProps[] = [];\n\n    for (const extension of sortExtensions) {\n      const {\n        button,\n        divider = false,\n        spacer = false,\n        toolbar = true,\n      } = extension.options;\n      if (!button || !isFunction(button) || !toolbar) {\n        continue;\n      }\n\n      const _button: ToolbarItemProps['button'] | ToolbarItemProps['button'][] = button({\n        editor,\n        extension,\n        t,\n      });\n\n      if (Array.isArray(_button)) {\n        const menu: ToolbarItemProps[] = _button.map((k, i) => ({\n          button: k,\n          divider: i === _button.length - 1 ? divider : false,\n          spacer: i === 0 ? spacer : false,\n          type: extension.type,\n          name: extension.name,\n        }));\n        menus = [...menus, ...menu];\n        continue;\n      }\n\n      menus.push({\n        button: _button,\n        divider,\n        spacer,\n        type: extension.type,\n        name: extension.name,\n      });\n    }\n    return menus;\n  }, [editor, t, lang]);\n\n  const containerDom = (innerContent: React.ReactNode) => {\n    return (\n      <div\n        className=\"richtext-px-1 richtext-py-2 !richtext-border-b\"\n        style={{\n          pointerEvents: disabled ? 'none' : 'auto',\n          opacity: disabled ? 0.5 : 1,\n        }}\n      >\n        <div className=\"richtext-relative richtext-flex richtext-flex-wrap richtext-h-auto richtext-gap-y-1 richtext-gap-x-1\">\n          {innerContent}\n        </div>\n      </div>\n    );\n  };\n\n  const dom = toolbarItems.map((item: ToolbarItemProps, key) => {\n    const ButtonComponent = item.button.component;\n\n    return (\n      <div className=\"richtext-flex richtext-items-center\" key={`toolbar-item-${key}`}>\n        {item?.spacer && <Separator orientation=\"vertical\" className=\"!richtext-h-[16px] !richtext-mx-[10px]\" />}\n\n        <ButtonComponent\n          {...item.button.componentProps}\n          disabled={disabled || item?.button?.componentProps?.disabled}\n        />\n\n        {item?.divider && <Separator orientation=\"vertical\" className=\"!richtext-h-auto !richtext-mx-2\" />}\n      </div>\n    );\n  });\n\n  if (toolbar && toolbar?.render) {\n    return toolbar.render({ editor, disabled: disabled || false }, toolbarItems, dom, containerDom);\n  }\n\n  return containerDom(dom);\n}\n\nexport { Toolbar };\n","import { deleteSelection } from '@tiptap/pm/commands';\nimport type { Editor } from '@tiptap/react';\n\nimport { ActionButton } from '@/components';\nimport { BUBBLE_TEXT_LIST, IMAGE_SIZE, VIDEO_SIZE } from '@/constants';\nimport { localeActions } from '@/locales';\nimport type { ButtonViewParams, ButtonViewReturn, ExtensionNameKeys } from '@/types';\n\n/** Represents the size types for bubble images or videos */\ntype BubbleImageOrVideoSizeType = 'size-small' | 'size-medium' | 'size-large';\ntype ImageAlignments = 'left' | 'center' | 'right';\n\n/** Represents the various types for bubble images */\ntype BubbleImageType =\n  | `image-${BubbleImageOrVideoSizeType}`\n  | `video-${BubbleImageOrVideoSizeType}`\n  | 'image'\n  | 'image-aspect-ratio'\n  | 'remove';\n\n/** Represents the types for bubble videos */\ntype BubbleVideoType = 'video' | 'remove';\n\n/** Represents the overall types for bubbles */\ntype BubbleAllType =\n  | BubbleImageType\n  | BubbleVideoType\n  | ExtensionNameKeys\n  | 'divider'\n  | (string & {});\n\n/** Represents the key types for node types */\nexport type NodeTypeKey = 'image' | 'text' | 'video';\n\n/** Represents the menu of bubble types for each node type */\nexport type BubbleTypeMenu = Partial<Record<NodeTypeKey, BubbleMenuItem[]>>;\n\n/** Represents the menu of overall bubble types for each node type */\nexport type NodeTypeMenu = Partial<Record<NodeTypeKey, BubbleAllType[]>>;\n\n/**\n * Represents the structure of a bubble menu item.\n */\nexport interface BubbleMenuItem extends ButtonViewReturn {\n  /** The type of the bubble item */\n  type: BubbleAllType\n}\n\n/**\n * Represents a function to generate a bubble menu\n */\n/**\n   * Generates a bubble menu based on the provided options.\n   * @param {ButtonViewParams<T>} options - The options for generating the bubble menu.\n   * @returns {BubbleTypeMenu} The generated bubble menu.\n   */\ntype BubbleView<T = any> = (options: ButtonViewParams<T>) => BubbleTypeMenu;\n\n/**\n * Represents the options for configuring bubbles.\n * @interface BubbleOptions\n * @template T\n */\nexport interface BubbleOptions<T> {\n  /** The menu of bubble types for each node type. */\n  list: NodeTypeMenu\n  /** The default list of bubble types. */\n  defaultBubbleList: any\n  /** The function to generate a bubble menu. */\n  button: BubbleView<T>\n}\n\nfunction imageSizeMenus(editor: Editor): BubbleMenuItem[] {\n  const types: BubbleImageOrVideoSizeType[] = ['size-small', 'size-medium', 'size-large'];\n  const icons: NonNullable<ButtonViewReturn['componentProps']['icon']>[] = [\n    'SizeS',\n    'SizeM',\n    'SizeL',\n  ];\n\n  return types.map((size, i) => ({\n    type: `image-${size}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.${size.replace('-', '.')}.tooltip` as any),\n      icon: icons[i],\n      action: () => editor.commands.updateImage({ width: IMAGE_SIZE[size] }),\n      isActive: () => editor.isActive('image', { width: IMAGE_SIZE[size] }),\n    },\n  }));\n}\n\nfunction imageGifSizeMenus(editor: Editor): BubbleMenuItem[] {\n  const types: BubbleImageOrVideoSizeType[] = ['size-small', 'size-medium', 'size-large'];\n  const icons: NonNullable<ButtonViewReturn['componentProps']['icon']>[] = [\n    'SizeS',\n    'SizeM',\n    'SizeL',\n  ];\n\n  return types.map((size, i) => ({\n    type: `image-${size}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.${size.replace('-', '.')}.tooltip` as any),\n      icon: icons[i],\n      action: () => editor.commands.updateImageGif({ width: IMAGE_SIZE[size] }),\n      isActive: () => editor.isActive('image', { width: IMAGE_SIZE[size] }),\n    },\n  }));\n}\n\nfunction imageAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImage?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction imageGifAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImageGif?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction imageMermaidAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImageMermaid?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction imageDrawerAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImageDrawer?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction videoSizeMenus(editor: Editor): BubbleMenuItem[] {\n  const types: BubbleImageOrVideoSizeType[] = ['size-small', 'size-medium', 'size-large'];\n  const icons: NonNullable<ButtonViewReturn['componentProps']['icon']>[] = [\n    'SizeS',\n    'SizeM',\n    'SizeL',\n  ];\n\n  return types.map((size, i) => ({\n    type: `video-${size}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.${size.replace('-', '.')}.tooltip` as any),\n      icon: icons[i],\n      action: () => editor.commands.updateVideo({ width: VIDEO_SIZE[size] }),\n      isActive: () => editor.isActive('video', { width: VIDEO_SIZE[size] }),\n    },\n  }));\n}\nexport function getBubbleImage(editor: Editor): BubbleMenuItem[] {\n  return [\n    {\n      type: 'flipX',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.tooltip.flipX'),\n        icon: 'FlipX',\n        action: () => {\n          const image = editor.getAttributes('image');\n          const { flipX } = image as any;\n          editor\n            .chain()\n            .focus(undefined, { scrollIntoView: false })\n            .updateImage({\n              flipX: !flipX,\n            })\n            .run();\n        },\n      },\n    },\n    {\n      type: 'flipY',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.tooltip.flipY'),\n        icon: 'FlipY',\n        action: () => {\n          const image = editor.getAttributes('image');\n          const { flipY } = image as any;\n          editor\n            .chain()\n            .focus(undefined, { scrollIntoView: false })\n            .updateImage({\n              flipY: !flipY,\n            })\n            .run();\n        },\n      },\n    },\n    ...imageSizeMenus(editor),\n    ...imageAlignMenus(editor),\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleImageGif(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...imageGifSizeMenus(editor),\n    ...imageGifAlignMenus(editor),\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleMermaid(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...imageMermaidAlignMenus(editor),\n    {\n      type: 'edit',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.edit'),\n        icon: 'Pencil',\n        action: () => {\n          return true;\n        },\n      },\n    },\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleDrawer(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...imageDrawerAlignMenus(editor),\n    {\n      type: 'edit',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.edit'),\n        icon: 'Pencil',\n        action: () => {\n          console.log('AAA');\n\n          return true;\n        },\n      },\n    },\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleVideo(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...videoSizeMenus(editor),\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\n/**\n * Bubble menu text list\n */\nexport function getBubbleText(editor: Editor, t: any) {\n  return BUBBLE_TEXT_LIST.reduce((acc, type) => {\n    if (type === 'divider' && acc.length > 0) {\n      return [...acc, {\n        type: 'divider',\n        component: undefined,\n        componentProps: {},\n      }];\n    }\n\n    const ext = editor.extensionManager.extensions.find(ext => ext.name === type);\n    if (ext) {\n      return [...acc, ext.configure().options.button({ editor, t, extension: ext })];\n    }\n\n    return acc;\n  }, [] as BubbleMenuItem[]);\n}\n","import { Selection, SelectionRange } from '@tiptap/pm/state';\nimport { NodeRange, ResolvedPos, Node as ProseMirrorNode } from '@tiptap/pm/model';\nimport { Mapping, Mappable } from '@tiptap/pm/transform';\n\nexport function getSelectionRanges(state: ResolvedPos, range: ResolvedPos, depth?: number): SelectionRange[] {\n  const ranges: SelectionRange[] = [];\n  const root = state.node(0);\n  depth =\n    typeof depth === 'number' && depth >= 0\n      ? depth\n      : state.sameParent(range)\n        ? Math.max(0, state.sharedDepth(range.pos) - 1)\n        : state.sharedDepth(range.pos);\n  const nodeRange = new NodeRange(state, range, depth);\n  const startIndex = nodeRange.depth === 0 ? 0 : root.resolve(nodeRange.start).posAtIndex(0);\n\n  nodeRange.parent.forEach((size, offset) => {\n    const from = startIndex + offset;\n    const to = from + size.nodeSize;\n    if (from < nodeRange.start || from >= nodeRange.end) return;\n    const selectionRange = new SelectionRange(root.resolve(from), root.resolve(to));\n    ranges.push(selectionRange);\n  });\n\n  return ranges;\n}\n\nclass NodeRangeBookmark {\n  anchor: number;\n  head: number;\n  constructor(anchor: number, head: number) {\n    this.anchor = anchor;\n    this.head = head;\n  }\n  map(mapping: Mappable) {\n    return new NodeRangeBookmark(mapping.map(this.anchor), mapping.map(this.head));\n  }\n  resolve(doc: ProseMirrorNode) {\n    const e = doc.resolve(this.anchor);\n    const o = doc.resolve(this.head);\n    return new NodeRangeSelection(e, o);\n  }\n}\n\nexport class NodeRangeSelection extends Selection {\n  depth: number | undefined;\n  constructor(from: ResolvedPos, to: ResolvedPos, depth?: number, bias = 1) {\n    const { doc } = from;\n    const isSamePosition = from === to;\n    const isAtDocEnd = from.pos === doc.content.size && to.pos === doc.content.size;\n    const resolvedTo = isSamePosition && !isAtDocEnd ? doc.resolve(to.pos + (bias > 0 ? 1 : -1)) : to;\n    const resolvedFrom = isSamePosition && isAtDocEnd ? doc.resolve(from.pos - (bias > 0 ? 1 : -1)) : from;\n    const selectionRanges = getSelectionRanges(resolvedFrom.min(resolvedTo), resolvedFrom.max(resolvedTo), depth);\n    super(\n      resolvedTo.pos >= from.pos ? selectionRanges[0].$from : selectionRanges[selectionRanges.length - 1].$to,\n      resolvedTo.pos >= from.pos ? selectionRanges[selectionRanges.length - 1].$to : selectionRanges[0].$from,\n      selectionRanges\n    );\n    this.depth = depth;\n  }\n  get $to() {\n    return this.ranges[this.ranges.length - 1].$to;\n  }\n  eq(other: Selection) {\n    return other instanceof NodeRangeSelection && other.$from.pos === this.$from.pos && other.$to.pos === this.$to.pos;\n  }\n  map(doc: ProseMirrorNode, mapping: Mapping) {\n    const newFrom = doc.resolve(mapping.map(this.anchor));\n    const newTo = doc.resolve(mapping.map(this.head));\n    return new NodeRangeSelection(newFrom, newTo);\n  }\n  toJSON() {\n    return { type: 'nodeRange', anchor: this.anchor, head: this.head };\n  }\n  get isForwards() {\n    return this.head >= this.anchor;\n  }\n  get isBackwards() {\n    return !this.isForwards;\n  }\n  extendBackwards() {\n    const { doc } = this.$from;\n    if (this.isForwards && this.ranges.length > 1) {\n      const remainingRanges = this.ranges.slice(0, -1);\n      const newFrom = remainingRanges[0].$from;\n      const newTo = remainingRanges[remainingRanges.length - 1].$to;\n      return new NodeRangeSelection(newFrom, newTo, this.depth);\n    }\n    const currentRange = this.ranges[0];\n    const newPosition = doc.resolve(Math.max(0, currentRange.$from.pos - 1));\n    return new NodeRangeSelection(this.$anchor, newPosition, this.depth);\n  }\n  extendForwards() {\n    const { doc } = this.$from;\n    if (this.isBackwards && this.ranges.length > 1) {\n      const remainingRanges = this.ranges.slice(1);\n      const newFrom = remainingRanges[0].$from;\n      const newTo = remainingRanges[remainingRanges.length - 1].$to;\n      return new NodeRangeSelection(newTo, newFrom, this.depth);\n    }\n    const currentRange = this.ranges[this.ranges.length - 1];\n    const newPosition = doc.resolve(Math.min(doc.content.size, currentRange.$to.pos + 1));\n    return new NodeRangeSelection(this.$anchor, newPosition, this.depth);\n  }\n  static fromJSON(doc: ProseMirrorNode, json: any): NodeRangeSelection {\n    return new NodeRangeSelection(doc.resolve(json.anchor), doc.resolve(json.head));\n  }\n  static create(doc: ProseMirrorNode, anchor: number, head: number, depth?: number, bias = 1) {\n    return new this(doc.resolve(anchor), doc.resolve(head), depth, bias);\n  }\n  getBookmark() {\n    return new NodeRangeBookmark(this.anchor, this.head);\n  }\n}\n","/* eslint-disable @typescript-eslint/prefer-for-of */\nimport { type Editor } from '@tiptap/core';\n\nexport function cloneElement(node: HTMLElement) {\n  const clonedNode: any = node.cloneNode(true);\n  const originalElements = [node, ...Array.from(node.getElementsByTagName('*'))];\n  const clonedElements = [clonedNode, ...Array.from(clonedNode.getElementsByTagName('*'))];\n  originalElements.forEach((element, index) => {\n    clonedElements[index].style.cssText = (function (element) {\n      let styles = '';\n      const computedStyles = getComputedStyle(element);\n      for (let i = 0; i < computedStyles.length; i += 1) {\n        styles += `${computedStyles[i]}:${computedStyles.getPropertyValue(computedStyles[i])};`;\n      }\n      return styles;\n    })(element);\n  });\n  return clonedNode;\n}\nexport function getComputedStyles(element: Element, styleProperty: any) {\n  return window.getComputedStyle(element)[styleProperty];\n}\n\nexport function minMax(value = 0, minimum = 0, maximum = 0) {\n  return Math.min(Math.max(value, minimum), maximum);\n}\n\nexport function removeNode(node: HTMLElement) {\n  if (node.parentNode !== null && node.parentNode !== undefined) {\n    node.parentNode.removeChild(node);\n  }\n}\nexport type FindElementNextToCoords = {\n  x: number\n  y: number\n  direction?: 'left' | 'right'\n  editor: Editor\n};\nexport function findElementNextToCoords (options: FindElementNextToCoords) {\n  const { x, y, direction, editor } = options;\n  let targetElement: any = null;\n  let targetNode: any = null;\n  let documentPosition: any = null;\n  let currentX = x;\n\n  for (; null === targetNode && currentX < window.innerWidth && currentX > 0;) {\n    const elementsAtPoint = document.elementsFromPoint(currentX, y);\n    const proseMirrorIndex = elementsAtPoint.findIndex(el => el.classList.contains('ProseMirror'));\n    const relevantElements = elementsAtPoint.slice(0, proseMirrorIndex);\n\n    if (relevantElements.length > 0) {\n      const currentElement = relevantElements[0];\n      targetElement = currentElement;\n      documentPosition = editor.view.posAtDOM(currentElement, 0);\n\n      if (documentPosition >= 0) {\n        targetNode = editor.state.doc.nodeAt(Math.max(documentPosition - 1, 0));\n        if (targetNode === null || targetNode.isText) {\n          targetNode = editor.state.doc.nodeAt(Math.max(documentPosition - 1, 0));\n        }\n        if (!targetNode) {\n          targetNode = editor.state.doc.nodeAt(Math.max(documentPosition, 0));\n        }\n        break;\n      }\n    }\n\n    if (direction === 'left') {\n      currentX -= 1;\n    } else {\n      currentX += 1;\n    }\n  }\n\n  return {\n    resultElement: targetElement,\n    resultNode: targetNode,\n    pos: documentPosition !== null ? documentPosition : null\n  };\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unused-expressions */\nimport { type Editor } from '@tiptap/core';\nimport { type Node } from '@tiptap/pm/model';\nimport { PluginKey, Plugin } from '@tiptap/pm/state';\nimport { type Transaction, type EditorState } from '@tiptap/pm/state';\nimport type { EditorView } from '@tiptap/pm/view';\nimport debounce from 'lodash-es/debounce';\nimport tippy from 'tippy.js';\nimport { type Props as TippyProps } from 'tippy.js';\n// import { ySyncPluginKey, absolutePositionToRelativePosition } from 'y-prosemirror';\n\nimport { getSelectionRanges, NodeRangeSelection } from './range';\nimport { cloneElement, getComputedStyles, minMax, removeNode, findElementNextToCoords } from './utils';\n\nfunction getSelectionRangesNearCursor(event: any, editor: any) {\n  const { doc: editorDocument } = editor.view.state,\n    nearestElement = findElementNextToCoords({ editor: editor, x: event.clientX, y: event.clientY, direction: 'right' });\n  if (!nearestElement.resultNode || null === nearestElement.pos) return [];\n  const mouseXPosition = event.clientX,\n    cursorPosition = (function (editor, mouseX, mouseY) {\n      const editorPaddingLeft = Number.parseInt(getComputedStyles(editor.dom, 'paddingLeft'), 10),\n        editorPaddingRight = Number.parseInt(getComputedStyles(editor.dom, 'paddingRight'), 10),\n        editorBorderLeft = Number.parseInt(getComputedStyles(editor.dom, 'borderLeftWidth'), 10),\n        editorBorderRight = Number.parseInt(getComputedStyles(editor.dom, 'borderLeftWidth'), 10),\n        editorRect = editor.dom.getBoundingClientRect();\n      return {\n        left: minMax(mouseX, editorRect.left + editorPaddingLeft + editorBorderLeft,\n          editorRect.right - editorPaddingRight - editorBorderRight),\n        top: mouseY\n      };\n    })(editor.view, mouseXPosition, event.clientY),\n    positionAtCoords = editor.view.posAtCoords(cursorPosition);\n  if (!positionAtCoords) return [];\n  const { pos: documentPosition } = positionAtCoords;\n  if (!editorDocument.resolve(documentPosition).parent) return [];\n  const startResolvedPosition = editorDocument.resolve(nearestElement.pos),\n    endResolvedPosition = editorDocument.resolve(nearestElement.pos + 1);\n  return getSelectionRanges(startResolvedPosition, endResolvedPosition, 0);\n}\nfunction getPreviousNodeStartPosition (document: any, position: any) {\n  const resolvedPosition = document.resolve(position),\n    { depth: nodeDepth } = resolvedPosition;\n  if (0 === nodeDepth) return position;\n  return resolvedPosition.pos - resolvedPosition.parentOffset - 1;\n}\nfunction getAncestorNodeAtDepth (document: any, position: any) {\n  const currentNode = document.nodeAt(position),\n    resolvedPosition = document.resolve(position);\n  let { depth: currentDepth } = resolvedPosition,\n    ancestorNode = currentNode;\n  for (; currentDepth > 0;) {\n    const parentNode = resolvedPosition.node(currentDepth);\n    currentDepth -= 1;\n    if (0 === currentDepth) {\n      ancestorNode = parentNode;\n    }\n  }\n  return ancestorNode;\n}\n// function getOuterNode (doc: any, pos: any) {\n//   const n = ySyncPluginKey.getState(doc);\n//   return n ? absolutePositionToRelativePosition(pos, n.type, n.binding.mapping) : null;\n// }\nfunction getOuterNodePos (e: any, t: any) {\n  let n = t;\n  for (; n && n.parentNode && n.parentNode !== e.dom;) n = n.parentNode;\n  return n;\n}\n\nconst dragHandlePluginDefaultKey = new PluginKey('dragHandle');\n\nfunction DragHandlePlugin ({\n  pluginKey: customPluginKey = dragHandlePluginDefaultKey,\n  element: dragHandleElement,\n  editor,\n  tippyOptions,\n  onNodeChange,\n}: {\n  pluginKey?: PluginKey | string\n  element: HTMLElement\n  editor: Editor\n  tippyOptions?: Partial<TippyProps>\n  onNodeChange?: (data: { editor: Editor; node: Node | null; pos: number }) => void\n}) {\n  const dragHandleContainer = document.createElement('div');\n  let tippyInstance: any = null;\n  let isDragLocked = false;\n  // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n  let selectedNode: null = null;\n  let selectedNodePosition = -1;\n\n  dragHandleElement.addEventListener('dragstart', event => {\n    const { view: editorView } = editor;\n    if (!event.dataTransfer) return;\n    const { empty: isSelectionEmpty, $from: selectionStart, $to: selectionEnd } = editorView.state.selection;\n    const nearCursorRanges = getSelectionRangesNearCursor(event, editor);\n    const currentSelectionRanges = getSelectionRanges(selectionStart, selectionEnd, 0);\n    const hasOverlappingRanges = currentSelectionRanges.some(range =>\n      nearCursorRanges.find(nearRange => nearRange.$from === range.$from && nearRange.$to === range.$to));\n    const selectedRanges = isSelectionEmpty || !hasOverlappingRanges ? nearCursorRanges : currentSelectionRanges;\n\n    if (selectedRanges.length === 0) return;\n    const { tr: transaction } = editorView.state;\n    const dragPreviewElement = document.createElement('div');\n    const startPos = selectedRanges[0].$from.pos;\n    const endPos = selectedRanges[selectedRanges.length - 1].$to.pos;\n    const nodeSelection = NodeRangeSelection.create(editorView.state.doc, startPos, endPos);\n    const selectionSlice = nodeSelection.content();\n\n    selectedRanges.forEach(range => {\n      const clonedNode = cloneElement(editorView.nodeDOM(range.$from.pos) as HTMLElement);\n      dragPreviewElement.append(clonedNode);\n    });\n    dragPreviewElement.style.position = 'absolute';\n    dragPreviewElement.style.top = '-10000px';\n    document.body.append(dragPreviewElement);\n    event.dataTransfer.clearData();\n    event.dataTransfer.setDragImage(dragPreviewElement, 0, 0);\n    editorView.dragging = { slice: selectionSlice, move: true };\n    transaction.setSelection(nodeSelection);\n    editorView.dispatch(transaction);\n    document.addEventListener('drop', () => removeNode(dragPreviewElement), { once: true });\n    setTimeout(() => {\n      dragHandleElement && (dragHandleElement.style.pointerEvents = 'none');\n    }, 0);\n  });\n  dragHandleElement.addEventListener('dragend', () => {\n    dragHandleElement && (dragHandleElement.style.pointerEvents = 'auto');\n  });\n  return new Plugin({\n    key: typeof customPluginKey === 'string' ? new PluginKey(customPluginKey) : customPluginKey,\n    state: {\n      init: () => ({ locked: false }),\n      apply(transaction: Transaction, oldState: { locked: boolean }): { locked: boolean } {\n        const isLocked = transaction.getMeta('lockDragHandle');\n        const shouldHide = transaction.getMeta('hideDragHandle');\n        if ((undefined !== isLocked && (isDragLocked = isLocked), shouldHide && tippyInstance)) {\n          tippyInstance.hide();\n          isDragLocked = false;\n          selectedNode = null;\n          selectedNodePosition = -1;\n          onNodeChange?.({ editor: editor, node: null, pos: -1 });\n          return oldState;\n        }\n        if (transaction.docChanged && -1 !== selectedNodePosition && dragHandleElement && tippyInstance) {\n          const newPos = transaction.mapping.map(selectedNodePosition);\n          if (newPos !== selectedNodePosition) {\n            selectedNodePosition = newPos;\n            //  relativePosition = getOuterNode(editorState.doc, selectedNodePosition);\n          }\n        }\n        return oldState;\n      },\n    },\n    view: editorView => {\n      initializeDragHandle();\n\n      setupDragHandleContainer(editor.view.dom);\n\n      tippyInstance = tippy(editorView.dom, {\n        ...getDefaultTippyConfig(),\n        ...tippyOptions,\n      });\n\n      return {\n        update(editorView, oldState) {\n          if (!canUpdateDragHandle(dragHandleElement, tippyInstance)) {\n            return;\n          }\n\n          dragHandleElement.draggable = !isDragLocked;\n\n          if (!shouldUpdatePosition(editorView, oldState)) {\n            return;\n          }\n\n          const targetElement = getValidTargetElement(editorView);\n          if (!targetElement) {\n            return;\n          }\n\n          updateNodeInformation(editorView, targetElement);\n        },\n        destroy() {\n          cleanup();\n        }\n      };\n\n      function initializeDragHandle() {\n        dragHandleElement.draggable = true;\n        dragHandleElement.style.pointerEvents = 'auto';\n      }\n\n      function setupDragHandleContainer(parentElement: any) {\n        parentElement.parentElement?.appendChild(dragHandleContainer);\n        dragHandleContainer.appendChild(dragHandleElement);\n\n        Object.assign(dragHandleContainer.style, {\n          pointerEvents: 'none',\n          position: 'absolute',\n          top: '0',\n          left: '0'\n        });\n      }\n\n      function getDefaultTippyConfig(): Partial<TippyProps> {\n        return {\n          getReferenceClientRect: null,\n          interactive: true,\n          trigger: 'manual',\n          placement: 'left-start',\n          hideOnClick: false,\n          duration: 100,\n          zIndex: 10,\n          appendTo: dragHandleContainer,\n          content: dragHandleElement,\n          popperOptions: {\n            modifiers: [\n              { name: 'flip', enabled: false },\n              {\n                name: 'preventOverflow',\n                options: {\n                  rootBoundary: 'document',\n                  mainAxis: false\n                }\n              },\n            ],\n          }\n        };\n      }\n\n      function canUpdateDragHandle(element: HTMLElement | null, tippy: any) {\n        return element && tippy;\n      }\n\n      function shouldUpdatePosition(view: EditorView, oldState: EditorState) {\n        return !view.state.doc.eq(oldState.doc) && selectedNodePosition !== -1;\n      }\n\n      function getValidTargetElement(view: EditorView) {\n        let targetElement: any = view.nodeDOM(selectedNodePosition);\n        targetElement = getOuterNodePos(view, targetElement);\n\n        if (targetElement === view.dom || targetElement?.nodeType !== 1) {\n          return null;\n        }\n\n        return targetElement;\n      }\n\n      function updateNodeInformation(view: EditorView, targetElement: HTMLElement) {\n        const domPosition = view.posAtDOM(targetElement, 0);\n        const ancestorNode = getAncestorNodeAtDepth(editor.state.doc, domPosition);\n\n        if (ancestorNode === selectedNode) {\n          return;\n        }\n\n        const previousNodePos = getPreviousNodeStartPosition(editor.state.doc, domPosition);\n\n        selectedNode = ancestorNode;\n        selectedNodePosition = previousNodePos;\n        // relativePosition = getOuterNode(editor.state.doc, selectedNodePosition);\n\n        onNodeChange?.({\n          editor,\n          node: selectedNode,\n          pos: selectedNodePosition\n        });\n\n        updateTippyPosition(targetElement);\n      }\n\n      function updateTippyPosition(element: HTMLElement) {\n        tippyInstance.setProps({\n          getReferenceClientRect: () => element.getBoundingClientRect()\n        });\n        tippyInstance.show();\n      }\n\n      function cleanup() {\n        tippyInstance?.destroy();\n        dragHandleElement && removeNode(dragHandleContainer);\n      }\n    },\n    props: {\n      handleDOMEvents: {\n        mouseleave: (editorView, event: any) => {\n          if (isDragLocked) return false;\n          if (!shouldHideDragHandle(event)) return false;\n\n          hideDragHandle();\n          resetSelectedState();\n          return false;\n\n          function shouldHideDragHandle(event: any) {\n            return event.target && !dragHandleContainer.contains(event.relatedTarget);\n          }\n\n          function hideDragHandle() {\n            tippyInstance?.hide();\n          }\n\n          function resetSelectedState() {\n            selectedNode = null;\n            selectedNodePosition = -1;\n            onNodeChange?.({\n              editor: editor,\n              node: null,\n              pos: -1\n            });\n          }\n        },\n        mousemove: debounce((editorView: EditorView, mouseEvent: MouseEvent) => {\n          if (!dragHandleElement || !tippyInstance || isDragLocked) {\n            return false;\n          }\n\n          const nearestElement = findElementNextToCoords({\n            x: mouseEvent.clientX,\n            y: mouseEvent.clientY,\n            direction: 'right',\n            editor: editor\n          });\n\n          if (!nearestElement.resultElement) {\n            return false;\n          }\n\n          if (nearestElement.resultElement === editorView.dom) {\n            return false;\n          }\n\n          const targetElement = getOuterNodePos(editorView, nearestElement.resultElement);\n\n          if (targetElement === editorView.dom) {\n            return false;\n          }\n\n          if (targetElement?.nodeType !== 1) {\n            return false;\n          }\n\n          const domPosition = editorView.posAtDOM(targetElement, 0);\n          const ancestorNode = getAncestorNodeAtDepth(editor.state.doc, domPosition);\n\n          if (ancestorNode === selectedNode) {\n            return false;\n          }\n\n          const previousNodePosition = getPreviousNodeStartPosition(editor.state.doc, domPosition);\n          selectedNode = ancestorNode;\n          selectedNodePosition = previousNodePosition;\n          // relativePosition = getOuterNode(editorView.state, selectedNodePosition);\n\n          onNodeChange?.({\n            editor: editor,\n            node: selectedNode,\n            pos: selectedNodePosition\n          });\n\n          tippyInstance.setProps({\n            getReferenceClientRect: () => targetElement.getBoundingClientRect()\n          });\n          tippyInstance.show();\n\n          return false;\n        }, 100),\n      },\n    },\n  });\n}\n\nexport { DragHandlePlugin, dragHandlePluginDefaultKey };\n","import { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport type { Node } from '@tiptap/pm/model';\nimport type { NodeSelection } from '@tiptap/pm/state';\n\nimport {\n  Button,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuPortal,\n  DropdownMenuSeparator,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n  IconComponent,\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from '@/components';\nimport { useLocale } from '@/locales';\nimport { DragHandlePlugin, dragHandlePluginDefaultKey } from '@/plugins/DragHandle';\nimport { IndentProps, setNodeIndentMarkup } from '@/utils/indent';\n\nexport interface ContentMenuProps {\n  editor: Editor\n  disabled?: boolean\n  className?: string\n  pluginKey?: string\n}\n\nfunction ContentMenu(props: ContentMenuProps) {\n  const { pluginKey = dragHandlePluginDefaultKey } = props;\n  const { t } = useLocale();\n  const [currentNode, setCurrentNode] = useState<Node | null>(null);\n  const [currentNodePos, setCurrentNodePos] = useState(-1);\n  const dragElement = useRef(null);\n  const pluginRef = useRef<any | null>(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  const hasTextAlignExtension = props.editor.extensionManager.extensions.some(ext => ext.name === 'textAlign');\n  const hasIndentExtension = props.editor.extensionManager.extensions.some(ext => ext.name === 'indent');\n  const hasClearExtension = props.editor.extensionManager.extensions.some(ext => ext.name === 'clear');\n\n  useEffect(() => {\n    if (dragElement.current && !props.editor.isDestroyed) {\n      pluginRef.current = DragHandlePlugin({\n        editor: props.editor,\n        element: dragElement.current,\n        pluginKey: 'ContentItemMenu',\n        tippyOptions: {\n          offset: [-2, 16],\n          zIndex: 99,\n          moveTransition: 'transform 0.15s ease-out',\n        },\n        onNodeChange: handleNodeChange,\n      });\n\n      props.editor.registerPlugin(pluginRef.current);\n    }\n  }, [props.editor, dragElement]);\n\n  function resetTextFormatting() {\n    const chain = props.editor.chain();\n    chain.setNodeSelection(currentNodePos).unsetAllMarks();\n    if (currentNode?.type.name !== 'paragraph') {\n      chain.setParagraph();\n    }\n    chain.run();\n  }\n  function copyNodeToClipboard() {\n    props.editor.chain().focus().setNodeSelection(currentNodePos).run();\n    document.execCommand('copy');\n  }\n  function duplicateNode() {\n    props.editor.commands.setNodeSelection(currentNodePos);\n    const { $anchor } = props.editor.state.selection;\n    const selectedNode = $anchor.node(1) || (props.editor.state.selection as NodeSelection).node;\n    props.editor\n      .chain()\n      .setMeta('hideDragHandle', true)\n      .insertContentAt(currentNodePos + (currentNode?.nodeSize || 0), selectedNode.toJSON())\n      .run();\n  }\n  function setTextAlign(alignments: string) {\n    props.editor.commands.setTextAlign(alignments);\n  }\n  function increaseIndent() {\n    const indentTr = setNodeIndentMarkup(props.editor.state.tr, currentNodePos, 1);\n    indentTr.setMeta('hideDragHandle', true);\n    if (props.editor.view.dispatch)\n      props.editor.view.dispatch(indentTr);\n  }\n  function decreaseIndent() {\n    const tr = setNodeIndentMarkup(props.editor.state.tr, currentNodePos, -1);\n    if (props.editor.view.dispatch)\n      props.editor.view.dispatch(tr);\n  }\n\n  function deleteNode() {\n    props.editor\n      .chain()\n      .setMeta('hideDragHandle', true)\n      .setNodeSelection(currentNodePos)\n      .deleteSelection()\n      .run();\n  }\n\n  function handleNodeChange(e: any) {\n    if (e.node) {\n      setCurrentNode(e.node);\n    }\n    setCurrentNodePos(e.pos);\n  }\n\n  function handleAdd() {\n    if (currentNodePos !== -1) {\n      const currentNodeSize = currentNode?.nodeSize || 0;\n      const insertPos = currentNodePos + currentNodeSize;\n      const currentNodeIsEmptyParagraph\n        = currentNode?.type.name === 'paragraph' && currentNode?.content?.size === 0;\n      const focusPos = currentNodeIsEmptyParagraph ? currentNodePos + 2 : insertPos + 2;\n      props.editor\n        .chain()\n        .command(({ dispatch, tr, state }: any) => {\n          if (dispatch) {\n            if (currentNodeIsEmptyParagraph) {\n              tr.insertText('/', currentNodePos, currentNodePos + 1);\n            } else {\n              tr.insert(\n                insertPos,\n                state.schema.nodes.paragraph.create(null, [state.schema.text('/')]),\n              );\n            }\n\n            return dispatch(tr);\n          }\n\n          return true;\n        })\n        .focus(focusPos)\n        .run();\n    }\n  }\n\n  useEffect(() => {\n    if (menuOpen) {\n      props.editor.commands.setMeta('lockDragHandle', true);\n    } else {\n      props.editor.commands.setMeta('lockDragHandle', false);\n    }\n\n    return () => {\n      props.editor.commands.setMeta('lockDragHandle', false);\n    };\n  }, [menuOpen]);\n\n  useEffect(() => {\n    return () => {\n      if (pluginRef.current) {\n        props.editor.unregisterPlugin(pluginKey);\n        pluginRef.current = null;\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (props.editor?.isDestroyed && pluginRef.current) {\n      props.editor.unregisterPlugin(pluginKey);\n      pluginRef.current = null;\n    }\n  }, [props.editor?.isDestroyed]);\n\n  const handleMenuOpenChange = (open: any) => {\n    if (props?.disabled) {\n      return;\n    }\n    setMenuOpen(open);\n  };\n\n  return (\n    <div\n      ref={dragElement}\n      className={\n        `drag-handle richtext-duration-200 richtext-ease-in-out [transition-property:top,_left] ${props?.className}`\n      }\n      style={{\n        opacity: props?.disabled ? 0 : 1,\n      }}\n    >\n      <div className=\"richtext-flex richtext-items-center richtext-gap-0.5 richtext-duration-200 richtext-ease-in-out [transition-property:top,_left]\">\n        <Button\n          className=\"!richtext-size-7 richtext-cursor-grab\"\n          disabled={props?.disabled}\n          onClick={handleAdd}\n          size=\"icon\"\n          type=\"button\"\n          variant=\"ghost\"\n        >\n          <IconComponent className=\"richtext-text-lg richtext-text-neutral-600 dark:richtext-text-neutral-200\"\n            name=\"Plus\"\n          />\n        </Button>\n\n        <DropdownMenu onOpenChange={handleMenuOpenChange}\n          open={menuOpen}\n        >\n          <div className=\"richtext-relative richtext-flex richtext-flex-col\">\n            <Tooltip>\n              <TooltipTrigger asChild\n                disabled={props?.disabled}\n              >\n                <Button\n                  className=\"richtext-relative richtext-z-[1] !richtext-size-7 richtext-cursor-grab\"\n                  disabled={props?.disabled}\n                  size=\"icon\"\n                  type=\"button\"\n                  variant=\"ghost\"\n                  onMouseUp={(e) => {\n                    e.preventDefault();\n                    if (props?.disabled) {\n                      return;\n                    }\n                    setMenuOpen(true);\n                  }}\n                >\n                  <IconComponent className=\"richtext-text-sm richtext-text-neutral-600 dark:richtext-text-neutral-200\"\n                    name=\"Grip\"\n                  />\n                </Button>\n              </TooltipTrigger>\n\n              <TooltipContent>\n                {t('editor.draghandle.tooltip')}\n              </TooltipContent>\n            </Tooltip>\n\n            <DropdownMenuTrigger className=\"richtext-absolute richtext-left-0 richtext-top-0 richtext-z-0 richtext-size-[28px]\" />\n          </div>\n\n          <DropdownMenuContent align=\"start\"\n            className=\"richtext-w-48\"\n            side=\"bottom\"\n            sideOffset={0}\n          >\n            <DropdownMenuItem\n              className=\"richtext-flex richtext-gap-3 richtext-bg-opacity-10 hover:richtext-bg-red-400 hover:richtext-bg-opacity-20 focus:richtext-bg-red-400 focus:richtext-bg-opacity-30 focus:richtext-text-red-500 dark:hover:richtext-bg-opacity-20 dark:hover:richtext-text-red-500\"\n              onClick={deleteNode}\n            >\n              <IconComponent name=\"Trash2\" />\n\n              <span>\n                {t('editor.remove')}\n              </span>\n            </DropdownMenuItem>\n\n            {hasClearExtension\n              ? (\n                <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                  onClick={resetTextFormatting}\n                >\n                  <IconComponent name=\"PaintRoller\" />\n\n                  <span>\n                    {t('editor.clear.tooltip')}\n                  </span>\n                </DropdownMenuItem>\n              )\n              : null}\n\n            <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n              onClick={copyNodeToClipboard}\n            >\n              <IconComponent name=\"Clipboard\" />\n\n              <span>\n                {t('editor.copyToClipboard')}\n              </span>\n            </DropdownMenuItem>\n\n            <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n              onClick={duplicateNode}\n            >\n              <IconComponent name=\"Copy\" />\n\n              <span>\n                {t('editor.copy')}\n              </span>\n            </DropdownMenuItem>\n\n            {hasTextAlignExtension || hasIndentExtension\n              ? (\n                <DropdownMenuSeparator />\n              )\n              : null}\n\n            {hasTextAlignExtension\n              ? (\n                <DropdownMenuSub>\n                  <DropdownMenuSubTrigger className=\"richtext-flex richtext-gap-3\">\n                    <IconComponent name=\"AlignCenter\" />\n\n                    <span>\n                      {t('editor.textalign.tooltip')}\n                    </span>\n                  </DropdownMenuSubTrigger>\n\n                  <DropdownMenuPortal>\n                    <DropdownMenuSubContent>\n                      <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                        onClick={() => setTextAlign('left')}\n                      >\n                        <IconComponent name=\"AlignLeft\" />\n\n                        <span>\n                          {t('editor.textalign.left.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n\n                      <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                        onClick={() => setTextAlign('center')}\n                      >\n                        <IconComponent name=\"AlignCenter\" />\n\n                        <span>\n                          {t('editor.textalign.center.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n\n                      <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                        onClick={() => setTextAlign('right')}\n                      >\n                        <IconComponent name=\"AlignRight\" />\n\n                        <span>\n                          {t('editor.textalign.right.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n                    </DropdownMenuSubContent>\n                  </DropdownMenuPortal>\n                </DropdownMenuSub>\n              )\n              : null}\n\n            {hasIndentExtension\n              ? (\n                <DropdownMenuSub>\n                  <DropdownMenuSubTrigger className=\"richtext-flex richtext-gap-3\">\n                    <IconComponent name=\"IndentIncrease\" />\n\n                    <span>\n                      {t('editor.indent')}\n                    </span>\n                  </DropdownMenuSubTrigger>\n\n                  <DropdownMenuPortal>\n                    <DropdownMenuSubContent>\n                      <DropdownMenuItem\n                        className=\"richtext-flex richtext-gap-3\"\n                        disabled={currentNode?.attrs?.indent >= IndentProps.max}\n                        onClick={increaseIndent}\n                      >\n                        <IconComponent name=\"IndentIncrease\" />\n\n                        <span>\n                          {t('editor.indent.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n\n                      <DropdownMenuItem\n                        className=\"richtext-flex richtext-gap-3\"\n                        disabled={currentNode?.attrs?.indent <= IndentProps.min}\n                        onClick={decreaseIndent}\n                      >\n                        <IconComponent name=\"IndentDecrease\" />\n\n                        <span>\n                          {t('editor.outdent.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n                    </DropdownMenuSubContent>\n                  </DropdownMenuPortal>\n                </DropdownMenuSub>\n              )\n              : null}\n\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </div>\n  );\n}\n\nexport { ContentMenu };\n","import { useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport { TextSelection } from '@tiptap/pm/state';\nimport { BubbleMenu } from '@tiptap/react';\n\nimport { Separator, getBubbleText } from '@/components';\nimport { useLocale } from '@/locales';\n\nexport interface BubbleMenuTextProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Comp\n      {...item.componentProps}\n      disabled={disabled || item?.componentProps?.disabled}\n      editor={editor}\n    />\n  );\n}\n\nfunction BubbleMenuText(props: BubbleMenuTextProps) {\n  const { t, lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n\n    // check content select length is not empty\n    if ($from.pos === to) {\n      return false;\n    }\n\n    return selection instanceof TextSelection;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled || !props?.editor) {\n      return [];\n    }\n\n    return getBubbleText(props.editor, t);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang, t]);\n\n  return (\n    <BubbleMenu editor={props?.editor}\n      shouldShow={shouldShow}\n      tippyOptions={tippyOptions as any}\n    >\n      {items?.length\n        ? (\n          <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n            <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-gap-[4px] richtext-whitespace-nowrap\">\n              {items?.map((item: any, key: any) => {\n                if (item?.type === 'divider') {\n                  return (\n                    <Separator\n                      className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n                      key={`bubbleMenu-divider-${key}`}\n                      orientation=\"vertical\"\n                    />\n                  );\n                }\n\n                return (\n                  <ItemA\n                    disabled={props.disabled}\n                    editor={props.editor}\n                    item={item}\n                    key={`bubbleMenu-text-${key}`}\n                  />\n                );\n              })}\n            </div>\n          </div>\n        )\n        : (\n          <></>\n        )}\n    </BubbleMenu>\n  );\n}\n\nexport { BubbleMenuText };\n","import type { Editor } from '@tiptap/core';\nimport { isActive } from '@tiptap/core';\nimport { BubbleMenu } from '@tiptap/react';\nimport type { GetReferenceClientRect } from 'tippy.js';\nimport { sticky } from 'tippy.js';\n\nimport { ActionButton, Separator } from '@/components';\nimport HighlightActionButton from '@/extensions/Highlight/components/HighlightActionButton';\nimport { useLocale } from '@/locales';\n\nexport interface TableBubbleMenuProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nfunction TableBubbleMenu({ editor, disabled }: TableBubbleMenuProps) {\n  const shouldShow = ({ editor }: { editor: Editor }) => {\n    return isActive(editor.view.state, 'table');\n  };\n  const { t } = useLocale();\n\n  function onAddColumnBefore() {\n    editor.chain().focus().addColumnBefore().run();\n  }\n\n  function onAddColumnAfter() {\n    editor.chain().focus().addColumnAfter().run();\n  }\n\n  function onDeleteColumn() {\n    editor.chain().focus().deleteColumn().run();\n  }\n  function onAddRowAbove() {\n    editor.chain().focus().addRowBefore().run();\n  }\n\n  function onAddRowBelow() {\n    editor.chain().focus().addRowAfter().run();\n  }\n\n  function onDeleteRow() {\n    editor.chain().focus().deleteRow().run();\n  }\n\n  function onMergeCell() {\n    editor.chain().focus().mergeCells().run();\n  }\n  function onSplitCell() {\n    editor?.chain().focus().splitCell().run();\n  }\n  function onDeleteTable() {\n    editor.chain().focus().deleteTable().run();\n  }\n\n  function onSetCellBackground(color: string) {\n    editor.chain().focus().setTableCellBackground(color).run();\n  }\n  const getReferenceClientRect: GetReferenceClientRect = () => {\n    const {\n      view,\n      state: {\n        selection: { from },\n      },\n    } = editor;\n\n    const node = view.domAtPos(from).node as HTMLElement;\n    if (!node) {\n      return new DOMRect(-1000, -1000, 0, 0);\n    }\n\n    const tableWrapper = node?.closest?.('.tableWrapper');\n    if (!tableWrapper) {\n      return new DOMRect(-1000, -1000, 0, 0);\n    }\n\n    const rect = tableWrapper.getBoundingClientRect();\n\n    return rect;\n  };\n\n  return (\n    <BubbleMenu\n      editor={editor}\n      pluginKey=\"table\"\n      shouldShow={shouldShow}\n      updateDelay={0}\n      tippyOptions={{\n        offset: [0, 8],\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        maxWidth: 'auto',\n        getReferenceClientRect,\n        plugins: [sticky],\n        sticky: 'popper',\n      }}\n    >\n      {\n        disabled\n          ? <></>\n          : (\n            <div className=\"richtext-min-w-32 richtext-flex richtext-flex-row richtext-h-full richtext-items-center richtext-leading-none richtext-gap-0.5 richtext-p-2 richtext-w-full richtext-bg-background richtext-rounded-lg richtext-shadow-sm !richtext-border richtext-border-border\">\n              <ActionButton\n                icon=\"BetweenHorizonalEnd\"\n                tooltip={t('editor.table.menu.insertColumnBefore')}\n                action={onAddColumnBefore}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.addColumnBefore?.()}\n              />\n              <ActionButton\n                icon=\"BetweenHorizonalStart\"\n                tooltip={t('editor.table.menu.insertColumnAfter')}\n                action={onAddColumnAfter}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.addColumnAfter?.()}\n              />\n              <ActionButton\n                icon=\"DeleteColumn\"\n                action={onDeleteColumn}\n                tooltip={t('editor.table.menu.deleteColumn')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can().deleteColumn?.()}\n              />\n              <Separator orientation=\"vertical\" className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\" />\n\n              <ActionButton\n                icon=\"BetweenVerticalEnd\"\n                action={onAddRowAbove}\n                tooltip={t('editor.table.menu.insertRowAbove')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can().addRowBefore?.()}\n              />\n\n              <ActionButton\n                icon=\"BetweenVerticalStart\"\n                action={onAddRowBelow}\n                tooltip={t('editor.table.menu.insertRowBelow')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.addRowAfter?.()}\n              />\n              <ActionButton\n                icon=\"DeleteRow\"\n                action={onDeleteRow}\n                tooltip={t('editor.table.menu.deleteRow')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.deleteRow?.()}\n              />\n              <Separator orientation=\"vertical\" className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\" />\n              <ActionButton\n                icon=\"TableCellsMerge\"\n                action={onMergeCell}\n                tooltip={t('editor.table.menu.mergeCells')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.mergeCells?.()}\n              />\n              <ActionButton\n                icon=\"TableCellsSplit\"\n                action={onSplitCell}\n                tooltip={t('editor.table.menu.splitCells')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.splitCell?.()}\n              />\n              <Separator orientation=\"vertical\" className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\" />\n\n              <HighlightActionButton\n                editor={editor}\n                tooltip={t('editor.table.menu.setCellsBgColor')}\n                action={onSetCellBackground}\n                tooltipOptions={{\n                  sideOffset: 15,\n                }}\n              />\n              <ActionButton\n                icon=\"Trash2\"\n                tooltip={t('editor.table.menu.deleteTable')}\n                action={onDeleteTable}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.deleteTable?.()}\n              />\n            </div>\n          )\n      }\n\n    </BubbleMenu>\n  );\n}\n\nexport { TableBubbleMenu };\n","import React from 'react';\n\nimport { truncate } from 'lodash-es';\n\nimport { ActionButton, Separator } from '@/components';\nimport { useLocale } from '@/locales';\n\ninterface IPropsLinkViewBlock {\n  editor: any\n  link: string\n  onClear?: any\n  onEdit?: any\n}\n\nfunction LinkViewBlock(props: IPropsLinkViewBlock) {\n  const { t } = useLocale();\n\n  return (\n    <div className=\"richtext-flex richtext-items-center richtext-gap-2 richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800\">\n      <a\n        href={props?.link}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"richtext-text-sm richtext-underline richtext-break-all\"\n      >\n        {truncate(props?.link, {\n          length: 50,\n          omission: '…',\n        })}\n      </a>\n      {props?.link && <Separator orientation=\"vertical\" className=\"!richtext-h-4\" />}\n      <div className=\"richtext-flex richtext-flex-nowrap\">\n        <ActionButton\n          icon=\"Pencil\"\n          tooltip={t('editor.link.edit.tooltip')}\n          action={() => {\n            props?.onEdit();\n          }}\n          tooltipOptions={{ sideOffset: 15 }}\n        />\n        <ActionButton\n          icon=\"Unlink\"\n          tooltip={t('editor.link.unlink.tooltip')}\n          action={() => {\n            props?.onClear();\n          }}\n          tooltipOptions={{ sideOffset: 15 }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default LinkViewBlock;\n","import { useCallback, useMemo, useState } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu } from '@tiptap/react';\n\nimport LinkEditBlock from '@/extensions/Link/components/LinkEditBlock';\nimport LinkViewBlock from '@/extensions/Link/components/LinkViewBlock';\n\nexport interface BubbleMenuLinkProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nfunction BubbleMenuLink({ editor, disabled }: BubbleMenuLinkProps) {\n  const [showEdit, setShowEdit] = useState(false);\n\n  const link = useMemo(() => {\n    const { href: link } = editor.getAttributes('link');\n    return link as string;\n  }, [editor]);\n\n  const shouldShow = useCallback(({ editor }: { editor: Editor }) => {\n    const isActive = editor.isActive('link');\n    return isActive;\n  }, []);\n\n  const onSetLink = (url: string, text?: string, openInNewTab?: boolean) => {\n    editor\n      .chain()\n      .extendMarkRange('link')\n      .insertContent({\n        type: 'text',\n        text,\n        marks: [\n          {\n            type: 'link',\n            attrs: {\n              href: url,\n              target: openInNewTab ? '_blank' : '',\n            },\n          },\n        ],\n      })\n      .setLink({ href: url })\n      .focus()\n      .run();\n    setShowEdit(false);\n  };\n\n  const unSetLink = useCallback(() => {\n    editor.chain().extendMarkRange('link').unsetLink().focus().run();\n    setShowEdit(false);\n  }, [editor]);\n\n  return (\n    <>\n      <BubbleMenu\n        editor={editor}\n        shouldShow={shouldShow}\n        tippyOptions={{\n          popperOptions: {\n            modifiers: [{ name: 'flip', enabled: false }],\n          },\n          placement: 'bottom-start',\n          offset: [-2, 16],\n          zIndex: 9999,\n          onHidden: () => {\n            setShowEdit(false);\n          },\n        }}\n      >\n        {disabled\n          ? (\n            <></>\n          )\n          : (\n            <>\n              {showEdit\n                ? (\n                  <LinkEditBlock onSetLink={onSetLink} editor={editor} />\n                )\n                : (\n                  <LinkViewBlock\n                    editor={editor}\n                    onClear={unSetLink}\n                    onEdit={() => {\n                      setShowEdit(true);\n                    }}\n                    link={link}\n                  />\n                )}\n            </>\n          )}\n      </BubbleMenu>\n    </>\n  );\n}\n\nexport { BubbleMenuLink };\n","import { Fragment, useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu as BubbleMenuReact } from '@tiptap/react';\n\nimport { Separator, getBubbleImage, getBubbleImageGif, getBubbleVideo } from '@/components';\nimport { Image, ImageGif, Video } from '@/extensions';\nimport { useLocale } from '@/locales';\n\ninterface IPropsBubbleMenu {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Fragment>\n      {item.type === 'divider'\n        ? (\n          <Separator className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n            orientation=\"vertical\"\n          />\n        )\n        : (\n          <Comp\n            {...item.componentProps}\n            disabled={disabled || item?.componentProps?.disabled}\n            editor={editor}\n          />\n        )}\n    </Fragment>\n  );\n}\n\nfunction isImageNode(node: any) {\n  return node.type.name === Image.name;\n}\n\nfunction isImageGifNode(node: any) {\n  return node.type.name === ImageGif.name;\n}\n\nfunction isVideoNode(node: any) {\n  return node.type.name === Video.name;\n}\n\nfunction BubbleMenuImage(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isImage = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isImageNode(node)) {\n        isImage = true;\n        return false; // Stop iteration if an image is found\n      }\n    });\n\n    return isImage;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleImage(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-image-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nfunction BubbleMenuImageGif(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isImage = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isImageGifNode(node)) {\n        isImage = true;\n        return false; // Stop iteration if an image is found\n      }\n    });\n\n    return isImage;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleImageGif(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-image-gif-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nfunction BubbleMenuVideo(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isVideo = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isVideoNode(node)) {\n        isVideo = true;\n        return false;\n      }\n    });\n\n    return isVideo;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n\n    return getBubbleVideo(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.editor, props.disabled, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-video-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nexport { BubbleMenuImage, BubbleMenuVideo, BubbleMenuImageGif };\n","import { useCallback } from 'react';\n\nimport { BubbleMenu } from '@tiptap/react';\nimport { ActionButton } from '@/components/ActionButton';\nimport { deleteNode } from '@/utils/delete-node';\nimport { MultiColumn } from '@/extensions';\nimport { useLocale } from '@/locales';\n\nexport function ColumnsBubbleMenu({ editor }: any) {\n  const { t } = useLocale();\n\n  const shouldShow = useCallback(() => editor.isActive(MultiColumn.name), [editor]);\n  const deleteMe = useCallback(() => deleteNode(MultiColumn.name, editor), [editor]);\n  const addColBefore = useCallback(() => editor.chain().focus().addColBefore().run(), [editor]);\n  const addColAfter = useCallback(() => editor.chain().focus().addColAfter().run(), [editor]);\n  const deleteCol = useCallback(() => editor.chain().focus().deleteCol().run(), [editor]);\n\n  return (\n    <BubbleMenu\n      pluginKey=\"columns-bubble-menu\"\n      editor={editor}\n      shouldShow={shouldShow}\n      tippyOptions={{\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        placement: 'bottom-start',\n        offset: [-2, 16],\n        zIndex: 9999,\n        // onHidden: () => {\n        //   toggleVisible(false)\n        // },\n      }}\n    >\n      <div className=\"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background\">\n        <ActionButton\n          action={addColBefore}\n          icon=\"ColumnAddLeft\"\n          tooltip={t('editor.table.menu.insertColumnBefore')}\n        />\n        <ActionButton\n          action={addColAfter}\n          icon=\"ColumnAddRight\"\n          tooltip={t('editor.table.menu.insertColumnAfter')}\n        />\n        <ActionButton\n          action={deleteCol}\n          icon=\"DeleteColumn\"\n          tooltip={t('editor.table.menu.deleteColumn')}\n        />\n        <ActionButton\n          action={deleteMe}\n          icon=\"Trash2\"\n          tooltip={t('editor.table.menu.delete_column')}\n        />\n      </div>\n    </BubbleMenu>\n  );\n}\n","import type { Editor } from '@tiptap/core';\nimport React, { useMemo } from 'react';\nimport { useLocale } from '@/locales';\n\ninterface IPropsCharactorCount {\n  editor: Editor\n  extensions: any\n}\n\nfunction CharactorCount({ editor, extensions }: IPropsCharactorCount) {\n  const { t } = useLocale();\n\n  const limit = useMemo(() => {\n    return extensions?.find((extension: any) => extension.name === 'base-kit')?.options?.characterCount?.limit;\n  }, [extensions]);\n\n  if (!limit) {\n    return (\n      <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t\">\n        <div className=\"richtext-flex richtext-flex-col\">\n          <div className=\"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm\">\n            <span>\n              {(editor as any).storage.characterCount.characters()}\n              {' '}\n              {t('editor.characters')}\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t\">\n      <div className=\"richtext-flex richtext-flex-col\">\n        <div className=\"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm\">\n          <span>\n            {editor.storage.characterCount.characters()}\n            /\n            {limit}\n            {' '}\n            {t('editor.characters')}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CharactorCount;\n","'use client';\n\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from '@/components/ui/toast';\nimport { useToast } from '@/components/ui/use-toast';\n\nexport function Toaster() {\n  const { toasts } = useToast();\n\n  return (\n    <ToastProvider>\n      {toasts.map(({ id, title, description, action, ...props }) => {\n        return (\n          <Toast key={id}\n            {...props}\n          >\n            <div className=\"richtext-grid richtext-gap-1\">\n              {title && <ToastTitle>\n                {title}\n              </ToastTitle>}\n\n              {description && (\n                <ToastDescription>\n                  {description}\n                </ToastDescription>\n              )}\n            </div>\n\n            {action}\n            <ToastClose />\n          </Toast>\n        );\n      })}\n\n      <ToastViewport />\n    </ToastProvider>\n  );\n}\n","export const RESET_CSS = `\n.reactjs-tiptap-editor, \n.richtext-dialog-content {\n  button,\n  input:where([type=button]),\n  input:where([type=reset]),\n  input:where([type=submit]) {\n    -webkit-appearance: button;\n    background-color: transparent;\n    background-image: none;\n  }\n\n  input,\n  optgroup,\n  select,\n  textarea {\n    font-family: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    font-size: 100%;\n    font-weight: inherit;\n    line-height: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n  }\n\n  button {\n    font-family: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    font-size: 100%;\n    font-weight: inherit;\n    line-height: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n  }\n\n  *,\n  ::before,\n  ::after {\n    box-sizing: border-box;\n    border-width: 0;\n    border-style: solid;\n    border-color: hsl(var(--richtext-border));\n  }\n\n  background-color: hsl(var(--richtext-background));\n  color: hsl(var(--richtext-foreground));\n\n  hr {\n    height: 0;\n    color: inherit;\n    border-top-width: 1px;\n  }\n\n  a {\n    color: inherit;\n    text-decoration: inherit;\n  }\n\n  b,\n  strong {\n    font-weight: bolder;\n  }\n\n  code,\n  kbd,\n  samp,\n  pre {\n    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;\n    font-feature-settings: normal;\n    font-variation-settings: normal;\n    font-size: 1em;\n  }\n\n  table {\n    text-indent: 0;\n    border-color: inherit;\n    border-collapse: collapse;\n  }\n\n  input, textarea {\n    border-width: 1px;\n  }\n\n  textarea {\n    resize: vertical;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    opacity: 1;\n    color: #9ca3af;\n  }\n\n  button, input, textarea {\n    cursor: pointer;\n    color: inherit;\n  }\n\n  img,\n  svg,\n  video,\n  canvas,\n  audio,\n  iframe,\n  embed,\n  object {\n    display: block;\n    vertical-align: middle;\n  }\n\n  img,\n  video {\n    max-width: 100%;\n    height: auto;\n  }\n}\n\ndiv[data-radix-popper-content-wrapper],\ndiv[data-tippy-root] {\n  *,\n  ::before,\n  ::after {\n    box-sizing: border-box;\n    border-width: 0;\n    border-style: solid;\n    border-color: hsl(var(--richtext-border));\n  }\n\n  background-color: hsl(var(--richtext-background));\n  color: hsl(var(--richtext-foreground));\n\n  button, input, textarea {\n    cursor: pointer;\n    color: inherit;\n  }\n}\n`;\n","/* eslint-disable react/display-name */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { memo, useEffect } from 'react';\n\nimport { ProviderEditableEditor, ProviderTheme, useStoreEditableEditor, useStoreTheme } from '@/store/store';\nimport { listenEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nconst EventInitial = memo(({ children, id }: any) => {\n  const [, setEditable] = useStoreEditableEditor(store => store.value);\n  const [, setTheme] = useStoreTheme(store => store.value);\n\n  const handleEditable = (evt: any) => {\n    setEditable({\n      value: evt.detail\n    });\n  };\n\n  const handleTheme = (evt: any) => {\n    setTheme({\n      value: evt.detail\n    });\n  };\n\n  useEffect(() => {\n    const rm3 = listenEvent(EVENTS.EDIT(id), handleEditable);\n    const rm4 = listenEvent(EVENTS.UPDATE_THEME(id), handleTheme);\n\n    return () => {\n      rm3();\n      rm4();\n    };\n  }, []);\n\n  return (\n    <>\n      {children}\n    </>\n  );\n});\n\nexport function ProviderRichText ({ children, id }: { children: React.ReactNode; id: any }) {\n\n  return (\n    <ProviderEditableEditor>\n      <ProviderTheme>\n        <EventInitial id={id}>\n          {children}\n        </EventInitial>\n      </ProviderTheme>\n    </ProviderEditableEditor>\n  );\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nconst APPEND_ORDER = 'data-rc-order';\nconst APPEND_PRIORITY = 'data-rc-priority';\nconst MARK_KEY = 'rc-util-key';\n\nconst containerCache = new Map<ContainerType, Node & ParentNode>();\n\nexport type ContainerType = Element | ShadowRoot;\nexport type Prepend = boolean | 'queue';\nexport type AppendType = 'prependQueue' | 'append' | 'prepend';\n\nexport default function contains(root: Node | null | undefined, n?: Node) {\n  if (!root) {\n    return false;\n  }\n\n  // Use native if support\n  if (root.contains) {\n    return root.contains(n as any);\n  }\n\n  // `document.contains` not support with IE11\n  let node = n;\n  while (node) {\n    if (node === root) {\n      return true;\n    }\n    // @ts-ignore\n    node = node.parentNode;\n  }\n\n  return false;\n}\n\ninterface Options {\n  attachTo?: ContainerType\n  csp?: { nonce?: string }\n  prepend?: Prepend\n  /**\n   * Config the `priority` of `prependQueue`. Default is `0`.\n   * It's useful if you need to insert style before other style.\n   */\n  priority?: number\n  mark?: string\n}\n\nfunction getMark({ mark }: Options = {}) {\n  if (mark) {\n    return mark.startsWith('data-') ? mark : `data-${mark}`;\n  }\n  return MARK_KEY;\n}\n\nfunction getContainer(option: Options) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  const head = document.querySelector('head');\n  return head || document.body;\n}\n\nfunction getOrder(prepend?: Prepend): AppendType {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n\n  return prepend ? 'prepend' : 'append';\n}\n\n/**\n * Find style which inject by rc-util\n */\nfunction findStyles(container: ContainerType) {\n  return [...(containerCache.get(container) || container).children].filter(\n    node => node.tagName === 'STYLE',\n  ) as HTMLStyleElement[];\n}\n\nexport function injectCSS(css: string, option: Options = {}) {\n  const { csp, prepend, priority = 0 } = option;\n  const mergedOrder = getOrder(prepend);\n  const isPrependQueue = mergedOrder === 'prependQueue';\n\n  const styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, mergedOrder);\n\n  if (isPrependQueue && priority) {\n    styleNode.setAttribute(APPEND_PRIORITY, `${priority}`);\n  }\n\n  if (csp?.nonce) {\n    styleNode.nonce = csp?.nonce;\n  }\n  styleNode.innerHTML = css;\n\n  const container = getContainer(option);\n  const { firstChild } = container as any;\n\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (isPrependQueue) {\n      const existStyle = findStyles(container).filter((node) => {\n        // Ignore style which not injected by rc-util with prepend\n        // @ts-ignore\n        if (!['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER))) {\n          return false;\n        }\n\n        // Ignore style which priority less then new style\n        const nodePriority = Number(node.getAttribute(APPEND_PRIORITY) || 0);\n        return priority >= nodePriority;\n      });\n\n      if (existStyle.length > 0) {\n        // @ts-ignore\n        container.insertBefore(styleNode, existStyle.at(-1).nextSibling);\n\n        return styleNode;\n      }\n    }\n\n    // Use `insertBefore` as `prepend`\n    firstChild.before(styleNode);\n  } else {\n    container.append(styleNode);\n  }\n\n  return styleNode;\n}\n\nfunction findExistNode(key: string, option: Options = {}) {\n  const container = getContainer(option);\n\n  return findStyles(container).find(node => node.getAttribute(getMark(option)) === key);\n}\n\nexport function removeCSS(key: string, option: Options = {}) {\n  const existNode = findExistNode(key, option);\n  if (existNode) {\n    // const container = getContainer(option);\n    existNode.remove();\n  }\n}\n\n/**\n * qiankun will inject `appendChild` to insert into other\n */\nfunction syncRealContainer(container: ContainerType, option: Options) {\n  const cachedRealContainer = containerCache.get(container);\n\n  // Find real container when not cached or cached container removed\n  if (!cachedRealContainer || !contains(document, cachedRealContainer)) {\n    const placeholderStyle = injectCSS('', option);\n    const { parentNode } = placeholderStyle;\n    // @ts-ignore\n    containerCache.set(container, parentNode);\n    placeholderStyle.remove();\n  }\n}\n\n/**\n * manually clear container cache to avoid global cache in unit testes\n */\nexport function clearContainerCache() {\n  containerCache.clear();\n}\n\nexport function updateCSS(css: string, key: string, option: Options = {}) {\n  const container = getContainer(option);\n\n  // Sync real parent\n  syncRealContainer(container, option);\n\n  const existNode = findExistNode(key, option);\n\n  if (existNode) {\n    if (option.csp?.nonce && existNode.nonce !== option.csp?.nonce) {\n      existNode.nonce = option.csp?.nonce;\n    }\n\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n\n    return existNode;\n  }\n\n  const newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}\n","import { forwardRef, useEffect, useId, useImperativeHandle, useLayoutEffect, useMemo } from 'react';\n\nimport type { AnyExtension, Editor as CoreEditor } from '@tiptap/core';\nimport type { UseEditorOptions } from '@tiptap/react';\nimport { EditorContent, useEditor } from '@tiptap/react';\nimport { differenceBy, throttle } from 'lodash-es';\n\nimport { BubbleMenu, Toolbar, TooltipProvider } from '@/components';\nimport CharactorCount from '@/components/CharactorCount';\nimport { Toaster } from '@/components/ui/toaster';\nimport { EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME } from '@/constants';\nimport { RESET_CSS } from '@/constants/resetCSS';\nimport { editableEditorActions } from '@/store/editableEditor';\nimport { ProviderRichText } from '@/store/ProviderRichText';\nimport { themeActions } from '@/theme/theme';\nimport type { BubbleMenuProps, ToolbarProps } from '@/types';\nimport { removeCSS, updateCSS } from '@/utils/dynamicCSS';\nimport { hasExtension } from '@/utils/utils';\n\nimport '../styles/index.scss';\n\n/**\n * Interface for RichTextEditor component props\n */\nexport interface RichTextEditorProps {\n  /** Content of the editor */\n  content: string\n  /** Extensions for the editor */\n  extensions: AnyExtension[]\n\n  /** Output format */\n  output: 'html' | 'json' | 'text'\n  /** Model value */\n  modelValue?: string | object\n  /** Dark mode flag */\n  dark?: boolean\n  /** Dense mode flag */\n  dense?: boolean\n  /** Disabled flag */\n  disabled?: boolean\n  /** Label for the editor */\n  label?: string\n  /** Hide toolbar flag */\n  hideToolbar?: boolean\n  /** Disable bubble menu flag */\n  disableBubble?: boolean\n  /** Hide bubble menu flag */\n  hideBubble?: boolean\n  /** Remove default wrapper flag */\n  removeDefaultWrapper?: boolean\n  /** Maximum width */\n  maxWidth?: string | number\n  /** Minimum height */\n  minHeight?: string | number\n  /** Maximum height */\n  maxHeight?: string | number\n  /** Content class */\n  contentClass?: string | string[] | Record<string, any>\n  /** Content change callback */\n  onChangeContent?: (val: any) => void\n  /** Bubble menu props */\n  bubbleMenu?: BubbleMenuProps\n  /** Toolbar props */\n  toolbar?: ToolbarProps\n\n  /** Use editor options */\n  useEditorOptions?: UseEditorOptions\n\n  /** Use editor options */\n  resetCSS?: boolean\n}\n\nfunction RichTextEditor(props: RichTextEditorProps, ref: React.ForwardedRef<{ editor: CoreEditor | null }>) {\n  const { content, extensions, useEditorOptions = {} } = props;\n\n  const id = useId();\n\n  const sortExtensions = useMemo(() => {\n    const diff = differenceBy(extensions, extensions, 'name');\n    const exts = extensions.map((k: any) => {\n      const find = extensions.find((ext: any) => ext.name === k.name);\n      if (!find) {\n        return k;\n      }\n      return k.configure(find.options);\n    });\n    return [...exts, ...diff].map((k, i) => k.configure({ sort: i }));\n  }, [extensions]);\n\n  const onValueChange = throttle((editor) => {\n    const output = getOutput(editor, props.output as any);\n\n    props?.onChangeContent?.(output as any);\n  }, EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME);\n\n  const editor = useEditor({\n    extensions: sortExtensions,\n    content,\n    onUpdate: ({ editor }) => {\n      if (onValueChange)\n        onValueChange(editor);\n    },\n    ...useEditorOptions,\n  }) as any;\n\n  useImperativeHandle(ref, () => {\n    return {\n      editor,\n    };\n  });\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('dark', props.dark);\n    themeActions.setTheme(id, props.dark ? 'dark' : 'light');\n  }, [props.dark]);\n\n  useEffect(() => {\n    editor?.setEditable(!props?.disabled);\n    editableEditorActions.setDisable(id, !props?.disabled);\n  }, [editor, props?.disabled]);\n\n  useEffect(() => {\n    if (props?.resetCSS !== false) {\n      updateCSS(RESET_CSS, 'react-tiptap-reset');\n    }\n\n    return () => {\n      removeCSS('react-tiptap-reset');\n    };\n  }, [props?.resetCSS]);\n\n  function getOutput(editor: CoreEditor, output: RichTextEditorProps['output']) {\n    if (props?.removeDefaultWrapper) {\n      if (output === 'html') {\n        return editor.isEmpty ? '' : editor.getHTML();\n      }\n      if (output === 'json') {\n        return editor.isEmpty ? {} : editor.getJSON();\n      }\n      if (output === 'text') {\n        return editor.isEmpty ? '' : editor.getText();\n      }\n      return '';\n    }\n\n    if (output === 'html') {\n      return editor.getHTML();\n    }\n    if (output === 'json') {\n      return editor.getJSON();\n    }\n    if (output === 'text') {\n      return editor.getText();\n    }\n    return '';\n  }\n\n  useLayoutEffect(() => {\n    if (editor) editor!.id = id;\n  }, [id, editor]);\n\n  useEffect(() => {\n    return () => {\n      editor?.destroy?.();\n    };\n  }, []);\n\n  const hasExtensionValue = hasExtension(editor, 'characterCount');\n\n  if (!editor) {\n    return <></>;\n  }\n\n  return (\n    <div className=\"reactjs-tiptap-editor\">\n      <ProviderRichText\n        id={id}\n      >\n        <TooltipProvider delayDuration={0}\n          disableHoverableContent\n        >\n          <div className=\"richtext-overflow-hidden richtext-rounded-[0.5rem] richtext-bg-background richtext-shadow richtext-outline richtext-outline-1\">\n            <div className=\"richtext-flex richtext-max-h-full richtext-w-full richtext-flex-col\">\n              {!props?.hideToolbar && <Toolbar disabled={!!props?.disabled}\n                editor={editor}\n                toolbar={props.toolbar}\n              />}\n\n              <EditorContent className={`richtext-relative ${props?.contentClass || ''}`}\n                editor={editor}\n\n              />\n\n              {hasExtensionValue && <CharactorCount editor={editor}\n                extensions={extensions}\n              />}\n\n              {!props?.hideBubble && <BubbleMenu bubbleMenu={props?.bubbleMenu}\n                disabled={props?.disabled}\n                editor={editor}\n              />}\n            </div>\n          </div>\n        </TooltipProvider>\n      </ProviderRichText>\n\n      <Toaster />\n    </div>\n  );\n}\n\nexport default forwardRef(RichTextEditor);\n"],"names":["cn","inputs","twMerge","clsx","isMacResult","isMac","getShortcutKey","key","getShortcutKeys","keys","ActionButton","React","props","ref","icon","tooltip","disabled","customClass","loading","shortcutKeys","tooltipOptions","action","isActive","children","asChild","upload","rest","Icon","icons","Tooltip","jsx","TooltipTrigger","jsxs","Slot","Toggle","TooltipContent","createFastContext","initialState","useStoreData","store","useRef","get","useCallback","subscribers","set","value","callback","subscribe","StoreContext","createContext","Provider","useStore","selector","useContext","useSyncExternalStore","ProviderEditableEditor","useStoreEditableEditor","ProviderTheme","useStoreTheme","createSignal","listenEvent","eventName","dispatchEvent","detail","EVENTS","id","useEditableEditor","v","editableEditorActions","disable","deleteNode","nodeType","editor","state","$pos","done","d","node","pos","clamp","val","min","max","isNumber","isString","isFunction","getCssUnitWithDefault","defaultUnit","stringValue","num","unitMatch","unit","hasExtension","name","extensions","i","ensureNameValueOptions","arr","item","buttonVariants","cva","Button","className","variant","size","DropdownMenu","DropdownMenuPrimitive","DropdownMenuTrigger","DropdownMenuPortal","DropdownMenuSub","DropdownMenuSubTrigger","inset","ChevronRight","DropdownMenuSubContent","DropdownMenuContent","sideOffset","DropdownMenuItem","DropdownMenuCheckboxItem","checked","Check","DropdownMenuRadioItem","Circle","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuShortcut","Input","type","labelVariants","Label","LabelPrimitive","Popover","PopoverPrimitive","PopoverTrigger","PopoverContent","align","Separator","orientation","decorative","SeparatorPrimitive","Switch","SwitchPrimitives","Tabs","TabsPrimitive","TabsList","TabsTrigger","TabsContent","ToastProvider","ToastPrimitives","ToastViewport","toastVariants","Toast","ToastAction","ToastClose","X","ToastTitle","ToastDescription","toggleVariants","TogglePrimitive","TooltipProvider","TooltipPrimitive","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","t","toast","listeners","memoryState","listener","update","dismiss","open","useToast","setState","index","Checkbox","CheckboxPrimitive","AspectRatio","BlockquoteLeft","DeleteColumn","DeleteRow","FileWordOutline","IconComponent","FormatLineHeight","MenuDown","SizeL","SizeM","SizeS","ColumnAddLeft","ColumnAddRight","Direction","Excalidraw","ExportPdf","ExportWord","GifIcon","LeftToRight","Mermaid","RightToLeft","Twitter","ImportWord","Bold","LoaderCircle","Italic","Underline","Quote","Strikethrough","Minus","Eraser","PaintRoller","Redo2","Undo2","TextAlignCenterIcon","TextAlignJustifyIcon","TextAlignLeftIcon","TextAlignRightIcon","ChevronDown","Subscript","Superscript","Code","CodeXml","Type","IndentIncrease","IndentDecrease","List","ListOrdered","ListTodo","Link","ImageUp","Video","Maximize","Minimize","Table","Sparkles","Pencil","Unlink","BetweenHorizonalEnd","BetweenHorizonalStart","BetweenVerticalStart","BetweenVerticalEnd","TableCellsMerge","TableCellsSplit","Trash2","Trash","Replace","ChevronsUpDown","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","Columns2","Columns3","Columns4","Plus","GripVertical","Copy","Clipboard","PanelLeft","PanelRight","Frame","SmilePlus","SmilePlusIcon","Sigma","BookMarked","ZoomIn","ZoomOut","Settings","Eye","Paperclip","ChevronUp","CropIcon","FlipVertical","FlipHorizontal","PencilRuler","IconC","fill","HighlightActionButton","selectedColor","setSelectedColor","useState","onChange","color","_a","toggleColor","setSelectedColorDebounce","debounce","ColorPicker","LinkEditBlock","useLocale","form","setForm","openInNewTab","setOpenInNewTab","useEffect","link","target","from","to","text","handleSubmit","event","e","createColumn","colType","colContent","getColumnsNodeTypes","schema","roles","createColumns","colsCount","types","cols","col","addOrDeleteCol","maybeColumns","findParentNode","MultiColumn","maybeColumn","Column","colIndex","colsJSON","nextIndex","colJSON","nextCols","Node","nextSelectPos","tr","TextSelection","gotoCol","EXTENSION_PRIORITY_HIGHEST","element","HTMLAttributes","mergeAttributes","attrs","offset","IndentProps","updateIndentLevel","delta","doc","selection","AllSelection","setNodeIndentMarkup","isList","indent","nodeAttrs","createIndentCommand","actionDialogImage","Dialog","DialogPrimitive","DialogTrigger","DialogPortal","DialogOverlay","DialogContent","DialogHeader","DialogFooter","DialogTitle","DialogDescription","extractFilename","src","extractFileExtension","fileName","normalizeFileSize","normalizeFileType","fileType","readImageAsBase64","file","resolve","reader","dataURLtoFile","dataurl","filename","mime","bstr","n","u8arr","ImageCropper","imageInline","onClose","dialogOpen","setDialogOpen","imgRef","crop","setCrop","croppedImageUrl","setCroppedImageUrl","fileInput","urlUpload","setUrlUpload","onCropComplete","getCroppedImg","image","canvas","scaleX","scaleY","ctx","onCrop","fileCrop","uploadOptions","_b","extension","ExtensionImage","error","handleClick","handleFile","files","base64","Fragment","ReactCrop","c","ActionImageButton","setOpen","handleUploadImage","evt","setLink","setImageInline","Image","useMemo","rm1","handleLink","ResizeDirection","ImageView","maxSize","setMaxSize","IMAGE_MAX_SIZE","originalSize","setOriginalSize","resizeDirections","resizing","setResizing","resizerState","setResizerState","inline","imgAttrs","alt","w","h","flipX","flipY","width","height","transformStyles","transform","imageMaxStyle","onImageLoad","selectImage","getPos","getMaxSize","throttle","prev","IMAGE_THROTTLE_WAIT_TIME","onMouseDown","dir","originalWidth","originalHeight","aspectRatio","maxWidth","onMouseMove","x","dx","IMAGE_MIN_SIZE","onMouseUp","onEvents","offEvents","resizeOb","NodeViewWrapper","direction","uploadKey","PluginKey","UploadImagesPlugin","Plugin","DecorationSet","placeholder","createPlaceholder","deco","Decoration","spec","findPlaceholder","found","createImageUpload","validateFn","onUpload","postUpload","defaultInline","view","result","placeholderPos","imageSrc","transaction","handleImagePaste","uploadFn","handleImageDrop","moved","coordinates","DEFAULT_OPTIONS","TiptapImage","attributes","ReactNodeViewRenderer","options","commands","transformStyle","textAlignStyle","img","_","checkIsVideo","url","ActionVideoButton","setError","handleUploadVideo","linkConvert","VIDEO_SIZE","iframeHTMLAttributes","responsiveStyle","responsiveSizesStyle","responsiveDOM","IframeNodeView","updateAttributes","isEditable","originalLink","setOriginalLink","handleConfirm","Iframe","onResize","Resizable","styles","jsonToStr","json","getDatasetAttribute","attribute","transformToJSON","dataKey","texts","str","accu","toNumber","nodeAttrsToDataset","encodeValue","chain","_c","nodeInputRule","Textarea","mapSelf","useAttributes","attrbute","defaultValue","map","mapFn","setValue","prevValueCache","nextAttrs","deepEqual","KatexActiveButton","Katex","defaultShowPicker","currentValue","setCurrentValue","submit","formatText","katex","previewContent","HelpCircle","useTheme","themeActions","theme","convertColorToRGBA","hexCode","opacity","g","b","rgb","hex","KatexWrapper","backgroundColor","content","getEventEmitter","mitt","OPEN_EXCALIDRAW_SETTING_MODAL","subject","handler","cancelSubject","triggerOpenExcalidrawSettingModal","data","ExcalidrawActiveButton","setExcalidraw","setData","initialData","setInitialData","visible","toggleVisible","toggleLoading","renderEditor","div","res","renderExcalidraw","app","elements","appState","save","MIN_ZOOM","MAX_ZOOM","ZOOM_STEP","INHERIT_SIZE_STYLE","NodeViewExcalidraw","exportToSvgRef","Svg","setSvg","zoom","setZoomState","onViewportChange","setZoom","currentZoom","isUnmount","err","svg","VisibilitySensor","prevProps","nextProps","DEFAULT_MIND_DATA","ImageGifWrap","giphyApiKey","gifs","setGifs","limit","inputRef","search","term","kind","r","response","handleInputChange","o","ImageGifActionButton","giphyblock","ImageGifView","ImageGif","shortId","length","defaultCode","MermaidActiveButton","mermaidCode","setMermaidCode","svgCode","setSvgCode","mermaidRef","renderMermaid","mermaid","mermaidInit","svg64","NodeViewMermaid","selected","wI","hI","ratio","replace","NodeViewTweet","tweetId","Tweet","FormEditLinkTwitter","setSrc","srcInit","TwitterActiveButton","onSetLink","TWITTER_REGEX_GLOBAL","TWITTER_REGEX","isValidTwitterUrl","nodePasteRule","match","HugeiconsCursorRectangleSelection01","MdiFormatLetterCase","MaterialSymbolsEdit","PhHighlighter","OuiEraser","MdiSquareOutline","MaterialSymbolsRectangleOutline","MaterialSymbolsCircleOutline","TablerTriangle","MaterialSymbolsHexagonOutline","MingcuteDiamondSquareLine","IcSharpArrowRightAlt","SolarUndoLeftRoundBold","SolarUndoRightRoundBold","MaterialSymbolsDelete","PhLineSegmentFill","IcSharpFavorite","MaterialSymbolsKidStar","MaterialSymbolsCloud","AkarIconsParallelogram","highlightC","Color4","COLOR","ColorPickerHighlight","setSelected","PencilOption","setColorPen","setThicknessPen","thickness","setThickness","HighlightOption","setColorHighlight","ShapeOption","changeColorShape","changeBorderColorShape","onThicknessChange","ControlDrawer","refEditor","onUndo","changeShape","onRedo","onClear","tool","setTool","setType","penTool","clear","DrawerActiveButton","refWidget","parentElement","Editor4","makeDropdownToolbar","contentHtml","shapeWidget","NodeViewDrawer","Drawer","EditDrawerBlock","useExtension","setExtension","tippyOptions","ItemA","Comp","isDrawerNode","BubbleMenuDrawer","lang","shouldShow","$from","isDrawer","items","getBubbleDrawer","BubbleMenuReact","containerStyle","SizeSetter","onOk","cache","getEditorContainerDOMSize","targetNode","config","observer","BubbleMenuExcalidraw","createUser","setSize","openEditLinkModal","deleteMe","BubbleMenu","BubbleMenuIframe","formUrl","setFormUrl","handleCancel","handleOk","visitLink","BubbleMenuKatex","EditMermaidBlock","isMermaidNode","BubbleMenuMermaid","isMermaid","getBubbleMermaid","BubbleMenuTwitter","showEdit","setShowEdit","bubbleMenu","extensionsNames","ext","renderMenuItems","ColumnsBubbleMenu","TableBubbleMenu","BubbleMenuLink","_d","BubbleMenuImage","_e","BubbleMenuImageGif","_f","BubbleMenuVideo","_g","_h","_i","_j","_k","_l","ContentMenu","_m","BubbleMenuText","_n","NoFill","highlight","colors","DEFAULT_COLORS_LIST","chunkedColors","colorsArray","chunked","recentColorsStore","setRecentColorsStore","setRecentColor","newRecentColors","setColor","idx","AddMoreColor","colorMore","setColorMore","openColorMore","setOpenColorMore","HexColorPicker","Toolbar","toolbar","toolbarItems","sortExtensions","acc","a","menus","button","divider","spacer","_button","menu","k","containerDom","innerContent","dom","ButtonComponent","imageSizeMenus","localeActions","IMAGE_SIZE","imageGifSizeMenus","imageAlignMenus","iconMap","imageGifAlignMenus","imageMermaidAlignMenus","imageDrawerAlignMenus","videoSizeMenus","getBubbleImage","deleteSelection","getBubbleImageGif","getBubbleVideo","getBubbleText","BUBBLE_TEXT_LIST","getSelectionRanges","range","depth","ranges","root","nodeRange","NodeRange","startIndex","selectionRange","SelectionRange","NodeRangeBookmark","anchor","head","__publicField","mapping","NodeRangeSelection","Selection","bias","isSamePosition","isAtDocEnd","resolvedTo","resolvedFrom","selectionRanges","other","newFrom","newTo","remainingRanges","currentRange","newPosition","cloneElement","clonedNode","originalElements","clonedElements","computedStyles","getComputedStyles","styleProperty","minMax","minimum","maximum","removeNode","findElementNextToCoords","y","targetElement","documentPosition","currentX","elementsAtPoint","proseMirrorIndex","el","relevantElements","currentElement","getSelectionRangesNearCursor","editorDocument","nearestElement","mouseXPosition","cursorPosition","mouseX","mouseY","editorPaddingLeft","editorPaddingRight","editorBorderLeft","editorBorderRight","editorRect","positionAtCoords","startResolvedPosition","endResolvedPosition","getPreviousNodeStartPosition","document","position","resolvedPosition","nodeDepth","getAncestorNodeAtDepth","currentNode","currentDepth","ancestorNode","parentNode","getOuterNodePos","dragHandlePluginDefaultKey","DragHandlePlugin","customPluginKey","dragHandleElement","onNodeChange","dragHandleContainer","tippyInstance","isDragLocked","selectedNode","selectedNodePosition","editorView","isSelectionEmpty","selectionStart","selectionEnd","nearCursorRanges","currentSelectionRanges","hasOverlappingRanges","nearRange","selectedRanges","dragPreviewElement","startPos","endPos","nodeSelection","selectionSlice","oldState","isLocked","shouldHide","newPos","initializeDragHandle","setupDragHandleContainer","tippy","getDefaultTippyConfig","canUpdateDragHandle","shouldUpdatePosition","getValidTargetElement","updateNodeInformation","cleanup","domPosition","previousNodePos","updateTippyPosition","shouldHideDragHandle","hideDragHandle","resetSelectedState","mouseEvent","previousNodePosition","pluginKey","setCurrentNode","currentNodePos","setCurrentNodePos","dragElement","pluginRef","menuOpen","setMenuOpen","hasTextAlignExtension","hasIndentExtension","hasClearExtension","handleNodeChange","resetTextFormatting","copyNodeToClipboard","duplicateNode","$anchor","setTextAlign","alignments","increaseIndent","indentTr","decreaseIndent","handleAdd","currentNodeSize","insertPos","currentNodeIsEmptyParagraph","focusPos","handleMenuOpenChange","onAddColumnBefore","onAddColumnAfter","onDeleteColumn","onAddRowAbove","onAddRowBelow","onDeleteRow","onMergeCell","onSplitCell","onDeleteTable","onSetCellBackground","tableWrapper","sticky","_p","_o","_r","_q","LinkViewBlock","truncate","unSetLink","isImageNode","isImageGifNode","isVideoNode","isImage","isVideo","addColBefore","addColAfter","deleteCol","CharactorCount","Toaster","toasts","title","description","RESET_CSS","EventInitial","memo","setEditable","setTheme","handleEditable","handleTheme","rm3","rm4","ProviderRichText","APPEND_ORDER","APPEND_PRIORITY","MARK_KEY","containerCache","contains","getMark","mark","getContainer","option","getOrder","prepend","findStyles","container","injectCSS","css","csp","priority","mergedOrder","isPrependQueue","styleNode","firstChild","existStyle","nodePriority","findExistNode","removeCSS","existNode","syncRealContainer","cachedRealContainer","placeholderStyle","updateCSS","newNode","RichTextEditor","useEditorOptions","useId","diff","differenceBy","find","onValueChange","output","getOutput","EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME","useEditor","useImperativeHandle","useLayoutEffect","hasExtensionValue","EditorContent","RichTextEditor$1","forwardRef"],"mappings":"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"}