{"version":3,"file":"RichTextEditor-DAqU7JiB.cjs","sources":["../src/lib/utils.ts","../src/utils/plateform.ts","../src/components/ActionButton.tsx","../src/store/fast-context.tsx","../src/store/store.ts","../src/utils/customEvents/customEvents.ts","../src/utils/customEvents/events.constant.ts","../src/store/editableEditor.ts","../src/utils/delete-node.ts","../src/utils/utils.ts","../src/components/ui/button.tsx","../src/components/ui/dropdown-menu.tsx","../src/components/ui/input.tsx","../src/components/ui/label.tsx","../src/components/ui/popover.tsx","../src/components/ui/separator.tsx","../src/components/ui/switch.tsx","../src/components/ui/tabs.tsx","../src/components/ui/toast.tsx","../src/components/ui/toggle.tsx","../src/components/ui/tooltip.tsx","../src/components/ui/use-toast.ts","../src/components/ui/checkbox.tsx","../src/components/icons/AspectRatio.tsx","../src/components/icons/Blockquote.tsx","../src/components/icons/DeleteColumn.tsx","../src/components/icons/DeleteRow.tsx","../src/components/icons/FileWordOutline.tsx","../src/components/icons/Icon.tsx","../src/components/icons/LineHeight.tsx","../src/components/icons/MenuDown.tsx","../src/components/icons/SizeL.tsx","../src/components/icons/SizeM.tsx","../src/components/icons/SizeS.tsx","../src/components/icons/ColumnAddLeft.tsx","../src/components/icons/ColumnAddRight.tsx","../src/components/icons/Direction.tsx","../src/components/icons/Excalidraw.tsx","../src/components/icons/ExportPdf.tsx","../src/components/icons/ExportWord.tsx","../src/components/icons/GIfIcon.tsx","../src/components/icons/LeftToRight.tsx","../src/components/icons/Mermaid.tsx","../src/components/icons/RightToLeft.tsx","../src/components/icons/Twitter.tsx","../src/components/icons/ImportWord.tsx","../src/components/icons/icons.ts","../src/extensions/Highlight/components/HighlightActionButton.tsx","../src/extensions/Link/components/LinkEditBlock.tsx","../src/utils/columns.ts","../src/extensions/MultiColumn/MultiColumn.ts","../src/extensions/MultiColumn/Column.ts","../src/utils/indent.ts","../src/extensions/Image/store.ts","../src/components/ui/dialog.tsx","../src/utils/file.ts","../src/extensions/Image/components/ImageCropper.tsx","../src/extensions/Image/components/ActionImageButton.tsx","../src/extensions/Image/components/ImageView.tsx","../src/plugins/image-upload.ts","../src/extensions/Image/Image.ts","../src/extensions/Video/components/ActiveVideoButton.tsx","../src/extensions/Video/Video.ts","../src/extensions/Iframe/components/IframeNodeView.tsx","../src/utils/dom-dataset.ts","../src/extensions/Iframe/Iframe.ts","../src/components/ui/textarea.tsx","../src/hooks/useAttributes.tsx","../src/extensions/Katex/components/KatexActiveButton.tsx","../src/theme/theme.ts","../src/utils/color.ts","../src/extensions/Katex/components/KatexWrapper.tsx","../src/extensions/Katex/Katex.ts","../src/utils/_event.ts","../src/extensions/Excalidraw/components/ExcalidrawActiveButton.tsx","../src/extensions/Excalidraw/components/NodeViewExcalidraw/NodeViewExcalidraw.tsx","../src/extensions/Excalidraw/Excalidraw.ts","../src/extensions/ImageGif/components/ImageGifActionButton.tsx","../src/extensions/ImageGif/components/ImageGifView.tsx","../src/extensions/ImageGif/ImageGif.ts","../src/utils/shortId.ts","../src/extensions/Mermaid/components/MermaidActiveButton.tsx","../src/extensions/Mermaid/components/NodeViewMermaid/NodeViewMermaid.tsx","../src/extensions/Mermaid/Mermaid.ts","../src/extensions/Twitter/components/NodeViewTweet.tsx","../src/extensions/Twitter/components/FormEditLinkTwitter.tsx","../src/extensions/Twitter/components/TwitterActiveButton.tsx","../src/extensions/Twitter/Twitter.ts","../src/extensions/Drawer/components/ControlDrawer/icon.tsx","../src/extensions/Drawer/components/ControlDrawer/ControlDrawer.tsx","../src/extensions/Drawer/components/DrawerActiveButton.tsx","../src/extensions/Drawer/components/NodeViewDrawer/NodeViewDrawer.tsx","../src/extensions/Drawer/Drawer.ts","../src/extensions/Drawer/components/EditDrawerBlock.tsx","../src/hooks/useExtension.tsx","../src/components/menus/components/BubbleMenuDrawer.tsx","../src/components/SizeSetter/SizeSetter.tsx","../src/utils/editor-container-size.ts","../src/components/menus/components/BubbleMenuExcalidraw.tsx","../src/components/menus/components/BubbleMenuIframe.tsx","../src/components/menus/components/BubbleMenuKatex.tsx","../src/extensions/Mermaid/components/EditMermaidBlock.tsx","../src/components/menus/components/BubbleMenuMermaid.tsx","../src/components/menus/components/BubbleMenuTwitter.tsx","../src/components/BubbleMenu.tsx","../src/components/icons/NoFill.tsx","../src/components/ColorPicker.tsx","../src/components/Toolbar.tsx","../src/components/menus/bubble.ts","../src/plugins/DragHandle/range.ts","../src/plugins/DragHandle/utils.ts","../src/plugins/DragHandle/index.ts","../src/components/menus/components/ContentMenu.tsx","../src/components/menus/components/BubbleMenuText.tsx","../src/components/menus/components/TableBubbleMenu.tsx","../src/extensions/Link/components/LinkViewBlock.tsx","../src/components/menus/components/BubbleMenuLink.tsx","../src/components/menus/components/BubbleMenuMedia.tsx","../src/components/menus/components/ColumnsBubbleMenu.tsx","../src/components/CharactorCount.tsx","../src/components/ui/toaster.tsx","../src/constants/resetCSS.ts","../src/store/ProviderRichText.tsx","../src/utils/dynamicCSS.ts","../src/components/RichTextEditor.tsx"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n// asd\n","// We'll cache the result of isMac() and isTouchDevice(), since they shouldn't\n// change during a session. That way repeated calls don't require any logic and\n// are rapid.\nlet isMacResult: boolean | undefined;\nlet isTouchDeviceResult: boolean | undefined;\n\n/**\n * Return true if the user is using a Mac (as opposed to Windows, etc.) device.\n */\nexport function isMac(): boolean {\n  if (isMacResult === undefined) {\n    isMacResult = navigator.platform.includes('Mac');\n  }\n  return isMacResult;\n}\n\n/**\n * 根据 Mac 和非 Mac 平台，返回应该用于键盘快捷键的修饰键的可读版本。用于直观地指示应该按哪个键。\n */\nexport function getShortcutKey(key: string): string {\n  if (`${key}`.toLowerCase() === 'mod') {\n    return isMac() ? '⌘' : 'Ctrl';\n  } else if (`${key}`.toLowerCase() === 'alt') {\n    return isMac() ? '⌥' : 'Alt';\n  } else if (`${key}`.toLowerCase() === 'shift') {\n    return isMac() ? '⇧' : 'Shift';\n  } else {\n    return key;\n  }\n}\nexport function getShortcutKeys(keys: string[]): string {\n  return keys.map(getShortcutKey).join(' ');\n}\n\n/** Return true if the user is using a touch-based device. */\nexport function isTouchDevice(): boolean {\n  if (isTouchDeviceResult === undefined) {\n    // This technique is taken from\n    // https://hacks.mozilla.org/2013/04/detecting-touch-its-the-why-not-the-how/\n    // (and https://stackoverflow.com/a/4819886/4543977)\n    isTouchDeviceResult\n      = (window && 'ontouchstart' in window)\n        || navigator.maxTouchPoints > 0\n      // @ts-expect-error: msMaxTouchPoints is IE-specific, so needs to be ignored\n        || navigator.msMaxTouchPoints > 0;\n  }\n\n  return isTouchDeviceResult;\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/display-name */\nimport React from 'react';\n\nimport { Slot } from '@radix-ui/react-slot';\nimport type { TooltipContentProps } from '@radix-ui/react-tooltip';\n\nimport { Toggle, Tooltip, TooltipContent, TooltipTrigger, icons } from '@/components';\nimport { cn } from '@/lib/utils';\nimport type { ButtonViewReturnComponentProps } from '@/types';\nimport { getShortcutKeys } from '@/utils/plateform';\n\nexport interface ActionButtonProps {\n  /* Icon name to display */\n  icon?: string\n  /* Button title */\n  title?: string\n  /* Tooltip text */\n  tooltip?: string\n  /* Whether the button is disabled */\n  disabled?: boolean\n  /* Keyboard shortcut keys */\n  shortcutKeys?: string[]\n  /* Custom CSS class */\n  customClass?: string\n  /* Loading state */\n  loading?: boolean\n  /* Tooltip options */\n  tooltipOptions?: TooltipContentProps\n  /* Button color */\n  color?: string\n  /* Click action handler */\n  action?: ButtonViewReturnComponentProps['action']\n  /* Active state checker */\n  isActive?: ButtonViewReturnComponentProps['isActive']\n  /* Child components */\n  children?: React.ReactNode\n  /* Whether to render as child */\n  asChild?: boolean\n  /* Whether it's an upload button */\n  upload?: boolean\n}\n\nconst ActionButton = React.forwardRef<HTMLButtonElement, Partial<ActionButtonProps>>(\n  (props, ref) => {\n    const {\n      icon = undefined,\n      // title = undefined,\n      tooltip = undefined,\n      disabled = false,\n      customClass = '',\n      // color = undefined,\n      loading = undefined,\n      shortcutKeys = undefined,\n      tooltipOptions = {},\n      action = undefined,\n      isActive = undefined,\n      children,\n      asChild = false,\n      upload = false,\n      ...rest\n    } = props;\n\n    const Icon = icons[icon as string];\n    const Comp = asChild ? Slot : Toggle;\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Comp\n            data-state={isActive?.() ? 'on' : 'off'}\n            onClick={action}\n            ref={ref}\n            size=\"sm\"\n            className={cn('richtext-w-[32px] richtext-h-[32px]', customClass)}\n            // pressed={isActive?.() || false}\n            disabled={disabled}\n            {...(rest as Omit<typeof rest, 'loading'>)}\n          >\n            {Icon && <Icon className=\"richtext-size-4\" />}\n            {children}\n          </Comp>\n        </TooltipTrigger>\n\n        {tooltip && (\n          <TooltipContent {...tooltipOptions}>\n            <div className=\"richtext-flex richtext-max-w-24 richtext-flex-col richtext-items-center richtext-text-center\">\n              <div>\n                {tooltip}\n              </div>\n\n              {!!shortcutKeys?.length && <span>\n                {getShortcutKeys(shortcutKeys)}\n              </span>}\n            </div>\n          </TooltipContent>\n        )}\n      </Tooltip>\n    );\n  },\n);\n\nexport {\n  ActionButton,\n};\n","import React, {\n  useRef,\n  createContext,\n  useContext,\n  useCallback,\n  useSyncExternalStore,\n} from 'react';\n\nexport default function createFastContext<Store>(initialState: Store) {\n  function useStoreData(): {\n    get: () => Store;\n    set: (value: Partial<Store>) => void;\n    subscribe: (callback: () => void) => () => void; } {\n    const store = useRef(initialState);\n\n    const get = useCallback(() => store.current, []);\n\n    const subscribers = useRef(new Set<() => void>());\n\n    const set = useCallback((value: Partial<Store>) => {\n      store.current = { ...store.current, ...value };\n      subscribers.current.forEach((callback) => callback());\n    }, []);\n\n    const subscribe = useCallback((callback: () => void) => {\n      subscribers.current.add(callback);\n      return () => subscribers.current.delete(callback);\n    }, []);\n\n    return {\n      get,\n      set,\n      subscribe,\n    };\n  }\n\n  type UseStoreDataReturnType = ReturnType<typeof useStoreData>;\n\n  const StoreContext = createContext<UseStoreDataReturnType | null>(null);\n\n  function Provider({ children }: { children: React.ReactNode }) {\n    return (\n      <StoreContext.Provider value={useStoreData()}>\n        {children}\n      </StoreContext.Provider>\n    );\n  }\n\n  function useStore<SelectorOutput>(\n    selector: (store: Store) => SelectorOutput\n  ): [SelectorOutput, (value: Partial<Store>) => void] {\n    const store = useContext(StoreContext);\n    if (!store) {\n      throw new Error('Store not found');\n    }\n\n    const state = useSyncExternalStore(\n      store.subscribe,\n      () => selector(store.get()),\n      () => selector(initialState),\n    );\n\n    return [state, store.set];\n  }\n\n  return {\n    Provider,\n    useStore,\n  };\n}\n","import { createSignal } from 'reactjs-signal';\n\nimport createFastContext from '@/store/fast-context';\n\nconst { Provider: ProviderUploadImage, useStore: useStoreUploadImage } = createFastContext({\n  value: false\n});\n\nconst { Provider: ProviderUploadVideo, useStore: useStoreUploadVideo } = createFastContext({\n  value: false\n});\n\nconst { Provider: ProviderEditableEditor, useStore: useStoreEditableEditor } = createFastContext({\n  value: false\n});\n\nconst { Provider: ProviderTheme, useStore: useStoreTheme } = createFastContext({\n  value: 'light'\n});\n\nexport const atomID = createSignal('0');\n\nexport {\n  ProviderUploadImage,\n  useStoreUploadImage,\n\n  ProviderUploadVideo,\n  useStoreUploadVideo,\n\n  ProviderEditableEditor,\n  useStoreEditableEditor,\n\n  ProviderTheme,\n  useStoreTheme,\n};\n","import { type EventValues } from '@/utils/customEvents/events.constant';\n\nexport function listenEvent (eventName: EventValues, callback: any) {\n  window.addEventListener(eventName, callback);\n\n  return () => {\n    window.removeEventListener(eventName, callback);\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function dispatchEvent (eventName: EventValues, detail?: any) {\n  window.dispatchEvent(\n    new CustomEvent(eventName, {\n      detail,\n    }),\n  );\n}\n","export const EVENTS = {\n  UPLOAD_IMAGE: (id: any) => `UPLOAD_IMAGE-${id}`,\n  UPLOAD_VIDEO: (id: string) => `UPLOAD_VIDEO-${id}`,\n  EDIT: (id: string) => `EDIT-${id}`,\n  UPDATE_THEME: (id: string) => `UPDATE_THEME-${id}`,\n\n  SEARCH_REPLCE:  'SEARCH_REPLACE',\n} as const;\n\n// type EventsType = typeof EVENTS;\nexport type EventValues = any;\n","import { useStoreEditableEditor } from '@/store/store';\nimport { dispatchEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nexport function useEditableEditor() {\n  const [v] = useStoreEditableEditor(store => store.value);\n\n  return v;\n}\n\nexport const editableEditorActions = {\n  setDisable: (id: any, disable: boolean) => {\n    dispatchEvent(EVENTS.EDIT(id), disable);\n  },\n};\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport type { Editor } from '@tiptap/core';\n\nexport function deleteNode(nodeType: string, editor: Editor) {\n  const { state } = editor;\n  const $pos = state.selection.$anchor;\n  let done = false;\n\n  if ($pos.depth) {\n    for (let d = $pos.depth; d > 0; d--) {\n      const node = $pos.node(d);\n      if (node.type.name === nodeType) {\n        // @ts-ignore\n        if (editor.dispatchTransaction)\n          // @ts-ignore\n          editor.dispatchTransaction(state.tr.delete($pos.before(d), $pos.after(d)).scrollIntoView());\n        done = true;\n      }\n    }\n  } else {\n    // @ts-ignore\n    const node = state.selection.node;\n    if (node && node.type.name === nodeType) {\n      editor.chain().deleteSelection().run();\n      done = true;\n    }\n  }\n\n  if (!done) {\n    const pos = $pos.pos;\n\n    if (pos) {\n      const node = state.tr.doc.nodeAt(pos);\n\n      if (node && node.type.name === nodeType) {\n        // @ts-ignore\n        if (editor.dispatchTransaction)\n          // @ts-ignore\n          editor.dispatchTransaction(state.tr.delete(pos, pos + node.nodeSize));\n        done = true;\n      }\n    }\n  }\n\n  return done;\n}\n","import type { Editor } from '@tiptap/core';\n\nimport type { NameValueOption } from '@/types';\n\nexport function clamp(val: number, min: number, max: number) {\n  if (val < min) {\n    return min;\n  }\n  if (val > max) {\n    return max;\n  }\n  return val;\n}\n\nexport const isNumber = (value: unknown): value is number => typeof value === 'number';\n\nexport const isString = (value: unknown): value is string => typeof value === 'string';\n\nexport const isBoolean = (value: unknown): value is boolean => typeof value === 'boolean';\n\nexport const isFunction = (value: unknown): boolean => typeof value === 'function';\n\nexport function getCssUnitWithDefault(value?: string | number, defaultUnit = 'px') {\n  if (!value)\n    return value;\n\n  const stringValue = isNumber(value) ? String(value) : value;\n\n  const num = Number.parseFloat(stringValue);\n  const unitMatch = stringValue.match(/[%a-z]+$/i);\n  const unit = unitMatch ? unitMatch[0] : defaultUnit;\n\n  return Number.isNaN(num) ? value : num + unit;\n}\n\n/**\n * Checks if the editor has a specific extension method with the given name.\n *\n * @param {Editor} editor - An instance of the editor.\n * @param {string} name - The name of the extension method.\n * @returns {boolean} - Returns true if the specified extension method is present, otherwise returns false.\n */\nexport function hasExtension(editor: Editor, name: string): boolean {\n  if (!editor) {\n    return false;\n  }\n\n  // Retrieve the extension manager of the editor, defaulting to an empty array if it doesn't exist\n  const { extensions = [] } = editor?.extensionManager ?? {};\n\n  // Check if the extension method with the specified name is present in the extension manager\n  const find = extensions.find(i => i.name === name);\n\n  // Return false if the extension method with the specified name is not found, otherwise return true\n  if (!find) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Normalizes an array of strings or objects to an array of objects with 'value' and 'name' properties.\n */\nexport function ensureNameValueOptions(arr: (string | NameValueOption)[]) {\n  return arr.map((item) => {\n    if (isString(item)) {\n      return { value: item, name: item };\n    }\n    return item;\n  });\n}\n","import * as React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { type VariantProps, cva } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst buttonVariants = cva(\n  'richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50',\n  {\n    variants: {\n      variant: {\n        default: '!richtext-bg-primary !richtext-text-primary-foreground hover:!richtext-bg-primary/90',\n        destructive:\n          'richtext-bg-destructive richtext-text-destructive-foreground hover:richtext-bg-destructive/90',\n        outline:\n          'richtext-border richtext-border-input richtext-bg-background hover:richtext-bg-accent hover:richtext-text-accent-foreground',\n        secondary:\n          'richtext-bg-secondary richtext-text-secondary-foreground hover:richtext-bg-secondary/80',\n        ghost: 'hover:richtext-bg-accent hover:richtext-text-accent-foreground',\n        link: 'richtext-text-primary richtext-underline-offset-4 hover:richtext-underline',\n      },\n      size: {\n        default: 'richtext-h-10 richtext-px-4 richtext-py-2',\n        sm: 'richtext-h-9 richtext-rounded-md richtext-px-3',\n        lg: 'richtext-h-11 richtext-rounded-md richtext-px-8',\n        icon: 'richtext-h-10 richtext-w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n  VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n","'use client';\n\nimport * as React from 'react';\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      'richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none focus:richtext-bg-accent data-[state=open]:richtext-bg-accent',\n      inset && 'richtext-pl-8',\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"richtext-ml-auto richtext-h-4 richtext-w-4\" />\n  </DropdownMenuPrimitive.SubTrigger>\n));\nDropdownMenuSubTrigger.displayName\n  = DropdownMenuPrimitive.SubTrigger.displayName;\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      'richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-lg data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName\n  = DropdownMenuPrimitive.SubContent.displayName;\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        'richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-md data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n        className,\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n));\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      'richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50',\n      inset && 'richtext-pl-8',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      'richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50',\n      className,\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"richtext-h-4 richtext-w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n));\nDropdownMenuCheckboxItem.displayName\n  = DropdownMenuPrimitive.CheckboxItem.displayName;\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      'richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50',\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"richtext-h-2 richtext-w-2 richtext-fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n));\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      'richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-font-semibold',\n      inset && 'richtext-pl-8',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn('richtext--mx-1 richtext-my-1 richtext-h-px richtext-bg-muted', className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span\n      className={cn('richtext-ml-auto richtext-text-xs richtext-tracking-widest richtext-opacity-60', className)}\n      {...props}\n    />\n  );\n}\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut';\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n};\n","import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'richtext-flex richtext-h-10 richtext-w-full richtext-rounded-md !richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background file:richtext-border-0 file:richtext-bg-transparent file:richtext-text-sm file:richtext-font-medium placeholder:richtext-text-muted-foreground focus-visible:richtext-outline-none  disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = 'Input';\n\nexport { Input };\n","'use client';\n\nimport * as React from 'react';\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { type VariantProps, cva } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst labelVariants = cva(\n  'richtext-text-sm richtext-font-medium richtext-leading-none peer-disabled:richtext-cursor-not-allowed peer-disabled:richtext-opacity-70',\n);\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n  VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n","'use client';\n\nimport * as React from 'react';\nimport * as PopoverPrimitive from '@radix-ui/react-popover';\n\nimport { cn } from '@/lib/utils';\n\nconst Popover = PopoverPrimitive.Root;\n\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = 'center', sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        'richtext-z-50 richtext-w-72 richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-4 richtext-text-popover-foreground richtext-shadow-md richtext-outline-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n        className,\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n));\nPopoverContent.displayName = PopoverPrimitive.Content.displayName;\n\nexport { Popover, PopoverTrigger, PopoverContent };\n","'use client';\n\nimport * as React from 'react';\nimport * as SeparatorPrimitive from '@radix-ui/react-separator';\n\nimport { cn } from '@/lib/utils';\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = 'horizontal', decorative = true, ...props },\n    ref,\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        'richtext-shrink-0 richtext-bg-border',\n        orientation === 'horizontal' ? 'richtext-h-[1px] richtext-w-full' : 'richtext-h-full richtext-w-[1px]',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSeparator.displayName = SeparatorPrimitive.Root.displayName;\n\nexport { Separator };\n","'use client';\n\nimport * as React from 'react';\nimport * as SwitchPrimitives from '@radix-ui/react-switch';\n\nimport { cn } from '@/lib/utils';\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      'richtext-peer richtext-inline-flex richtext-h-6 richtext-w-11 richtext-shrink-0 richtext-cursor-pointer richtext-items-center richtext-rounded-full richtext-border-2 richtext-border-transparent richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 focus-visible:richtext-ring-offset-background disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50 data-[state=checked]:richtext-bg-primary data-[state=unchecked]:richtext-bg-input',\n      className,\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        'richtext-pointer-events-none richtext-block richtext-h-5 richtext-w-5 richtext-rounded-full richtext-bg-background richtext-shadow-lg richtext-ring-0 richtext-transition-transform data-[state=checked]:richtext-translate-x-5 data-[state=unchecked]:richtext-translate-x-0',\n      )}\n    />\n  </SwitchPrimitives.Root>\n));\nSwitch.displayName = SwitchPrimitives.Root.displayName;\n\nexport { Switch };\n","'use client';\n\nimport * as React from 'react';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\n\nimport { cn } from '@/lib/utils';\n\nconst Tabs = TabsPrimitive.Root;\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      'richtext-inline-flex richtext-h-10 richtext-items-center richtext-justify-center richtext-rounded-md richtext-bg-muted richtext-p-1 richtext-text-muted-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsList.displayName = TabsPrimitive.List.displayName;\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-sm richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-all focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=active]:richtext-bg-background data-[state=active]:richtext-text-foreground data-[state=active]:richtext-shadow-sm',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      'richtext-mt-2 richtext-ring-offset-background focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n","'use client';\n\nimport * as React from 'react';\nimport * as ToastPrimitives from '@radix-ui/react-toast';\nimport { type VariantProps, cva } from 'class-variance-authority';\nimport { X } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst ToastProvider = ToastPrimitives.Provider;\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      'richtext-fixed richtext-top-0 richtext-z-[100] richtext-flex richtext-max-h-screen richtext-w-full richtext-flex-col-reverse richtext-p-4 sm:richtext-bottom-0 sm:richtext-right-0 sm:richtext-top-auto sm:richtext-flex-col md:richtext-max-w-[420px]',\n      className,\n    )}\n    {...props}\n  />\n));\nToastViewport.displayName = ToastPrimitives.Viewport.displayName;\n\nconst toastVariants = cva(\n  'richtext-group richtext-pointer-events-auto richtext-relative richtext-flex richtext-w-full richtext-items-center richtext-justify-between richtext-space-x-4 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-p-6 richtext-pr-8 richtext-shadow-lg richtext-transition-all data-[swipe=cancel]:richtext-translate-x-0 data-[swipe=end]:richtext-translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:richtext-translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:richtext-transition-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[swipe=end]:richtext-animate-out data-[state=closed]:richtext-fade-out-80 data-[state=closed]:richtext-slide-out-to-right-full data-[state=open]:richtext-slide-in-from-top-full data-[state=open]:sm:richtext-slide-in-from-bottom-full',\n  {\n    variants: {\n      variant: {\n        default: 'richtext-border richtext-bg-background richtext-text-foreground',\n        destructive:\n          'richtext-destructive richtext-group richtext-border-destructive richtext-bg-destructive richtext-text-destructive-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n);\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n  VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  );\n});\nToast.displayName = ToastPrimitives.Root.displayName;\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      'richtext-inline-flex richtext-h-8 richtext-shrink-0 richtext-items-center richtext-justify-center richtext-rounded-md !richtext-border richtext-bg-transparent richtext-px-3 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-secondary focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 group-[.destructive]:richtext-border-muted/40 group-[.destructive]:hover:richtext-border-destructive/30 group-[.destructive]:hover:richtext-bg-destructive group-[.destructive]:hover:richtext-text-destructive-foreground group-[.destructive]:focus:richtext-ring-destructive',\n      className,\n    )}\n    {...props}\n  />\n));\nToastAction.displayName = ToastPrimitives.Action.displayName;\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      'richtext-absolute richtext-right-2 richtext-top-2 richtext-rounded-md richtext-p-1 richtext-text-foreground/50 richtext-opacity-0 richtext-transition-opacity hover:richtext-text-foreground focus:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 group-hover:richtext-opacity-100 group-[.destructive]:richtext-text-red-300 group-[.destructive]:hover:richtext-text-red-50 group-[.destructive]:focus:richtext-ring-red-400 group-[.destructive]:focus:richtext-ring-offset-red-600',\n      className,\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"richtext-h-4 richtext-w-4\" />\n  </ToastPrimitives.Close>\n));\nToastClose.displayName = ToastPrimitives.Close.displayName;\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn('richtext-text-sm richtext-font-semibold', className)}\n    {...props}\n  />\n));\nToastTitle.displayName = ToastPrimitives.Title.displayName;\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn('richtext-text-sm richtext-opacity-90', className)}\n    {...props}\n  />\n));\nToastDescription.displayName = ToastPrimitives.Description.displayName;\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>;\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n};\n","'use client';\n\nimport * as React from 'react';\nimport * as TogglePrimitive from '@radix-ui/react-toggle';\nimport { type VariantProps, cva } from 'class-variance-authority';\n\nimport { cn } from '@/lib/utils';\n\nconst toggleVariants = cva(\n  'richtext-inline-flex richtext-items-center richtext-justify-center richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-muted hover:richtext-text-muted-foreground focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=on]:richtext-bg-accent data-[state=on]:richtext-text-accent-foreground',\n  {\n    variants: {\n      variant: {\n        default: 'richtext-bg-transparent',\n        outline:\n          'richtext-border richtext-border-input richtext-bg-transparent hover:richtext-bg-accent hover:richtext-text-accent-foreground',\n      },\n      size: {\n        default: 'richtext-h-10 richtext-px-3',\n        sm: 'richtext-h-9 richtext-px-2',\n        lg: 'richtext-h-11 richtext-px-5',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n  VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","'use client';\n\nimport * as React from 'react';\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip';\n\nimport { cn } from '@/lib/utils';\n\nconst TooltipProvider = TooltipPrimitive.Provider;\n\nconst Tooltip = TooltipPrimitive.Root;\n\nconst TooltipTrigger = TooltipPrimitive.Trigger;\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      'richtext-z-50 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-text-popover-foreground richtext-shadow-md richtext-animate-in richtext-fade-in-0 richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTooltipContent.displayName = TooltipPrimitive.Content.displayName;\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n","/* eslint-disable unused-imports/no-unused-vars */\n'use client';\n\n// Inspired by react-hot-toast library\nimport * as React from 'react';\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from '@/components/ui/toast';\n\nconst TOAST_LIMIT = 1;\nconst TOAST_REMOVE_DELAY = 1000000;\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const;\n\nlet count = 0;\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER;\n  return count.toString();\n}\n\ntype ActionType = typeof actionTypes;\n\ntype Action =\n  | {\n    type: ActionType['ADD_TOAST']\n    toast: ToasterToast\n  }\n  | {\n    type: ActionType['UPDATE_TOAST']\n    toast: Partial<ToasterToast>\n  }\n  | {\n    type: ActionType['DISMISS_TOAST']\n    toastId?: ToasterToast['id']\n  }\n  | {\n    type: ActionType['REMOVE_TOAST']\n    toastId?: ToasterToast['id']\n  };\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n\nfunction addToRemoveQueue(toastId: string) {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId,\n    });\n  }, TOAST_REMOVE_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n}\n\nexport function reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map(t =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      };\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action;\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map(t =>\n          t.id === toastId || toastId === undefined\n            ? {\n              ...t,\n              open: false,\n            }\n            : t,\n        ),\n      };\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter(t => t.id !== action.toastId),\n      };\n  }\n}\n\nconst listeners: Array<(state: State) => void> = [];\n\nlet memoryState: State = { toasts: [] };\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach((listener) => {\n    listener(memoryState);\n  });\n}\n\ntype Toast = Omit<ToasterToast, 'id'>;\n\nfunction toast({ ...props }: Toast) {\n  const id = genId();\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    });\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id });\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open)\n          dismiss();\n      },\n    },\n  });\n\n  return {\n    id,\n    dismiss,\n    update,\n  };\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState);\n\n  React.useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  };\n}\n\nexport { useToast, toast };\n","'use client';\n\nimport * as React from 'react';\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox';\nimport { Check } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      '!richtext-peer !richtext-h-4 !richtext-w-4 !richtext-p-0 !richtext-shrink-0 !richtext-rounded-sm !richtext-border !richtext-border-primary !richtext-ring-offset-background focus-visible:!richtext-outline-none focus-visible:!richtext-ring-2 focus-visible:!richtext-ring-ring focus-visible:!richtext-ring-offset-2 disabled:!richtext-cursor-not-allowed disabled:!richtext-opacity-50 data-[state=checked]:!richtext-bg-primary data-[state=checked]:!richtext-text-primary-foreground',\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn('!richtext-flex !richtext-p-0 !richtext-items-center !richtext-justify-center !richtext-text-current')}\n    >\n      <Check className=\"!richtext-h-4 !richtext-w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\n\nexport { Checkbox };\n","import type { SVGProps } from 'react';\n\nexport function AspectRatio(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M19 12h-2v3h-3v2h5zM7 9h3V7H5v5h2zm14-6H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H3V5h18z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function BlockquoteLeft(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M6 15h15m0 4H6m9-8h6m0-4h-6M9 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2M3 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2\"\n      >\n      </path>\n    </svg>\n  );\n}\n","function DeleteColumn() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      className=\"richtext-w-4 richtext-h-4\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n        d=\"M5.5 3c1.404 0 2.107 0 2.611.38c.219.164.406.375.552.62C9 4.568 9 5.358 9 6.938v10.125c0 1.58 0 2.37-.337 2.937a2.1 2.1 0 0 1-.552.621c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C2 19.432 2 18.642 2 17.062V6.938c0-1.58 0-2.37.337-2.938a2.1 2.1 0 0 1 .552-.62C3.393 3 4.096 3 5.5 3M20 11.938v5.124c0 1.58 0 2.37-.337 2.938a2.1 2.1 0 0 1-.552.62c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C13 19.433 13 18.642 13 17.063V6.938c0-1.58 0-2.37.337-2.938M22 9l-6-6m6 0l-6 6\"\n        color=\"currentColor\"\n      />\n    </svg>\n  );\n}\n\nexport { DeleteColumn };\n","function DeleteRow() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      className=\"richtext-w-4 richtext-h-4\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n        d=\"M21 18.5c0 1.404 0 2.107-.38 2.611a2.1 2.1 0 0 1-.62.552c-.567.337-1.358.337-2.937.337H6.938c-1.58 0-2.37 0-2.938-.337a2.1 2.1 0 0 1-.62-.552C3 20.607 3 19.904 3 18.5s0-2.107.38-2.611c.163-.218.374-.406.62-.552C4.567 15 5.357 15 6.938 15h10.125c1.58 0 2.37 0 2.937.337c.246.146.457.334.62.552c.38.504.38 1.207.38 2.611M12.063 4H6.937C5.358 4 4.568 4 4 4.337a2.1 2.1 0 0 0-.62.552C3 5.393 3 6.096 3 7.5s0 2.107.38 2.611c.163.218.374.406.62.552C4.567 11 5.357 11 6.938 11h10.125c1.58 0 2.37 0 2.937-.337M21 8l-6-6m6 0l-6 6\"\n        color=\"currentColor\"\n      />\n    </svg>\n  );\n}\n\nexport { DeleteRow };\n","import type { SVGProps } from 'react';\n\nexport function FileWordOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import React from 'react';\nimport { icons } from '@/components';\n\nexport interface IconComponentProps {\n  name: string\n  className?: string\n  onClick?: React.MouseEventHandler<SVGElement>\n}\n\nfunction IconComponent(props: IconComponentProps) {\n  const Icon = icons[props.name];\n\n  return Icon ? <Icon onClick={props?.onClick} className={`richtext-w-4 richtext-h-4 ${props?.className || ''}`} /> : null;\n}\n\nexport { IconComponent };\n","import type { SVGProps } from 'react';\n\nexport function FormatLineHeight(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M21 22H3v-2h18zm0-18H3V2h18zm-11 9.7h4l-2-5.4zM11.2 6h1.7l4.7 12h-2l-.9-2.6H9.4L8.5 18h-2z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function MenuDown(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 48 48\"\n      {...props}\n    >\n      <path\n        fill=\"currentColor\"\n        stroke=\"currentColor\"\n        strokeLinejoin=\"round\"\n        strokeWidth={4}\n        d=\"M36 19L24 31L12 19z\"\n      />\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function SizeL(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path fill=\"currentColor\" d=\"M9 7v10h6v-2h-4V7z\"></path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function SizeM(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M9 7c-1.1 0-2 .9-2 2v8h2V9h2v7h2V9h2v8h2V9a2 2 0 0 0-2-2z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import type { SVGProps } from 'react';\n\nexport function SizeS(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M11 7c-1.1 0-2 .9-2 2v2a2 2 0 0 0 2 2h2v2H9v2h4c1.11 0 2-.89 2-2v-2a2 2 0 0 0-2-2h-2V9h4V7z\"\n      >\n      </path>\n    </svg>\n  );\n}\n","export function ColumnAddLeft() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m-9 8h4m-2-2v4\"></path>\n    </svg>\n  );\n}\n","export function ColumnAddRight() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m9 8h4m-2-2v4\"></path>\n    </svg>\n  );\n}\n","export function Direction() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 21v-4m0-4V9m0-4V3m-2 18h4M8 5v4h11l2-2l-2-2zm6 8v4H6l-2-2l2-2z\"></path>\n    </svg>\n  );\n}\n","export function Excalidraw() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"currentColor\" d=\"M23.943 19.806a.2.2 0 0 0-.168-.034c-1.26-1.855-2.873-3.61-4.419-5.315l-.252-.284c-.001-.073-.067-.12-.134-.15l-.084-.084c-.05-.1-.169-.167-.286-.1c-.47.234-.907.585-1.327.919c-.554.434-1.109.87-1.63 1.354a5 5 0 0 0-.588.618c-.084.117-.017.217.084.267c-.37.368-.74.736-1.109 1.12a.2.2 0 0 0-.05.134c0 .05.033.1.067.117l.655.502v.016c.924.92 2.554 2.173 4.285 3.527c.251.201.52.402.773.602c.117.134.234.285.335.418c.05.066.169.084.236.033c.033.034.084.067.118.1a.24.24 0 0 0 .1.034a.15.15 0 0 0 .135-.066a.24.24 0 0 0 .033-.1c.017 0 .017.016.034.016a.2.2 0 0 0 .134-.05l3.058-3.327c.12-.116.014-.267 0-.267m-7.628-.134l-1.546-1.17l-.15-.1c-.035-.017-.068-.05-.102-.067l-.117-.1c.66-.66 1.33-1.308 2-1.956c-.488.484-1.463 1.906-1.261 2.373c.002 0 .018.042.067.084zm4.1 3.126l-1.277-.97a27 27 0 0 0-1.58-1.504c.69.518 1.277.97 1.361 1.053c.673.585.638.485 1.093.87l.554.4c-.074.103-.151.148-.151.151m.336.25l-.034-.016a1 1 0 0 0 .152-.117zM.588 3.476c.033.217.084.435.117.636c.201 1.103.403 2.106.772 2.858l.152.568c.05.217.134.485.219.552a67 67 0 0 0 3.578 2.942a.18.18 0 0 0 .219 0s0 .016.016.016a.15.15 0 0 0 .118.05a.2.2 0 0 0 .134-.05c1.798-1.989 3.142-3.627 4.1-4.998c.068-.066.084-.167.084-.25c.067-.067.118-.151.185-.201c.067-.067.067-.184 0-.235l-.017-.016c0-.033-.017-.084-.05-.1c-.42-.401-.722-.685-1.042-.986a94 94 0 0 1-2.352-2.273c-.017-.017-.034-.034-.067-.034c-.336-.117-1.025-.234-1.882-.385c-1.277-.216-3.008-.517-4.57-.986c0 0-.101 0-.118.017l-.05.05C.05.714.022.707 0 .718c.017.1.017.167.05.284c0 .033.068.301.068.334zm7.19 4.78l-.033.034a.036.036 0 0 1 .033-.034M6.553 2.238c.101.1.521.502.622.585c-.437-.2-1.529-.702-2.034-.869c.505.1 1.194.201 1.412.284M.79 1.403c.252.434.454 1.939.655 3.41c-.118-.469-.201-.936-.302-1.372C.992 2.673.84 1.988.638 1.386c.124 0 .152.021.152.017m-.286-.369c0-.016 0-.033-.017-.033c.085 0 .135.017.202.05c0 .006-.145-.017-.185-.017m23.17-.217c.017-.066-.336-.367-.219-.384c.253-.017.253-.401 0-.401c-.335.017-.688.1-1.008.15c-.587.117-1.192.234-1.78.367a80 80 0 0 0-3.949.937c-.403.117-.857.2-1.243.401c-.135.067-.118.2-.05.284c-.034.017-.051.017-.085.034c-.117.017-.218.034-.335.05c-.102.017-.152.1-.135.2c0 .017.017.05.017.067c-.706.936-1.496 1.923-2.353 2.976c-.84.969-1.73 1.989-2.62 3.042c-2.84 3.31-6.05 7.07-9.594 10.38a.16.16 0 0 0 0 .234c.016.016.033.033.05.033c-.05.05-.101.085-.152.134q-.05.05-.05.1a.4.4 0 0 0-.067.084c-.067.067-.067.184.017.234c.067.066.185.066.235-.017c.017-.017.017-.033.033-.033a.265.265 0 0 1 .37 0c.202.217.404.435.588.618l-.42-.35c-.067-.067-.184-.05-.234.016c-.068.066-.051.184.016.234l4.469 3.727c.034.034.067.034.118.034a.15.15 0 0 0 .117-.05l.101-.1c.017.016.05.016.067.016c.05 0 .084-.016.118-.05c6.049-6.05 10.922-10.614 16.5-14.693c.05-.033.067-.1.067-.15c.067 0 .118-.05.15-.117c1.026-3.125 1.228-5.9 1.295-7.27c0-.059.016-.038.016-.068c.017-.033.017-.05.017-.05a.98.98 0 0 0-.067-.619m-10.82 4.915c.268-.301.537-.619.806-.903c-1.73 2.273-4.603 5.767-8.67 9.929c2.773-3.059 5.562-6.218 7.864-9.026M5.14 23.466c-.016-.017-.016-.017 0-.017zm2.504-2.156c.135-.15.27-.284.42-.434c0 0 0 .016.017.016c-.224.198-.433.418-.437.418m.69-.668c.099-.1.14-.173.284-.318c.992-1.02 2.017-2.04 3.059-3.076l.016-.016c.252-.2.555-.418.824-.619a228 228 0 0 0-4.184 4.029M14.852 3.91c-.554.719-1.176 1.671-1.697 2.423c-1.646 2.374-6.94 8.174-7.057 8.274a1190 1190 0 0 1-4.839 4.597l-.1.1c-.085-.1-.085-.25.016-.334C8.652 11.966 13.19 6.133 15.021 3.576c-.05.116-.084.216-.168.334zm2.906 3.427c-.671-.386-.99-.987-.806-1.572l.05-.2a.8.8 0 0 1 .085-.167a1.9 1.9 0 0 1 .756-.703c.016 0 .033 0 .05-.016c-.017-.034-.017-.084-.017-.134c.017-.1.085-.167.202-.167c.202 0 .824.184 1.059.384c.067.05.134.117.202.184c.084.1.218.268.285.401c.034.017.067.184.118.268c.033.134.067.284.05.418c-.017.016 0 .116-.017.116a1.6 1.6 0 0 1-.218.619c-.03.03.006.012-.05.067a1.2 1.2 0 0 1-.32.334a1.49 1.49 0 0 1-1.26.234a2 2 0 0 0-.169-.066m4.37 1.403c0 .017-.017.05 0 .067c-.034 0-.05.017-.085.034a110 110 0 0 0-3.915 3.025c1.11-.986 2.218-1.989 3.378-2.975c.336-.301.571-.686.638-1.12l.168-1.003v-.033c.085-.201.404-.118.353.1c-.004-.001-.173.795-.537 1.905\"></path>\n    </svg>\n  );\n}\n","export function ExportPdf() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\">\n      <path fill=\"currentColor\" d=\"M30 18v-2h-6v10h2v-4h3v-2h-3v-2zm-11 8h-4V16h4a3.003 3.003 0 0 1 3 3v4a3.003 3.003 0 0 1-3 3m-2-2h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2zm-6-8H6v10h2v-3h3a2.003 2.003 0 0 0 2-2v-3a2 2 0 0 0-2-2m-3 5v-3h3l.001 3z\"></path>\n      <path fill=\"currentColor\" d=\"M22 14v-4a.91.91 0 0 0-.3-.7l-7-7A.9.9 0 0 0 14 2H4a2.006 2.006 0 0 0-2 2v24a2 2 0 0 0 2 2h16v-2H4V4h8v6a2.006 2.006 0 0 0 2 2h6v2Zm-8-4V4.4l5.6 5.6Z\"></path>\n    </svg>\n  );\n}\n","import React from 'react';\n\nfunction ExportWord() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"1em\"\n      height=\"1em\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M679.253 402.364 618.77 561.015l-60.348-158.651a30.04 30.04 0 0 0-30.447-18.637 29.76 29.76 0 0 0-30.447 18.637l-60.416 158.651-60.416-158.651a30.515 30.515 0 0 0-38.843-17.272 28.945 28.945 0 0 0-17.954 37.547l88.815 233.267c4.369 11.469 15.7 19.115 28.398 19.115a30.31 30.31 0 0 0 28.468-19.115l62.395-163.908 62.396 163.84c4.437 11.605 15.701 19.183 28.4 19.183a30.31 30.31 0 0 0 28.466-19.115l88.747-233.267a28.945 28.945 0 0 0-17.886-37.547 30.447 30.447 0 0 0-38.912 17.272zm219.478 395.605-51.883-29.218c-28.672-16.18-52.224-3.072-52.224 29.082v.273H643.209a29.833 29.833 0 0 0-30.31 29.354c0 16.18 13.584 29.218 30.31 29.218h151.825c1.092 30.516 24.03 43.077 52.224 27.648l51.063-27.989c29.013-15.906 29.15-42.189.41-58.368\"\n      />\n      <path\n        fill=\"currentColor\"\n        d=\"m810.667 913.135-.478.068H201.796c-19.865 0-36.727-11.673-36.727-25.6v-618.36h154.965c51.268 0 92.911-39.39 92.911-87.858v-87.86H810.19c19.797 0 36.522 11.742 36.522 25.669V739.26h61.987V119.262c0-46.421-44.169-84.241-98.51-84.241H328.364l-225.28 194.56v658.09c0 46.285 44.236 84.105 98.713 84.105H810.19c43.759 0 80.554-24.713 93.32-58.573h-92.842zM350.89 94.89v86.562c0 16.11-13.858 29.286-30.925 29.286H216.815L350.959 94.891z\"\n      />\n    </svg>\n  );\n}\n\nexport default ExportWord;\n","export function GifIcon() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <g fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" color=\"currentColor\">\n        <path d=\"M14.86 22h-4.312c-3.291 0-4.937 0-6.08-.798a4.2 4.2 0 0 1-.863-.805c-.855-1.066-.855-2.6-.855-5.67v-2.545c0-2.963 0-4.445.473-5.628c.761-1.903 2.37-3.403 4.41-4.113C8.9 2 10.49 2 13.667 2c1.816 0 2.723 0 3.448.252c1.166.406 2.085 1.263 2.52 2.35c.27.676.27 1.523.27 3.216V10\"></path>\n        <path d=\"M2.75 12c0-1.84 1.506-3.333 3.364-3.333c.672 0 1.464.116 2.117-.057a1.67 1.67 0 0 0 1.19-1.179c.174-.647.057-1.432.057-2.098C9.478 3.493 10.984 2 12.84 2m.002 16h2.523m-4.949-4.15c-.126-.8-.281-.801-1.61-.85h-1.01c-.557 0-1.009.448-1.009 1v3c0 .552.452 1 1.01 1h1.816c.39 0 .803-.313.803-.7v-1.1c0-.11-.113-.304-.224-.304H9.068M12.842 13h1.261m0 0h1.262m-1.262 0v4.875M21.251 13h-2.523c-.557 0-1.009.448-1.009 1v1.5m0 0V18m0-2.5h2.523\"></path>\n      </g>\n    </svg>\n  );\n}\n","export function LeftToRight() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 20 20\">\n      <path fill=\"currentColor\" d=\"M6.5 3a.75.75 0 0 1 .697.471l3 7.5a.75.75 0 0 1-1.393.557L7.992 9.5H5.008l-.811 2.028a.75.75 0 0 1-1.393-.556l3-7.5A.75.75 0 0 1 6.5 3m0 2.77L5.608 8h1.784zm8.28-1.55a.75.75 0 1 0-1.06 1.06l.72.72h-3.69a.75.75 0 0 0 0 1.5h3.69l-.72.72a.75.75 0 0 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06zm0 7.5a.75.75 0 1 0-1.06 1.06l.72.72H3.75a.75.75 0 0 0 0 1.5h10.69l-.72.72a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06z\"></path>\n    </svg>\n  );\n}\n","export function Mermaid() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 48 48\">\n      <g fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\">\n        <circle cx=\"10\" cy=\"24\" r=\"4\"></circle>\n        <circle cx=\"38\" cy=\"10\" r=\"4\"></circle>\n        <circle cx=\"38\" cy=\"24\" r=\"4\"></circle>\n        <circle cx=\"38\" cy=\"38\" r=\"4\"></circle>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M34 38H22V10h12M14 24h20\"></path>\n      </g>\n    </svg>\n  );\n}\n","export function RightToLeft() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 20 20\">\n      <path fill=\"currentColor\" d=\"M13.5 3a.75.75 0 0 0-.697.471l-3 7.5a.75.75 0 0 0 1.393.557l.812-2.028h2.984l.811 2.028a.75.75 0 0 0 1.393-.556l-3-7.5A.75.75 0 0 0 13.5 3m0 2.77L14.392 8h-1.784zM5.22 4.22a.75.75 0 0 1 1.06 1.06L5.56 6h3.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06zm0 7.5a.75.75 0 0 1 1.06 1.06l-.72.72h10.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 1 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06z\"></path>\n    </svg>\n  );\n}\n","export function Twitter() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"m3 21l7.548-7.548M21 3l-7.548 7.548m0 0L8 3H3l7.548 10.452m2.904-2.904L21 21h-5l-5.452-7.548\" color=\"currentColor\"></path>\n    </svg>\n  );\n}\n","import React from 'react';\n\nfunction ImportWord() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      aria-hidden=\"true\"\n      role=\"img\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z\"\n      />\n    </svg>\n\n  );\n}\n\nexport default ImportWord;\n","import {\n  TextAlignCenterIcon,\n  TextAlignJustifyIcon,\n  TextAlignLeftIcon,\n  TextAlignRightIcon,\n} from '@radix-ui/react-icons';\nimport {\n  BetweenHorizonalEnd,\n  BetweenHorizonalStart,\n  BetweenVerticalEnd,\n  BetweenVerticalStart,\n  Bold,\n  BookMarked,\n  ChevronDown,\n  ChevronUp,\n  ChevronsUpDown,\n  Clipboard,\n  Code,\n  CodeXml,\n  Columns2,\n  Columns3,\n  Columns4,\n  Copy,\n  CropIcon,\n  Eraser,\n  Eye,\n  FlipHorizontal,\n  FlipVertical,\n  Frame,\n  GripVertical,\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  ImageUp,\n  IndentDecrease,\n  IndentIncrease,\n  Italic,\n  Link,\n  List,\n  ListOrdered,\n  ListTodo,\n  LoaderCircle,\n  Maximize,\n  Minimize,\n  Minus,\n  PaintRoller,\n  PanelLeft,\n  PanelRight,\n  Paperclip,\n  Pencil,\n  Plus,\n  Quote,\n  Redo2,\n  Replace,\n  Settings,\n  Sigma,\n  SmilePlus,\n  SmilePlusIcon,\n  Sparkles,\n  Strikethrough,\n  Subscript,\n  Superscript,\n  Table,\n  TableCellsMerge,\n  TableCellsSplit,\n  Trash,\n  Trash2,\n  Type,\n  Underline,\n  Undo2,\n  Unlink,\n  Video,\n  ZoomIn,\n  ZoomOut,\n  PencilRuler\n} from 'lucide-react';\n\nimport {\n  AspectRatio,\n  BlockquoteLeft,\n  DeleteColumn,\n  DeleteRow,\n  FileWordOutline,\n  FormatLineHeight,\n  MenuDown,\n  SizeL,\n  SizeM,\n  SizeS,\n} from '@/components/icons';\nimport { ColumnAddLeft } from '@/components/icons/ColumnAddLeft';\nimport { ColumnAddRight } from '@/components/icons/ColumnAddRight';\nimport { Direction } from '@/components/icons/Direction';\nimport { Excalidraw } from '@/components/icons/Excalidraw';\nimport { ExportPdf } from '@/components/icons/ExportPdf';\nimport ExportWord from '@/components/icons/ExportWord';\nimport { GifIcon } from '@/components/icons/GIfIcon';\nimport { LeftToRight } from '@/components/icons/LeftToRight';\nimport { Mermaid } from '@/components/icons/Mermaid';\nimport { RightToLeft } from '@/components/icons/RightToLeft';\nimport { Twitter } from '@/components/icons/Twitter';\n\nimport ImportWord from './ImportWord';\n\nexport const icons = {\n  Bold,\n  LoaderCircle,\n  Italic,\n  Underline,\n  Quote,\n  TextQuote: BlockquoteLeft,\n  Strikethrough,\n  Minus,\n  Eraser,\n  PaintRoller,\n  Redo2,\n  Undo2,\n  AlignCenter: TextAlignCenterIcon,\n  AlignJustify: TextAlignJustifyIcon,\n  AlignLeft: TextAlignLeftIcon,\n  AlignRight: TextAlignRightIcon,\n  ChevronDown,\n  Subscript,\n  Superscript,\n  Code,\n  Code2: CodeXml,\n  Type,\n  IndentIncrease,\n  IndentDecrease,\n  List,\n  ListOrdered,\n  ListTodo,\n  Link,\n  ImageUp,\n  Video,\n  Maximize,\n  Minimize,\n  Table,\n  Sparkles,\n  Pencil,\n  Unlink,\n  BetweenHorizonalEnd,\n  BetweenHorizonalStart,\n  BetweenVerticalStart,\n  BetweenVerticalEnd,\n  TableCellsMerge,\n  TableCellsSplit,\n  Trash2,\n  Trash,\n  Replace,\n  ChevronsUpDown,\n  LineHeight: FormatLineHeight,\n  Word: FileWordOutline,\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  Columns2,\n  Columns3,\n  Columns4,\n  Plus,\n  Grip: GripVertical,\n  Copy,\n  Clipboard,\n  PanelLeft,\n  PanelRight,\n  Columns: Columns2,\n  Iframe: Frame,\n\n  MenuDown,\n  SizeS,\n  SizeM,\n  SizeL,\n  AspectRatio,\n\n  Emoji: SmilePlus,\n\n  DeleteColumn,\n  DeleteRow,\n  SearchAndReplace: Replace,\n  EmojiIcon: SmilePlusIcon,\n  KatexIcon: Sigma,\n  ExportPdf,\n  ExportWord,\n  ImportWord,\n  ColumnAddLeft,\n  ColumnAddRight,\n  BookMarked,\n  Excalidraw,\n  ZoomIn,\n  ZoomOut,\n  Settings,\n  Eye,\n\n  TextDirection: Direction,\n  LeftToRight,\n  RightToLeft,\n\n  Attachment: Paperclip,\n  GifIcon,\n  ChevronUp,\n  Crop: CropIcon,\n  Mermaid,\n  Twitter,\n  FlipX: FlipVertical,\n  FlipY: FlipHorizontal,\n  PencilRuler\n} as any;\n","import React, { useCallback, useState } from 'react';\n\nimport type { TooltipContentProps } from '@radix-ui/react-tooltip';\nimport { debounce } from 'lodash-es';\n\nimport { ActionButton, Button, ColorPicker } from '@/components';\nimport { IconComponent } from '@/components/icons';\nimport type { ButtonViewReturnComponentProps } from '@/types';\n\ninterface IPropsHighlightActionButton {\n  editor: any\n  tooltip?: string\n  disabled?: boolean\n  action?: ButtonViewReturnComponentProps['action']\n  isActive?: ButtonViewReturnComponentProps['isActive']\n  tooltipOptions?: TooltipContentProps\n  shortcutKeys?: string[]\n}\n\nfunction IconC({ fill }: any) {\n  return (\n    <svg\n      width=\"18px\"\n      height=\"18px\"\n      viewBox=\"0 0 256 256\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g id=\"icon/填充色\" stroke=\"none\" strokeWidth={1} fill=\"none\" fillRule=\"evenodd\">\n        <g id=\"icon/背景颜色\">\n          <g id=\"编组\" fill=\"currentColor\">\n            <g\n              transform=\"translate(119.502295, 137.878331) rotate(-135.000000) translate(-119.502295, -137.878331) translate(48.002295, 31.757731)\"\n              id=\"矩形\"\n            >\n              <path\n                d=\"M100.946943,60.8084699 L43.7469427,60.8084699 C37.2852111,60.8084699 32.0469427,66.0467383 32.0469427,72.5084699 L32.0469427,118.70847 C32.0469427,125.170201 37.2852111,130.40847 43.7469427,130.40847 L100.946943,130.40847 C107.408674,130.40847 112.646943,125.170201 112.646943,118.70847 L112.646943,72.5084699 C112.646943,66.0467383 107.408674,60.8084699 100.946943,60.8084699 Z M93.646,79.808 L93.646,111.408 L51.046,111.408 L51.046,79.808 L93.646,79.808 Z\"\n                fillRule=\"nonzero\"\n              />\n              <path\n                d=\"M87.9366521,16.90916 L87.9194966,68.2000001 C87.9183543,69.4147389 86.9334998,70.399264 85.7187607,70.4 L56.9423078,70.4 C55.7272813,70.4 54.7423078,69.4150264 54.7423078,68.2 L54.7423078,39.4621057 C54.7423078,37.2523513 55.5736632,35.1234748 57.0711706,33.4985176 L76.4832996,12.4342613 C78.9534987,9.75382857 83.1289108,9.5834005 85.8093436,12.0535996 C87.1658473,13.303709 87.9372691,15.0644715 87.9366521,16.90916 Z\"\n                fillRule=\"evenodd\"\n              />\n              <path\n                d=\"M131.3,111.241199 L11.7,111.241199 C5.23826843,111.241199 0,116.479467 0,122.941199 L0,200.541199 C0,207.002931 5.23826843,212.241199 11.7,212.241199 L131.3,212.241199 C137.761732,212.241199 143,207.002931 143,200.541199 L143,122.941199 C143,116.479467 137.761732,111.241199 131.3,111.241199 Z M124,130.241 L124,193.241 L19,193.241 L19,130.241 L124,130.241 Z\"\n                fillRule=\"nonzero\"\n              />\n            </g>\n          </g>\n          <path\n            d=\"M51,218 L205,218 C211.075132,218 216,222.924868 216,229 C216,235.075132 211.075132,240 205,240 L51,240 C44.9248678,240 40,235.075132 40,229 C40,222.924868 44.9248678,218 51,218 Z\"\n            id=\"矩形\"\n            fill={fill || '#FBDE28'}\n          />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nfunction HighlightActionButton(props: IPropsHighlightActionButton) {\n  // const { action, isActive, disabled, icon, tooltip } = props as any;\n  const [selectedColor, setSelectedColor] = useState<any>(undefined);\n\n  function onChange(color: string | undefined) {\n    props.action?.(color);\n  }\n\n  function toggleColor() {\n    props.action?.(selectedColor);\n  }\n\n  const setSelectedColorDebounce = useCallback(\n    debounce((color: any) => {\n      setSelectedColor(color);\n    }, 350),\n    [],\n  );\n\n  return (\n    <div className=\"richtext-flex richtext-items-center richtext-h-[32px]\">\n      <ActionButton\n        tooltip={props?.tooltip}\n        disabled={props?.disabled}\n        action={toggleColor}\n        tooltipOptions={props?.tooltipOptions}\n        shortcutKeys={props?.shortcutKeys}\n      >\n        <span className=\"richtext-flex richtext-items-center richtext-justify-center richtext-text-sm\">\n          <IconC fill={selectedColor} />\n        </span>\n      </ActionButton>\n      <ColorPicker\n        selectedColor={selectedColor}\n        setSelectedColor={setSelectedColorDebounce}\n        onChange={onChange}\n        highlight\n        disabled={props?.disabled}\n      >\n        <Button variant=\"ghost\" size=\"icon\" className=\"!richtext-w-3 !richtext-h-[32px]\" disabled={props?.disabled}>\n          <IconComponent className=\"!richtext-w-3 !richtext-h-3 richtext-text-zinc-500\" name=\"MenuDown\" />\n        </Button>\n      </ColorPicker>\n    </div>\n  );\n}\n\nexport default HighlightActionButton;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useEffect, useState } from 'react';\n\nimport { Button, IconComponent, Input, Label, Switch } from '@/components';\nimport { useLocale } from '@/locales';\n\ninterface IPropsLinkEditBlock {\n  editor: any\n  onSetLink: (link: string, text?: string, openInNewTab?: boolean) => void\n}\n\nfunction LinkEditBlock(props: IPropsLinkEditBlock) {\n  const { t } = useLocale();\n\n  const [form, setForm] = useState({\n    text: '',\n    link: '',\n  });\n  const [openInNewTab, setOpenInNewTab] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (props?.editor) {\n      const { href: link, target } = props.editor?.getAttributes('link');\n\n      const { from, to } = props.editor.state.selection;\n      const text = props.editor.state.doc.textBetween(from, to, ' ');\n      setForm({\n        link,\n        text,\n      });\n      setOpenInNewTab(target === '_blank');\n    }\n  }, [props?.editor]);\n\n  function handleSubmit(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    props?.onSetLink(form.link, form.text, openInNewTab);\n  }\n\n  return (\n    <div className=\"border-neutral-200 richtext-rounded-lg !richtext-border richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black\">\n      <form className=\"richtext-flex richtext-flex-col richtext-gap-2\"\n        onSubmit={handleSubmit}\n      >\n        <Label className=\"mb-[6px]\">\n          {t('editor.link.dialog.text')}\n        </Label>\n\n        <div className=\"richtext-mb-[10px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center\">\n            <Input\n              className=\"richtext-w-80\"\n              onChange={e => setForm({ ...form, text: e.target.value })}\n              placeholder=\"Text\"\n              required\n              type=\"text\"\n              value={form.text}\n            />\n          </div>\n        </div>\n\n        <Label className=\"mb-[6px]\">\n          {t('editor.link.dialog.link')}\n        </Label>\n\n        <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center\">\n            <Input\n              className=\"richtext-pl-10\"\n              onChange={e => setForm({ ...form, link: e.target.value })}\n              required\n              type=\"url\"\n              value={form.link}\n            />\n\n            <span className=\"richtext-absolute richtext-inset-y-0 richtext-start-0 richtext-flex richtext-items-center richtext-justify-center richtext-px-2\">\n              <IconComponent className=\"richtext-size-5 richtext-text-muted-foreground\"\n                name=\"Link\"\n              />\n            </span>\n          </div>\n        </div>\n\n        <div className=\"richtext-flex richtext-items-center richtext-space-x-2\">\n          <Label>\n            {t('editor.link.dialog.openInNewTab')}\n          </Label>\n\n          <Switch\n            checked={openInNewTab}\n            onCheckedChange={(e) => {\n              setOpenInNewTab(e);\n            }}\n          />\n        </div>\n\n        <Button className=\"richtext-mt-2 richtext-self-end\"\n          type=\"submit\"\n        >\n          {t('editor.link.dialog.button.apply')}\n        </Button>\n      </form>\n    </div>\n  );\n}\n\nexport default LinkEditBlock;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { findParentNode } from '@tiptap/core';\nimport { Node } from '@tiptap/pm/model';\nimport { type EditorState, TextSelection } from '@tiptap/pm/state';\n\nimport { Column, MultiColumn } from '@/extensions/MultiColumn';\n\nexport function createColumn(colType: any, index: any, colContent = null) {\n  if (colContent) {\n    return colType.createChecked({ index }, colContent);\n  }\n\n  return colType.createAndFill({ index });\n}\n\nexport function getColumnsNodeTypes(schema: any) {\n  if (schema.cached.columnsNodeTypes) {\n    return schema.cached.columnsNodeTypes;\n  }\n\n  const roles = {\n    columns: schema.nodes.columns,\n    column: schema.nodes.column,\n  };\n\n  schema.cached.columnsNodeTypes = roles;\n\n  return roles;\n}\n\nexport function createColumns(schema: any, colsCount: any, colContent = null) {\n  const types = getColumnsNodeTypes(schema);\n  const cols = [];\n\n  for (let index = 0; index < colsCount; index += 1) {\n    const col = createColumn(types.column, index, colContent);\n\n    if (col) {\n      // @ts-ignore\n      cols.push(col);\n    }\n  }\n\n  return types.columns.createChecked({ cols: colsCount }, cols);\n}\n\nexport function addOrDeleteCol({\n  state,\n  dispatch,\n  type,\n}: {\n  state: EditorState\n  dispatch: any\n  type: 'addBefore' | 'addAfter' | 'delete'\n}) {\n  const maybeColumns = findParentNode((node: Node) => node.type.name === MultiColumn.name)(state.selection);\n  const maybeColumn = findParentNode((node: Node) => node.type.name === Column.name)(state.selection);\n\n  if (dispatch && maybeColumns && maybeColumn) {\n    const cols = maybeColumns.node;\n    const colIndex = maybeColumn.node.attrs.index;\n    const colsJSON = cols.toJSON();\n\n    let nextIndex = colIndex;\n\n    if (type === 'delete') {\n      nextIndex = colIndex - 1;\n      colsJSON.content.splice(colIndex, 1);\n    } else {\n      nextIndex = type === 'addBefore' ? colIndex : colIndex + 1;\n      colsJSON.content.splice(nextIndex, 0, {\n        type: 'column',\n        attrs: {\n          index: colIndex,\n        },\n        content: [\n          {\n            type: 'paragraph',\n          },\n        ],\n      });\n    }\n\n    colsJSON.attrs.cols = colsJSON.content.length;\n\n    colsJSON.content.forEach((colJSON: any, index: any) => {\n      colJSON.attrs.index = index;\n    });\n\n    const nextCols = Node.fromJSON(state.schema, colsJSON);\n\n    let nextSelectPos = maybeColumns.pos;\n    nextCols.content.forEach((col, pos, index) => {\n      if (index < nextIndex) {\n        nextSelectPos += col.nodeSize;\n      }\n    });\n\n    const tr = state.tr.setTime(Date.now());\n\n    tr.replaceWith(maybeColumns.pos, maybeColumns.pos + maybeColumns.node.nodeSize, nextCols).setSelection(\n      TextSelection.near(tr.doc.resolve(nextSelectPos)),\n    );\n\n    dispatch(tr);\n  }\n\n  return true;\n}\n\nexport function gotoCol({ state, dispatch, type }: { state: EditorState, dispatch: any, type: 'before' | 'after' }) {\n  const maybeColumns = findParentNode((node: Node) => node.type.name === MultiColumn.name)(state.selection);\n  const maybeColumn = findParentNode((node: Node) => node.type.name === Column.name)(state.selection);\n\n  if (dispatch && maybeColumns && maybeColumn) {\n    const cols = maybeColumns.node;\n    const colIndex = maybeColumn.node.attrs.index;\n\n    let nextIndex = 0;\n\n    if (type === 'before') {\n      nextIndex = (colIndex - 1 + cols.attrs.cols) % cols.attrs.cols;\n    } else {\n      nextIndex = (colIndex + 1) % cols.attrs.cols;\n    }\n\n    let nextSelectPos = maybeColumns.pos;\n    cols.content.forEach((col, pos, index) => {\n      if (index < nextIndex) {\n        nextSelectPos += col.nodeSize;\n      }\n    });\n\n    const tr = state.tr.setTime(Date.now());\n\n    tr.setSelection(TextSelection.near(tr.doc.resolve(nextSelectPos)));\n    dispatch(tr);\n    return true;\n  }\n\n  return false;\n}\n","import { Node, mergeAttributes } from '@tiptap/core';\n\nimport { TextSelection } from '@tiptap/pm/state';\nimport { addOrDeleteCol, createColumns, gotoCol } from '@/utils/columns';\n\nexport const EXTENSION_PRIORITY_HIGHEST = 200;\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    columns: {\n      insertColumns: (attrs?: { cols: number }) => ReturnType\n      addColBefore: () => ReturnType\n      addColAfter: () => ReturnType\n      deleteCol: () => ReturnType\n    }\n  }\n}\n\nexport const MultiColumn = Node.create({\n  name: 'columns',\n  group: 'block',\n  defining: true,\n  isolating: true,\n  allowGapCursor: false,\n  content: 'column{1,}',\n  priority: EXTENSION_PRIORITY_HIGHEST,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {\n        class: 'columns',\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      cols: {\n        default: 2,\n        parseHTML: element => element.getAttribute('cols'),\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=grid]',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['div', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n\n  addCommands() {\n    return {\n      insertColumns:\n        attrs =>\n          ({ tr, dispatch, editor }) => {\n            const node = createColumns(editor.schema, (attrs && attrs.cols) || 3);\n\n            if (dispatch) {\n              const offset = tr.selection.anchor + 1;\n\n              tr.replaceSelectionWith(node)\n                .scrollIntoView()\n                .setSelection(TextSelection.near(tr.doc.resolve(offset)));\n            }\n\n            return true;\n          },\n      addColBefore:\n        () =>\n          ({ dispatch, state }) => {\n            return addOrDeleteCol({ dispatch, state, type: 'addBefore' });\n          },\n      addColAfter:\n        () =>\n          ({ dispatch, state }) => {\n            return addOrDeleteCol({ dispatch, state, type: 'addAfter' });\n          },\n      deleteCol:\n        () =>\n          ({ dispatch, state }) => {\n            return addOrDeleteCol({ dispatch, state, type: 'delete' });\n          },\n    };\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Alt-G': () => this.editor.commands.insertColumns(),\n      'Tab': () => {\n        return gotoCol({\n          state: this.editor.state,\n          dispatch: this.editor.view.dispatch,\n          type: 'after',\n        });\n      },\n      'Shift-Tab': () => {\n        return gotoCol({\n          state: this.editor.state,\n          dispatch: this.editor.view.dispatch,\n          type: 'before',\n        });\n      },\n    };\n  },\n});\n","import { Node, mergeAttributes } from '@tiptap/core';\n\nexport const Column = Node.create({\n  name: 'column',\n  content: 'block+',\n  isolating: true,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {\n        class: 'column',\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      index: {\n        default: 0,\n        parseHTML: element => element.getAttribute('index'),\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=column]',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['div', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n  },\n});\n","/* eslint-disable no-restricted-syntax */\nimport type { Command, Editor } from '@tiptap/core';\nimport { isList } from '@tiptap/core';\nimport type { Transaction } from '@tiptap/pm/state';\nimport { AllSelection, TextSelection } from '@tiptap/pm/state';\n\nexport const enum IndentProps {\n  max = 7,\n  min = 0,\n\n  more = 1,\n  less = -1,\n}\n\nexport function clamp(val: number, min: number, max: number): number {\n  if (val < min) {\n    return min;\n  }\n  if (val > max) {\n    return max;\n  }\n  return val;\n}\nfunction updateIndentLevel(\n  tr: Transaction,\n  delta: number,\n  types: string[],\n  editor: Editor,\n): Transaction {\n  const { doc, selection } = tr;\n\n  if (!doc || !selection) {\n    return tr;\n  }\n\n  if (!(selection instanceof TextSelection || selection instanceof AllSelection)) {\n    return tr;\n  }\n\n  const { from, to } = selection;\n\n  doc.nodesBetween(from, to, (node, pos) => {\n    const nodeType = node.type;\n\n    if (types.includes(nodeType.name)) {\n      tr = setNodeIndentMarkup(tr, pos, delta);\n      return false;\n    } else if (isList(node.type.name, editor.extensionManager.extensions)) {\n      return false;\n    }\n    return true;\n  });\n\n  return tr;\n}\n\nexport function setNodeIndentMarkup(tr: Transaction, pos: number, delta: number): Transaction {\n  if (!tr.doc) {\n    return tr;\n  }\n\n  const node = tr.doc.nodeAt(pos);\n  if (!node) {\n    return tr;\n  }\n\n  const minIndent = IndentProps.min;\n  const maxIndent = IndentProps.max;\n\n  const indent = clamp((node.attrs.indent || 0) + delta, minIndent, maxIndent);\n\n  if (indent === node.attrs.indent) {\n    return tr;\n  }\n\n  const nodeAttrs = {\n    ...node.attrs,\n    indent,\n  };\n\n  return tr.setNodeMarkup(pos, node.type, nodeAttrs, node.marks);\n}\n\nexport function createIndentCommand({ delta, types }: { delta: number, types: string[] }): Command {\n  return ({ state, dispatch, editor }) => {\n    const { selection } = state;\n    let { tr } = state;\n    tr = tr.setSelection(selection);\n    tr = updateIndentLevel(tr, delta, types, editor);\n\n    if (tr.docChanged) {\n      if (dispatch)\n        dispatch(tr);\n      return true;\n    }\n\n    return false;\n  };\n}\n","import { useStoreUploadImage } from '@/store/store';\nimport { dispatchEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nexport function useDialogImage() {\n  const [v] = useStoreUploadImage(store => store.value);\n\n  return v;\n}\n\nexport const actionDialogImage = {\n  setOpen: (id: any, value: boolean) => {\n    dispatchEvent(EVENTS.UPLOAD_IMAGE(id), value);\n  },\n};\n","'use client';\n\nimport * as React from 'react';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { X } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'richtext-fixed richtext-inset-0 richtext-z-50 richtext-bg-black/80 richtext- data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0',\n      className,\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'richtext-dialog-content richtext-fixed richtext-left-[50%] richtext-top-[50%] richtext-z-50 richtext-grid richtext-w-full richtext-max-w-lg richtext-translate-x-[-50%] richtext-translate-y-[-50%] richtext-gap-4 richtext-border richtext-bg-background richtext-p-6 richtext-shadow-lg richtext-duration-200 data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[state=closed]:richtext-slide-out-to-left-1/2 data-[state=closed]:richtext-slide-out-to-top-[48%] data-[state=open]:richtext-slide-in-from-left-1/2 data-[state=open]:richtext-slide-in-from-top-[48%] sm:richtext-rounded-lg',\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"richtext-absolute richtext-right-4 richtext-top-4 richtext-rounded-sm richtext-opacity-70 richtext-ring-offset-background richtext-transition-opacity hover:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none data-[state=open]:richtext-bg-accent data-[state=open]:richtext-text-muted-foreground\">\n        <X className=\"richtext-h-4 richtext-w-4\" />\n        <span className=\"richtext-sr-only\">\n          Close\n        </span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nfunction DialogHeader({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'richtext-flex richtext-flex-col richtext-space-y-1.5 richtext-text-center sm:richtext-text-left',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogHeader.displayName = 'DialogHeader';\n\nfunction DialogFooter({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'richtext-flex richtext-flex-col-reverse sm:richtext-flex-row sm:richtext-justify-end sm:richtext-space-x-2',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogFooter.displayName = 'DialogFooter';\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      'richtext-text-lg richtext-font-semibold richtext-leading-none richtext-tracking-tight',\n      className,\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('richtext-text-sm richtext-text-muted-foreground', className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n","/* eslint-disable unicorn/prefer-add-event-listener */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n/**\n * 获取文件名\n *\n * @example\n *   > extractFilename('https://gitlab.com/images/logo-full.png')\n *   < 'logo-full'\n *\n * @param {string} src The URL to extract filename from\n * @returns {string}\n */\nexport function extractFilename(src: any) {\n  return src.replace(/^.*\\/|\\..+$/g, '');\n}\n\n/**\n * extractFileExtension\n * @param {string} fileName The file name to extract extension from\n * @returns  {string}\n */\nexport function extractFileExtension(fileName: any) {\n  return fileName.split('.').pop();\n}\n\nexport function normalizeFileSize(size: any) {\n  if (size < 1024) {\n    return `${size} Byte`;\n  }\n  if (size < 1024 * 1024) {\n    return `${(size / 1024).toFixed(2)} KB`;\n  }\n  return `${(size / 1024 / 1024).toFixed(2)} MB`;\n}\n\nexport type FileType = 'image' | 'audio' | 'video' | 'pdf' | 'word' | 'excel' | 'ppt' | 'file';\n\nexport function normalizeFileType(fileType: any): FileType {\n  if (!fileType)\n    return 'file';\n\n  if (fileType === 'application/pdf')\n    return 'pdf';\n\n  if (fileType.startsWith('application/') && ['.document', 'word'].some(type => fileType.includes(type)))\n    return 'word';\n\n  if (fileType.startsWith('application/') && ['presentation'].some(type => fileType.includes(type)))\n    return 'excel';\n\n  if (fileType.startsWith('application/') && ['sheet'].some(type => fileType.includes(type)))\n    return 'ppt';\n\n  if (fileType.startsWith('image')) {\n    return 'image';\n  }\n\n  if (fileType.startsWith('audio')) {\n    return 'audio';\n  }\n\n  if (fileType.startsWith('video')) {\n    return 'video';\n  }\n\n  return 'file';\n}\n\nexport function readImageAsBase64(file: File): Promise<{ alt: string, src: string }> {\n  return new Promise((resolve) => {\n    const reader = new FileReader();\n    reader.addEventListener(\n      'load',\n      () => {\n        resolve({\n          alt: file.name,\n          src: reader.result as string,\n        });\n      },\n      false,\n    );\n    reader.readAsDataURL(file);\n  });\n}\n\nexport function getImageWidthHeight(url: string): Promise<{ width: number | string, height: number | string }> {\n  return new Promise((resolve) => {\n    const img = document.createElement('img');\n    img.addEventListener('load', () => {\n      resolve({ width: img.width, height: img.height });\n    });\n    img.onerror = () => {\n      resolve({ width: 'auto', height: 'auto' });\n    };\n    img.src = url;\n  });\n}\n\nexport const FILE_CHUNK_SIZE = 2 * 1024 * 1024;\n\nexport function dataURLtoFile(dataurl: string, filename: string) {\n  const arr = dataurl.split(',');\n  // @ts-expect-error\n  const mime = arr[0].match(/:(.*?);/)[1];\n  const bstr = atob(arr[arr.length - 1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new File([u8arr], filename, { type: mime });\n}\n","import React, { useRef, useState } from 'react';\n\nimport ReactCrop, {\n  type Crop,\n  type PixelCrop,\n} from 'react-image-crop';\n\nimport { IconComponent } from '@/components';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Image as ExtensionImage } from '@/extensions';\nimport { useLocale } from '@/locales';\nimport { dataURLtoFile, readImageAsBase64 } from '@/utils/file';\n\nexport function ImageCropper({ editor, imageInline, onClose }: any) {\n  const { t } = useLocale();\n\n  const [dialogOpen, setDialogOpen] = useState(false);\n\n  const imgRef = React.useRef<HTMLImageElement | null>(null);\n\n  const [crop, setCrop] = React.useState<Crop>();\n  const [croppedImageUrl, setCroppedImageUrl] = React.useState<string>('');\n  const fileInput = useRef<HTMLInputElement>(null);\n  const [urlUpload, setUrlUpload] = useState<any>({\n    src: '',\n    file: null,\n  });\n\n  function onCropComplete(crop: PixelCrop) {\n    if (imgRef.current && crop.width && crop.height) {\n      const croppedImageUrl = getCroppedImg(imgRef.current, crop);\n      setCroppedImageUrl(croppedImageUrl);\n    }\n  }\n\n  function getCroppedImg(image: HTMLImageElement, crop: PixelCrop): string {\n    const canvas = document.createElement('canvas');\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n\n    canvas.width = crop.width * scaleX;\n    canvas.height = crop.height * scaleY;\n\n    const ctx = canvas.getContext('2d');\n\n    if (ctx) {\n      ctx.imageSmoothingEnabled = false;\n\n      ctx.drawImage(\n        image,\n        crop.x * scaleX,\n        crop.y * scaleY,\n        crop.width * scaleX,\n        crop.height * scaleY,\n        0,\n        0,\n        crop.width * scaleX,\n        crop.height * scaleY,\n      );\n    }\n\n    return canvas.toDataURL('image/png', 1.0);\n  }\n\n  async function onCrop() {\n    try {\n      const fileCrop = dataURLtoFile(croppedImageUrl, urlUpload?.file?.name || 'image.png');\n\n      const uploadOptions = editor.extensionManager.extensions.find(\n        (extension: any) => extension.name === ExtensionImage.name,\n      )?.options;\n\n      let src = '';\n      if (uploadOptions.upload) {\n        src = await uploadOptions.upload(fileCrop);\n      } else {\n        src = URL.createObjectURL(fileCrop);\n      }\n\n      editor.chain().focus().setImageInline({ src, inline: imageInline }).run();\n\n      setDialogOpen(false);\n\n      setUrlUpload({\n        src: '',\n        file: null,\n      });\n      onClose();\n    } catch (error) {\n      console.log('Error cropping image', error);\n    }\n  }\n\n  function handleClick(e: any) {\n    e.preventDefault();\n    fileInput.current?.click();\n  }\n\n  const handleFile = async (event: any) => {\n    const files = event?.target?.files;\n    if (!editor || editor.isDestroyed || files.length === 0) {\n      return;\n    }\n    const file = files[0];\n\n    const base64 = await readImageAsBase64(file);\n\n    setDialogOpen(true);\n    setUrlUpload({\n      src: base64.src,\n      file,\n    });\n  };\n\n  return (\n    <>\n      <Button className=\"richtext-mt-1 richtext-w-full\"\n        onClick={handleClick}\n        size=\"sm\"\n      >\n        {t('editor.image.dialog.tab.uploadCrop')}\n      </Button>\n\n      <Dialog open={dialogOpen}>\n        <DialogTrigger />\n\n        <DialogContent>\n          <DialogTitle>\n            {t('editor.image.dialog.tab.uploadCrop')}\n          </DialogTitle>\n\n          <div>\n            {urlUpload.src && (\n              <ReactCrop\n                className=\"richtext-w-full\"\n                crop={crop}\n                onChange={c => setCrop(c)}\n                onComplete={c => onCropComplete(c)}\n              >\n                <img\n                  alt=\"Crop me\"\n                  ref={imgRef}\n                  src={urlUpload.src}\n                />\n              </ReactCrop>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button\n              onClick={() => {\n                setDialogOpen(false);\n                setUrlUpload({\n                  src: '',\n                  file: null,\n                });\n              }}\n            >\n              {t('editor.imageUpload.cancel')}\n\n              <IconComponent className=\"richtext-ml-[4px]\"\n                name=\"Trash2\"\n              />\n            </Button>\n\n            <Button className=\"richtext-w-fit\"\n              onClick={onCrop}\n            >\n              {t('editor.imageUpload.crop')}\n\n              <IconComponent className=\"richtext-ml-[4px]\"\n                name=\"Crop\"\n              />\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <input\n        accept=\"image/*\"\n        multiple\n        onChange={handleFile}\n        ref={fileInput}\n        type=\"file\"\n        style={{\n          display: 'none',\n        }}\n      />\n    </>\n  );\n}\n","import { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { ActionButton, Button, Checkbox, Input, Label, Tabs, TabsContent, TabsList, TabsTrigger } from '@/components';\nimport { Dialog, DialogContent, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { ImageCropper } from '@/extensions/Image/components/ImageCropper';\nimport Image from '@/extensions/Image/Image';\nimport { actionDialogImage } from '@/extensions/Image/store';\nimport { useLocale } from '@/locales';\nimport { listenEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nfunction ActionImageButton(props: any) {\n  const { t } = useLocale();\n  const [open, setOpen] = useState(false);\n\n  const handleUploadImage = (evt: any) => {\n    setOpen(evt.detail);\n  };\n\n  const [link, setLink] = useState<string>('');\n  const fileInput = useRef<HTMLInputElement>(null);\n\n  const [imageInline, setImageInline] = useState(props.editor.extensionManager.extensions.find(\n    (extension: any) => extension.name === Image.name,\n  )?.options.defaultInline || false);\n\n  const uploadOptions = useMemo(() => {\n    const uploadOptions = props.editor.extensionManager.extensions.find(\n      (extension: any) => extension.name === Image.name,\n    )?.options;\n\n    return uploadOptions;\n  }, [props.editor]);\n\n  useEffect(() => {\n    const rm1 = listenEvent(EVENTS.UPLOAD_IMAGE(props.editor.id), handleUploadImage);\n\n    return () => {\n      rm1();\n    };\n  }, []);\n\n  async function handleFile(event: any) {\n    const files = event?.target?.files;\n    if (!props.editor || props.editor.isDestroyed || files.length === 0) {\n      return;\n    }\n\n    const file = files[0];\n\n    let src = '';\n    if (uploadOptions.upload) {\n      src = await uploadOptions.upload(file);\n    } else {\n      src = URL.createObjectURL(file);\n    }\n\n    props.editor.chain().focus().setImageInline({ src, inline: imageInline }).run();\n    setOpen(false);\n    setImageInline(false);\n  }\n  function handleLink(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    props.editor.chain().focus().setImageInline({ src: link, inline: imageInline }).run();\n    setOpen(false);\n    setImageInline(false);\n    setLink('');\n  }\n\n  function handleClick(e: any) {\n    e.preventDefault();\n    fileInput.current?.click();\n  }\n\n  return (\n    <Dialog\n      onOpenChange={setOpen}\n      open={open}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => setOpen(true)}\n          icon={props.icon}\n          tooltip={props.tooltip}\n        />\n      </DialogTrigger>\n\n      <DialogContent>\n        <DialogTitle>\n          {t('editor.image.dialog.title')}\n        </DialogTitle>\n\n        <Tabs\n          activationMode=\"manual\"\n          defaultValue={\n            uploadOptions.resourceImage === 'both' || uploadOptions.resourceImage === 'upload'\n              ? 'upload'\n              : 'link'\n          }\n        >\n          <TabsList className=\"richtext-grid richtext-w-full richtext-grid-cols-2\">\n            {uploadOptions.resourceImage === 'both' || uploadOptions.resourceImage === 'upload'\n              ? (\n                <TabsTrigger value=\"upload\">\n                  {t('editor.image.dialog.tab.upload')}\n                </TabsTrigger>\n              )\n              : <></>}\n\n            {uploadOptions.resourceImage === 'both' || uploadOptions.resourceImage === 'link'\n              ? (\n                <TabsTrigger value=\"link\">\n                  {t('editor.image.dialog.tab.url')}\n                </TabsTrigger>\n              )\n              : <></>}\n          </TabsList>\n\n          <div className=\"richtext-my-[10px] richtext-flex richtext-items-center richtext-gap-[4px]\">\n            <Checkbox\n              checked={imageInline}\n              onCheckedChange={(v) => {\n                setImageInline(v as boolean);\n              }}\n            />\n\n            <Label>\n              {t('editor.link.dialog.inline')}\n            </Label>\n          </div>\n\n          <TabsContent value=\"upload\">\n            <div className=\"richtext-flex richtext-items-center richtext-gap-[10px]\">\n              <Button className=\"richtext-mt-1 richtext-w-full\"\n                onClick={handleClick}\n                size=\"sm\"\n              >\n                {t('editor.image.dialog.tab.upload')}\n              </Button>\n\n              <ImageCropper\n                editor={props.editor}\n                imageInline={imageInline}\n                onClose={() => actionDialogImage.setOpen(props.editor.id, false)}\n              />\n            </div>\n\n            <input\n              accept=\"image/*\"\n              multiple\n              onChange={handleFile}\n              ref={fileInput}\n              type=\"file\"\n              style={{\n                display: 'none',\n              }}\n            />\n          </TabsContent>\n\n          <TabsContent value=\"link\">\n            <form onSubmit={handleLink}>\n              <div className=\"richtext-flex richtext-items-center richtext-gap-2\">\n                <Input\n                  autoFocus\n                  onChange={e => setLink(e.target.value)}\n                  placeholder={t('editor.image.dialog.placeholder')}\n                  required\n                  type=\"url\"\n                  value={link}\n                />\n\n                <Button type=\"submit\">\n                  {t('editor.image.dialog.button.apply')}\n                </Button>\n              </div>\n            </form>\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default ActionImageButton;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport { clamp, isNumber, throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nfunction ImageView(props: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align, inline } = props?.node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h, flipX, flipY } = props?.node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    const transformStyles: any = [];\n\n    if (flipX)\n      transformStyles.push('rotateX(180deg)');\n    if (flipY)\n      transformStyles.push('rotateY(180deg)');\n    const transform = transformStyles.join(' ');\n\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n        transform: transform || 'none',\n      },\n    };\n  }, [props?.node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    const { editor, getPos } = props;\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { editor } = props;\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [props?.editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(props.node.attrs.width);\n    let height = Number(props.node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n      // const dy = (e.clientY - y) * (/t/.test(dir) ? -1 : 1)\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = null;\n\n      props.updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, props.updateAttributes],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(props.editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [props.editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper\n      as={inline ? 'span' : 'div'}\n      className=\"image-view\"\n      style={{ ...imageMaxStyle, textAlign: align, display: inline ? 'inline' : 'block' }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={imageMaxStyle}\n        className={`image-view__body ${props?.selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {props?.editor.view.editable && (props?.selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n\nexport default ImageView;\n","import type { EditorState } from '@tiptap/pm/state';\nimport { Plugin, PluginKey } from '@tiptap/pm/state';\nimport type { EditorView } from '@tiptap/pm/view';\nimport { Decoration, DecorationSet } from '@tiptap/pm/view';\n\nconst uploadKey = new PluginKey('upload-image');\n\ninterface UploadAction {\n  add?: Array<{ id: string, pos: number, src: string }>\n  remove?: string[]\n}\n\nexport function UploadImagesPlugin() {\n  return new Plugin({\n    key: uploadKey,\n    state: {\n      init() {\n        return DecorationSet.empty;\n      },\n      apply(tr: any, set: any) {\n        set = set.map(tr.mapping, tr.doc);\n        const action = tr.getMeta(uploadKey) as UploadAction;\n\n        if (action?.add) {\n          for (const { id, pos, src } of action.add) {\n            const placeholder = createPlaceholder(src);\n            const deco = Decoration.widget(pos, placeholder, { id });\n            set = set.add(tr.doc, [deco]);\n          }\n        } else if (action?.remove) {\n          for (const id of action.remove) {\n            set = set.remove(set.find(undefined, undefined, (spec: any) => spec.id === id));\n          }\n        }\n\n        return set;\n      },\n    },\n    props: {\n      decorations(state) {\n        return this.getState(state);\n      },\n    },\n  });\n}\n\nfunction createPlaceholder(src: string): HTMLElement {\n  const placeholder = document.createElement('div');\n  const image = document.createElement('img');\n  image.setAttribute('class', 'opacity-50');\n  image.src = src;\n  image.addEventListener('load', () => {\n    placeholder.setAttribute('class', 'img-placeholder');\n  });\n  placeholder.append(image);\n  return placeholder;\n}\n\nfunction findPlaceholder(state: EditorState, id: string): number | null {\n  const decos = uploadKey.getState(state) as DecorationSet;\n  const found = decos.find(undefined, undefined, spec => spec.id === id);\n  return found.length > 0 ? found[0]?.from : null;\n}\n\nexport interface ImageUploadOptions {\n  validateFn?: (file: File) => boolean\n  onUpload: (file: File) => Promise<string | object>\n  postUpload?: (src: string) => Promise<string>\n  defaultInline?: boolean\n}\n\nexport type UploadFn = (files: File[], view: EditorView, pos: number) => void;\n\nexport function createImageUpload({ validateFn, onUpload, postUpload, defaultInline = false }: ImageUploadOptions): UploadFn {\n  return (files, view, pos) => {\n    for (const file of files) {\n      if (validateFn && !validateFn(file)) {\n        continue;\n      }\n\n      const id = Date.now().toString();\n      const tr = view.state.tr;\n      if (!tr.selection.empty) {\n        tr.deleteSelection();\n      }\n\n      const result = URL.createObjectURL(file);\n      tr.setMeta(uploadKey, {\n        add: [{ id, pos, src: result }],\n      });\n      view.dispatch(tr);\n\n      onUpload(file).then(\n        async (src) => {\n          if (postUpload && typeof src === 'string') {\n            src = await postUpload(src);\n          }\n\n          const { schema } = view.state;\n          let placeholderPos = findPlaceholder(view.state, id);\n          if (placeholderPos === null) {\n            return;\n          }\n\n          const imageSrc = typeof src === 'object' ? result : src;\n          const node = schema.nodes.image?.create({\n            src: imageSrc,\n            inline: defaultInline\n          });\n          if (!node) {\n            return;\n          }\n\n          // check position larger than doc.content.size\n          const { doc } = view.state;\n          if (placeholderPos > doc.content.size) {\n            placeholderPos = doc.content.size - 1;\n          }\n\n          const transaction = view.state.tr\n            .replaceWith(placeholderPos, placeholderPos, node)\n            .setMeta(uploadKey, { remove: [id] });\n\n          view.dispatch(transaction);\n        },\n        () => {\n          const transaction = view.state.tr.delete(pos, pos).setMeta(uploadKey, { remove: [id] });\n          view.dispatch(transaction);\n        },\n      );\n    }\n  };\n}\n\nexport function handleImagePaste(view: EditorView, event: ClipboardEvent, uploadFn: UploadFn): boolean {\n  const files = [...(event.clipboardData?.files || [])];\n  if (files.length > 0) {\n    event.preventDefault();\n    const pos = view.state.selection.from;\n    uploadFn(files, view, pos + 1);\n    return true;\n  }\n  return false;\n}\n\nexport function handleImageDrop(view: EditorView, event: DragEvent, moved: boolean, uploadFn: UploadFn): boolean {\n  const files = [...(event.dataTransfer?.files || [])];\n  if (!moved && files.length > 0) {\n    event.preventDefault();\n    const coordinates = view.posAtCoords({\n      left: event.clientX,\n      top: event.clientY,\n    });\n    if (coordinates) {\n      uploadFn(files, view, coordinates.pos + 1);\n      return true;\n    }\n  }\n  return false;\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { mergeAttributes } from '@tiptap/core';\nimport TiptapImage from '@tiptap/extension-image';\nimport { Plugin } from '@tiptap/pm/state';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport ActionImageButton from '@/extensions/Image/components/ActionImageButton';\nimport ImageView from '@/extensions/Image/components/ImageView';\nimport { UploadImagesPlugin, createImageUpload, handleImageDrop, handleImagePaste } from '@/plugins/image-upload';\nimport type { GeneralOptions } from '@/types';\n\nexport interface SetImageAttrsOptions {\n  src?: string\n  /** The alternative text for the image. */\n  alt?: string\n  /** The caption of the image. */\n  caption?: string\n  /** The width of the image. */\n  width?: number | string | null\n  /** The alignment of the image. */\n  align?: 'left' | 'center' | 'right'\n  /** Whether the image is inline. */\n  inline?: boolean\n  /** image FlipX */\n  flipX?: boolean\n  /** image FlipY */\n  flipY?: boolean\n}\n\nconst DEFAULT_OPTIONS: any = {\n  acceptMimes: ['image/jpeg', 'image/gif', 'image/png', 'image/jpg'],\n  maxSize: 1024 * 1024 * 5, // 5MB\n  resourceImage: 'both',\n  defaultInline: false,\n};\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    imageUpload: {\n      /**\n       * Add an image\n       */\n      setImageInline: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Update an image\n       */\n      updateImage: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Set image alignment\n       */\n      setAlignImage: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport interface IImageOptions extends GeneralOptions<IImageOptions> {\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n\n  HTMLAttributes?: any\n\n  acceptMimes?: string[]\n  maxSize?: number\n\n  /** The source URL of the image */\n  resourceImage: 'upload' | 'link' | 'both'\n  defaultInline?: boolean\n}\n\nexport const Image = TiptapImage.extend<IImageOptions>({\n  group: 'inline',\n  inline: true,\n  defining: true,\n  draggable: true,\n  selectable: true,\n\n  addOptions() {\n    return {\n      ...DEFAULT_OPTIONS,\n      ...this.parent?.(),\n      upload: () => Promise.reject('Image Upload Function'),\n      button: ({\n        editor,\n        extension,\n        t,\n      }: {\n        editor: any\n        extension: any\n        t: (key: string) => string\n      }) => ({\n        component: ActionImageButton,\n        componentProps: {\n          action: () => {\n            return true;\n          },\n          upload: extension.options.upload,\n          /* If setImage is not available(when Image Component is not imported), the button is disabled */\n          disabled: !editor.can().setImage?.({}),\n          icon: 'ImageUp',\n          tooltip: t('editor.image.tooltip'),\n          editor,\n        },\n      }),\n    };\n  },\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      flipX: {\n        default: false,\n      },\n      flipY: {\n        default: false,\n      },\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const width = element.style.width || element.getAttribute('width') || null;\n          return !width ? null : Number.parseInt(width, 10);\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n      inline: {\n        default: false,\n        parseHTML: element => Boolean(element.getAttribute('inline')),\n        renderHTML: (attributes) => {\n          return {\n            inline: attributes.inline,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(ImageView);\n  },\n  addCommands() {\n    return {\n      ...this.parent?.(),\n      setImageInline: (options: any) => ({ commands }: any) => {\n        return commands.insertContent({\n          type: this.name,\n          attrs: {\n            ...options,\n            inline: options.inline ?? this.options.defaultInline,\n          },\n        });\n      },\n      updateImage:\n        options =>\n          ({ commands }) => {\n            return commands.updateAttributes(this.name, options);\n          },\n      setAlignImage:\n          align =>\n            ({ commands }) => {\n              return commands.updateAttributes(this.name, { align });\n            },\n    };\n  },\n  renderHTML({ HTMLAttributes }) {\n    const { flipX, flipY, align, inline } = HTMLAttributes;\n\n    const transformStyle\n      = flipX || flipY ? `transform: rotateX(${flipX ? '180' : '0'}deg) rotateY(${flipY ? '180' : '0'}deg);` : '';\n\n    const textAlignStyle = align ? `text-align: ${align};` : '';\n\n    return [\n      inline ? 'span' : 'div',\n      {\n        style: textAlignStyle,\n        class: 'image',\n      },\n      [\n        'img',\n        mergeAttributes(\n          {\n            height: 'auto',\n            style: transformStyle,\n          },\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'span.image img',\n        getAttrs: (img) => {\n          const element = img?.parentElement;\n\n          const width = img?.getAttribute('width');\n\n          const flipX = img?.getAttribute('flipx') || false;\n          const flipY = img?.getAttribute('flipy') || false;\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            caption: img?.getAttribute('caption'),\n            width: width ? Number.parseInt(width, 10) : null,\n            align: img?.getAttribute('align') || element?.style?.textAlign || null,\n            inline: img?.getAttribute('inline') || false,\n            flipX: flipX === 'true',\n            flipY: flipY === 'true',\n          };\n        },\n      },\n      {\n        tag: 'div[class=image]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n          const flipX = img?.getAttribute('flipx') || false;\n          const flipY = img?.getAttribute('flipy') || false;\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            caption: img?.getAttribute('caption'),\n            width: width ? Number.parseInt(width, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n            inline: img?.getAttribute('inline') || false,\n            flipX: flipX === 'true',\n            flipY: flipY === 'true',\n          };\n        },\n      },\n    ];\n  },\n  addProseMirrorPlugins() {\n    const validateFile = (file: File): boolean => {\n      // @ts-expect-error\n      if (!this.options.acceptMimes.includes(file.type)) {\n        // toast({ description: t.value('editor.imageUpload.fileTypeNotSupported'), duration: 2000 });\n        return false;\n      }\n      // @ts-expect-error\n      if (file.size > this.options.maxSize) {\n        // toast({\n        //   description: `${t.value('editor.imageUpload.fileSizeTooBig')} ${formatFileSize(\n        //     this.options.maxSize,\n        //   )}.`,\n        //   duration: 2000,\n        // });\n        return false;\n      }\n      return true;\n    };\n\n    const uploadFn = createImageUpload({\n      validateFn: validateFile,\n      onUpload: this.options.upload as any,\n      // postUpload: this.options.postUpload,\n      defaultInline: this.options.defaultInline,\n    });\n\n    return [\n      new Plugin({\n        props: {\n          handlePaste: (view, event) => {\n            if (!event.clipboardData) {\n              return false;\n            }\n            const items = [...(event.clipboardData.files || [])];\n            if (items.some(x => x.type === 'text/html')) {\n              return false;\n            }\n            return handleImagePaste(view, event, uploadFn);\n          },\n          handleDrop: (view, event, _, moved) => {\n            if (!(event instanceof DragEvent) || !event.dataTransfer) {\n              return false;\n            }\n            handleImageDrop(view, event, moved, uploadFn);\n            return false;\n          },\n        },\n      }),\n      UploadImagesPlugin(),\n    ];\n  },\n});\n\nexport default Image;\n","import { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { ActionButton, Button, Input, Tabs, TabsContent, TabsList, TabsTrigger } from '@/components';\nimport { Dialog, DialogContent, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Video } from '@/extensions/Video/Video';\nimport { useLocale } from '@/locales';\nimport { listenEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nfunction checkIsVideo(url: string) {\n  return /\\.(?:mp4|webm|ogg|mov)$/i.test(url);\n}\n\nfunction ActionVideoButton(props: any) {\n  const { t } = useLocale();\n\n  const [link, setLink] = useState<string>('');\n  const fileInput = useRef<HTMLInputElement>(null);\n\n  const [error, setError] = useState<string>('');\n\n  const [open, setOpen] = useState(false);\n\n  const handleUploadVideo = (evt: any) => {\n    setOpen(evt.detail);\n  };\n\n  useEffect(() => {\n    const rm1 = listenEvent(EVENTS.UPLOAD_VIDEO(props.editor.id), handleUploadVideo);\n\n    return () => {\n      rm1();\n    };\n  }, []);\n\n  const uploadOptions = useMemo(() => {\n    const uploadOptions = props.editor.extensionManager.extensions.find(\n      (extension: any) => extension.name === Video.name,\n    )?.options;\n\n    return uploadOptions;\n  }, [props.editor]);\n\n  async function handleFile(event: any) {\n    const files = event?.target?.files;\n    if (!props.editor || props.editor.isDestroyed || files.length === 0) {\n      return;\n    }\n    const file = files[0];\n\n    let src = '';\n    if (uploadOptions.upload) {\n      src = await uploadOptions.upload(file);\n    } else {\n      src = URL.createObjectURL(file);\n    }\n\n    props.editor\n      .chain()\n      .focus()\n      .setVideo({\n        src,\n        width: '100%',\n      })\n      .run();\n    setOpen(false);\n  }\n  function handleLink(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!link) {\n      return;\n    }\n\n    props.editor\n      .chain()\n      .focus()\n      .setVideo({\n        src: link,\n        width: '100%',\n      })\n      .run();\n    setOpen(false);\n  }\n\n  function handleClick(e: any) {\n    e.preventDefault();\n    fileInput.current?.click();\n  }\n\n  return (\n    <Dialog onOpenChange={setOpen}\n      open={open}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => setOpen(true)}\n          icon={props.icon}\n          tooltip={props.tooltip}\n        />\n      </DialogTrigger>\n\n      <DialogContent>\n        <DialogTitle>\n          {t('editor.video.dialog.title')}\n        </DialogTitle>\n\n        <Tabs\n          activationMode=\"manual\"\n          defaultValue={\n            (uploadOptions?.resourceVideo === 'both' || uploadOptions?.resourceVideo === 'upload') ? 'upload' : 'link'\n          }\n        >\n          <TabsList className=\"richtext-grid richtext-w-full richtext-grid-cols-2\">\n            {(uploadOptions?.resourceVideo === 'both' || uploadOptions?.resourceVideo === 'upload') && (\n              <TabsTrigger value=\"upload\">\n                {t('editor.video.dialog.tab.upload')}\n              </TabsTrigger>\n            )}\n\n            {(uploadOptions?.resourceVideo === 'both' || uploadOptions?.resourceVideo === 'link') && (\n              <TabsTrigger value=\"link\">\n                {t('editor.video.dialog.link')}\n              </TabsTrigger>\n            )}\n          </TabsList>\n\n          <TabsContent value=\"upload\">\n            <div className=\"richtext-flex richtext-items-center richtext-gap-[10px]\">\n              <Button className=\"richtext-mt-1 richtext-w-full\"\n                onClick={handleClick}\n                size=\"sm\"\n              >\n                {t('editor.video.dialog.tab.upload')}\n              </Button>\n            </div>\n\n            <input\n              accept=\"video/*\"\n              multiple\n              onChange={handleFile}\n              ref={fileInput}\n              type=\"file\"\n              style={{\n                display: 'none',\n              }}\n            />\n          </TabsContent>\n\n          <TabsContent value=\"link\">\n            <form onSubmit={handleLink}>\n              <div className=\"richtext-flex richtext-items-center richtext-gap-2\">\n                <Input\n                  autoFocus\n                  placeholder={t('editor.video.dialog.placeholder')}\n                  required\n                  type=\"url\"\n                  value={link}\n                  onChange={(e) => {\n                    const url = e.target.value;\n\n                    const isVideoUrl = checkIsVideo(url);\n\n                    if (!isVideoUrl) {\n                      setError('Invalid video URL');\n                      setLink('');\n                      return;\n                    }\n                    setError('');\n                    setLink(url);\n                  }}\n                />\n\n                <Button type=\"submit\">\n                  {t('editor.video.dialog.button.apply')}\n                </Button>\n              </div>\n            </form>\n\n            {error && <div className=\"richtext-my-[5px] richtext-text-red-500\">\n              {error}\n            </div>}\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default ActionVideoButton;\n","import { Node } from '@tiptap/core';\n\nimport { VIDEO_SIZE } from '@/constants';\nimport ActionVideoButton from '@/extensions/Video/components/ActiveVideoButton';\nimport type { GeneralOptions } from '@/types';\nimport { getCssUnitWithDefault } from '@/utils/utils';\n\n/**\n * Represents the interface for video options, extending GeneralOptions.\n */\nexport interface VideoOptions extends GeneralOptions<VideoOptions> {\n  /**\n   * Indicates whether fullscreen play is allowed\n   *\n   * @default true\n   */\n  allowFullscreen: boolean\n  /**\n   * Indicates whether to display the frameborder\n   *\n   * @default false\n   */\n  frameborder: boolean\n  /**\n   * Width of the video, can be a number or string\n   *\n   * @default VIDEO_SIZE['size-medium']\n   */\n  width: number | string\n  /** HTML attributes object for passing additional attributes */\n  HTMLAttributes: {\n    [key: string]: any\n  }\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n\n  /** The source URL of the video */\n  resourceVideo: 'upload' | 'link' | 'both'\n}\n\n/**\n * Represents the type for setting video options\n */\ninterface SetVideoOptions {\n  /** The source URL of the video */\n  src: string\n  /** The width of the video */\n  width: string | number\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    video: {\n      /**\n       * Add an video\n       */\n      setVideo: (options: Partial<SetVideoOptions>) => ReturnType\n      /**\n       * Update an video\n       */\n      updateVideo: (options: Partial<SetVideoOptions>) => ReturnType\n    }\n  }\n}\n\nfunction linkConvert(src: string) {\n  // Convert youtube links\n  src = src\n    .replace('https://youtu.be/', 'https://www.youtube.com/watch?v=')\n    .replace('watch?v=', 'embed/');\n\n  // Convert vimeo links\n  src = src.replace('https://vimeo.com/', 'https://player.vimeo.com/video/');\n\n  // Convert bilibili links\n  const isBilibiliLink = /^https?:\\/\\/www.bilibili.com\\/video\\/.*/i.test(src);\n  if (isBilibiliLink) {\n    src = src\n      .replace(/\\?.*$/, '')\n      .replace('https://www.bilibili.com/video/', 'https://player.bilibili.com/player.html?bvid=');\n  }\n\n  // Convert google drive links\n  if (src.includes('drive.google.com')) {\n    src = src.replace('/view', '/preview');\n  }\n\n  return src;\n}\n\nexport const Video = Node.create<VideoOptions>({\n  name: 'video',\n  group: 'block',\n  atom: true,\n  draggable: true,\n\n  addOptions() {\n    return {\n      divider: false,\n      spacer: false,\n      allowFullscreen: true,\n      upload: undefined,\n      frameborder: false,\n      resourceVideo: 'both',\n      width: VIDEO_SIZE['size-medium'],\n      HTMLAttributes: {\n        class: 'iframe-wrapper',\n        style: 'display: flex;justify-content: center;',\n      },\n      button: ({ editor, t }: any) => {\n        return {\n          component: ActionVideoButton,\n          componentProps: {\n            action: () => {\n              return;\n            },\n            isActive: () => editor.isActive('video') || false,\n            /* If setVideo is not available(when Video Component is not imported), the button is disabled */\n            disabled: !editor.can().setVideo?.({}),\n            icon: 'Video',\n            tooltip: t('editor.video.tooltip'),\n            editor,\n          },\n        };\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      src: {\n        default: null,\n        renderHTML: ({ src }) => ({\n          src: src ? linkConvert(src) : null,\n        }),\n      },\n      width: {\n        default: this.options.width,\n        renderHTML: ({ width }) => ({\n          width: getCssUnitWithDefault(width),\n        }),\n      },\n      frameborder: {\n        default: this.options.frameborder ? 1 : 0,\n        parseHTML: () => (this.options.frameborder ? 1 : 0),\n      },\n      allowfullscreen: {\n        default: this.options.allowFullscreen,\n        parseHTML: () => this.options.allowFullscreen,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[data-video] iframe',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    const { width = '100%' } = HTMLAttributes ?? {};\n\n    const iframeHTMLAttributes = {\n      ...HTMLAttributes,\n      width: '100%',\n      height: '100%',\n    };\n\n    const responsiveStyle = `position: relative;overflow: hidden;display: flex;flex: 1;max-width: ${width};`;\n    const responsiveSizesStyle = `flex: 1;padding-bottom: ${(9 / 16) * 100}%;`;\n\n    const iframeDOM = ['iframe', iframeHTMLAttributes];\n    const sizesDOM = ['div', { style: responsiveSizesStyle }];\n    const responsiveDOM = ['div', { style: responsiveStyle }, sizesDOM, iframeDOM];\n\n    const divAttrs = {\n      ...this.options.HTMLAttributes,\n      'data-video': '',\n    };\n\n    return ['div', divAttrs, responsiveDOM];\n  },\n\n  addCommands() {\n    return {\n      setVideo:\n        options =>\n          ({ commands }) => {\n            return commands.insertContent({\n              type: this.name,\n              attrs: options,\n            });\n          },\n      updateVideo:\n        options =>\n          ({ commands }) => {\n            return commands.updateAttributes(this.name, options);\n          },\n    };\n  },\n\n});\n","import { useCallback, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport clsx from 'clsx';\nimport { Resizable } from 're-resizable';\n\n// import { getEditorContainerDOMSize } from '@/utils'\nimport { Button, Input } from '@/components/ui';\nimport { Iframe } from '@/extensions/Iframe/Iframe';\nimport { useEditableEditor } from '@/store/editableEditor';\n\nimport styles from './index.module.scss';\n\nfunction IframeNodeView({ editor, node, updateAttributes }: any) {\n  const isEditable = useEditableEditor();\n\n  const { url, width, height } = node.attrs;\n  // const { width: maxWidth } = getEditorContainerDOMSize(editor)\n\n  const [originalLink, setOriginalLink] = useState<string>('');\n\n  function handleConfirm() {\n    if (!originalLink) {\n      return;\n    }\n\n    editor\n      .chain()\n      .updateAttributes(Iframe.name, {\n        url: originalLink,\n      })\n      .setNodeSelection(editor.state.selection.from)\n      .focus()\n      .run();\n  }\n\n  const onResize = useCallback(\n    (size: any) => {\n      updateAttributes({ width: size.width, height: size.height });\n    },\n    [updateAttributes],\n  );\n\n  return (\n    <NodeViewWrapper>\n      {!url && (\n        <div className=\"richtext-mx-auto richtext-my-[12px] richtext-flex richtext-max-w-[600px] richtext-items-center richtext-justify-center richtext-gap-[10px] richtext-rounded-[12px] richtext-border richtext-border-solid richtext-border-[#ccc] richtext-p-[10px]\">\n          <Input\n            autoFocus\n            className=\"richtext-flex-1\"\n            onInput={(e: any) => setOriginalLink(e.target.value)}\n            placeholder=\"Enter link\"\n            type=\"url\"\n            value={originalLink}\n          />\n\n          <Button className=\"richtext-w-[60px]\"\n            onClick={handleConfirm}\n          >\n            OK\n          </Button>\n        </div>\n      )}\n\n      {url && (\n        <Resizable\n          size={{ width: Number.parseInt(width), height: Number.parseInt(height) }}\n          onResizeStop={(e, direction, ref, d) => {\n            onResize({\n              width: Number.parseInt(width) + d.width,\n              height: Number.parseInt(height) + d.height,\n            });\n          }}\n        >\n          <div className={clsx(styles.wrap, 'render-wrapper')}>\n            <div className={styles.innerWrap}\n              style={{ pointerEvents: !isEditable ? 'auto' : 'none' }}\n            >\n              <iframe\n                className=\"richtext-my-[12px] \"\n                src={url}\n              >\n              </iframe>\n            </div>\n          </div>\n        </Resizable>\n      )}\n    </NodeViewWrapper>\n  );\n}\n\nexport default IframeNodeView;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n \nimport { safeJSONParse } from '@/utils/json';\n\n/**\n * @param json\n */\nexport function jsonToStr(json: Record<string, unknown>) {\n  try {\n    return JSON.stringify(json);\n  } catch {\n    return JSON.stringify({});\n  }\n}\n\n/**\n * @param str\n */\nexport function strToJSON(str: string) {\n  return safeJSONParse(str);\n}\n\n/**\n * @param element\n * @param json\n */\nexport function jsonToDOMDataset(json: Record<string, unknown>) {\n  return Object.keys(json).map((key) => {\n    let value = json[key];\n\n    if (typeof value === 'object') {\n      value = JSON.stringify(value);\n    }\n\n    return {\n      key: `data-${key}`,\n      value: encodeURIComponent(value as string),\n    };\n  });\n}\n\n/**\n * @param element\n * @param attribute\n * @param transformToJSON\n */\nexport function getDatasetAttribute(attribute: string, transformToJSON = false) {\n  return (element: HTMLElement) => {\n    const dataKey = attribute.startsWith('data-') ? attribute : `data-${attribute}`;\n    // @ts-ignore\n    let value = decodeURIComponent(element.getAttribute(dataKey));\n\n    if (value == null || (typeof value === 'string' && value === 'null')) {\n      try {\n        const html = element.outerHTML;\n\n        const texts = html.match(/([\\S\\s])+?=\"([\\S\\s])+?\"/g);\n        if (texts && texts.length > 0) {\n          const params = texts\n            .map(str => str.trim())\n            .reduce((accu, item) => {\n              const i = item.indexOf('=');\n              const arr = [item.slice(0, i), item.slice(i + 1).slice(1, -1)];\n              // @ts-expect-error\n              accu[arr[0]] = arr[1];\n              return accu;\n            }, {});\n\n          // @ts-expect-error\n          value = (params[attribute.toLowerCase()] || '').replaceAll('&quot;', '\"');\n        }\n      } catch (e: any) {\n        console.error('Error getDatasetAttribute ', e.message, element);\n      }\n    }\n\n    if (transformToJSON) {\n      try {\n        return JSON.parse(value);\n      } catch {\n        return {};\n      }\n    }\n\n    if (value.includes('%') || value.includes('auto')) {\n      return value;\n    }\n\n    const toNumber = Number.parseInt(value);\n    return toNumber !== toNumber ? value : toNumber;\n  };\n}\n\n/**\n * 将节点属性转换为 dataset\n * @param node\n * @returns\n */\nexport function nodeAttrsToDataset(node: Node) {\n  const { attrs } = node as any;\n\n  return Object.keys(attrs).reduce((accu, key) => {\n    const value = attrs[key];\n\n    if (value == null) {\n      return accu;\n    }\n\n    let encodeValue = '';\n\n    if (typeof value === 'object') {\n      encodeValue = jsonToStr(value);\n    } else {\n      encodeValue = value;\n    }\n\n    accu[key] = encodeValue;\n\n    return accu;\n  }, Object.create(null));\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { ActionButton } from '@/components';\nimport IframeNodeView from '@/extensions/Iframe/components/IframeNodeView';\nimport { getDatasetAttribute } from '@/utils/dom-dataset';\n\nexport interface IIframeAttrs {\n  width?: number | string\n  height?: number\n  url?: string\n  defaultShowPicker?: boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    iframe: {\n      /**\n       * Add an iframe\n       */\n      setIframe: (options: { src: string, service: string }) => ReturnType\n    }\n  }\n}\n\nexport const Iframe = Node.create({\n  name: 'iframe',\n  content: '',\n  marks: '',\n  group: 'block',\n  selectable: true,\n  atom: true,\n  draggable: true,\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      HTMLAttributes: {\n        class: 'iframe',\n      },\n      button: ({\n        editor,\n        extension,\n        t,\n      }: {\n        editor: any\n        extension: any\n        t: (key: string) => string\n      }) => ({\n        component: ActionButton,\n        componentProps: {\n          action: (options: { src: string, service: string }) => editor.commands.setIframe(options),\n          upload: extension.options.upload,\n          disabled: !editor.can().setIframe({}),\n          icon: 'Iframe',\n          tooltip: t('editor.iframe.tooltip'),\n        },\n      }),\n    };\n  },\n\n  addAttributes() {\n    return {\n      width: {\n        default: 600,\n        parseHTML: getDatasetAttribute('width'),\n      },\n      height: {\n        default: 300,\n        parseHTML: getDatasetAttribute('height'),\n      },\n      url: {\n        default: null,\n        parseHTML: getDatasetAttribute('url'),\n      },\n      defaultShowPicker: {\n        default: false,\n      },\n      frameborder: {\n        default: 0,\n      },\n      allowfullscreen: {\n        default: this.options.allowFullscreen,\n        parseHTML: () => this.options.allowFullscreen,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'iframe',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['iframe', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\n  },\n\n  addCommands() {\n    return {\n      setIframe:\n        options =>\n          ({ tr, commands, chain }) => {\n          // @ts-ignore\n            if (tr.selection?.node?.type?.name == this.name) {\n              return commands.updateAttributes(this.name, options);\n            }\n\n            const attrs = options || { url: '' };\n            // const { selection } = editor.state\n\n            return chain()\n              .insertContent({\n                type: this.name,\n                attrs,\n              })\n              .run();\n          },\n    };\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: /^\\$iframe\\$$/,\n        type: this.type,\n        getAttributes: () => {\n          return { width: '100%' };\n        },\n      }),\n    ];\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(IframeNodeView);\n  },\n});\n","import * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'richtext-flex richtext-min-h-[80px] richtext-w-full richtext-rounded-md !richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background placeholder:richtext-text-muted-foreground focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nTextarea.displayName = 'Textarea';\n\nexport { Textarea };\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport deepEqual from 'deep-equal';\n\ntype MapFn<T, R> = (arg: T) => R;\n\nfunction mapSelf<T>(d: T): T {\n  return d;\n}\n\nexport function useAttributes<T, R = T>(editor: Editor, attrbute: string, defaultValue?: T, map?: (arg: T) => R) {\n  const mapFn = (map || mapSelf) as MapFn<T, R>;\n  const [value, setValue] = useState<R>(mapFn(defaultValue as any));\n  const prevValueCache = useRef<R>(value);\n\n  useEffect(() => {\n    const listener = () => {\n      const attrs = { ...defaultValue, ...editor.getAttributes(attrbute) } as any;\n      Object.keys(attrs).forEach((key) => {\n        if (attrs[key] === null || attrs[key] === undefined) {\n          // @ts-ignore\n          attrs[key] = defaultValue ? defaultValue[key] : null;\n        }\n      });\n      const nextAttrs = mapFn(attrs);\n      if (deepEqual(prevValueCache.current, nextAttrs)) {\n        return;\n      }\n      setValue(nextAttrs);\n      prevValueCache.current = nextAttrs;\n    };\n\n    editor.on('selectionUpdate', listener);\n    editor.on('transaction', listener);\n\n    return () => {\n      editor.off('selectionUpdate', listener);\n      editor.off('transaction', listener);\n    };\n  }, [editor, defaultValue, attrbute, mapFn]);\n\n  return value;\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport katex from 'katex';\nimport { HelpCircle } from 'lucide-react';\n\nimport { ActionButton, Button, Label, Popover, PopoverContent, PopoverTrigger } from '@/components';\nimport { Textarea } from '@/components/ui/textarea';\nimport type { IKatexAttrs } from '@/extensions/Katex/Katex';\nimport { Katex } from '@/extensions/Katex/Katex';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { useLocale } from '@/locales';\n\nfunction KatexActiveButton({ editor, ...props }: any) {\n  const { t } = useLocale();\n\n  const attrs = useAttributes<IKatexAttrs>(editor, Katex.name, {\n    text: '',\n    defaultShowPicker: false,\n  });\n  const { text, defaultShowPicker } = attrs;\n\n  const [currentValue, setCurrentValue] = useState('');\n\n  const submit = useCallback(() => {\n    editor.chain().focus().setKatex({ text: currentValue }).run();\n    setCurrentValue('');\n  }, [editor, currentValue]);\n\n  useEffect(() => {\n    if (defaultShowPicker) {\n      editor.chain().updateAttributes(Katex.name, { defaultShowPicker: false }).focus().run();\n    }\n  }, [editor, defaultShowPicker]);\n\n  const formatText = useMemo(() => {\n    try {\n      return katex.renderToString(`${currentValue}`);\n    } catch {\n      return currentValue;\n    }\n  }, [currentValue]);\n\n  const previewContent = useMemo(\n    () => {\n      if (`${currentValue}`.trim()) {\n        return (\n          <span contentEditable={false}\n            dangerouslySetInnerHTML={{ __html: formatText || '' }}\n          >\n          </span>\n        );\n      }\n\n      return null;\n    },\n    [currentValue, formatText],\n  );\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild>\n        <ActionButton\n          icon={props?.icon}\n          tooltip={props?.tooltip}\n        />\n      </PopoverTrigger>\n\n      <PopoverContent align=\"start\"\n        className=\"richtext-size-full richtext-p-2\"\n        hideWhenDetached\n        side=\"bottom\"\n      >\n        <Label className=\"richtext-mb-[6px]\">\n          {t('editor.formula.dialog.text')}\n        </Label>\n\n        <div className=\"richtext-mb-[16px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm\">\n            <Textarea\n              autoFocus\n              className=\"richtext-w-full\"\n              defaultValue={text}\n              onChange={e => setCurrentValue(e.target.value)}\n              placeholder=\"Text\"\n              required\n              rows={3}\n              value={currentValue}\n            />\n          </div>\n        </div>\n\n        {previewContent && (\n          <div className=\"richtext-my-[10px] richtext-max-w-[286px] richtext-overflow-auto richtext-whitespace-nowrap richtext-rounded-[6px] !richtext-border richtext-p-[10px]\">\n            {previewContent}\n          </div>\n        )}\n\n        <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-gap-[6px]\">\n          <Button className=\"richtext-flex-1\"\n            onClick={submit}\n          >\n            Submit\n          </Button>\n\n          <a href=\"https://katex.org/docs/supported\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            <HelpCircle size={16} />\n          </a>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport default KatexActiveButton;\n","import { useStoreTheme } from '@/store/store';\nimport { dispatchEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nexport function useTheme() {\n  const [v] = useStoreTheme(store => store.value);\n\n  return v;\n}\n\nexport const themeActions = {\n  setTheme: (id: any, theme: string) => {\n    dispatchEvent(EVENTS.UPDATE_THEME(id), theme);\n  },\n};\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nconst colors = [\n  '#47A1FF',\n  '#59CB74',\n  '#FFB952',\n  '#FC6980',\n  '#6367EC',\n  '#DA65CC',\n  '#FBD54A',\n  '#ADDF84',\n  '#6CD3FF',\n  '#659AEC',\n  '#9F8CF1',\n  '#ED8CCE',\n  '#A2E5FF',\n  '#4DCCCB',\n  '#F79452',\n  '#84E0BE',\n  '#5982F6',\n  '#E37474',\n  '#3FDDC7',\n  '#9861E5',\n];\n\nconst total = colors.length;\nexport const getRandomColor = () => colors[Math.trunc(Math.random() * total)];\n\n/**\n * @param hexCode\n * @param opacity\n * @returns\n */\nexport function convertColorToRGBA(hexCode: string, opacity = 1) {\n  let r = 0;\n  let g = 0;\n  let b = 0;\n\n  if (hexCode.startsWith('rgb')) {\n    // @ts-expect-error\n    const rgb = hexCode\n      .replace(/\\s/g, '')\n      .match(/rgb\\((.*)\\)$/)[1]\n      .split(',');\n\n    r = +rgb[0];\n    g = +rgb[1];\n    b = +rgb[2];\n  } else if (hexCode.startsWith('#')) {\n    let hex = hexCode.replace('#', '');\n\n    if (hex.length === 3) {\n      hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n    }\n\n    r = Number.parseInt(hex.substring(0, 2), 16);\n    g = Number.parseInt(hex.substring(2, 4), 16);\n    b = Number.parseInt(hex.substring(4, 6), 16);\n  } else {\n    return hexCode;\n  }\n\n  if (opacity > 1 && opacity <= 100) {\n    opacity = opacity / 100;\n  }\n\n  return `rgba(${r},${g},${b},${opacity})`;\n}\n","import { useMemo } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\n\nimport katex from 'katex';\nimport { useTheme } from '@/theme/theme';\nimport { convertColorToRGBA } from '@/utils/color';\n\nexport function KatexWrapper({ node }: any) {\n  const theme = useTheme();\n  const { text } = node.attrs;\n\n  const backgroundColor = useMemo(() => {\n    const color = 'rgb(254, 242, 237)';\n    if (theme === 'dark')\n      return convertColorToRGBA(color, 0.75);\n    return color;\n  }, [theme]);\n\n  const formatText = useMemo(() => {\n    try {\n      return katex.renderToString(`${text}`);\n    } catch {\n      return text;\n    }\n  }, [text]);\n\n  const content = useMemo(\n    () =>\n      text.trim()\n        ? (\n          <span contentEditable={false} dangerouslySetInnerHTML={{ __html: formatText }}></span>\n        )\n        : (\n          <span contentEditable={false}>\n            Not enter a formula\n          </span>\n        ),\n    [text, formatText],\n  );\n\n  return (\n    <NodeViewWrapper\n      style={{\n        display: 'inline-block',\n        backgroundColor,\n      }}\n      as=\"span\"\n    >\n      {content}\n    </NodeViewWrapper>\n  );\n}\n","import { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport KatexActiveButton from '@/extensions/Katex/components/KatexActiveButton';\nimport { KatexWrapper } from '@/extensions/Katex/components/KatexWrapper';\n\nexport interface IKatexAttrs {\n  text?: string\n  defaultShowPicker?: boolean\n}\n\ninterface IKatexOptions {\n  HTMLAttributes: Record<string, any>\n}\n\nfunction getDatasetAttribute(attribute: string) {\n  return (element: any) => {\n    return element.getAttribute(attribute);\n  };\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    katex: {\n      setKatex: (arg?: IKatexAttrs) => ReturnType\n    }\n  }\n}\n\nexport const Katex = Node.create<IKatexOptions>({\n  name: 'katex',\n  group: 'inline',\n  inline: true,\n  defining: true,\n  draggable: true,\n  selectable: true,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {\n        class: 'katex',\n      },\n      button: ({ editor, t }: any) => {\n        return {\n          component: KatexActiveButton,\n          componentProps: {\n            editor,\n            action: () => {\n              return true;\n            },\n            isActive: () => false,\n            disabled: false,\n            icon: 'KatexIcon',\n            tooltip: t('editor.katex.tooltip'),\n          },\n        };\n      },\n    };\n  },\n\n  addAttributes() {\n    return {\n      text: {\n        default: '',\n        parseHTML: getDatasetAttribute('text'),\n      },\n      defaultShowPicker: {\n        default: false,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [{ tag: 'span.katex' }];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['span', mergeAttributes((this.options && this.options.HTMLAttributes) || {}, HTMLAttributes)];\n  },\n\n  addCommands() {\n    return {\n      setKatex:\n        options =>\n          ({ commands }) => {\n            return commands.insertContent({\n              type: this.name,\n              attrs: options,\n            });\n          },\n    };\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: /^\\$katex\\$$/,\n        type: this.type,\n        getAttributes: () => {\n          return { defaultShowPicker: true };\n        },\n      }),\n    ];\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(KatexWrapper);\n  },\n});\n","import mitt from '@/utils/mitt';\n\nlet event: any;\nfunction getEventEmitter() {\n  try {\n    if (!event) {\n      event = mitt();\n    }\n    return event;\n  } catch {\n    throw new Error('Error EventEmitter');\n  }\n}\n\nexport const OPEN_COUNT_SETTING_MODAL = 'OPEN_COUNT_SETTING_MODAL';\nexport const OPEN_LINK_SETTING_MODAL = 'OPEN_LINK_SETTING_MODAL';\nexport const OPEN_FLOW_SETTING_MODAL = 'OPEN_FLOW_SETTING_MODAL';\nexport const OPEN_MIND_SETTING_MODAL = 'OPEN_MIND_SETTING_MODAL';\nexport const OPEN_EXCALIDRAW_SETTING_MODAL = 'OPEN_EXCALIDRAW_SETTING_MODAL';\nexport const OPEN_DRAWER_SETTING_MODAL = 'OPEN_DRAWER_SETTING_MODAL';\n\nexport function subject(eventName: any, handler: any) {\n  const event = getEventEmitter();\n  event.on(eventName, handler);\n}\n\nexport function cancelSubject(eventName: any, handler: any) {\n  const event = getEventEmitter();\n  event.off(eventName, handler);\n}\n\nexport function triggerOpenCountSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_COUNT_SETTING_MODAL, data);\n}\n\nexport function triggerOpenLinkSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_LINK_SETTING_MODAL, data);\n}\n\nexport function triggerOpenFlowSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_FLOW_SETTING_MODAL, data);\n}\n\nexport function triggerOpenMindSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_MIND_SETTING_MODAL, data);\n}\n\nexport function triggerOpenExcalidrawSettingModal(data: any) {\n  const event = getEventEmitter();\n  event.emit(OPEN_EXCALIDRAW_SETTING_MODAL, data);\n}\n","/* eslint-disable @typescript-eslint/no-unused-expressions */\n/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { useCallback, useEffect, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { OPEN_EXCALIDRAW_SETTING_MODAL, cancelSubject, subject } from '@/utils/_event';\n\ninterface IProps {\n  editor: Editor\n}\n\nexport const ExcalidrawActiveButton: React.FC<IProps> = ({ editor }) => {\n  const [Excalidraw, setExcalidraw] = useState<any>(null);\n  const [data, setData] = useState({});\n  const [initialData, setInitialData] = useState({ elements: [], appState: { isLoading: false }, files: null });\n  const [visible, toggleVisible] = useState(false);\n  const [loading, toggleLoading] = useState(true);\n  const [error, setError] = useState<any>(null);\n\n  const renderEditor = useCallback(\n    (div: any) => {\n      if (!div)\n        return;\n\n      import('@excalidraw/excalidraw')\n        .then((res) => {\n          setExcalidraw(res.Excalidraw);\n        })\n        .catch(setError)\n        .finally(() => toggleLoading(false));\n    },\n    [toggleLoading],\n  );\n\n  const renderExcalidraw: any = useCallback((app: any) => {\n    setTimeout(() => {\n      app.refresh();\n    });\n  }, []);\n\n  const onChange = useCallback((elements: any, appState: any, files: any) => {\n    // appState.collaborators = [];\n    setData({\n      elements,\n      appState: { isLoading: false },\n      files,\n    });\n  }, []);\n\n  const save = useCallback(() => {\n    if (!Excalidraw) {\n      toggleVisible(false);\n      return;\n    }\n\n    // const currentScrollTop = document.querySelector('main#js-tocs-container')?.scrollTop\n    editor.chain().focus().setExcalidraw({ data }).run();\n    // setTimeout(() => {\n    //   // @ts-expect-error\n    //   document.querySelector('main#js-tocs-container').scrollTop = currentScrollTop\n    // })\n    toggleVisible(false);\n  }, [Excalidraw, editor, data, toggleVisible]);\n\n  useEffect(() => {\n    const handler = (data: any) => {\n      toggleVisible(true);\n      data && setInitialData(data.data);\n    };\n\n    subject(OPEN_EXCALIDRAW_SETTING_MODAL, handler);\n\n    return () => {\n      cancelSubject(OPEN_EXCALIDRAW_SETTING_MODAL, handler);\n    };\n  }, [editor, toggleVisible]);\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Excalidraw\"\n          tooltip=\"Excalidraw\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Excalidraw\n        </DialogTitle>\n\n        <div style={{ height: '100%', borderWidth: 1 }}>\n          {loading && (\n            <p>\n              Loading...\n            </p>\n          )}\n\n          {error && <p>\n            {(error && error.message) || 'Error'}\n          </p>}\n\n          <div ref={renderEditor}\n            style={{ width: '100%', height: 600 }}\n          >\n            {!loading && !error && Excalidraw\n              ? (\n                <Excalidraw initialData={initialData}\n                  langCode=\"en\"\n                  onChange={onChange}\n                  ref={renderExcalidraw}\n                />\n              )\n              : null}\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={save}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport clsx from 'clsx';\nimport deepEqual from 'deep-equal';\nimport { Resizable } from 're-resizable';\nimport VisibilitySensor from 'react-visibility-sensor';\n\n// import { clamp, getEditorContainerDOMSize } from '@/utils'\nimport { ActionButton } from '@/components/ActionButton';\nimport { Excalidraw } from '@/extensions/Excalidraw/Excalidraw';\nimport { clamp } from '@/utils/utils';\n\nimport styles from './index.module.scss';\n\nconst MIN_ZOOM = 10;\nconst MAX_ZOOM = 200;\nconst ZOOM_STEP = 15;\n\nconst INHERIT_SIZE_STYLE = { width: '100%', height: '100%', maxWidth: '100%' };\n\nfunction NodeViewExcalidraw({ editor, node, updateAttributes }: any) {\n  const exportToSvgRef: any = useRef(null);\n  // const isEditable = editor.isEditable\n  const isActive = editor.isActive(Excalidraw.name);\n  // const { width: maxWidth } = getEditorContainerDOMSize(editor)\n  const { data, width, height } = node.attrs;\n  const [Svg, setSvg] = useState<SVGElement | null>(null);\n  const [loading, toggleLoading] = useState(true);\n  const [error, setError] = useState<any>(null);\n  const [visible, toggleVisible] = useState(false);\n  const [zoom, setZoomState] = useState(100);\n\n  const onViewportChange = useCallback(\n    (visible: any) => {\n      if (visible) {\n        toggleVisible(true);\n      }\n    },\n    [toggleVisible],\n  );\n\n  const setZoom = useCallback((type: 'minus' | 'plus') => {\n    return () => {\n      setZoomState(currentZoom =>\n        clamp(type === 'minus' ? currentZoom - ZOOM_STEP : currentZoom + ZOOM_STEP, MIN_ZOOM, MAX_ZOOM),\n      );\n    };\n  }, []);\n\n  useEffect(() => {\n    let isUnmount = false;\n\n    import('@excalidraw/excalidraw')\n      .then((res) => {\n        if (!isUnmount) {\n          exportToSvgRef.current = res.exportToSvg;\n        }\n      })\n      .catch(err => !isUnmount && setError(err))\n      .finally(() => !isUnmount && toggleLoading(false));\n\n    return () => {\n      isUnmount = true;\n    };\n  }, [toggleLoading, data]);\n\n  useEffect(() => {\n    let isUnmount = false;\n\n    const setContent = async () => {\n      if (isUnmount || loading || error || !visible || !data)\n        return;\n\n      const svg: SVGElement = await exportToSvgRef.current(data);\n\n      if (isUnmount)\n        return;\n\n      svg.setAttribute('width', '100%');\n      svg.setAttribute('height', '100%');\n      svg.setAttribute('display', 'block');\n\n      setSvg(svg);\n    };\n\n    setContent();\n\n    return () => {\n      isUnmount = true;\n    };\n  }, [data, loading, error, visible]);\n\n  const onResize = (size: any) => {\n    updateAttributes({ width: size.width, height: size.height });\n  };\n\n  return (\n    <NodeViewWrapper className={clsx(styles.wrap, isActive && styles.isActive)}>\n      <VisibilitySensor onChange={onViewportChange}>\n        <Resizable\n          size={{ width: Number.parseInt(width), height: Number.parseInt(height) }}\n          onResizeStop={(e, direction, ref, d) => {\n            onResize({\n              width: Number.parseInt(width) + d.width,\n              height: Number.parseInt(height) + d.height,\n            });\n          }}\n        >\n          <div\n            className={clsx(styles.renderWrap, 'render-wrapper')}\n            style={{ ...INHERIT_SIZE_STYLE, overflow: 'hidden' }}\n          >\n            {error && (\n              <div style={INHERIT_SIZE_STYLE}>\n                <p>\n                  {error.message || error}\n                </p>\n              </div>\n            )}\n\n            {loading && <p>\n              Loading...\n            </p>}\n\n            {!loading && !error && visible && (\n              <div\n                dangerouslySetInnerHTML={{ __html: Svg?.outerHTML ?? '' }}\n                style={{\n                  height: '100%',\n                  maxHeight: '100%',\n                  padding: 24,\n                  overflow: 'hidden',\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  transform: `scale(${zoom / 100})`,\n                  transition: 'all ease-in-out .3s',\n                }}\n              />\n            )}\n\n            <div className={styles.title}>\n              {/* <Space>\n                <span className={styles.icon}>\n                  <IconMind />\n                </span>\n                绘图\n              </Space> */}\n            </div>\n\n            <div className={styles.handlerWrap}>\n              <ActionButton\n                action={setZoom('minus')}\n                icon=\"ZoomOut\"\n                tooltip=\"Zoom Out\"\n              />\n\n              <ActionButton\n                action={setZoom('plus')}\n                icon=\"ZoomIn\"\n                tooltip=\"Zoom In\"\n              />\n            </div>\n          </div>\n        </Resizable>\n      </VisibilitySensor>\n    </NodeViewWrapper>\n  );\n}\n\nexport default React.memo(NodeViewExcalidraw, (prevProps, nextProps) => {\n  if (deepEqual(prevProps.node.attrs, nextProps.node.attrs)) {\n    return true;\n  }\n\n  return false;\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { ExcalidrawActiveButton } from '@/extensions/Excalidraw/components/ExcalidrawActiveButton';\nimport NodeViewExcalidraw from '@/extensions/Excalidraw/components/NodeViewExcalidraw/NodeViewExcalidraw';\nimport { getDatasetAttribute, nodeAttrsToDataset } from '@/utils/dom-dataset';\n\nconst DEFAULT_MIND_DATA = { elements: [] };\n\nexport interface IExcalidrawAttrs {\n  defaultShowPicker?: boolean\n  createUser?: any\n  width?: number | string\n  height?: number\n  data?: Record<string, unknown>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    excalidraw: {\n      setExcalidraw: (attrs?: IExcalidrawAttrs) => ReturnType\n    }\n  }\n}\n\nexport const Excalidraw = Node.create({\n  name: 'excalidraw',\n  group: 'block',\n  selectable: true,\n  atom: true,\n  draggable: true,\n  inline: false,\n\n  addAttributes() {\n    return {\n      defaultShowPicker: {\n        default: false,\n      },\n      createUser: {\n        default: null,\n      },\n      width: {\n        default: '100%',\n        parseHTML: getDatasetAttribute('width'),\n      },\n      height: {\n        default: 240,\n        parseHTML: getDatasetAttribute('height'),\n      },\n      data: {\n        default: DEFAULT_MIND_DATA,\n        parseHTML: getDatasetAttribute('data', true),\n      },\n    };\n  },\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      HTMLAttributes: {\n        class: 'excalidraw',\n      },\n      button: ({ editor }: any) => ({\n        component: ExcalidrawActiveButton,\n        componentProps: {\n          editor,\n        },\n      }),\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=excalidraw]',\n      },\n    ];\n  },\n\n  renderHTML({ HTMLAttributes, node }: any) {\n    return ['div', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes, nodeAttrsToDataset(node))];\n  },\n\n  addCommands() {\n    return {\n      setExcalidraw:\n        options =>\n          ({ tr, commands, chain }) => {\n            options = options || {};\n            options.data = options.data || DEFAULT_MIND_DATA;\n\n            // @ts-ignore\n            if (tr.selection?.node?.type?.name == this.name) {\n              return commands.updateAttributes(this.name, options);\n            }\n\n            return chain()\n              .insertContent({\n                type: this.name,\n                attrs: options,\n              })\n              .run();\n          },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewExcalidraw);\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: /^\\$excalidraw\\$$/,\n        type: this.type,\n        getAttributes: () => {\n          return { width: '100%' };\n        },\n      }),\n    ];\n  },\n});\n","import type React from 'react';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { debounce } from 'lodash-es';\n\nimport { ActionButton, Input, Popover, PopoverContent, PopoverTrigger } from '@/components';\n\ninterface IProps {\n  showClear?: boolean\n  selectImage: (arg: string) => void\n  children: React.ReactNode\n  giphyApiKey: string\n}\n\nfunction ImageGifWrap({ selectImage, giphyApiKey, children }: IProps) {\n  const [gifs, setGifs] = useState([]);\n  const [limit] = useState(15);\n\n  const inputRef = useRef(null);\n\n  const search = (term: any, kind: any = 'search') => {\n    if (!giphyApiKey) {\n      return;\n    }\n\n    const url\n      = kind === 'search'\n        ? `https://api.giphy.com/v1/gifs/search?q=${term}`\n        : `https://api.giphy.com/v1/gifs/trending?q=${term}`;\n    const link = `${url}&limit=${limit}&api_key=${giphyApiKey}`;\n\n    fetch(link).then(r => r.json()).then((response) => {\n      // handle success\n      setGifs(response.data);\n    })\n      .catch((error) => {\n        // handle error\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    search('', 'trend');\n  }, []);\n\n  const handleInputChange = useCallback(\n    debounce((event: React.ChangeEvent<HTMLInputElement>) => {\n      if (!event.target.value) {\n        search('', 'trend');\n        return;\n      }\n      // Add your logic here\n      search(event.target.value);\n    }, 350), // Adjust the debounce delay as needed\n    [],\n  );\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild>\n        {children}\n      </PopoverTrigger>\n\n      <PopoverContent align=\"start\"\n        className=\"richtext-size-full richtext-p-2\"\n        hideWhenDetached\n        side=\"bottom\"\n      >\n\n        {\n          giphyApiKey\n            ? (\n              <>\n                <div className=\"richtext-mb-[10px] richtext-w-full\">\n                  <Input\n                    onChange={handleInputChange}\n                    placeholder=\"Search GIF\"\n                    ref={inputRef}\n                    type=\"text\"\n                  />\n                </div>\n\n                <div className=\"richtext-max-h-[280px] richtext-overflow-y-auto\">\n                  <div className=\"richtext-grid richtext-grid-cols-2 richtext-gap-1 \">\n\n                    {gifs?.length\n                      ? gifs?.map((o: any) => (\n                        <img\n                          alt=\"giphy\"\n                          className=\"richtext-cursor-pointer richtext-text-center\"\n                          height={o.images.fixed_width_downsampled.height}\n                          key={`giphy-${o.id}`}\n                          onClick={() => selectImage(o)}\n                          src={o.images.fixed_width_downsampled.url}\n                          width={o.images.fixed_width_downsampled.width}\n                        />\n                      ))\n                      : <p>\n                        No GIFs found\n                      </p>}\n                  </div>\n                </div>\n              </>\n            )\n            : (\n              <div>\n                <p>\n                  Missing Giphy API Key\n                </p>\n              </div>\n            )\n        }\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport function ImageGifActionButton({ editor, icon, giphyApiKey, ...props }: any) {\n  const selectImage = (giphyblock: any) => {\n    const { url } = giphyblock.images.original;\n\n    editor.chain().focus().setImageGif({ src: url }).run();\n  };\n\n  return (\n    <ImageGifWrap\n      giphyApiKey={giphyApiKey}\n      selectImage={selectImage}\n    >\n      <ActionButton\n        icon={icon}\n        tooltip={props?.tooltip}\n      />\n    </ImageGifWrap>\n  );\n}\n\nexport default ImageGifActionButton;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper } from '@tiptap/react';\nimport { clamp, isNumber, throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nfunction ImageGifView(props: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align } = props?.node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h } = props?.node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n      },\n    };\n  }, [props?.node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    const { editor, getPos } = props;\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { editor } = props;\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [props?.editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(props.node.attrs.width);\n    let height = Number(props.node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n      // const dy = (e.clientY - y) * (/t/.test(dir) ? -1 : 1)\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = null;\n\n      props.updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, props.updateAttributes],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(props.editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [props.editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper className=\"image-view\"\n      style={{ ...imageMaxStyle, width: '100%', textAlign: align }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={imageMaxStyle}\n        className={`image-view__body ${props?.selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {props?.editor.view.editable && (props?.selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n\nexport default ImageGifView;\n","import { mergeAttributes } from '@tiptap/core';\nimport type { ImageOptions } from '@tiptap/extension-image';\nimport TiptapImage from '@tiptap/extension-image';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport ImageGifActionButton from '@/extensions/ImageGif/components/ImageGifActionButton';\nimport ImageGifView from '@/extensions/ImageGif/components/ImageGifView';\n\nexport interface SetImageAttrsOptions {\n  src?: string\n  /** The alternative text for the image. */\n  alt?: string\n  /** The title of the image. */\n  title?: string\n  /** The width of the image. */\n  width?: number | string | null\n  /** The alignment of the image. */\n  align?: 'left' | 'center' | 'right'\n}\n\ninterface ImageGifOptions extends ImageOptions {\n  /**\n   * The key for the gif https://giphy.com/\n   */\n  GIPHY_API_KEY: string\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    imageGifUpload: {\n      /**\n       * Add an image gif\n       */\n      setImageGif: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Update an image gif\n       */\n      updateImageGif: (options: Partial<SetImageAttrsOptions>) => ReturnType\n      /**\n       * Set image alignment\n       */\n      setAlignImageGif: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport const ImageGif = TiptapImage.extend<ImageGifOptions>({\n  name: 'imageGif',\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      inline: false,\n      content: '',\n      marks: '',\n      group: 'block',\n      GIPHY_API_KEY: '',\n      draggable: false,\n      selectable: true,\n      atom: true,\n      button: ({ editor, extension, t }: any) => {\n        const giphyApiKey = extension?.options?.GIPHY_API_KEY || '';\n\n        return {\n          component: ImageGifActionButton,\n          componentProps: {\n            editor,\n            action: () => {\n              return;\n            },\n            isActive: () => false,\n            disabled: false,\n            icon: 'GifIcon',\n            tooltip: t('editor.imageGif.tooltip'),\n            giphyApiKey,\n          },\n        };\n      },\n    };\n  },\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const width = element.style.width || element.getAttribute('width') || '10';\n          return width === undefined ? null : Number.parseInt(`${width}`, 10);\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(ImageGifView);\n  },\n  addCommands() {\n    return {\n      ...this.parent?.(),\n      setImageGif: (options: any) => ({ commands }: any) => {\n        return commands.insertContent({\n          type: this.name,\n          attrs: options,\n        });\n      },\n      updateImageGif:\n        (options: any) =>\n          ({ commands }: any) => {\n            return commands.updateAttributes(this.name, options);\n          },\n      setAlignImageGif:\n          (align: any) =>\n            ({ commands }: any) => {\n              return commands.updateAttributes(this.name, { align });\n            },\n    };\n  },\n  renderHTML({ HTMLAttributes }) {\n    const { align } = HTMLAttributes;\n\n    const style = align ? `text-align: ${align};` : '';\n    return [\n      'div', // Parent element\n      {\n        style,\n        class: 'imageGIf',\n      },\n      [\n        'img',\n        mergeAttributes(\n          // Always render the `height=\"auto\"`\n          {\n            height: 'auto',\n          },\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=imageGIf]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            title: img?.getAttribute('title'),\n            width: width ? Number.parseInt(width, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n          };\n        },\n      },\n    ];\n  },\n});\n\nexport default ImageGif;\n","export function shortId(length = 8) {\n  return Math.random()\n    .toString(36)\n    .substring(2, length + 2);\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport mermaid from 'mermaid';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\ninterface IProps {\n  editor: Editor, upload?: any\n}\n\nconst defaultCode = 'graph TB\\na-->b';\n\nexport const MermaidActiveButton: React.FC<IProps> = ({ editor, upload }) => {\n  const [mermaidCode, setMermaidCode] = useState(defaultCode);\n  const [svgCode, setSvgCode] = useState('');\n  const [visible, toggleVisible] = useState(false);\n  const mermaidRef = useRef<HTMLElement | null>(null);\n\n  const renderMermaid = async (value: any) => {\n    try {\n      const { svg } = await mermaid.render('mermaid-svg', value);\n      setSvgCode(svg);\n    } catch {\n      setSvgCode('');\n    }\n  };\n\n  const mermaidInit = () => {\n    mermaid.initialize({\n      darkMode: false,\n      startOnLoad: false,\n      // fontFamily:'',\n      fontSize: 12,\n      theme: 'base',\n    });\n    renderMermaid(mermaidCode);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      mermaidInit();\n    }\n  }, [visible]);\n\n  useEffect(() => {\n    if (visible) {\n      renderMermaid(mermaidCode);\n    }\n  }, [mermaidCode]);\n\n  const setMermaid = async () => {\n    if (mermaidCode === '') {\n      return;\n    }\n    if (mermaidCode) {\n      const svg = mermaidRef.current!.querySelector('svg') as unknown as HTMLElement;\n      const { width, height } = svg.getBoundingClientRect();\n      const name = `mermaid-${shortId()}.svg`;\n      // const { size } = new Blob([svg.outerHTML], {\n      //   type: 'image/svg+xml',\n      // })\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setMermaid(\n          {\n            type: 'mermaid',\n            src,\n            alt: encodeURIComponent(mermaidCode),\n            width,\n            height,\n          },\n          !!mermaidCode,\n        )\n        .run();\n    }\n    toggleVisible(false);\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Mermaid\"\n          tooltip=\"Mermaid\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Mermaid\n        </DialogTitle>\n\n        <div style={{ height: '100%', borderWidth: 1 }}>\n          <div className=\"richtext-flex richtext-gap-[10px] richtext-rounded-[10px] richtext-p-[10px]\">\n            <Textarea\n              autoFocus\n              className=\"richtext-flex-1\"\n              defaultValue={defaultCode}\n              onChange={e => setMermaidCode(e.target.value)}\n              placeholder=\"Text\"\n              required\n              rows={10}\n              value={mermaidCode}\n              style={{\n                color: 'hsl(var(--richtext-foreground))',\n              }}\n            />\n\n            <div\n              className=\"richtext-flex richtext-flex-1 richtext-items-center richtext-justify-center richtext-rounded-[10px] richtext-p-[10px]\"\n              dangerouslySetInnerHTML={{ __html: svgCode }}\n              ref={mermaidRef as any}\n              style={{ height: '100%', borderWidth: 1, minHeight: 500, background: '#fff' }}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setMermaid}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper, isNumber } from '@tiptap/react';\nimport { throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\nimport { clamp } from '@/utils/utils';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nexport function NodeViewMermaid({ editor, node, updateAttributes, getPos, selected }: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align } = node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h } = node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n      },\n    };\n  }, [node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(node.attrs.width);\n    let height = Number(node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n      // const dy = (e.clientY - y) * (/t/.test(dir) ? -1 : 1)\n      const { width: wI, height: hI } = node?.attrs;\n      const ratio = wI / hI;\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = Math.round(width / ratio);\n\n      updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, updateAttributes, node?.attrs],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper className=\"image-view\"\n      style={{ ...imageMaxStyle, width: '100%', textAlign: align }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={{ ...imageMaxStyle, background: '#fff' }}\n        className={`image-view__body ${selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {editor.view.editable && (selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport type { CommandProps } from '@tiptap/core';\nimport { mergeAttributes } from '@tiptap/core';\nimport TiptapImage from '@tiptap/extension-image';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { MermaidActiveButton } from '@/extensions/Mermaid/components/MermaidActiveButton';\nimport { NodeViewMermaid } from '@/extensions/Mermaid/components/NodeViewMermaid/NodeViewMermaid';\nimport type { GeneralOptions } from '@/types';\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    mermaid: {\n      setMermaid: (options: any, replace?: any) => ReturnType\n      setAlignImageMermaid: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport interface MermaidOptions extends GeneralOptions<MermaidOptions> {\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n}\n\nexport const Mermaid = TiptapImage.extend<MermaidOptions>({\n  name: 'mermaid',\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      inline: false,\n      content: '',\n      marks: '',\n      group: 'block',\n      draggable: false,\n      selectable: true,\n      atom: true,\n      HTMLAttributes: {\n        class: 'mermaid',\n      },\n      button: ({ editor, t, extension }: any) => ({\n        component: MermaidActiveButton,\n        componentProps: {\n          action: () => {\n            return true;\n          },\n          isActive: () => false,\n          disabled: false,\n          editor,\n          icon: 'Mermaid',\n          tooltip: t('editor.mermaid.tooltip'),\n          upload: extension?.options?.upload,\n        },\n      }),\n    };\n  },\n\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const width = img?.getAttribute('width');\n\n          return width ? Number.parseInt(width, 10) : 320;\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      height: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const height = img?.getAttribute('height');\n\n          return height ? Number.parseInt(height, 10) : 212;\n        },\n        renderHTML: (attributes) => {\n          return {\n            height: attributes.height,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewMermaid);\n  },\n\n  // @ts-ignore\n  addCommands() {\n    return {\n      setMermaid:\n          (\n            options: { src: string, alt?: string },\n            replace?: boolean,\n          ) =>\n            ({ commands, editor }: CommandProps) => {\n              if (replace) {\n                return commands.insertContent({\n                  type: this.name,\n                  attrs: options,\n                });\n              }\n              return commands.insertContentAt(editor.state.selection.anchor, {\n                type: this.name,\n                attrs: options,\n              });\n            },\n\n      setAlignImageMermaid:\n            (align: any) =>\n              ({ commands }: any) => {\n                return commands.updateAttributes(this.name, { align });\n              },\n    };\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    const { align } = HTMLAttributes;\n\n    const style = align ? `text-align: ${align};` : '';\n    return [\n      'div', // Parent element\n      {\n        style,\n        class: 'imageMermaid',\n      },\n      [\n        'img',\n        mergeAttributes(\n          // @ts-ignore\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=imageMermaid]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n          const height = img?.getAttribute('height');\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            width: width ? Number.parseInt(width, 10) : null,\n            height: height ? Number.parseInt(height, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n          };\n        },\n      },\n    ];\n  },\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { NodeViewWrapper, type ReactNodeViewRendererOptions } from '@tiptap/react';\nimport { Tweet } from 'react-tweet';\n\nexport const TWITTER_REGEX_GLOBAL = /(https?:\\/\\/)?(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?/g;\nexport const TWITTER_REGEX = /^https?:\\/\\/(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?$/;\n\nexport function isValidTwitterUrl(url: string) {\n  return url.match(TWITTER_REGEX);\n}\n\nfunction NodeViewTweet({ node }: { node: Partial<ReactNodeViewRendererOptions> }) {\n  // @ts-expect-error\n  const url = node?.attrs?.src || '';\n  const tweetId = url?.split('/').pop();\n\n  if (!tweetId) {\n    return null;\n  }\n\n  return (\n    <NodeViewWrapper>\n      <div data-twitter=\"\">\n        <Tweet id={tweetId} />\n      </div>\n    </NodeViewWrapper>\n  );\n}\n\nexport default NodeViewTweet;\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { useEffect, useState } from 'react';\n\nimport { Button, Input, Label } from '@/components';\nimport { Twitter } from '@/extensions/Twitter/Twitter';\nimport { useLocale } from '@/locales';\n\ninterface IPropsFormEditLinkTwitter {\n  editor: any\n  onSetLink: (src: string) => void\n}\n\nfunction FormEditLinkTwitter(props: IPropsFormEditLinkTwitter) {\n  const { t } = useLocale();\n\n  const [src, setSrc] = useState('');\n\n  useEffect(() => {\n    if (props?.editor) {\n      const { src: srcInit } = props.editor?.getAttributes(Twitter.name);\n\n      if (srcInit) {\n        setSrc(srcInit);\n      }\n    }\n  }, [props?.editor]);\n\n  function handleSubmit(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    props?.onSetLink(src);\n  }\n\n  return (\n    <div className=\"border-neutral-200 richtext-rounded-lg !richtext-border richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black\">\n      <form className=\"richtext-flex richtext-flex-col richtext-gap-2\"\n        onSubmit={handleSubmit}\n      >\n        <Label className=\"mb-[6px]\">\n          {t('editor.link.dialog.text')}\n        </Label>\n\n        <div className=\"richtext-mb-[10px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n          <div className=\"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center\">\n            <Input\n              className=\"richtext-w-80\"\n              onChange={e => setSrc(e.target.value)}\n              placeholder=\"Text\"\n              required\n              type=\"text\"\n              value={src}\n            />\n          </div>\n        </div>\n\n        <Button className=\"richtext-mt-2 richtext-self-end\"\n          type=\"submit\"\n        >\n          {t('editor.link.dialog.button.apply')}\n        </Button>\n      </form>\n    </div>\n  );\n}\n\nexport default FormEditLinkTwitter;\n","import { ActionButton, IconComponent, Popover, PopoverContent, PopoverTrigger } from '@/components';\nimport FormEditLinkTwitter from '@/extensions/Twitter/components/FormEditLinkTwitter';\nimport type { ButtonViewReturnComponentProps } from '@/types';\n\ninterface IPropsTwitterActiveButton {\n  editor: any\n  icon?: any\n  title?: string\n  tooltip?: string\n  disabled?: boolean\n  shortcutKeys?: string[]\n  isActive?: ButtonViewReturnComponentProps['isActive']\n  action?: ButtonViewReturnComponentProps['action']\n}\n\nfunction TwitterActiveButton(props: IPropsTwitterActiveButton) {\n  function onSetLink(src: string) {\n    if (props.action) {\n      props.action(src);\n    }\n  }\n\n  return (\n    <Popover modal>\n      <PopoverTrigger disabled={props?.disabled} asChild>\n        <ActionButton\n          tooltip={props?.tooltip}\n          isActive={props?.isActive}\n          disabled={props?.disabled}\n        >\n          <IconComponent name={props?.icon} />\n        </ActionButton>\n      </PopoverTrigger>\n      <PopoverContent hideWhenDetached className=\"richtext-w-full\" align=\"start\" side=\"bottom\">\n        <FormEditLinkTwitter editor={props.editor} onSetLink={onSetLink} />\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport default TwitterActiveButton;\n","import { Node, mergeAttributes, nodePasteRule } from '@tiptap/core';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\nimport NodeViewTweet from '@/extensions/Twitter/components/NodeViewTweet';\nimport TwitterActiveButton from '@/extensions/Twitter/components/TwitterActiveButton';\n\nconst TWITTER_REGEX_GLOBAL = /(https?:\\/\\/)?(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?/g;\nconst TWITTER_REGEX = /^https?:\\/\\/(www\\.)?x\\.com\\/(\\w{1,15})(\\/status\\/(\\d+))?(\\/\\S*)?$/;\n\nfunction isValidTwitterUrl(url: string) {\n  return url.match(TWITTER_REGEX);\n}\n\ninterface TwitterOptions {\n  /**\n   * Controls if the paste handler for tweets should be added.\n   * @default true\n   * @example false\n   */\n  addPasteHandler: boolean\n\n  // biome-ignore lint/suspicious/noExplicitAny: <explanation>\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * Controls if the twitter node should be inline or not.\n   * @default false\n   * @example true\n   */\n  inline: boolean\n\n  /**\n   * The origin of the tweet.\n   * @default ''\n   * @example 'https://tiptap.dev'\n   */\n  origin: string\n}\n\n/**\n * The options for setting a tweet.\n */\ninterface SetTweetOptions {\n  src: string \n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    twitter: {\n      /**\n       * Insert a tweet\n       * @param options The tweet attributes\n       * @example editor.commands.setTweet({ src: 'https://x.com/seanpk/status/1800145949580517852' })\n       */\n      setTweet: (options: SetTweetOptions) => ReturnType\n      updateTweet: (options: SetTweetOptions) => ReturnType\n    }\n  }\n}\n\n/**\n * This extension adds support for tweets.\n */\nexport const Twitter = Node.create<TwitterOptions>({\n  name: 'twitter',\n  draggable: true,\n  selectable: true,\n\n  addOptions() {\n    return {\n      addPasteHandler: true,\n      HTMLAttributes: {},\n      inline: false,\n      origin: '',\n      button: ({ editor, t }: any) => ({\n        component: TwitterActiveButton,\n        componentProps: {\n          action: (src: string) => {\n            editor.commands.setTweet({ src });\n          },\n          isActive: () => false,\n          disabled: false,\n          icon: 'Twitter',\n          tooltip: t('editor.twitter.tooltip'),\n          editor,\n        },\n      }),\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewTweet, { attrs: this.options.HTMLAttributes });\n  },\n\n  inline() {\n    return this.options.inline;\n  },\n\n  group() {\n    return this.options.inline ? 'inline' : 'block';\n  },\n\n  addAttributes() {\n    return {\n      src: {\n        default: null,\n      },\n    };\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'div[data-twitter]',\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setTweet:\n        (options: SetTweetOptions) =>\n          ({ commands }) => {\n            if (!isValidTwitterUrl(options.src)) {\n              return false;\n            }\n\n            return commands.insertContent({\n              type: this.name,\n              attrs: options,\n            });\n          },\n      updateTweet: (options: SetTweetOptions) => ({ commands }: any) => {\n        if (!isValidTwitterUrl(options.src)) {\n          return false;\n        }\n\n        return commands.updateAttributes(this.name, { src: options.src });\n      },\n    };\n  },\n\n  addPasteRules() {\n    if (!this.options.addPasteHandler) {\n      return [];\n    }\n\n    return [\n      nodePasteRule({\n        find: TWITTER_REGEX_GLOBAL,\n        type: this.type,\n        getAttributes: (match) => {\n          return { src: match.input };\n        },\n      }),\n    ];\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['div', mergeAttributes({ 'data-twitter': '' }, HTMLAttributes)];\n  },\n});\n","import { type SVGProps } from 'react';\n\nexport function HugeiconsCursorRectangleSelection01(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path color=\"currentColor\"\n        d=\"M2 9.2v3.6M12.8 2H9.2M7.5 20H9M20 7.5V9M2.133 4.699c.155-.727.415-1.274.854-1.712c.426-.426.954-.684 1.652-.84m15.228 2.552c-.155-.727-.415-1.274-.854-1.712c-.417-.417-.932-.673-1.608-.83M4.64 19.853c-.698-.156-1.226-.414-1.652-.84c-.43-.43-.69-.965-.845-1.673m11.638 3.626c-1.812.125-3.607-8.326-2.374-9.559s9.684.561 9.559 2.373c-.087 1.187-2.095 1.656-2.037 2.711c.018.309.408.59 1.188 1.154c.543.39 1.096.77 1.629 1.175a.66.66 0 0 1 .234.687a3.35 3.35 0 0 1-2.472 2.473a.66.66 0 0 1-.688-.235c-.404-.533-.784-1.086-1.175-1.628c-.563-.78-.844-1.17-1.153-1.188c-1.055-.059-1.524 1.95-2.71 2.037\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MdiFormatLetterCase(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M20.06 18a4 4 0 0 1-.2-.89c-.67.7-1.48 1.05-2.41 1.05c-.83 0-1.52-.24-2.05-.71c-.53-.45-.8-1.06-.8-1.79c0-.88.33-1.56 1-2.05s1.61-.73 2.83-.73h1.4v-.64q0-.735-.45-1.17c-.3-.29-.75-.43-1.33-.43c-.52 0-.95.12-1.3.36c-.35.25-.52.54-.52.89h-1.46c0-.43.15-.84.45-1.24c.28-.4.71-.71 1.22-.94c.51-.21 1.06-.35 1.69-.35c.98 0 1.74.24 2.29.73s.84 1.16.86 2.02V16c0 .8.1 1.42.3 1.88V18zm-2.4-1.12c.45 0 .88-.11 1.29-.32c.4-.21.7-.49.88-.83v-1.57H18.7c-1.77 0-2.66.47-2.66 1.41c0 .43.15.73.46.96c.3.23.68.35 1.16.35m-12.2-3.17h4.07L7.5 8.29zM6.64 6h1.72l4.71 12h-1.93l-.97-2.57H4.82L3.86 18H1.93z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsEdit(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function PhHighlighter(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 256 256\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M253.66 106.34a8 8 0 0 0-11.32 0L192 156.69L107.31 72l50.35-50.34a8 8 0 1 0-11.32-11.32L96 60.69a16 16 0 0 0-2.82 18.81L72 100.69a16 16 0 0 0 0 22.62l4.69 4.69l-58.35 58.34a8 8 0 0 0 3.13 13.25l72 24A7.9 7.9 0 0 0 96 224a8 8 0 0 0 5.66-2.34L136 187.31l4.69 4.69a16 16 0 0 0 22.62 0l21.19-21.18a16 16 0 0 0 18.81-2.82l50.35-50.34a8 8 0 0 0 0-11.32M93.84 206.85l-55-18.35L88 139.31L124.69 176ZM152 180.69L83.31 112L104 91.31L172.69 160Z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function OuiEraser(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 16 16\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"m2.648 9.937l7.29-7.288a2.21 2.21 0 0 1 3.124 0l2.29 2.288a2.21 2.21 0 0 1 0 3.126L10.413 13H12.5a.5.5 0 0 1 0 1H4.501a2.2 2.2 0 0 1-1.563-.647l.707-.707c.227.226.535.354.856.354h4.005a1.2 1.2 0 0 0 .848-.354l1.292-1.293l-4-4l-3.29 3.291a1.21 1.21 0 0 0 0 1.712l.29.29l-.708.707l-.29-.29a2.21 2.21 0 0 1 0-3.126M8 6h6.89a1.2 1.2 0 0 0-.246-.356L14 5H9zm2-2h3l-.645-.644a1.21 1.21 0 0 0-1.71 0zm4.89 3H7.708l1 1H14l.644-.644A1.2 1.2 0 0 0 14.891 7zM9.708 9l1.646 1.646L13 9z\"\n        fill=\"currentColor\"\n      >\n      </path>\n\n      <path d=\"M14 11.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0m1.5-.5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1m-1 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MdiSquareOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M3 3h18v18H3zm2 2v14h14V5z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsRectangleOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M2 20V4h20v16zm2-2h16V6H4zm0 0V6z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsCircleOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function TablerTriangle(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M10.363 3.591L2.257 17.125a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636-2.87L13.637 3.59a1.914 1.914 0 0 0-3.274 0z\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsHexagonOutline(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"m6.8 21l-5.2-9l5.2-9h10.4l5.2 9l-5.2 9zm1.15-2h8.1l4.025-7l-4.025-7h-8.1L3.9 12zM12 12\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MingcuteDiamondSquareLine(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g fill=\"none\"\n        fillRule=\"evenodd\"\n      >\n        <path d=\"m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z\"></path>\n\n        <path d=\"M10.586 2.807a2 2 0 0 1 2.828 0l7.778 7.779a2 2 0 0 1 0 2.828l-7.778 7.778a2 2 0 0 1-2.828 0l-7.778-7.778a2 2 0 0 1 0-2.828zM12 4.222L4.222 12L12 19.778L19.778 12z\"\n          fill=\"currentColor\"\n        >\n        </path>\n      </g>\n    </svg>\n  );\n}\n\nexport function IcSharpArrowRightAlt(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function SolarUndoLeftRoundBold(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path clipRule=\"evenodd\"\n        d=\"M7.53 3.47a.75.75 0 0 1 0 1.06L5.81 6.25H15a5.75 5.75 0 0 1 0 11.5H8a.75.75 0 0 1 0-1.5h7a4.25 4.25 0 0 0 0-8.5H5.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 0\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function SolarUndoRightRoundBold(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path clipRule=\"evenodd\"\n        d=\"M16.47 3.47a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a4.25 4.25 0 0 0 0 8.5h7a.75.75 0 0 1 0 1.5H9a5.75 5.75 0 0 1 0-11.5h9.19l-1.72-1.72a.75.75 0 0 1 0-1.06\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsDelete(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function HugeiconsSvg01(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g color=\"currentColor\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n      >\n        <path d=\"M3.5 13v-.804c0-2.967 0-4.45.469-5.636c.754-1.905 2.348-3.407 4.37-4.118C9.595 2 11.168 2 14.318 2c1.798 0 2.698 0 3.416.253c1.155.406 2.066 1.264 2.497 2.353c.268.677.268 1.525.268 3.22V13\"></path>\n        <path d=\"M3.5 12a3.333 3.333 0 0 1 3.333-3.333c.666 0 1.451.116 2.098-.057a1.67 1.67 0 0 0 1.179-1.18c.173-.647.057-1.432.057-2.098A3.333 3.333 0 0 1 13.5 2m.509 14l-1.673 4.695c-.31.87-.465 1.305-.71 1.305s-.4-.435-.71-1.305L9.242 16M20.5 17c-.09-1.018-.913-1-1.781-1c-.85 0-1.276 0-1.54.293s-.264.764-.264 1.707v2c0 .943 0 1.414.264 1.707s.69.293 1.54.293s1.275 0 1.54-.293c.264-.293.264-.764.264-1.707c0-.704-1.353-.5-1.353-.5M6.04 16H4.93c-.444 0-.666 0-.842.076c-.596.26-.588.869-.588 1.424s-.008 1.165.588 1.424c.176.076.398.076.842.076s.666 0 .841.076c.597.26.589.869.589 1.424s.008 1.165-.589 1.424C5.596 22 5.374 22 4.93 22H3.72\"></path>\n      </g>\n    </svg>\n  );\n}\n\nexport function GardenUploadStroke12(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 12 12\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"m4.5 8l1.6-1.6c.2-.2.5-.2.7 0L8.5 8m-2 2.5v-4m2 4c1.7-.1 3-1.5 3-3.2C11.5 5.5 10 4 8.2 4h-.3c-.3-1.4-1.6-2.5-3.1-2.5C3 1.5 1.5 3 1.5 4.8c0 .4.1.8.2 1.1C1 6.3.5 7.1.5 8c0 1.4 1.1 2.5 2.5 2.5h1.5\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function HugeiconsPng01(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g color=\"currentColor\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.5\"\n      >\n        <path d=\"M3.5 13.01v-.805c0-2.97 0-4.456.469-5.642c.754-1.907 2.348-3.411 4.37-4.123c1.257-.442 2.83-.442 5.98-.442c1.798 0 2.698 0 3.416.253c1.155.406 2.066 1.266 2.497 2.356c.268.677.268 1.526.268 3.224v5.179\"></path>\n        <path d=\"M3.5 12.009a3.335 3.335 0 0 1 3.333-3.337c.666 0 1.451.117 2.098-.057a1.67 1.67 0 0 0 1.179-1.18c.173-.648.057-1.434.057-2.1A3.335 3.335 0 0 1 13.5 1.998m-10 19.998V16.03h1.987c.733 0 1.384.526 1.41 1.254q.009.236 0 .468c-.027.731-.682 1.261-1.418 1.261H4.256M20.5 17.025c-.04-.81-.502-1.014-2-.995h-.765c-.553 0-1 .445-1 .995V21c0 .55.447.995 1 .995h2.264c.277 0 .5-.223.5-.497v-1.492a.5.5 0 0 0-.5-.497h-1m-9.251 2.492l.08-5.564c0-.26.269-.193.323-.11l3.139 5.386c.16.282.443.005.443-.094v-5.624\"></path>\n      </g>\n    </svg>\n  );\n}\n\nexport function IcSharpGrid4x4(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M22 7V5h-3V2h-2v3h-4V2h-2v3H7V2H5v3H2v2h3v4H2v2h3v4H2v2h3v3h2v-3h4v3h2v-3h4v3h2v-3h3v-2h-3v-4h3v-2h-3V7zM7 7h4v4H7zm0 10v-4h4v4zm10 0h-4v-4h4zm0-6h-4V7h4z\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function AkarIconsDotGridFill(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path clipRule=\"evenodd\"\n        d=\"M4 2a2 2 0 1 1 0 4a2 2 0 0 1 0-4m8 0a2 2 0 1 1 0 4a2 2 0 0 1 0-4m10 2a2 2 0 1 0-4 0a2 2 0 0 0 4 0M4 10a2 2 0 1 1 0 4a2 2 0 0 1 0-4m10 2a2 2 0 1 0-4 0a2 2 0 0 0 4 0m6-2a2 2 0 1 1 0 4a2 2 0 0 1 0-4M6 20a2 2 0 1 0-4 0a2 2 0 0 0 4 0m6-2a2 2 0 1 1 0 4a2 2 0 0 1 0-4m10 2a2 2 0 1 0-4 0a2 2 0 0 0 4 0\"\n        fill=\"currentColor\"\n        fillRule=\"evenodd\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MageImageUpload(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeWidth=\"1.5\"\n      >\n        <path d=\"M21.25 13V8.5a5 5 0 0 0-5-5h-8.5a5 5 0 0 0-5 5v7a5 5 0 0 0 5 5h6.26\"\n          strokeLinejoin=\"round\"\n        >\n        </path>\n\n        <path d=\"m3.01 17l2.74-3.2a2.2 2.2 0 0 1 2.77-.27a2.2 2.2 0 0 0 2.77-.27l2.33-2.33a4 4 0 0 1 5.16-.43l2.47 1.91M8.01 10.17a1.66 1.66 0 1 0-.02-3.32a1.66 1.66 0 0 0 .02 3.32\"\n          strokeLinejoin=\"round\"\n        >\n        </path>\n\n        <path d=\"M18.707 15v5\"\n          strokeMiterlimit=\"10\"\n        >\n        </path>\n\n        <path d=\"m21 17.105l-1.967-1.967a.46.46 0 0 0-.652 0l-1.967 1.967\"\n          strokeLinejoin=\"round\"\n        >\n        </path>\n      </g>\n    </svg>\n  );\n}\n\nexport function FluentColorBackground24Filled(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M2 12.414V17.5A2.5 2.5 0 0 0 4.5 20h15a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 19.5 4h-8.944l2.422 2.422a3 3 0 0 1 .719 3.09c.38.042.75.21 1.04.501l.003.002l.003.004l.01.009l.02.02a8 8 0 0 1 .311.338c.192.216.45.525.712.89c.26.36.545.808.77 1.3c.22.478.434 1.106.434 1.799C17 16.23 15.606 18 13.5 18S10 16.23 10 14.375c0-.29.037-.569.097-.83l-1.362 1.362a3 3 0 0 1-4.243 0zm9.342.58c-.188.409-.342.888-.342 1.381C11 15.765 12.029 17 13.5 17c1.47 0 2.5-1.235 2.5-2.625c0-.493-.154-.972-.342-1.381a7 7 0 0 0-.674-1.134a10 10 0 0 0-.649-.812l-.305-.328a.75.75 0 0 0-1.06 0l-.006.005c-.058.062-.214.226-.3.323c-.175.199-.411.48-.649.812a7 7 0 0 0-.673 1.134m2.158-.61q.13.162.265.35c.202.281.392.586.53.886c.14.305.205.56.205.755c0 .691-.481 1.125-1 1.125c-.52 0-1-.434-1-1.125c0-.194.064-.45.205-.755c.137-.3.327-.605.529-.886q.136-.188.266-.35M6.75 1a.75.75 0 0 0-.75.75v1.756l-.093.087l-4.243 4.243a2 2 0 0 0 0 2.828L5.199 14.2a2 2 0 0 0 2.829 0l4.243-4.243a2 2 0 0 0 0-2.828L8.735 3.593A2 2 0 0 0 7.5 3.015V1.75A.75.75 0 0 0 6.75 1M6 5.621v.629a.75.75 0 1 0 1.5 0V4.54a.5.5 0 0 1 .174.114l3.536 3.535c.09.09.138.205.145.322H3.11zm.26 7.518l-3.128-3.128h6.964l-3.129 3.128a.5.5 0 0 1-.707 0\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function PhLineSegmentFill(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 256 256\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path d=\"M211.81 83.79a28 28 0 0 1-33.12 4.83l-90.07 90.07a28 28 0 1 1-44.43-6.48a28 28 0 0 1 33.12-4.83l90.07-90.07a28 28 0 1 1 44.43 6.48\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function IcSharpFavorite(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE */}\n      <path d=\"M12 20.325q-.35 0-.712-.125t-.638-.4l-1.725-1.575q-2.65-2.425-4.788-4.812T2 8.15Q2 5.8 3.575 4.225T7.5 2.65q1.325 0 2.5.562t2 1.538q.825-.975 2-1.537t2.5-.563q2.35 0 3.925 1.575T22 8.15q0 2.875-2.125 5.275T15.05 18.25l-1.7 1.55q-.275.275-.637.4t-.713.125M11.05 6.75q-.725-1.025-1.55-1.563t-2-.537q-1.5 0-2.5 1t-1 2.5q0 1.3.925 2.763t2.213 2.837t2.65 2.575T12 18.3q.85-.775 2.213-1.975t2.65-2.575t2.212-2.837T20 8.15q0-1.5-1-2.5t-2.5-1q-1.175 0-2 .538T12.95 6.75q-.175.25-.425.375T12 7.25t-.525-.125t-.425-.375m.95 4.725\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsKidStar(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE */}\n      <path d=\"m7.625 6.4l2.8-3.625q.3-.4.713-.587T12 2t.863.188t.712.587l2.8 3.625l4.25 1.425q.65.2 1.025.738t.375 1.187q0 .3-.088.6t-.287.575l-2.75 3.9l.1 4.1q.025.875-.575 1.475t-1.4.6q-.05 0-.55-.075L12 19.675l-4.475 1.25q-.125.05-.275.063T6.975 21q-.8 0-1.4-.6T5 18.925l.1-4.125l-2.725-3.875q-.2-.275-.288-.575T2 9.75q0-.625.363-1.162t1.012-.763zM8.85 8.125L4 9.725L7.1 14.2L7 18.975l5-1.375l5 1.4l-.1-4.8L20 9.775l-4.85-1.65L12 4zM12 11.5\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function MaterialSymbolsCloud(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Google Material Icons by Material Design Authors - https://github.com/material-icons/material-icons/blob/master/LICENSE */}\n      <path d=\"M12.01 6c2.61 0 4.89 1.86 5.4 4.43l.3 1.5l1.52.11c1.56.11 2.78 1.41 2.78 2.96c0 1.65-1.35 3-3 3h-13c-2.21 0-4-1.79-4-4c0-2.05 1.53-3.76 3.56-3.97l1.07-.11l.5-.95A5.46 5.46 0 0 1 12.01 6m0-2C9.12 4 6.6 5.64 5.35 8.04C2.35 8.36.01 10.91.01 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.64-4.96C18.68 6.59 15.65 4 12.01 4\"\n        fill=\"currentColor\"\n      >\n      </path>\n    </svg>\n  );\n}\n\nexport function AkarIconsParallelogram(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg height=\"1em\"\n      viewBox=\"0 0 24 24\"\n      width=\"1em\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      {/* Icon from Akar Icons by Arturo Wibawa - https://github.com/artcoholic/akar-icons/blob/master/LICENSE */}\n      <path d=\"M5.586 6.45A2 2 0 0 1 7.509 5h11.84a2 2 0 0 1 1.923 2.55l-2.858 10A2 2 0 0 1 16.491 19H4.651a2 2 0 0 1-1.923-2.55z\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n      >\n      </path>\n    </svg>\n  );\n}\n","import React, { useState } from 'react';\n\nimport {\n  Color4\n} from 'easydrawer';\n\nimport { cn } from '@/lib/utils';\n\nimport styles from './ControlDrawer.module.scss';\nimport { MingcuteDiamondSquareLine, HugeiconsCursorRectangleSelection01, IcSharpArrowRightAlt, MaterialSymbolsCircleOutline, MaterialSymbolsEdit, MaterialSymbolsHexagonOutline, MaterialSymbolsRectangleOutline, MdiFormatLetterCase, MdiSquareOutline, OuiEraser, PhHighlighter, TablerTriangle, PhLineSegmentFill, IcSharpFavorite, MaterialSymbolsKidStar, MaterialSymbolsCloud, AkarIconsParallelogram, SolarUndoLeftRoundBold, SolarUndoRightRoundBold, MaterialSymbolsDelete } from './icon';\n\nconst enum ShapeType {\n  square = 0,\n  rectangle = 1,\n  circle = 2,\n  triangle = 3,\n  hexagonal = 4,\n  diamond = 5,\n  arrow = 6,\n  line = 7,\n  heart = 8,\n  star = 9,\n  cloud = 10,\n  parallelogram = 11\n}\n\nconst highlightC = [\n  Color4.blackHighlight,\n  Color4.ofRGBA(166/255, 81/255, 167/255, 0.3),\n  Color4.ofRGBA(247/255, 78/255, 158/255, 0.3),\n  Color4.ofRGBA(166/255, 83/255, 88/255, 0.3),\n  Color4.ofRGBA(246/255, 130/255, 28/255, 0.3),\n  Color4.ofRGBA(166/255, 198/255, 0, 0.3),\n  Color4.ofRGBA(98/255, 186/255, 70/255, 0.3),\n];\n\nconst COLOR = [\n  Color4.black,\n  Color4.fromHex('#007AFF'),\n  Color4.fromHex('#A651A7'),\n  Color4.fromHex('#F74E9E'),\n  Color4.fromHex('#FF5358'),\n  Color4.fromHex('#F6821C'),\n  Color4.fromHex('#FFC600'),\n\n  Color4.fromHex('#62BA46'),\n  Color4.fromHex('#E6BFE8'),\n  Color4.fromHex('#FEA3D2'),\n  Color4.fromHex('#FFA0A3'),\n  Color4.fromHex('#FBC276'),\n  Color4.fromHex('#FFFB85'),\n  Color4.fromHex('#AADC99'),\n];\n\nfunction ColorPickerHighlight ({ onChange }: any) {\n  const [selected, setSelected] = useState(Color4.blackHighlight);\n\n  return (\n    <div className={styles.colorWrap}>\n      {\n        highlightC.map((color, index) => (\n          <button\n            key={index}\n            style={{ backgroundColor: color.toHexString() }}\n            className={cn(styles.color, {\n              [styles.colorActive]: selected.toHexString() === color.toHexString(),\n            })}\n            onClick={() => {\n              setSelected(color);\n              onChange(color);\n            }}\n          >\n          </button>\n        ))\n      }\n    </div>\n  );\n}\n\nfunction ColorPicker ({ onChange }: any) {\n  const [selected, setSelected] = useState(Color4.black);\n\n  return (\n    <>\n      <div className={styles.colorWrap}>\n        {\n          COLOR.slice(0, 7).map((color, index) => (\n            <button\n              key={index}\n              style={{ backgroundColor: color.toHexString() }}\n              className={cn(styles.color, {\n                [styles.colorActive]: selected.toHexString() === color.toHexString(),\n              })}\n              onClick={() => {\n                setSelected(color);\n                onChange(color);\n              }}\n            >\n            </button>\n          ))\n        }\n      </div>\n\n      <div className={styles.colorWrap}>\n        {\n          COLOR.slice(7).map((color, index) => (\n            <button\n              key={index}\n              style={{ backgroundColor: color.toHexString() }}\n              className={cn(styles.color, {\n                [styles.colorActive]: selected.toHexString() === color.toHexString(),\n              })}\n              onClick={() => {\n                setSelected(color);\n                onChange(color);\n              }}\n            >\n            </button>\n          ))\n        }\n      </div>\n    </>\n  );\n}\n\nfunction PencilOption({ setColorPen, setThicknessPen }: any) {\n  const [thickness, setThickness] = useState(2);\n\n  return (\n    <div className={styles.options}>\n      <div>\n        <ColorPicker\n          onChange={(color: any) => setColorPen(color)}\n        />\n      </div>\n\n      <div className={styles.line}></div>\n\n      <div>\n        <input max={10}\n          min={1}\n          step={0.1}\n          type=\"range\"\n          value={thickness}\n          onChange={(e) => {\n            setThicknessPen(Number.parseFloat(e.target.value));\n            setThickness(Number.parseFloat(e.target.value));\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction HighlightOption({ setColorHighlight }: any) {\n  return (\n    <div className={styles.options}>\n      <ColorPickerHighlight\n        onChange={(color: any) => setColorHighlight(color)}\n      />\n    </div>\n  );\n}\n\nfunction ShapeOption({ changeColorShape, changeBorderColorShape,\n  onThicknessChange\n}: any) {\n\n  return (\n    <div className={styles.options}>\n      <div>\n        <ColorPicker\n          onChange={(color: any) => changeColorShape(color)}\n        />\n      </div>\n\n      <div className={styles.line}></div>\n\n      <div>\n        <ColorPicker\n          onChange={(color: any) => changeBorderColorShape(color)}\n        />\n      </div>\n\n      <div className={styles.line}></div>\n\n      <div>\n        <input defaultValue={0}\n          max={20}\n          min={0}\n          step={1}\n          type=\"range\"\n          // value={thickness}\n          onChange={(e) => {\n            onThicknessChange(Number.parseFloat(e.target.value));\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction ControlDrawer(props: any) {\n  const {\n    setColorPen,\n    refEditor,\n    setThicknessPen,\n    setColorHighlight,\n    changeBorderColorShape,\n    onUndo,\n    changeColorShape,\n    changeShape,\n    onThicknessChange,\n    onRedo,\n    onClear,\n  } = props;\n  const [tool, setTool] = useState<'select' | 'text' | 'pencil' | 'highlighter' | 'eraser' | 'shapes' | null>(null);\n\n  const [type, setType] = useState(ShapeType.square);\n\n  return (\n    <>\n      <div\n        className={styles.wrapper}\n      >\n        <div className={styles.pen}>\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'select',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'select') {\n                setTool(null);\n                penTool[0].setEnabled(false);\n\n                return;\n              }\n              setTool('select');\n              penTool[0].setEnabled(true);\n            }}\n          >\n            <HugeiconsCursorRectangleSelection01 />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'text',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[1]);\n              if (tool === 'text') {\n                penTool[1].setEnabled(false);\n\n                setTool(null);\n                return;\n              }\n              setTool('text');\n              penTool[1].setEnabled(true);\n            }}\n          >\n            <MdiFormatLetterCase />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'pencil',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'pencil') {\n                setTool(null);\n                penTool[2].setEnabled(false);\n                return;\n              }\n              setTool('pencil');\n              penTool[2].setEnabled(true);\n            }}\n          >\n            <MaterialSymbolsEdit />\n          </button>\n\n          <button\n\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'highlighter',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'highlighter') {\n                setTool(null);\n                penTool[3].setEnabled(false);\n                return;\n              }\n              setTool('highlighter');\n              penTool[3].setEnabled(true);\n            }}\n          >\n            <PhHighlighter />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'eraser',\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              if (tool === 'eraser') {\n                setTool(null);\n                penTool[4].setEnabled(false);\n                return;\n              }\n              setTool('eraser');\n              penTool[4].setEnabled(true);\n            }}\n          >\n            <OuiEraser />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button className={cn(styles.tool, {\n            [styles.active]: tool === 'shapes' && type === ShapeType.square,\n          })}\n          onClick={() => {\n            const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n            refEditor.current!.toolController.setToolEnabled(penTool[5]);\n            setTool('shapes');\n            penTool[5].setEnabled(true);\n\n            changeShape(ShapeType.square);\n            setType(ShapeType.square);\n          }}\n          >\n            <MdiSquareOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.rectangle,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.rectangle);\n              setType(ShapeType.rectangle);\n            }}\n          >\n            <MaterialSymbolsRectangleOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.circle,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.circle);\n              setType(ShapeType.circle);\n            }}\n          >\n            <MaterialSymbolsCircleOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.triangle,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.triangle);\n              setType(ShapeType.triangle);\n            }}\n          >\n            <TablerTriangle />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.hexagonal,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.hexagonal);\n              setType(ShapeType.hexagonal);\n            }}\n          >\n            <MaterialSymbolsHexagonOutline />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.diamond,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.diamond);\n              setType(ShapeType.diamond);\n            }}\n          >\n            <MingcuteDiamondSquareLine />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.arrow,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.arrow);\n              setType(ShapeType.arrow);\n            }}\n          >\n            <IcSharpArrowRightAlt />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.line,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.line);\n              setType(ShapeType.line);\n            }}\n          >\n            <PhLineSegmentFill />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.heart,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.heart);\n              setType(ShapeType.heart);\n            }}\n          >\n            <IcSharpFavorite />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.star,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.star);\n              setType(ShapeType.star);\n            }}\n          >\n            <MaterialSymbolsKidStar />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.cloud,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.cloud);\n              setType(ShapeType.cloud);\n            }}\n          >\n            <MaterialSymbolsCloud />\n          </button>\n\n          <button\n            className={cn(styles.tool, {\n              [styles.active]: tool === 'shapes' && type === ShapeType.parallelogram,\n            })}\n            onClick={() => {\n              const penTool = refEditor.current!.toolController.getPrimaryTools();\n\n              refEditor.current!.toolController.setToolEnabled(penTool[5]);\n              setTool('shapes');\n              penTool[5].setEnabled(true);\n\n              changeShape(ShapeType.parallelogram);\n              setType(ShapeType.parallelogram);\n            }}\n          >\n            <AkarIconsParallelogram />\n          </button>\n\n          <div className={styles.line}></div>\n\n          <button\n            className={cn(styles.tool)}\n            onClick={onUndo}\n          >\n            <SolarUndoLeftRoundBold />\n          </button>\n\n          <button\n            className={cn(styles.tool)}\n\n            onClick={onRedo}\n\n          >\n            <SolarUndoRightRoundBold />\n          </button>\n\n          <button\n            className={cn(styles.tool)}\n\n            onClick={onClear}\n\n          >\n            <MaterialSymbolsDelete />\n          </button>\n        </div>\n\n        <div className={styles.optionsWrap}>\n          {tool === 'pencil' && <PencilOption\n            setColorPen={setColorPen}\n            setThicknessPen={setThicknessPen}\n          />}\n\n          {tool === 'highlighter' && <HighlightOption setColorHighlight={setColorHighlight} />}\n\n          {tool === 'shapes' && <ShapeOption\n            changeBorderColorShape={changeBorderColorShape}\n            changeColorShape={changeColorShape}\n            changeShape={changeShape}\n            onThicknessChange={onThicknessChange}\n          />}\n        </div>\n      </div>\n\n    </>\n  );\n}\n\nexport default ControlDrawer;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport {\n  makeDropdownToolbar,\n  Editor as Editor4,\n} from 'easydrawer';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport ControlDrawer from '@/extensions/Drawer/components/ControlDrawer/ControlDrawer';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\ninterface IProps {\n  editor: Editor, upload?: any\n}\n\nlet clear = false;\n\nexport const DrawerActiveButton: React.FC<IProps> = ({ editor, upload }) => {\n  const [visible, toggleVisible] = useState(false);\n  const refEditor = useRef<Editor4 | null>(null);\n  const refWidget = useRef<any>(null);\n\n  const mermaidInit = () => {\n    const init = async () => {\n      const parentElement = document.querySelector('#easydrawer');\n\n      if (!parentElement) return;\n\n      refEditor.current = new Editor4(parentElement as any, {\n        wheelEventsEnabled: false,\n        disableZoom: true,\n      });\n\n      refWidget.current = makeDropdownToolbar(refEditor.current);\n      refWidget.current.addDefaultToolWidgets();\n    };\n\n    init();\n  };\n\n  useEffect(() => {\n    if (visible) {\n      setTimeout(() => {\n        mermaidInit();\n      }, 200);\n    }\n  }, [visible]);\n\n  const setSvg = async () => {\n    if (refEditor.current) {\n      const svg = refEditor.current.toSVG() as unknown as HTMLElement;\n      const contentHtml = svg.outerHTML;\n      // const { width, height } = svg.getBoundingClientRect();\n      const name = `drawer-${shortId()}.svg`;\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setDrawer(\n          {\n            type: 'drawer',\n            src,\n            alt: encodeURIComponent(contentHtml),\n            width: 426,\n            height: 212\n          },\n          !!contentHtml,\n        )\n        .run();\n    }\n    toggleVisible(false);\n  };\n\n  const setColorPen = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setThicknessPen = (thickness: number) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(thickness);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setColorHighlight = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[3] as any;\n\n    const shapeWidget = refWidget.current.getWidgetById('pen-2');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeShape = (type: any) => {\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (shapeWidget) {\n      shapeWidget.setShapeType(type);\n    }\n  };\n\n  const changeColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onThicknessChange = (v: any) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(v);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeBorderColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setBorderColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onUndo =() => {\n    if (clear) {\n      while (refEditor.current!.history.redoStackSize > 0) {\n        refEditor.current!.history.redo();\n      }\n      clear = false;\n      return;\n    }\n\n    refEditor.current!.history.undo();\n  };\n\n  const onRedo =() => {\n    if (clear) {\n      return;\n    }\n\n    refEditor.current!.history.redo();\n  };\n\n  const onClear =() => {\n    if (clear) {\n      return;\n    }\n\n    while (refEditor.current!.history.undoStackSize > 0) {\n      onUndo();\n    }\n    clear = true;\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"PencilRuler\"\n          tooltip=\"Drawer\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Drawer\n        </DialogTitle>\n\n        <div style={{ height: '600px', width: '100%', borderWidth: 1, background: 'white', position: 'relative' }}>\n          <div\n            className='richtext-size-full'\n            id='easydrawer'\n          >\n          </div>\n\n          <ControlDrawer\n            changeBorderColorShape={changeBorderColorShape}\n            changeColorShape={changeColorShape}\n            changeShape={changeShape}\n            onClear={onClear}\n            onRedo={onRedo}\n            onThicknessChange={onThicknessChange}\n            onUndo={onUndo}\n            refEditor={refEditor}\n            setColorHighlight={setColorHighlight}\n            setColorPen={setColorPen}\n            setThicknessPen={setThicknessPen}\n          />\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setSvg}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { NodeViewWrapper, isNumber } from '@tiptap/react';\nimport { throttle } from 'lodash-es';\n\nimport { IMAGE_MAX_SIZE, IMAGE_MIN_SIZE, IMAGE_THROTTLE_WAIT_TIME } from '@/constants';\nimport { clamp } from '@/utils/utils';\n\ninterface Size {\n  width: number\n  height: number\n}\n\nconst ResizeDirection = {\n  TOP_LEFT: 'tl',\n  TOP_RIGHT: 'tr',\n  BOTTOM_LEFT: 'bl',\n  BOTTOM_RIGHT: 'br',\n};\n\nexport function NodeViewDrawer({ editor, node, updateAttributes, getPos, selected }: any) {\n  const [maxSize, setMaxSize] = useState<Size>({\n    width: IMAGE_MAX_SIZE,\n    height: IMAGE_MAX_SIZE,\n  });\n\n  const [originalSize, setOriginalSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  const [resizeDirections] = useState<string[]>([\n    ResizeDirection.TOP_LEFT,\n    ResizeDirection.TOP_RIGHT,\n    ResizeDirection.BOTTOM_LEFT,\n    ResizeDirection.BOTTOM_RIGHT,\n  ]);\n\n  const [resizing, setResizing] = useState<boolean>(false);\n\n  const [resizerState, setResizerState] = useState({\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0,\n    dir: '',\n  });\n\n  const { align } = node?.attrs;\n\n  const imgAttrs = useMemo(() => {\n    const { src, alt, width: w, height: h } = node?.attrs;\n\n    const width = isNumber(w) ? `${w}px` : w;\n    const height = isNumber(h) ? `${h}px` : h;\n    return {\n      src: src || undefined,\n      alt: alt || undefined,\n      style: {\n        width: width || undefined,\n        height: height || undefined,\n      },\n    };\n  }, [node?.attrs]);\n\n  const imageMaxStyle = useMemo(() => {\n    const {\n      style: { width },\n    } = imgAttrs;\n\n    return { width: width === '100%' ? width : undefined };\n  }, [imgAttrs]);\n\n  function onImageLoad(e: Record<string, any>) {\n    setOriginalSize({\n      width: e.target.width,\n      height: e.target.height,\n    });\n  }\n\n  // https://github.com/scrumpy/tiptap/issues/361#issuecomment-540299541\n  function selectImage() {\n    editor.commands.setNodeSelection(getPos());\n  }\n\n  const getMaxSize = useCallback(\n    throttle(() => {\n      const { width } = getComputedStyle(editor.view.dom);\n      setMaxSize((prev) => {\n        return {\n          ...prev,\n          width: Number.parseInt(width, 10),\n        };\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [editor],\n  );\n\n  function onMouseDown(e: MouseEvent, dir: string) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const originalWidth = originalSize.width;\n    const originalHeight = originalSize.height;\n    const aspectRatio = originalWidth / originalHeight;\n\n    let width = Number(node.attrs.width);\n    let height = Number(node.attrs.height);\n    const maxWidth = maxSize.width;\n\n    if (width && !height) {\n      width = width > maxWidth ? maxWidth : width;\n      height = Math.round(width / aspectRatio);\n    } else if (height && !width) {\n      width = Math.round(height * aspectRatio);\n      width = width > maxWidth ? maxWidth : width;\n    } else if (!width && !height) {\n      width = originalWidth > maxWidth ? maxWidth : originalWidth;\n      height = Math.round(width / aspectRatio);\n    } else {\n      width = width > maxWidth ? maxWidth : width;\n    }\n\n    setResizing(true);\n\n    setResizerState({\n      x: e.clientX,\n      y: e.clientY,\n      w: width,\n      h: height,\n      dir,\n    });\n  }\n\n  const onMouseMove = useCallback(\n    throttle((e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!resizing) {\n        return;\n      }\n\n      const { x, w, dir } = resizerState;\n\n      const dx = (e.clientX - x) * (/l/.test(dir) ? -1 : 1);\n\n      const { width: wI, height: hI } = node?.attrs;\n      const ratio = wI / hI;\n\n      const width = clamp(w + dx, IMAGE_MIN_SIZE, maxSize.width);\n      const height = Math.round(width / ratio);\n\n      updateAttributes({\n        width,\n        height,\n      });\n    }, IMAGE_THROTTLE_WAIT_TIME),\n    [resizing, resizerState, maxSize, updateAttributes, node?.attrs],\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!resizing) {\n        return;\n      }\n\n      setResizerState({\n        x: 0,\n        y: 0,\n        w: 0,\n        h: 0,\n        dir: '',\n      });\n      setResizing(false);\n\n      selectImage();\n    },\n    [resizing, selectImage],\n  );\n\n  const onEvents = useCallback(() => {\n    document?.addEventListener('mousemove', onMouseMove, true);\n    document?.addEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  const offEvents = useCallback(() => {\n    document?.removeEventListener('mousemove', onMouseMove, true);\n    document?.removeEventListener('mouseup', onMouseUp, true);\n  }, [onMouseMove, onMouseUp]);\n\n  useEffect(() => {\n    if (resizing) {\n      onEvents();\n    } else {\n      offEvents();\n    }\n\n    return () => {\n      offEvents();\n    };\n  }, [resizing, onEvents, offEvents]);\n\n  const resizeOb: ResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => getMaxSize());\n  }, [getMaxSize]);\n\n  useEffect(() => {\n    resizeOb.observe(editor.view.dom);\n\n    return () => {\n      resizeOb.disconnect();\n    };\n  }, [editor.view.dom, resizeOb]);\n\n  return (\n    <NodeViewWrapper className=\"image-view\"\n      style={{ ...imageMaxStyle, width: '100%', textAlign: align }}\n    >\n      <div\n        data-drag-handle\n        draggable=\"true\"\n        style={{ ...imageMaxStyle, background: '#fff' }}\n        className={`image-view__body ${selected ? 'image-view__body--focused' : ''} ${\n          resizing ? 'image-view__body--resizing' : ''\n        }`}\n      >\n        <img\n          alt={imgAttrs.alt}\n          className=\"image-view__body__image block\"\n          height=\"auto\"\n          onClick={selectImage}\n          onLoad={onImageLoad}\n          src={imgAttrs.src}\n          style={imgAttrs.style}\n        />\n\n        {editor.view.editable && (selected || resizing) && (\n          <div className=\"image-resizer\">\n            {resizeDirections?.map((direction) => {\n              return (\n                <span\n                  className={`image-resizer__handler image-resizer__handler--${direction}`}\n                  key={`image-dir-${direction}`}\n                  onMouseDown={(e: any) => onMouseDown(e, direction)}\n                >\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </NodeViewWrapper>\n  );\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport type { CommandProps } from '@tiptap/core';\nimport { mergeAttributes } from '@tiptap/core';\nimport TiptapImage from '@tiptap/extension-image';\nimport { ReactNodeViewRenderer } from '@tiptap/react';\n\nimport { DrawerActiveButton } from '@/extensions/Drawer/components/DrawerActiveButton';\nimport { NodeViewDrawer } from '@/extensions/Drawer/components/NodeViewDrawer/NodeViewDrawer';\nimport type { GeneralOptions } from '@/types';\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    drawer: {\n      setDrawer: (options: any, replace?: any) => ReturnType\n      setAlignImageDrawer: (align: 'left' | 'center' | 'right') => ReturnType\n    }\n  }\n}\n\nexport interface DrawerOptions extends GeneralOptions<DrawerOptions> {\n  /** Function for uploading files */\n  upload?: (file: File) => Promise<string>\n}\n\nexport const Drawer = TiptapImage.extend<DrawerOptions>({\n  name: 'drawer',\n\n  addOptions() {\n    return {\n      ...this.parent?.(),\n      inline: false,\n      content: '',\n      marks: '',\n      group: 'block',\n      draggable: false,\n      selectable: true,\n      atom: true,\n      HTMLAttributes: {\n        class: 'drawer',\n      },\n      button: ({ editor, t, extension }: any) => ({\n        component: DrawerActiveButton,\n        componentProps: {\n          action: () => {\n            return true;\n          },\n          isActive: () => false,\n          disabled: false,\n          editor,\n          icon: 'PencilRuler',\n          tooltip: t('editor.drawer.tooltip'),\n          upload: extension?.options?.upload,\n        },\n      }),\n    };\n  },\n\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      width: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const width = img?.getAttribute('width');\n\n          return width ? Number.parseInt(width, 10) : 320;\n        },\n        renderHTML: (attributes) => {\n          return {\n            width: attributes.width,\n          };\n        },\n      },\n      height: {\n        default: null,\n        parseHTML: (element) => {\n          const img = element.querySelector('img') as any;\n\n          const height = img?.getAttribute('height');\n\n          return height ? Number.parseInt(height, 10) : 212;\n        },\n        renderHTML: (attributes) => {\n          return {\n            height: attributes.height,\n          };\n        },\n      },\n      align: {\n        default: 'center',\n        parseHTML: element => element.getAttribute('align'),\n        renderHTML: (attributes) => {\n          return {\n            align: attributes.align,\n          };\n        },\n      },\n    };\n  },\n\n  addNodeView() {\n    return ReactNodeViewRenderer(NodeViewDrawer);\n  },\n\n  // @ts-ignore\n  addCommands() {\n    return {\n      setDrawer:\n          (\n            options: { src: string, alt?: string },\n            replace?: boolean,\n          ) =>\n            ({ commands, editor }: CommandProps) => {\n              if (replace) {\n                return commands.insertContent({\n                  type: this.name,\n                  attrs: options,\n                });\n              }\n              return commands.insertContentAt(editor.state.selection.anchor, {\n                type: this.name,\n                attrs: options,\n              });\n            },\n\n      setAlignImageDrawer:\n            (align: any) =>\n              ({ commands }: any) => {\n                return commands.updateAttributes(this.name, { align });\n              },\n    };\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    const { align } = HTMLAttributes;\n    const style = align ? `text-align: ${align};` : '';\n\n    return [\n      'div', // Parent element\n      {\n        style,\n        class: 'imageDrawer',\n      },\n      [\n        'img',\n        mergeAttributes(\n          // @ts-ignore\n          this.options.HTMLAttributes,\n          HTMLAttributes,\n        ),\n      ],\n    ];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'div[class=imageDrawer]',\n        getAttrs: (element) => {\n          const img = element.querySelector('img');\n\n          const width = img?.getAttribute('width');\n          const height = img?.getAttribute('height');\n\n          return {\n            src: img?.getAttribute('src'),\n            alt: img?.getAttribute('alt'),\n            width: width ? Number.parseInt(width, 10) : null,\n            height: height ? Number.parseInt(height, 10) : null,\n            align: img?.getAttribute('align') || element.style.textAlign || null,\n          };\n        },\n      },\n    ];\n  },\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport {\n  makeDropdownToolbar,\n  Editor as Editor4,\n} from 'easydrawer';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport ControlDrawer from '@/extensions/Drawer/components/ControlDrawer/ControlDrawer';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\nlet clear = false;\n\nexport function EditDrawerBlock ({ editor, attrs, extension }: any) {\n  const [visible, toggleVisible] = useState(false);\n  const refEditor = useRef<Editor4 | null>(null);\n  const refWidget = useRef<any>(null);\n  const { alt, align } = attrs;\n  const upload = extension?.options.upload;\n\n  const mermaidInit = () => {\n    const init = async () => {\n      const parentElement = document.querySelector('#easydrawer');\n\n      if (!parentElement) return;\n\n      refEditor.current = new Editor4(parentElement as any, {\n        wheelEventsEnabled: false,\n        disableZoom: true,\n      });\n\n      refWidget.current = makeDropdownToolbar(refEditor.current);\n      refWidget.current.addDefaultToolWidgets();\n\n      refEditor.current.loadFromSVG(decodeURIComponent(alt));\n    };\n\n    init();\n  };\n\n  useEffect(() => {\n    if (visible) {\n      setTimeout(() => {\n        mermaidInit();\n      }, 200);\n    }\n  }, [visible]);\n\n  const setSvg = async () => {\n    if (refEditor.current) {\n      const svg = refEditor.current.toSVG() as unknown as HTMLElement;\n      const contentHtml = svg.outerHTML;\n      const name = `drawer-${shortId()}.svg`;\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setDrawer(\n          {\n            type: 'drawer',\n            src,\n            alt: encodeURIComponent(contentHtml),\n            width: 426,\n            height: 212\n          },\n          !!contentHtml,\n        )\n        .run();\n      editor?.commands.setAlignImageDrawer(align);\n    }\n    toggleVisible(false);\n  };\n\n  const setColorPen = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setThicknessPen = (thickness: number) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[2] as any;\n    const shapeWidget = refWidget.current.getWidgetById('pen-1');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(thickness);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const setColorHighlight = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[3] as any;\n\n    const shapeWidget = refWidget.current.getWidgetById('pen-2');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeShape = (type: any) => {\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (shapeWidget) {\n      shapeWidget.setShapeType(type);\n    }\n  };\n\n  const changeColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onThicknessChange = (v: any) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setThickness(v);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const changeBorderColorShape = (color: string) => {\n    const penTool = refEditor.current!.toolController.getPrimaryTools()[5] as any;\n    const shapeWidget = refWidget.current.getWidgetById('shape');\n\n    if (penTool && shapeWidget) {\n      penTool.setBorderColor(color);\n      shapeWidget.serializeState();\n    }\n  };\n\n  const onUndo =() => {\n    if (clear) {\n      while (refEditor.current!.history.redoStackSize > 0) {\n        refEditor.current!.history.redo();\n      }\n      clear = false;\n      return;\n    }\n\n    refEditor.current!.history.undo();\n  };\n\n  const onRedo =() => {\n    if (clear) {\n      return;\n    }\n\n    refEditor.current!.history.redo();\n  };\n\n  const onClear =() => {\n    if (clear) {\n      return;\n    }\n\n    while (refEditor.current!.history.undoStackSize > 0) {\n      onUndo();\n    }\n    clear = true;\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Pencil\"\n          tooltip=\"Edit Drawer\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Edit Drawer\n        </DialogTitle>\n\n        <div style={{ height: '100%', borderWidth: 1, background: 'white', position: 'relative' }}>\n          <div\n            className='richtext-size-full'\n            id='easydrawer'\n          >\n          </div>\n\n          <ControlDrawer\n            changeBorderColorShape={changeBorderColorShape}\n            changeColorShape={changeColorShape}\n            changeShape={changeShape}\n            onClear={onClear}\n            onRedo={onRedo}\n            onThicknessChange={onThicknessChange}\n            onUndo={onUndo}\n            refEditor={refEditor}\n            setColorHighlight={setColorHighlight}\n            setColorPen={setColorPen}\n            setThicknessPen={setThicknessPen}\n          />\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setSvg}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\n\nexport function useExtension(editor: Editor, attrbute: string) {\n  const [extension, setExtension] = useState<any>(undefined);\n\n  useEffect(() => {\n    const listener = () => {\n      const extension = editor.extensionManager.extensions.find(extension => extension.name === attrbute);\n\n      if (!extension) {\n        return;\n      }\n\n      setExtension(extension as any);\n    };\n\n    editor.on('selectionUpdate', listener);\n    editor.on('transaction', listener);\n\n    return () => {\n      editor.off('selectionUpdate', listener);\n      editor.off('transaction', listener);\n    };\n  }, [editor, attrbute]);\n\n  return extension;\n}\n","import { Fragment, useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu as BubbleMenuReact } from '@tiptap/react';\n\nimport { Separator, getBubbleDrawer } from '@/components';\nimport { Drawer } from '@/extensions';\nimport { EditDrawerBlock } from '@/extensions/Drawer/components/EditDrawerBlock';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { useExtension } from '@/hooks/useExtension';\nimport { useLocale } from '@/locales';\n\ninterface IPropsBubbleMenu {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Fragment>\n      {item.type === 'divider'\n        ? (\n          <Separator className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n            orientation=\"vertical\"\n          />\n        )\n        : (\n          <Comp\n            {...item.componentProps}\n            disabled={disabled || item?.componentProps?.disabled}\n            editor={editor}\n          />\n        )}\n    </Fragment>\n  );\n}\n\nfunction isDrawerNode(node: any) {\n  return node.type.name === 'drawer';\n}\n\nfunction BubbleMenuDrawer(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const attrs = useAttributes<any>(props.editor, Drawer.name);\n\n  const extension = useExtension(props.editor, Drawer.name);\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isDrawer = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isDrawerNode(node)) {\n        isDrawer = true;\n        return false; // Stop iteration if an mermaid is found\n      }\n    });\n\n    return isDrawer;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleDrawer(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  if (item.type === 'edit' && attrs?.src) {\n                    return (\n                      <EditDrawerBlock\n                        attrs={attrs}\n                        editor={props.editor}\n                        extension={extension}\n                        key={`bubbleMenu-drawer-${key}`}\n                      />\n                    );\n                  }\n\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-drawer-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nexport { BubbleMenuDrawer };\n","import { useEffect, useState } from 'react';\nimport { Button, Input, Label, Popover, PopoverContent, PopoverTrigger } from '@/components/ui';\nimport { useLocale } from '@/locales';\n\ninterface ISize {\n  width: number | string, height: number | string \n}\n\ninterface IProps {\n  width: number | string\n  maxWidth?: number | string\n  height: number | string\n  onOk: (arg: ISize) => void\n  children: React.ReactNode\n}\n\nconst containerStyle = { padding: '0 12px 12px' };\n\nexport const SizeSetter: React.FC<IProps> = ({ width, maxWidth, height, onOk, children }: any) => {\n  const { t } = useLocale();\n\n  const [form, setForm] = useState({\n    width: '',\n    height: '',\n    maxWidth: '',\n  });\n\n  useEffect(() => {\n    setForm({\n      width,\n      height,\n      maxWidth,\n    });\n  }, [height, maxWidth, width]);\n\n  function handleSubmit(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    onOk(form);\n  }\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild>\n        {children}\n      </PopoverTrigger>\n\n      <PopoverContent>\n        <div style={containerStyle}>\n          <form className=\"richtext-flex richtext-flex-col richtext-gap-2\" onSubmit={handleSubmit}>\n            <Label className=\"mb-[6px]\">\n              Width\n            </Label>\n\n            <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n              <div className=\"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm\">\n                <Input\n                  type=\"number\"\n                  value={form.width}\n                  required\n                  onChange={e => setForm({ ...form, width: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <Label className=\"mb-[6px]\">\n              Max Width\n            </Label>\n\n            <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n              <div className=\"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm\">\n                <Input\n                  type=\"number\"\n                  value={form.maxWidth}\n                  required\n                  onChange={e => setForm({ ...form, maxWidth: e.target.value })}\n                />\n              </div>\n            </div>\n            <Label className=\"mb-[6px]\">\n              Height\n            </Label>\n            <div className=\"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5\">\n              <div className=\"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm\">\n                <Input\n                  type=\"number\"\n                  value={form.height}\n                  required\n                  onChange={e => setForm({ ...form, height: e.target.value })}\n                />\n              </div>\n            </div>\n\n            <Button type=\"submit\" className=\"richtext-self-end richtext-mt-2\">\n              {t('editor.link.dialog.button.apply')}\n            </Button>\n          </form>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n","import type { Editor } from '@tiptap/core';\n\nconst cache = new Map();\n\nexport function getEditorContainerDOMSize(editor: Editor): { width: number } {\n  const targetNode = editor.options.element as HTMLElement;\n\n  if (!cache.has('width')) {\n    cache.set('width', targetNode.clientWidth);\n  }\n\n  if (cache.has('width') && cache.get('width') <= 0) {\n    cache.set('width', targetNode.clientWidth);\n  }\n\n  const config = { attributes: true, childList: true, subtree: true };\n  const callback = function () {\n    cache.set('width', targetNode.clientWidth);\n  };\n  const observer = new MutationObserver(callback);\n  observer.observe(targetNode, config);\n\n  editor.on('destroy', () => {\n    observer.disconnect();\n  });\n\n  return { width: cache.get('width') };\n}\n","import { useCallback, useEffect } from 'react';\n\nimport { BubbleMenu } from '@tiptap/react';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { ActionButton } from '@/components/ActionButton';\nimport { SizeSetter } from '@/components/SizeSetter/SizeSetter';\nimport { useLocale } from '@/locales';\nimport type { IExcalidrawAttrs } from '@/extensions/Excalidraw';\nimport { Excalidraw } from '@/extensions/Excalidraw';\nimport { triggerOpenExcalidrawSettingModal } from '@/utils/_event';\nimport { deleteNode } from '@/utils/delete-node';\nimport { getEditorContainerDOMSize } from '@/utils/editor-container-size';\n\nexport function BubbleMenuExcalidraw({ editor }: any) {\n  const { t } = useLocale();\n  const { width: maxWidth } = getEditorContainerDOMSize(editor);\n  const attrs = useAttributes<IExcalidrawAttrs>(editor, Excalidraw.name, {\n    defaultShowPicker: false,\n    createUser: '',\n    width: 0,\n    height: 0,\n  });\n  const { defaultShowPicker, createUser, width, height } = attrs;\n\n  const setSize = useCallback(\n    (size: any) => {\n      editor\n        .chain()\n        .updateAttributes(Excalidraw.name, size)\n        .setNodeSelection(editor.state.selection.from)\n        .focus()\n        .run();\n    },\n    [editor],\n  );\n  const openEditLinkModal = useCallback(() => {\n    triggerOpenExcalidrawSettingModal(attrs);\n  }, [editor, attrs]);\n  const shouldShow = useCallback(() => editor.isActive(Excalidraw.name), [editor]);\n  const deleteMe = useCallback(() => deleteNode(Excalidraw.name, editor), [editor]);\n\n  useEffect(() => {\n    if (defaultShowPicker) {\n      openEditLinkModal();\n      editor.chain().updateAttributes(Excalidraw.name, { defaultShowPicker: false }).focus().run();\n    }\n  }, [createUser, defaultShowPicker, editor, openEditLinkModal]);\n\n  return (\n    <BubbleMenu\n      className=\"bubble-menu\"\n      editor={editor}\n      pluginKey=\"excalidraw-bubble-menu\"\n      shouldShow={shouldShow}\n      tippyOptions={{\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        placement: 'bottom-start',\n        offset: [-2, 16],\n        zIndex: 9999,\n        // onHidden: () => {\n        //   toggleVisible(false)\n        // },\n      }}\n    >\n      <div className=\"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background\">\n\n        <ActionButton\n          icon=\"Pencil\"\n          action={openEditLinkModal}\n          tooltip={t('editor.edit')}\n        />\n\n        <SizeSetter width={width as any} maxWidth={maxWidth} height={height as any} onOk={setSize}>\n          <ActionButton\n            icon=\"Settings\"\n            tooltip={t('editor.settings')}\n          />\n        </SizeSetter>\n\n        <ActionButton\n          icon=\"Trash2\"\n          action={deleteMe}\n          tooltip={t('editor.delete')}\n        />\n\n      </div>\n    </BubbleMenu>\n  );\n}\n","import { useCallback, useEffect, useState } from 'react';\n\nimport { BubbleMenu } from '@tiptap/react';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { ActionButton } from '@/components/ActionButton';\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Button, Input } from '@/components/ui';\nimport { SizeSetter } from '@/components/SizeSetter/SizeSetter';\nimport { useLocale } from '@/locales';\nimport type { IIframeAttrs } from '@/extensions/Iframe';\nimport { Iframe } from '@/extensions/Iframe';\nimport { deleteNode } from '@/utils/delete-node';\n\nexport function BubbleMenuIframe({ editor }: any) {\n  const { t } = useLocale();\n  const { width, height, url } = useAttributes<IIframeAttrs>(editor, Iframe.name, {\n    width: 0,\n    height: 0,\n    url: '',\n    defaultShowPicker: false,\n  });\n  const [visible, toggleVisible] = useState(false);\n  const [formUrl, setFormUrl] = useState('');\n\n  const handleCancel = useCallback(() => {\n    toggleVisible(false);\n  }, [toggleVisible]);\n\n  useEffect(() => {\n    if (visible)\n      setFormUrl(url as any);\n  }, [visible, url]);\n\n  const handleOk = useCallback(() => {\n    editor\n      .chain()\n      .updateAttributes(Iframe.name, {\n        url: formUrl,\n      })\n      .setNodeSelection(editor.state.selection.from)\n      .focus()\n      .run();\n    toggleVisible(false);\n  }, [editor, formUrl, toggleVisible]);\n\n  const visitLink = useCallback(() => {\n    window.open(url, '_blank');\n  }, [url]);\n\n  const openEditLinkModal = useCallback(() => {\n    toggleVisible(true);\n  }, [toggleVisible]);\n\n  const setSize = useCallback(\n    (size: any) => {\n      editor.chain().updateAttributes(Iframe.name, size).setNodeSelection(editor.state.selection.from).focus().run();\n    },\n    [editor],\n  );\n  const shouldShow = useCallback(() => editor.isActive(Iframe.name) && !url, [editor, url]);\n  const deleteMe = useCallback(() => deleteNode(Iframe.name, editor), [editor]);\n\n  return (\n    <>\n      <BubbleMenu\n        className=\"bubble-menu\"\n        editor={editor}\n        pluginKey=\"iframe-bubble-menu\"\n        shouldShow={shouldShow}\n        tippyOptions={{\n          popperOptions: {\n            modifiers: [{ name: 'flip', enabled: false }],\n          },\n          placement: 'bottom-start',\n          offset: [-2, 16],\n          zIndex: 9999,\n        // onHidden: () => {\n        //   toggleVisible(false)\n        // },\n        }}\n      >\n\n        <div className=\"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background\">\n          <ActionButton\n            action={visitLink}\n            icon=\"Eye\"\n            tooltip=\"Visit Link\"\n          />\n          <ActionButton\n            action={openEditLinkModal}\n            icon=\"Pencil\"\n            tooltip=\"Open Edit Link\"\n          />\n\n          <SizeSetter width={width as any} height={height as any} onOk={setSize}>\n            <ActionButton\n              icon=\"Settings\"\n              tooltip={t('editor.settings')}\n            />\n          </SizeSetter>\n\n          <ActionButton\n            action={deleteMe}\n            icon=\"Trash2\"\n            tooltip={t('editor.delete')}\n          />\n        </div>\n      </BubbleMenu>\n\n      <Dialog\n        open={visible}\n        onOpenChange={toggleVisible}\n      >\n        <DialogTrigger />\n\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>\n              Edit Link Iframe\n            </DialogTitle>\n          </DialogHeader>\n\n          <Input\n            value={formUrl}\n            onInput={(e: any) => setFormUrl(e.target.value)}\n            type=\"url\"\n            autoFocus\n            placeholder=\"Enter link\"\n          />\n\n          <DialogFooter>\n            <Button onClick={handleCancel}>\n              Cancel\n            </Button>\n            <Button onClick={handleOk}>\n              OK\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","import { BubbleMenu } from '@tiptap/react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { HelpCircle, Pencil, Trash2 } from 'lucide-react';\nimport katex from 'katex';\nimport { Katex } from '@/extensions';\nimport { deleteNode } from '@/utils/delete-node';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport type { IKatexAttrs } from '@/extensions/Katex';\nimport { Textarea } from '@/components/ui/textarea';\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\n\nfunction BubbleMenuKatex({ editor, ...props }: any) {\n  const attrs = useAttributes<IKatexAttrs>(editor, Katex.name, {\n    text: '',\n    defaultShowPicker: false,\n  });\n  const { text, defaultShowPicker } = attrs;\n\n  const [currentValue, setCurrentValue] = useState('');\n  const [visible, toggleVisible] = useState(false);\n\n  const shouldShow = useCallback(() => editor.isActive(Katex.name), [editor]);\n\n  const deleteMe = useCallback(() => deleteNode(Katex.name, editor), [editor]);\n\n  const submit = useCallback(() => {\n    editor.chain().focus().setKatex({ text: currentValue }).run();\n    toggleVisible(false);\n  }, [editor, currentValue]);\n\n  useEffect(() => {\n    if (defaultShowPicker) {\n      toggleVisible(true);\n      editor.chain().updateAttributes(Katex.name, { defaultShowPicker: false }).focus().run();\n    }\n  }, [editor, defaultShowPicker, toggleVisible]);\n\n  useEffect(() => {\n    if (visible)\n      setCurrentValue(text || '');\n  }, [visible]);\n\n  const formatText = useMemo(() => {\n    try {\n      return katex.renderToString(`${currentValue}`);\n    } catch {\n      return currentValue;\n    }\n  }, [currentValue]);\n\n  const previewContent = useMemo(\n    () => {\n      if (`${currentValue}`.trim()) {\n        return (\n          <span contentEditable={false} dangerouslySetInnerHTML={{ __html: formatText || '' }}></span>\n        );\n      }\n\n      return null;\n    },\n    [currentValue, formatText],\n  );\n\n  return (\n    <BubbleMenu\n      editor={editor}\n      pluginKey=\"Katex-bubble-menu\"\n      shouldShow={shouldShow}\n      tippyOptions={{\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        placement: 'bottom-start',\n        offset: [-2, 16],\n        zIndex: 9999,\n        onHidden: () => {\n          toggleVisible(false);\n        },\n      }}\n    >\n      {props?.disabled\n        ? (\n          <></>\n        )\n        : (\n          <div className=\"richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800\">\n            {visible\n              ? (\n                <>\n                  <Textarea\n                    value={currentValue}\n                    onChange={e => setCurrentValue(e.target.value)}\n                    autoFocus\n                    placeholder=\"Formula text\"\n                    rows={3}\n                    defaultValue={text}\n                    style={{ marginBottom: 8 }}\n                  />\n\n                  {previewContent && (\n                    <div className=\"richtext-my-[10px] richtext-p-[10px] richtext-rounded-[6px] !richtext-border-[1px] richtext-whitespace-nowrap richtext-overflow-auto\">\n                      {previewContent}\n                    </div>\n                  )}\n\n                  <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-gap-[6px]\">\n                    <Button onClick={submit} className=\"richtext-flex-1\">\n                      Submit\n                    </Button>\n\n                    <a href=\"https://katex.org/docs/supported\" target=\"_blank\" rel=\"noreferrer noopener\">\n                      <HelpCircle size={16} />\n                    </a>\n                  </div>\n                </>\n              )\n              : (\n                <div className=\"richtext-flex richtext-items-center richtext-justify-center richtext-gap-[6px]\">\n                  <ActionButton tooltip=\"Edit\" action={() => toggleVisible(!visible)}>\n                    <Pencil size={16} />\n                  </ActionButton>\n\n                  <ActionButton tooltip=\"Delete\" action={deleteMe}>\n                    <Trash2 size={16} />\n                  </ActionButton>\n                </div>\n              )}\n          </div>\n        )}\n\n    </BubbleMenu>\n  );\n}\n\nexport default BubbleMenuKatex;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport mermaid from 'mermaid';\n// @ts-ignore\nimport svg64 from 'svg64';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Button } from '@/components/ui';\nimport { Dialog, DialogContent, DialogFooter, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { dataURLtoFile } from '@/utils/file';\nimport { shortId } from '@/utils/shortId';\n\ninterface IProps {\n  editor: Editor, attrs?: any, extension?: any\n}\n\nconst defaultCode = 'graph TB\\na-->b';\n\nexport const EditMermaidBlock: React.FC<IProps> = ({ editor, attrs, extension }) => {\n  const { alt, align } = attrs;\n  const [mermaidCode, setMermaidCode] = useState(decodeURIComponent(alt ?? defaultCode));\n  const [svgCode, setSvgCode] = useState('');\n  const [visible, toggleVisible] = useState(false);\n  const mermaidRef = useRef<HTMLElement | null>(null);\n\n  const upload = extension?.options.upload;\n\n  const renderMermaid = async (value: any) => {\n    try {\n      const { svg } = await mermaid.render('mermaid-svg', value);\n      setSvgCode(svg);\n    } catch {\n      setSvgCode('');\n    }\n  };\n\n  const mermaidInit = () => {\n    mermaid.initialize({\n      darkMode: false,\n      startOnLoad: false,\n      // fontFamily:'',\n      fontSize: 12,\n      theme: 'base',\n    });\n    renderMermaid(mermaidCode);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      mermaidInit();\n    }\n  }, [visible]);\n\n  useEffect(() => {\n    if (visible) {\n      renderMermaid(mermaidCode);\n    }\n  }, [mermaidCode]);\n\n  const setMermaid = async () => {\n    if (mermaidCode === '') {\n      return;\n    }\n    if (mermaidCode) {\n      const svg = mermaidRef.current!.querySelector('svg') as unknown as HTMLElement;\n      const { width, height } = svg.getBoundingClientRect();\n      const name = `mermaid-${shortId()}.svg`;\n      // const { size } = new Blob([svg.outerHTML], {\n      //   type: 'image/svg+xml',\n      // })\n\n      let src = svg64(svg.outerHTML);\n\n      if (upload) {\n        const file = dataURLtoFile(src, name);\n        src = await upload(file);\n      }\n\n      editor\n        ?.chain()\n        .focus()\n        .setMermaid(\n          {\n            type: 'mermaid',\n            src,\n            alt: encodeURIComponent(mermaidCode),\n            width,\n            height,\n          },\n          !!mermaidCode,\n        )\n        .run();\n      editor?.commands.setAlignImageMermaid(align);\n    }\n    toggleVisible(false);\n  };\n\n  return (\n    <Dialog\n      onOpenChange={toggleVisible}\n      open={visible}\n    >\n      <DialogTrigger asChild>\n        <ActionButton\n          action={() => toggleVisible(true)}\n          icon=\"Pencil\"\n          tooltip=\"Edit Mermaid\"\n        />\n      </DialogTrigger>\n\n      <DialogContent className=\"richtext-z-[99999] !richtext-max-w-[1300px]\">\n        <DialogTitle>\n          Edit Mermaid\n        </DialogTitle>\n\n        <div style={{ height: '100%', border: '1px solid hsl(var(--border))' }}>\n          <div className=\"richtext-flex richtext-gap-[10px] richtext-rounded-[10px] richtext-p-[10px]\">\n            <Textarea\n              autoFocus\n              className=\"richtext-flex-1\"\n              defaultValue={defaultCode}\n              onChange={e => setMermaidCode(e.target.value)}\n              placeholder=\"Text\"\n              required\n              rows={10}\n              value={mermaidCode}\n              style={{\n                color: 'hsl(var(--richtext-foreground))',\n              }}\n            />\n\n            <div\n              className=\"richtext-flex richtext-flex-1 richtext-items-center richtext-justify-center richtext-rounded-[10px] richtext-p-[10px]\"\n              dangerouslySetInnerHTML={{ __html: svgCode }}\n              ref={mermaidRef as any}\n              style={{ height: '100%', border: '1px solid hsl(var(--border))', minHeight: 500, background: '#fff' }}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            onClick={setMermaid}\n            type=\"button\"\n          >\n            Save changes\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import { Fragment, useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu as BubbleMenuReact } from '@tiptap/react';\n\nimport { Separator, getBubbleMermaid } from '@/components';\nimport { Mermaid } from '@/extensions';\nimport { EditMermaidBlock } from '@/extensions/Mermaid/components/EditMermaidBlock';\nimport { useAttributes } from '@/hooks/useAttributes';\nimport { useExtension } from '@/hooks/useExtension';\nimport { useLocale } from '@/locales';\n\ninterface IPropsBubbleMenu {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Fragment>\n      {item.type === 'divider'\n        ? (\n          <Separator className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n            orientation=\"vertical\"\n          />\n        )\n        : (\n          <Comp\n            {...item.componentProps}\n            disabled={disabled || item?.componentProps?.disabled}\n            editor={editor}\n          />\n        )}\n    </Fragment>\n  );\n}\n\nfunction isMermaidNode(node: any) {\n  return node.type.name === 'mermaid';\n}\n\nfunction BubbleMenuMermaid(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const attrs = useAttributes<any>(props.editor, Mermaid.name);\n\n  const extension = useExtension(props.editor, Mermaid.name);\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isMermaid = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isMermaidNode(node)) {\n        isMermaid = true;\n        return false; // Stop iteration if an mermaid is found\n      }\n    });\n\n    return isMermaid;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleMermaid(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  if (item.type === 'edit' && attrs?.src) {\n                    return (\n                      <EditMermaidBlock\n                        attrs={attrs}\n                        editor={props.editor}\n                        extension={extension}\n                        key={`bubbleMenu-mermaid-${key}`}\n                      />\n                    );\n                  }\n\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-mermaid-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nexport { BubbleMenuMermaid };\n","import { useCallback, useState } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu } from '@tiptap/react';\n\nimport { ActionButton } from '@/components/ActionButton';\nimport { Twitter } from '@/extensions';\nimport FormEditLinkTwitter from '@/extensions/Twitter/components/FormEditLinkTwitter';\nimport { useLocale } from '@/locales';\nimport { deleteNode } from '@/utils/delete-node';\n\nexport interface BubbleMenuTwitterProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nfunction BubbleMenuTwitter({ editor, disabled }: BubbleMenuTwitterProps) {\n  const [showEdit, setShowEdit] = useState(false);\n  const { t } = useLocale();\n\n  const shouldShow = useCallback(({ editor }: { editor: Editor }) => {\n    const isActive = editor.isActive(Twitter.name);\n    return isActive;\n  }, []);\n\n  const onSetLink = (src: string) => {\n    editor.commands.updateTweet({ src });\n    setShowEdit(false);\n  };\n\n  const deleteMe = useCallback(() => deleteNode(Twitter.name, editor), [editor]);\n\n  return (\n    <>\n      <BubbleMenu\n        editor={editor}\n        shouldShow={shouldShow}\n        tippyOptions={{\n          popperOptions: {\n            modifiers: [{ name: 'flip', enabled: false }],\n          },\n          placement: 'bottom-start',\n          offset: [-2, 16],\n          zIndex: 9999,\n          onHidden: () => {\n            setShowEdit(false);\n          },\n        }}\n      >\n        {disabled\n          ? (\n            <></>\n          )\n          : (\n            <>\n              {showEdit\n                ? (\n                  <FormEditLinkTwitter\n                    editor={editor}\n                    onSetLink={onSetLink}\n                  />\n                )\n                : (\n                  <div className=\"richtext-flex richtext-items-center richtext-gap-2 richtext-rounded-lg !richtext-border richtext-border-neutral-200 richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black\">\n                    <div className=\"richtext-flex richtext-flex-nowrap\">\n                      <ActionButton\n                        icon=\"Pencil\"\n                        tooltip={t('editor.link.edit.tooltip')}\n                        tooltipOptions={{ sideOffset: 15 }}\n                        action={() => {\n                          setShowEdit(true);\n                        }}\n                      />\n\n                      <ActionButton\n                        action={deleteMe}\n                        icon=\"Trash\"\n                        tooltip={t('editor.delete')}\n                        tooltipOptions={{ sideOffset: 15 }}\n                      />\n                    </div>\n                  </div>\n                )}\n            </>\n          )}\n      </BubbleMenu>\n    </>\n  );\n}\n\nexport { BubbleMenuTwitter };\n","import type { Editor } from '@tiptap/core';\n\nimport { BubbleMenuImage, BubbleMenuImageGif, BubbleMenuLink, BubbleMenuText, BubbleMenuVideo, ColumnsBubbleMenu, ContentMenu, TableBubbleMenu } from '@/components';\nimport { BubbleMenuDrawer } from '@/components/menus/components/BubbleMenuDrawer';\nimport { BubbleMenuExcalidraw } from '@/components/menus/components/BubbleMenuExcalidraw';\nimport { BubbleMenuIframe } from '@/components/menus/components/BubbleMenuIframe';\nimport BubbleMenuKatex from '@/components/menus/components/BubbleMenuKatex';\nimport { BubbleMenuMermaid } from '@/components/menus/components/BubbleMenuMermaid';\nimport { BubbleMenuTwitter } from '@/components/menus/components/BubbleMenuTwitter';\nimport { Image, ImageGif } from '@/extensions';\nimport type { BubbleMenuProps as BubbleMenuPropsType } from '@/types';\n\nexport interface BubbleMenuComponentProps {\n  editor: Editor\n  disabled?: boolean\n  bubbleMenu?: BubbleMenuPropsType\n}\n\n/**\n * Bubble Menu Component\n *\n * @param editor Editor instance\n * @param disabled Whether the menu is disabled\n * @param bubbleMenu Bubble menu configuration\n * @returns Bubble menu component\n */\nexport function BubbleMenu({ editor, disabled, bubbleMenu }: BubbleMenuComponentProps) {\n  const extensionsNames = editor.extensionManager.extensions.map(ext => ext.name);\n\n  const renderMenuItems = () => [\n    extensionsNames.includes('columns') && !bubbleMenu?.columnConfig?.hidden ? <ColumnsBubbleMenu editor={editor}\n      key=\"columns\"\n    /> : null,\n    extensionsNames.includes('table') && !bubbleMenu?.tableConfig?.hidden ? <TableBubbleMenu editor={editor}\n      key=\"table\"\n    /> : null,\n    extensionsNames.includes('link') && !bubbleMenu?.linkConfig?.hidden ? <BubbleMenuLink disabled={disabled}\n      editor={editor}\n      key=\"link\"\n    /> : null,\n    extensionsNames.includes(Image.name) && !bubbleMenu?.imageConfig?.hidden ? <BubbleMenuImage disabled={disabled}\n      editor={editor}\n      key=\"image\"\n    /> : null,\n    extensionsNames.includes(ImageGif.name) && !bubbleMenu?.imageGifConfig?.hidden ? <BubbleMenuImageGif disabled={disabled}\n      editor={editor}\n      key=\"imageGif\"\n    /> : null,\n    extensionsNames.includes('video') && !bubbleMenu?.videoConfig?.hidden ? <BubbleMenuVideo disabled={disabled}\n      editor={editor}\n      key=\"video\"\n    /> : null,\n    extensionsNames.includes('katex') && !bubbleMenu?.katexConfig?.hidden ? <BubbleMenuKatex disabled={disabled}\n      editor={editor}\n      key=\"katex\"\n    /> : null,\n    extensionsNames.includes('excalidraw') && !bubbleMenu?.excalidrawConfig?.hidden ? <BubbleMenuExcalidraw disabled={disabled}\n      editor={editor}\n      key=\"excalidraw\"\n    /> : null,\n    extensionsNames.includes('mermaid') && !bubbleMenu?.mermaidConfig?.hidden ? <BubbleMenuMermaid disabled={disabled}\n      editor={editor}\n      key=\"mermaid\"\n    /> : null,\n    extensionsNames.includes('iframe') && !bubbleMenu?.iframeConfig?.hidden ? <BubbleMenuIframe disabled={disabled}\n      editor={editor}\n      key=\"iframe\"\n    /> : null,\n    extensionsNames.includes('twitter') && !bubbleMenu?.twitterConfig?.hidden ? <BubbleMenuTwitter disabled={disabled}\n      editor={editor}\n      key=\"twitter\"\n    /> : null,\n    !bubbleMenu?.floatingMenuConfig?.hidden ? <ContentMenu disabled={disabled}\n      editor={editor}\n      key=\"content\"\n    /> : null,\n    !bubbleMenu?.textConfig?.hidden ? <BubbleMenuText disabled={disabled}\n      editor={editor}\n      key=\"text\"\n    /> : null,\n    extensionsNames.includes('drawer') && !bubbleMenu?.drawerConfig?.hidden ? <BubbleMenuDrawer disabled={disabled}\n      editor={editor}\n      key=\"drawer\"\n    /> : null,\n  ];\n\n  if (bubbleMenu?.render) {\n    return bubbleMenu.render({ editor, disabled: disabled || false, bubbleMenu }, renderMenuItems());\n  }\n\n  return renderMenuItems().filter(Boolean);\n}\n","export function NoFill() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\">\n      <path fill=\"currentColor\" d=\"M18 14c0-4-6-10.8-6-10.8s-1.33 1.51-2.73 3.52l8.59 8.59c.09-.42.14-.86.14-1.31m-.88 3.12L12.5 12.5L5.27 5.27L4 6.55l3.32 3.32C6.55 11.32 6 12.79 6 14c0 3.31 2.69 6 6 6c1.52 0 2.9-.57 3.96-1.5l2.63 2.63l1.27-1.27z\"></path>\n    </svg>\n  );\n}\n","import React, { useEffect, useMemo, useState } from 'react';\n\nimport { Plus } from 'lucide-react';\nimport { HexColorPicker } from 'react-colorful';\n\nimport { Button, Input, Popover, PopoverContent, PopoverTrigger, Separator } from '@/components';\nimport { NoFill } from '@/components/icons/NoFill';\nimport { COLORS_LIST as DEFAULT_COLORS_LIST } from '@/constants';\nimport { useLocale } from '@/locales';\n\nexport interface ColorPickerProps {\n  highlight?: boolean\n  disabled?: boolean\n  colors?: string[]\n  defaultColor?: string\n  children: React.ReactNode\n  onChange?: (color: string | undefined) => void\n  setSelectedColor?: (color: string | undefined) => void\n  selectedColor?: string\n}\n\nfunction ColorPicker(props: ColorPickerProps) {\n  const { t } = useLocale();\n\n  const {\n    highlight = false,\n    disabled = false,\n    selectedColor,\n    setSelectedColor,\n    onChange,\n    colors = DEFAULT_COLORS_LIST,\n  } = props;\n\n  const chunkedColors = useMemo(() => {\n    const colorsArray = colors;\n    const chunked: string[][] = [];\n    for (let i = 0; i < colorsArray.length; i += 10) {\n      chunked.push(colorsArray.slice(i, i + 10));\n    }\n    return chunked;\n  }, [colors]);\n\n  const [recentColorsStore, setRecentColorsStore] = useState<string[]>([]);\n\n  const setRecentColor = (color: string) => {\n    const newRecentColors = [...recentColorsStore];\n    const index = newRecentColors.indexOf(color);\n    if (index !== -1) {\n      newRecentColors.splice(index, 1);\n    }\n    newRecentColors.unshift(color);\n    if (newRecentColors.length > 10) {\n      newRecentColors.pop();\n    }\n    setRecentColorsStore(newRecentColors);\n  };\n\n  function setColor(color: string | undefined) {\n    if (color === undefined) {\n      // clear color\n      setSelectedColor?.(color);\n      onChange?.(color);\n      return;\n    }\n    // check if color is correct\n    const isCorrectColor = /^#([\\da-f]{3}){1,2}$/i.test(color);\n    if (isCorrectColor) {\n      setSelectedColor?.(color);\n      onChange?.(color);\n      setRecentColor(color);\n    }\n  }\n\n  return (\n    <Popover modal>\n      <PopoverTrigger asChild\n        className=\"!richtext-p-0\"\n        disabled={disabled}\n      >\n        {props?.children}\n      </PopoverTrigger>\n\n      <PopoverContent align=\"start\"\n        className=\"richtext-size-full richtext-p-2\"\n        hideWhenDetached\n        side=\"bottom\"\n      >\n        <div className=\"richtext-flex richtext-flex-col\">\n          {highlight\n            ? (\n              <div\n                className=\"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent\"\n                onClick={() => setColor(undefined)}\n              >\n                <NoFill />\n\n                <span className=\"richtext-ml-1 richtext-text-sm\">\n                  {t('editor.nofill')}\n                </span>\n              </div>\n            )\n            : (\n              <div\n                className=\"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent\"\n                onClick={() => {\n                  setColor(undefined);\n                }}\n              >\n                <NoFill />\n\n                <span className=\"richtext-ml-1 richtext-text-sm\">\n                  {t('editor.default')}\n                </span>\n              </div>\n            )}\n\n          {chunkedColors.map((items: string[], index: number) => {\n            return (\n              <span className=\"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2\"\n                key={index}\n              >\n                {items.map((item: string, idx) => {\n                  return (\n                    <span\n                      className=\"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm\"\n                      key={`sub-color-${idx}`}\n                      onClick={() => setColor(item)}\n                    >\n                      <span\n                        className=\"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent\"\n                        style={{\n                          backgroundColor: item,\n                        }}\n                      >\n                        {item === selectedColor\n                          ? (\n                            <svg\n                              className=\"richtext-absolute -richtext-top-px richtext-left-px richtext-block richtext-size-3\"\n                              viewBox=\"0 0 18 18\"\n                              style={{\n                                fill: 'rgb(255, 255, 255)',\n                              }}\n                            >\n                              <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path>\n                            </svg>\n                          )\n                          : (\n                            <svg\n                              viewBox=\"0 0 18 18\"\n                              style={{\n                                fill: 'rgb(255, 255, 255)',\n                                display: 'none',\n                              }}\n                            >\n                              <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path>\n                            </svg>\n                          )}\n                      </span>\n                    </span>\n                  );\n                })}\n              </span>\n            );\n          })}\n\n          <div>\n            <div className=\"richtext-my-1 richtext-text-sm\">\n              {t('editor.recent')}\n            </div>\n\n            <span className=\"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2\">\n              {recentColorsStore?.map((item, index) => {\n                return (\n                  <span\n                    className=\"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm\"\n                    key={`sub-color-recent-${index}`}\n                    onClick={() => setColor(item)}\n                  >\n                    <span\n                      className=\"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent\"\n                      style={{\n                        backgroundColor: item,\n                      }}\n                    >\n                      <svg\n                        viewBox=\"0 0 18 18\"\n                        style={{\n                          fill: 'rgb(255, 255, 255)',\n                          display: 'none',\n                        }}\n                      >\n                        <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path>\n                      </svg>\n                    </span>\n                  </span>\n                );\n              })}\n            </span>\n          </div>\n\n          <AddMoreColor setColor={setColor} />\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\ninterface AddMoreColorProps {\n  setColor: (color: string) => void\n}\n\nfunction AddMoreColor({ setColor }: AddMoreColorProps) {\n  const [colorMore, setColorMore] = useState('#000000');\n  const [openColorMore, setOpenColorMore] = useState(false);\n  const { t } = useLocale();\n\n  useEffect(() => {\n    return () => {\n      setOpenColorMore(false);\n    };\n  }, []);\n\n  return (\n    <Popover open={openColorMore}>\n      <PopoverTrigger asChild>\n        <div\n          className=\"richtext-p-1.5 richtext-text-sm hover:richtext-cursor-pointer hover:richtext-bg-accent\"\n          onClick={(e) => {\n            e.preventDefault();\n            setOpenColorMore(true);\n          }}\n        >\n          {t('editor.color.more')}\n          ...\n        </div>\n      </PopoverTrigger>\n\n      <PopoverContent>\n        <div className=\"richtext-flex richtext-flex-col richtext-items-center richtext-justify-center\">\n          <HexColorPicker color={colorMore}\n            onChange={setColorMore}\n          />\n\n          <Input\n            className=\"richtext-mt-[8px] richtext-w-full\"\n            type=\"text\"\n            value={colorMore.slice(1)}\n            onChange={(e) => {\n              e.preventDefault();\n              setColorMore(`#${e.target.value}`);\n            }}\n          />\n        </div>\n\n        <Separator className=\"richtext-my-[10px]\" />\n\n        <Button\n          className=\"richtext-w-full\"\n          onClick={(e: React.MouseEvent<HTMLButtonElement>) => {\n            e.preventDefault();\n            setColor(colorMore);\n            setOpenColorMore(false);\n          }}\n        >\n          <Plus size={16} />\n        </Button>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport { ColorPicker };\n","import React, { useMemo } from 'react';\nimport type { Editor } from '@tiptap/core';\nimport type { ToolbarItemProps, ToolbarProps } from '@/types';\n\nimport { Separator } from '@/components';\nimport { useLocale } from '@/locales';\nimport { isFunction } from '@/utils/utils';\n\nexport interface ToolbarComponentProps {\n  editor: Editor\n  disabled?: boolean\n  toolbar?: ToolbarProps\n}\n\nfunction Toolbar({ editor, disabled, toolbar }: ToolbarComponentProps) {\n  const { t, lang } = useLocale();\n\n  const toolbarItems = useMemo(() => {\n    const extensions = [...editor.extensionManager.extensions];\n    const sortExtensions = extensions.sort((arr, acc) => {\n      const a = (arr.options).sort ?? -1;\n      const b = (acc.options).sort ?? -1;\n      return a - b;\n    });\n\n    let menus: ToolbarItemProps[] = [];\n\n    for (const extension of sortExtensions) {\n      const {\n        button,\n        divider = false,\n        spacer = false,\n        toolbar = true,\n      } = extension.options;\n      if (!button || !isFunction(button) || !toolbar) {\n        continue;\n      }\n\n      const _button: ToolbarItemProps['button'] | ToolbarItemProps['button'][] = button({\n        editor,\n        extension,\n        t,\n      });\n\n      if (Array.isArray(_button)) {\n        const menu: ToolbarItemProps[] = _button.map((k, i) => ({\n          button: k,\n          divider: i === _button.length - 1 ? divider : false,\n          spacer: i === 0 ? spacer : false,\n          type: extension.type,\n          name: extension.name,\n        }));\n        menus = [...menus, ...menu];\n        continue;\n      }\n\n      menus.push({\n        button: _button,\n        divider,\n        spacer,\n        type: extension.type,\n        name: extension.name,\n      });\n    }\n    return menus;\n  }, [editor, t, lang]);\n\n  const containerDom = (innerContent: React.ReactNode) => {\n    return (\n      <div\n        className=\"richtext-px-1 richtext-py-2 !richtext-border-b\"\n        style={{\n          pointerEvents: disabled ? 'none' : 'auto',\n          opacity: disabled ? 0.5 : 1,\n        }}\n      >\n        <div className=\"richtext-relative richtext-flex richtext-flex-wrap richtext-h-auto richtext-gap-y-1 richtext-gap-x-1\">\n          {innerContent}\n        </div>\n      </div>\n    );\n  };\n\n  const dom = toolbarItems.map((item: ToolbarItemProps, key) => {\n    const ButtonComponent = item.button.component;\n\n    return (\n      <div className=\"richtext-flex richtext-items-center\" key={`toolbar-item-${key}`}>\n        {item?.spacer && <Separator orientation=\"vertical\" className=\"!richtext-h-[16px] !richtext-mx-[10px]\" />}\n\n        <ButtonComponent\n          {...item.button.componentProps}\n          disabled={disabled || item?.button?.componentProps?.disabled}\n        />\n\n        {item?.divider && <Separator orientation=\"vertical\" className=\"!richtext-h-auto !richtext-mx-2\" />}\n      </div>\n    );\n  });\n\n  if (toolbar && toolbar?.render) {\n    return toolbar.render({ editor, disabled: disabled || false }, toolbarItems, dom, containerDom);\n  }\n\n  return containerDom(dom);\n}\n\nexport { Toolbar };\n","import { deleteSelection } from '@tiptap/pm/commands';\nimport type { Editor } from '@tiptap/react';\n\nimport { ActionButton } from '@/components';\nimport { BUBBLE_TEXT_LIST, IMAGE_SIZE, VIDEO_SIZE } from '@/constants';\nimport { localeActions } from '@/locales';\nimport type { ButtonViewParams, ButtonViewReturn, ExtensionNameKeys } from '@/types';\n\n/** Represents the size types for bubble images or videos */\ntype BubbleImageOrVideoSizeType = 'size-small' | 'size-medium' | 'size-large';\ntype ImageAlignments = 'left' | 'center' | 'right';\n\n/** Represents the various types for bubble images */\ntype BubbleImageType =\n  | `image-${BubbleImageOrVideoSizeType}`\n  | `video-${BubbleImageOrVideoSizeType}`\n  | 'image'\n  | 'image-aspect-ratio'\n  | 'remove';\n\n/** Represents the types for bubble videos */\ntype BubbleVideoType = 'video' | 'remove';\n\n/** Represents the overall types for bubbles */\ntype BubbleAllType =\n  | BubbleImageType\n  | BubbleVideoType\n  | ExtensionNameKeys\n  | 'divider'\n  | (string & {});\n\n/** Represents the key types for node types */\nexport type NodeTypeKey = 'image' | 'text' | 'video';\n\n/** Represents the menu of bubble types for each node type */\nexport type BubbleTypeMenu = Partial<Record<NodeTypeKey, BubbleMenuItem[]>>;\n\n/** Represents the menu of overall bubble types for each node type */\nexport type NodeTypeMenu = Partial<Record<NodeTypeKey, BubbleAllType[]>>;\n\n/**\n * Represents the structure of a bubble menu item.\n */\nexport interface BubbleMenuItem extends ButtonViewReturn {\n  /** The type of the bubble item */\n  type: BubbleAllType\n}\n\n/**\n * Represents a function to generate a bubble menu\n */\n/**\n   * Generates a bubble menu based on the provided options.\n   * @param {ButtonViewParams<T>} options - The options for generating the bubble menu.\n   * @returns {BubbleTypeMenu} The generated bubble menu.\n   */\ntype BubbleView<T = any> = (options: ButtonViewParams<T>) => BubbleTypeMenu;\n\n/**\n * Represents the options for configuring bubbles.\n * @interface BubbleOptions\n * @template T\n */\nexport interface BubbleOptions<T> {\n  /** The menu of bubble types for each node type. */\n  list: NodeTypeMenu\n  /** The default list of bubble types. */\n  defaultBubbleList: any\n  /** The function to generate a bubble menu. */\n  button: BubbleView<T>\n}\n\nfunction imageSizeMenus(editor: Editor): BubbleMenuItem[] {\n  const types: BubbleImageOrVideoSizeType[] = ['size-small', 'size-medium', 'size-large'];\n  const icons: NonNullable<ButtonViewReturn['componentProps']['icon']>[] = [\n    'SizeS',\n    'SizeM',\n    'SizeL',\n  ];\n\n  return types.map((size, i) => ({\n    type: `image-${size}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.${size.replace('-', '.')}.tooltip` as any),\n      icon: icons[i],\n      action: () => editor.commands.updateImage({ width: IMAGE_SIZE[size] }),\n      isActive: () => editor.isActive('image', { width: IMAGE_SIZE[size] }),\n    },\n  }));\n}\n\nfunction imageGifSizeMenus(editor: Editor): BubbleMenuItem[] {\n  const types: BubbleImageOrVideoSizeType[] = ['size-small', 'size-medium', 'size-large'];\n  const icons: NonNullable<ButtonViewReturn['componentProps']['icon']>[] = [\n    'SizeS',\n    'SizeM',\n    'SizeL',\n  ];\n\n  return types.map((size, i) => ({\n    type: `image-${size}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.${size.replace('-', '.')}.tooltip` as any),\n      icon: icons[i],\n      action: () => editor.commands.updateImageGif({ width: IMAGE_SIZE[size] }),\n      isActive: () => editor.isActive('image', { width: IMAGE_SIZE[size] }),\n    },\n  }));\n}\n\nfunction imageAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImage?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction imageGifAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImageGif?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction imageMermaidAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImageMermaid?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction imageDrawerAlignMenus(editor: Editor): BubbleMenuItem[] {\n  const types: ImageAlignments[] = ['left', 'center', 'right'];\n  const iconMap: any = {\n    left: 'AlignLeft',\n    center: 'AlignCenter',\n    right: 'AlignRight',\n  };\n  return types.map(k => ({\n    type: `image-${k}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.textalign.${k}.tooltip`),\n      icon: iconMap[k],\n      action: () => editor.commands?.setAlignImageDrawer?.(k),\n      isActive: () => editor.isActive({ align: k }) || false,\n      disabled: false,\n    },\n  }));\n}\n\nfunction videoSizeMenus(editor: Editor): BubbleMenuItem[] {\n  const types: BubbleImageOrVideoSizeType[] = ['size-small', 'size-medium', 'size-large'];\n  const icons: NonNullable<ButtonViewReturn['componentProps']['icon']>[] = [\n    'SizeS',\n    'SizeM',\n    'SizeL',\n  ];\n\n  return types.map((size, i) => ({\n    type: `video-${size}`,\n    component: ActionButton,\n    componentProps: {\n      tooltip: localeActions.t(`editor.${size.replace('-', '.')}.tooltip` as any),\n      icon: icons[i],\n      action: () => editor.commands.updateVideo({ width: VIDEO_SIZE[size] }),\n      isActive: () => editor.isActive('video', { width: VIDEO_SIZE[size] }),\n    },\n  }));\n}\nexport function getBubbleImage(editor: Editor): BubbleMenuItem[] {\n  return [\n    {\n      type: 'flipX',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.tooltip.flipX'),\n        icon: 'FlipX',\n        action: () => {\n          const image = editor.getAttributes('image');\n          const { flipX } = image as any;\n          editor\n            .chain()\n            .focus(undefined, { scrollIntoView: false })\n            .updateImage({\n              flipX: !flipX,\n            })\n            .run();\n        },\n      },\n    },\n    {\n      type: 'flipY',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.tooltip.flipY'),\n        icon: 'FlipY',\n        action: () => {\n          const image = editor.getAttributes('image');\n          const { flipY } = image as any;\n          editor\n            .chain()\n            .focus(undefined, { scrollIntoView: false })\n            .updateImage({\n              flipY: !flipY,\n            })\n            .run();\n        },\n      },\n    },\n    ...imageSizeMenus(editor),\n    ...imageAlignMenus(editor),\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleImageGif(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...imageGifSizeMenus(editor),\n    ...imageGifAlignMenus(editor),\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleMermaid(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...imageMermaidAlignMenus(editor),\n    {\n      type: 'edit',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.edit'),\n        icon: 'Pencil',\n        action: () => {\n          return true;\n        },\n      },\n    },\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleDrawer(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...imageDrawerAlignMenus(editor),\n    {\n      type: 'edit',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.edit'),\n        icon: 'Pencil',\n        action: () => {\n          console.log('AAA');\n\n          return true;\n        },\n      },\n    },\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\nexport function getBubbleVideo(editor: Editor): BubbleMenuItem[] {\n  return [\n    ...videoSizeMenus(editor),\n    {\n      type: 'remove',\n      component: ActionButton,\n      componentProps: {\n        editor,\n        tooltip: localeActions.t('editor.remove'),\n        icon: 'Trash2',\n        action: () => {\n          const { state, dispatch } = editor.view;\n          deleteSelection(state, dispatch);\n        },\n      },\n    },\n  ];\n}\n\n/**\n * Bubble menu text list\n */\nexport function getBubbleText(editor: Editor, t: any) {\n  return BUBBLE_TEXT_LIST.reduce((acc, type) => {\n    if (type === 'divider' && acc.length > 0) {\n      return [...acc, {\n        type: 'divider',\n        component: undefined,\n        componentProps: {},\n      }];\n    }\n\n    const ext = editor.extensionManager.extensions.find(ext => ext.name === type);\n    if (ext) {\n      return [...acc, ext.configure().options.button({ editor, t, extension: ext })];\n    }\n\n    return acc;\n  }, [] as BubbleMenuItem[]);\n}\n","import { Selection, SelectionRange } from '@tiptap/pm/state';\nimport { NodeRange, ResolvedPos, Node as ProseMirrorNode } from '@tiptap/pm/model';\nimport { Mapping, Mappable } from '@tiptap/pm/transform';\n\nexport function getSelectionRanges(state: ResolvedPos, range: ResolvedPos, depth?: number): SelectionRange[] {\n  const ranges: SelectionRange[] = [];\n  const root = state.node(0);\n  depth =\n    typeof depth === 'number' && depth >= 0\n      ? depth\n      : state.sameParent(range)\n        ? Math.max(0, state.sharedDepth(range.pos) - 1)\n        : state.sharedDepth(range.pos);\n  const nodeRange = new NodeRange(state, range, depth);\n  const startIndex = nodeRange.depth === 0 ? 0 : root.resolve(nodeRange.start).posAtIndex(0);\n\n  nodeRange.parent.forEach((size, offset) => {\n    const from = startIndex + offset;\n    const to = from + size.nodeSize;\n    if (from < nodeRange.start || from >= nodeRange.end) return;\n    const selectionRange = new SelectionRange(root.resolve(from), root.resolve(to));\n    ranges.push(selectionRange);\n  });\n\n  return ranges;\n}\n\nclass NodeRangeBookmark {\n  anchor: number;\n  head: number;\n  constructor(anchor: number, head: number) {\n    this.anchor = anchor;\n    this.head = head;\n  }\n  map(mapping: Mappable) {\n    return new NodeRangeBookmark(mapping.map(this.anchor), mapping.map(this.head));\n  }\n  resolve(doc: ProseMirrorNode) {\n    const e = doc.resolve(this.anchor);\n    const o = doc.resolve(this.head);\n    return new NodeRangeSelection(e, o);\n  }\n}\n\nexport class NodeRangeSelection extends Selection {\n  depth: number | undefined;\n  constructor(from: ResolvedPos, to: ResolvedPos, depth?: number, bias = 1) {\n    const { doc } = from;\n    const isSamePosition = from === to;\n    const isAtDocEnd = from.pos === doc.content.size && to.pos === doc.content.size;\n    const resolvedTo = isSamePosition && !isAtDocEnd ? doc.resolve(to.pos + (bias > 0 ? 1 : -1)) : to;\n    const resolvedFrom = isSamePosition && isAtDocEnd ? doc.resolve(from.pos - (bias > 0 ? 1 : -1)) : from;\n    const selectionRanges = getSelectionRanges(resolvedFrom.min(resolvedTo), resolvedFrom.max(resolvedTo), depth);\n    super(\n      resolvedTo.pos >= from.pos ? selectionRanges[0].$from : selectionRanges[selectionRanges.length - 1].$to,\n      resolvedTo.pos >= from.pos ? selectionRanges[selectionRanges.length - 1].$to : selectionRanges[0].$from,\n      selectionRanges\n    );\n    this.depth = depth;\n  }\n  get $to() {\n    return this.ranges[this.ranges.length - 1].$to;\n  }\n  eq(other: Selection) {\n    return other instanceof NodeRangeSelection && other.$from.pos === this.$from.pos && other.$to.pos === this.$to.pos;\n  }\n  map(doc: ProseMirrorNode, mapping: Mapping) {\n    const newFrom = doc.resolve(mapping.map(this.anchor));\n    const newTo = doc.resolve(mapping.map(this.head));\n    return new NodeRangeSelection(newFrom, newTo);\n  }\n  toJSON() {\n    return { type: 'nodeRange', anchor: this.anchor, head: this.head };\n  }\n  get isForwards() {\n    return this.head >= this.anchor;\n  }\n  get isBackwards() {\n    return !this.isForwards;\n  }\n  extendBackwards() {\n    const { doc } = this.$from;\n    if (this.isForwards && this.ranges.length > 1) {\n      const remainingRanges = this.ranges.slice(0, -1);\n      const newFrom = remainingRanges[0].$from;\n      const newTo = remainingRanges[remainingRanges.length - 1].$to;\n      return new NodeRangeSelection(newFrom, newTo, this.depth);\n    }\n    const currentRange = this.ranges[0];\n    const newPosition = doc.resolve(Math.max(0, currentRange.$from.pos - 1));\n    return new NodeRangeSelection(this.$anchor, newPosition, this.depth);\n  }\n  extendForwards() {\n    const { doc } = this.$from;\n    if (this.isBackwards && this.ranges.length > 1) {\n      const remainingRanges = this.ranges.slice(1);\n      const newFrom = remainingRanges[0].$from;\n      const newTo = remainingRanges[remainingRanges.length - 1].$to;\n      return new NodeRangeSelection(newTo, newFrom, this.depth);\n    }\n    const currentRange = this.ranges[this.ranges.length - 1];\n    const newPosition = doc.resolve(Math.min(doc.content.size, currentRange.$to.pos + 1));\n    return new NodeRangeSelection(this.$anchor, newPosition, this.depth);\n  }\n  static fromJSON(doc: ProseMirrorNode, json: any): NodeRangeSelection {\n    return new NodeRangeSelection(doc.resolve(json.anchor), doc.resolve(json.head));\n  }\n  static create(doc: ProseMirrorNode, anchor: number, head: number, depth?: number, bias = 1) {\n    return new this(doc.resolve(anchor), doc.resolve(head), depth, bias);\n  }\n  getBookmark() {\n    return new NodeRangeBookmark(this.anchor, this.head);\n  }\n}\n","/* eslint-disable @typescript-eslint/prefer-for-of */\nimport { type Editor } from '@tiptap/core';\n\nexport function cloneElement(node: HTMLElement) {\n  const clonedNode: any = node.cloneNode(true);\n  const originalElements = [node, ...Array.from(node.getElementsByTagName('*'))];\n  const clonedElements = [clonedNode, ...Array.from(clonedNode.getElementsByTagName('*'))];\n  originalElements.forEach((element, index) => {\n    clonedElements[index].style.cssText = (function (element) {\n      let styles = '';\n      const computedStyles = getComputedStyle(element);\n      for (let i = 0; i < computedStyles.length; i += 1) {\n        styles += `${computedStyles[i]}:${computedStyles.getPropertyValue(computedStyles[i])};`;\n      }\n      return styles;\n    })(element);\n  });\n  return clonedNode;\n}\nexport function getComputedStyles(element: Element, styleProperty: any) {\n  return window.getComputedStyle(element)[styleProperty];\n}\n\nexport function minMax(value = 0, minimum = 0, maximum = 0) {\n  return Math.min(Math.max(value, minimum), maximum);\n}\n\nexport function removeNode(node: HTMLElement) {\n  if (node.parentNode !== null && node.parentNode !== undefined) {\n    node.parentNode.removeChild(node);\n  }\n}\nexport type FindElementNextToCoords = {\n  x: number\n  y: number\n  direction?: 'left' | 'right'\n  editor: Editor\n};\nexport function findElementNextToCoords (options: FindElementNextToCoords) {\n  const { x, y, direction, editor } = options;\n  let targetElement: any = null;\n  let targetNode: any = null;\n  let documentPosition: any = null;\n  let currentX = x;\n\n  for (; null === targetNode && currentX < window.innerWidth && currentX > 0;) {\n    const elementsAtPoint = document.elementsFromPoint(currentX, y);\n    const proseMirrorIndex = elementsAtPoint.findIndex(el => el.classList.contains('ProseMirror'));\n    const relevantElements = elementsAtPoint.slice(0, proseMirrorIndex);\n\n    if (relevantElements.length > 0) {\n      const currentElement = relevantElements[0];\n      targetElement = currentElement;\n      documentPosition = editor.view.posAtDOM(currentElement, 0);\n\n      if (documentPosition >= 0) {\n        targetNode = editor.state.doc.nodeAt(Math.max(documentPosition - 1, 0));\n        if (targetNode === null || targetNode.isText) {\n          targetNode = editor.state.doc.nodeAt(Math.max(documentPosition - 1, 0));\n        }\n        if (!targetNode) {\n          targetNode = editor.state.doc.nodeAt(Math.max(documentPosition, 0));\n        }\n        break;\n      }\n    }\n\n    if (direction === 'left') {\n      currentX -= 1;\n    } else {\n      currentX += 1;\n    }\n  }\n\n  return {\n    resultElement: targetElement,\n    resultNode: targetNode,\n    pos: documentPosition !== null ? documentPosition : null\n  };\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unused-expressions */\nimport { type Editor } from '@tiptap/core';\nimport { type Node } from '@tiptap/pm/model';\nimport { PluginKey, Plugin } from '@tiptap/pm/state';\nimport { type Transaction, type EditorState } from '@tiptap/pm/state';\nimport type { EditorView } from '@tiptap/pm/view';\nimport debounce from 'lodash-es/debounce';\nimport tippy from 'tippy.js';\nimport { type Props as TippyProps } from 'tippy.js';\n// import { ySyncPluginKey, absolutePositionToRelativePosition } from 'y-prosemirror';\n\nimport { getSelectionRanges, NodeRangeSelection } from './range';\nimport { cloneElement, getComputedStyles, minMax, removeNode, findElementNextToCoords } from './utils';\n\nfunction getSelectionRangesNearCursor(event: any, editor: any) {\n  const { doc: editorDocument } = editor.view.state,\n    nearestElement = findElementNextToCoords({ editor: editor, x: event.clientX, y: event.clientY, direction: 'right' });\n  if (!nearestElement.resultNode || null === nearestElement.pos) return [];\n  const mouseXPosition = event.clientX,\n    cursorPosition = (function (editor, mouseX, mouseY) {\n      const editorPaddingLeft = Number.parseInt(getComputedStyles(editor.dom, 'paddingLeft'), 10),\n        editorPaddingRight = Number.parseInt(getComputedStyles(editor.dom, 'paddingRight'), 10),\n        editorBorderLeft = Number.parseInt(getComputedStyles(editor.dom, 'borderLeftWidth'), 10),\n        editorBorderRight = Number.parseInt(getComputedStyles(editor.dom, 'borderLeftWidth'), 10),\n        editorRect = editor.dom.getBoundingClientRect();\n      return {\n        left: minMax(mouseX, editorRect.left + editorPaddingLeft + editorBorderLeft,\n          editorRect.right - editorPaddingRight - editorBorderRight),\n        top: mouseY\n      };\n    })(editor.view, mouseXPosition, event.clientY),\n    positionAtCoords = editor.view.posAtCoords(cursorPosition);\n  if (!positionAtCoords) return [];\n  const { pos: documentPosition } = positionAtCoords;\n  if (!editorDocument.resolve(documentPosition).parent) return [];\n  const startResolvedPosition = editorDocument.resolve(nearestElement.pos),\n    endResolvedPosition = editorDocument.resolve(nearestElement.pos + 1);\n  return getSelectionRanges(startResolvedPosition, endResolvedPosition, 0);\n}\nfunction getPreviousNodeStartPosition (document: any, position: any) {\n  const resolvedPosition = document.resolve(position),\n    { depth: nodeDepth } = resolvedPosition;\n  if (0 === nodeDepth) return position;\n  return resolvedPosition.pos - resolvedPosition.parentOffset - 1;\n}\nfunction getAncestorNodeAtDepth (document: any, position: any) {\n  const currentNode = document.nodeAt(position),\n    resolvedPosition = document.resolve(position);\n  let { depth: currentDepth } = resolvedPosition,\n    ancestorNode = currentNode;\n  for (; currentDepth > 0;) {\n    const parentNode = resolvedPosition.node(currentDepth);\n    currentDepth -= 1;\n    if (0 === currentDepth) {\n      ancestorNode = parentNode;\n    }\n  }\n  return ancestorNode;\n}\n// function getOuterNode (doc: any, pos: any) {\n//   const n = ySyncPluginKey.getState(doc);\n//   return n ? absolutePositionToRelativePosition(pos, n.type, n.binding.mapping) : null;\n// }\nfunction getOuterNodePos (e: any, t: any) {\n  let n = t;\n  for (; n && n.parentNode && n.parentNode !== e.dom;) n = n.parentNode;\n  return n;\n}\n\nconst dragHandlePluginDefaultKey = new PluginKey('dragHandle');\n\nfunction DragHandlePlugin ({\n  pluginKey: customPluginKey = dragHandlePluginDefaultKey,\n  element: dragHandleElement,\n  editor,\n  tippyOptions,\n  onNodeChange,\n}: {\n  pluginKey?: PluginKey | string\n  element: HTMLElement\n  editor: Editor\n  tippyOptions?: Partial<TippyProps>\n  onNodeChange?: (data: { editor: Editor; node: Node | null; pos: number }) => void\n}) {\n  const dragHandleContainer = document.createElement('div');\n  let tippyInstance: any = null;\n  let isDragLocked = false;\n  // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n  let selectedNode: null = null;\n  let selectedNodePosition = -1;\n\n  dragHandleElement.addEventListener('dragstart', event => {\n    const { view: editorView } = editor;\n    if (!event.dataTransfer) return;\n    const { empty: isSelectionEmpty, $from: selectionStart, $to: selectionEnd } = editorView.state.selection;\n    const nearCursorRanges = getSelectionRangesNearCursor(event, editor);\n    const currentSelectionRanges = getSelectionRanges(selectionStart, selectionEnd, 0);\n    const hasOverlappingRanges = currentSelectionRanges.some(range =>\n      nearCursorRanges.find(nearRange => nearRange.$from === range.$from && nearRange.$to === range.$to));\n    const selectedRanges = isSelectionEmpty || !hasOverlappingRanges ? nearCursorRanges : currentSelectionRanges;\n\n    if (selectedRanges.length === 0) return;\n    const { tr: transaction } = editorView.state;\n    const dragPreviewElement = document.createElement('div');\n    const startPos = selectedRanges[0].$from.pos;\n    const endPos = selectedRanges[selectedRanges.length - 1].$to.pos;\n    const nodeSelection = NodeRangeSelection.create(editorView.state.doc, startPos, endPos);\n    const selectionSlice = nodeSelection.content();\n\n    selectedRanges.forEach(range => {\n      const clonedNode = cloneElement(editorView.nodeDOM(range.$from.pos) as HTMLElement);\n      dragPreviewElement.append(clonedNode);\n    });\n    dragPreviewElement.style.position = 'absolute';\n    dragPreviewElement.style.top = '-10000px';\n    document.body.append(dragPreviewElement);\n    event.dataTransfer.clearData();\n    event.dataTransfer.setDragImage(dragPreviewElement, 0, 0);\n    editorView.dragging = { slice: selectionSlice, move: true };\n    transaction.setSelection(nodeSelection);\n    editorView.dispatch(transaction);\n    document.addEventListener('drop', () => removeNode(dragPreviewElement), { once: true });\n    setTimeout(() => {\n      dragHandleElement && (dragHandleElement.style.pointerEvents = 'none');\n    }, 0);\n  });\n  dragHandleElement.addEventListener('dragend', () => {\n    dragHandleElement && (dragHandleElement.style.pointerEvents = 'auto');\n  });\n  return new Plugin({\n    key: typeof customPluginKey === 'string' ? new PluginKey(customPluginKey) : customPluginKey,\n    state: {\n      init: () => ({ locked: false }),\n      apply(transaction: Transaction, oldState: { locked: boolean }): { locked: boolean } {\n        const isLocked = transaction.getMeta('lockDragHandle');\n        const shouldHide = transaction.getMeta('hideDragHandle');\n        if ((undefined !== isLocked && (isDragLocked = isLocked), shouldHide && tippyInstance)) {\n          tippyInstance.hide();\n          isDragLocked = false;\n          selectedNode = null;\n          selectedNodePosition = -1;\n          onNodeChange?.({ editor: editor, node: null, pos: -1 });\n          return oldState;\n        }\n        if (transaction.docChanged && -1 !== selectedNodePosition && dragHandleElement && tippyInstance) {\n          const newPos = transaction.mapping.map(selectedNodePosition);\n          if (newPos !== selectedNodePosition) {\n            selectedNodePosition = newPos;\n            //  relativePosition = getOuterNode(editorState.doc, selectedNodePosition);\n          }\n        }\n        return oldState;\n      },\n    },\n    view: editorView => {\n      initializeDragHandle();\n\n      setupDragHandleContainer(editor.view.dom);\n\n      tippyInstance = tippy(editorView.dom, {\n        ...getDefaultTippyConfig(),\n        ...tippyOptions,\n      });\n\n      return {\n        update(editorView, oldState) {\n          if (!canUpdateDragHandle(dragHandleElement, tippyInstance)) {\n            return;\n          }\n\n          dragHandleElement.draggable = !isDragLocked;\n\n          if (!shouldUpdatePosition(editorView, oldState)) {\n            return;\n          }\n\n          const targetElement = getValidTargetElement(editorView);\n          if (!targetElement) {\n            return;\n          }\n\n          updateNodeInformation(editorView, targetElement);\n        },\n        destroy() {\n          cleanup();\n        }\n      };\n\n      function initializeDragHandle() {\n        dragHandleElement.draggable = true;\n        dragHandleElement.style.pointerEvents = 'auto';\n      }\n\n      function setupDragHandleContainer(parentElement: any) {\n        parentElement.parentElement?.appendChild(dragHandleContainer);\n        dragHandleContainer.appendChild(dragHandleElement);\n\n        Object.assign(dragHandleContainer.style, {\n          pointerEvents: 'none',\n          position: 'absolute',\n          top: '0',\n          left: '0'\n        });\n      }\n\n      function getDefaultTippyConfig(): Partial<TippyProps> {\n        return {\n          getReferenceClientRect: null,\n          interactive: true,\n          trigger: 'manual',\n          placement: 'left-start',\n          hideOnClick: false,\n          duration: 100,\n          zIndex: 10,\n          appendTo: dragHandleContainer,\n          content: dragHandleElement,\n          popperOptions: {\n            modifiers: [\n              { name: 'flip', enabled: false },\n              {\n                name: 'preventOverflow',\n                options: {\n                  rootBoundary: 'document',\n                  mainAxis: false\n                }\n              },\n            ],\n          }\n        };\n      }\n\n      function canUpdateDragHandle(element: HTMLElement | null, tippy: any) {\n        return element && tippy;\n      }\n\n      function shouldUpdatePosition(view: EditorView, oldState: EditorState) {\n        return !view.state.doc.eq(oldState.doc) && selectedNodePosition !== -1;\n      }\n\n      function getValidTargetElement(view: EditorView) {\n        let targetElement: any = view.nodeDOM(selectedNodePosition);\n        targetElement = getOuterNodePos(view, targetElement);\n\n        if (targetElement === view.dom || targetElement?.nodeType !== 1) {\n          return null;\n        }\n\n        return targetElement;\n      }\n\n      function updateNodeInformation(view: EditorView, targetElement: HTMLElement) {\n        const domPosition = view.posAtDOM(targetElement, 0);\n        const ancestorNode = getAncestorNodeAtDepth(editor.state.doc, domPosition);\n\n        if (ancestorNode === selectedNode) {\n          return;\n        }\n\n        const previousNodePos = getPreviousNodeStartPosition(editor.state.doc, domPosition);\n\n        selectedNode = ancestorNode;\n        selectedNodePosition = previousNodePos;\n        // relativePosition = getOuterNode(editor.state.doc, selectedNodePosition);\n\n        onNodeChange?.({\n          editor,\n          node: selectedNode,\n          pos: selectedNodePosition\n        });\n\n        updateTippyPosition(targetElement);\n      }\n\n      function updateTippyPosition(element: HTMLElement) {\n        tippyInstance.setProps({\n          getReferenceClientRect: () => element.getBoundingClientRect()\n        });\n        tippyInstance.show();\n      }\n\n      function cleanup() {\n        tippyInstance?.destroy();\n        dragHandleElement && removeNode(dragHandleContainer);\n      }\n    },\n    props: {\n      handleDOMEvents: {\n        mouseleave: (editorView, event: any) => {\n          if (isDragLocked) return false;\n          if (!shouldHideDragHandle(event)) return false;\n\n          hideDragHandle();\n          resetSelectedState();\n          return false;\n\n          function shouldHideDragHandle(event: any) {\n            return event.target && !dragHandleContainer.contains(event.relatedTarget);\n          }\n\n          function hideDragHandle() {\n            tippyInstance?.hide();\n          }\n\n          function resetSelectedState() {\n            selectedNode = null;\n            selectedNodePosition = -1;\n            onNodeChange?.({\n              editor: editor,\n              node: null,\n              pos: -1\n            });\n          }\n        },\n        mousemove: debounce((editorView: EditorView, mouseEvent: MouseEvent) => {\n          if (!dragHandleElement || !tippyInstance || isDragLocked) {\n            return false;\n          }\n\n          const nearestElement = findElementNextToCoords({\n            x: mouseEvent.clientX,\n            y: mouseEvent.clientY,\n            direction: 'right',\n            editor: editor\n          });\n\n          if (!nearestElement.resultElement) {\n            return false;\n          }\n\n          if (nearestElement.resultElement === editorView.dom) {\n            return false;\n          }\n\n          const targetElement = getOuterNodePos(editorView, nearestElement.resultElement);\n\n          if (targetElement === editorView.dom) {\n            return false;\n          }\n\n          if (targetElement?.nodeType !== 1) {\n            return false;\n          }\n\n          const domPosition = editorView.posAtDOM(targetElement, 0);\n          const ancestorNode = getAncestorNodeAtDepth(editor.state.doc, domPosition);\n\n          if (ancestorNode === selectedNode) {\n            return false;\n          }\n\n          const previousNodePosition = getPreviousNodeStartPosition(editor.state.doc, domPosition);\n          selectedNode = ancestorNode;\n          selectedNodePosition = previousNodePosition;\n          // relativePosition = getOuterNode(editorView.state, selectedNodePosition);\n\n          onNodeChange?.({\n            editor: editor,\n            node: selectedNode,\n            pos: selectedNodePosition\n          });\n\n          tippyInstance.setProps({\n            getReferenceClientRect: () => targetElement.getBoundingClientRect()\n          });\n          tippyInstance.show();\n\n          return false;\n        }, 100),\n      },\n    },\n  });\n}\n\nexport { DragHandlePlugin, dragHandlePluginDefaultKey };\n","import { useEffect, useRef, useState } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport type { Node } from '@tiptap/pm/model';\nimport type { NodeSelection } from '@tiptap/pm/state';\n\nimport {\n  Button,\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuPortal,\n  DropdownMenuSeparator,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n  IconComponent,\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from '@/components';\nimport { useLocale } from '@/locales';\nimport { DragHandlePlugin, dragHandlePluginDefaultKey } from '@/plugins/DragHandle';\nimport { IndentProps, setNodeIndentMarkup } from '@/utils/indent';\n\nexport interface ContentMenuProps {\n  editor: Editor\n  disabled?: boolean\n  className?: string\n  pluginKey?: string\n}\n\nfunction ContentMenu(props: ContentMenuProps) {\n  const { pluginKey = dragHandlePluginDefaultKey } = props;\n  const { t } = useLocale();\n  const [currentNode, setCurrentNode] = useState<Node | null>(null);\n  const [currentNodePos, setCurrentNodePos] = useState(-1);\n  const dragElement = useRef(null);\n  const pluginRef = useRef<any | null>(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  const hasTextAlignExtension = props.editor.extensionManager.extensions.some(ext => ext.name === 'textAlign');\n  const hasIndentExtension = props.editor.extensionManager.extensions.some(ext => ext.name === 'indent');\n  const hasClearExtension = props.editor.extensionManager.extensions.some(ext => ext.name === 'clear');\n\n  useEffect(() => {\n    if (dragElement.current && !props.editor.isDestroyed) {\n      pluginRef.current = DragHandlePlugin({\n        editor: props.editor,\n        element: dragElement.current,\n        pluginKey: 'ContentItemMenu',\n        tippyOptions: {\n          offset: [-2, 16],\n          zIndex: 99,\n          moveTransition: 'transform 0.15s ease-out',\n        },\n        onNodeChange: handleNodeChange,\n      });\n\n      props.editor.registerPlugin(pluginRef.current);\n    }\n  }, [props.editor, dragElement]);\n\n  function resetTextFormatting() {\n    const chain = props.editor.chain();\n    chain.setNodeSelection(currentNodePos).unsetAllMarks();\n    if (currentNode?.type.name !== 'paragraph') {\n      chain.setParagraph();\n    }\n    chain.run();\n  }\n  function copyNodeToClipboard() {\n    props.editor.chain().focus().setNodeSelection(currentNodePos).run();\n    document.execCommand('copy');\n  }\n  function duplicateNode() {\n    props.editor.commands.setNodeSelection(currentNodePos);\n    const { $anchor } = props.editor.state.selection;\n    const selectedNode = $anchor.node(1) || (props.editor.state.selection as NodeSelection).node;\n    props.editor\n      .chain()\n      .setMeta('hideDragHandle', true)\n      .insertContentAt(currentNodePos + (currentNode?.nodeSize || 0), selectedNode.toJSON())\n      .run();\n  }\n  function setTextAlign(alignments: string) {\n    props.editor.commands.setTextAlign(alignments);\n  }\n  function increaseIndent() {\n    const indentTr = setNodeIndentMarkup(props.editor.state.tr, currentNodePos, 1);\n    indentTr.setMeta('hideDragHandle', true);\n    if (props.editor.view.dispatch)\n      props.editor.view.dispatch(indentTr);\n  }\n  function decreaseIndent() {\n    const tr = setNodeIndentMarkup(props.editor.state.tr, currentNodePos, -1);\n    if (props.editor.view.dispatch)\n      props.editor.view.dispatch(tr);\n  }\n\n  function deleteNode() {\n    props.editor\n      .chain()\n      .setMeta('hideDragHandle', true)\n      .setNodeSelection(currentNodePos)\n      .deleteSelection()\n      .run();\n  }\n\n  function handleNodeChange(e: any) {\n    if (e.node) {\n      setCurrentNode(e.node);\n    }\n    setCurrentNodePos(e.pos);\n  }\n\n  function handleAdd() {\n    if (currentNodePos !== -1) {\n      const currentNodeSize = currentNode?.nodeSize || 0;\n      const insertPos = currentNodePos + currentNodeSize;\n      const currentNodeIsEmptyParagraph\n        = currentNode?.type.name === 'paragraph' && currentNode?.content?.size === 0;\n      const focusPos = currentNodeIsEmptyParagraph ? currentNodePos + 2 : insertPos + 2;\n      props.editor\n        .chain()\n        .command(({ dispatch, tr, state }: any) => {\n          if (dispatch) {\n            if (currentNodeIsEmptyParagraph) {\n              tr.insertText('/', currentNodePos, currentNodePos + 1);\n            } else {\n              tr.insert(\n                insertPos,\n                state.schema.nodes.paragraph.create(null, [state.schema.text('/')]),\n              );\n            }\n\n            return dispatch(tr);\n          }\n\n          return true;\n        })\n        .focus(focusPos)\n        .run();\n    }\n  }\n\n  useEffect(() => {\n    if (menuOpen) {\n      props.editor.commands.setMeta('lockDragHandle', true);\n    } else {\n      props.editor.commands.setMeta('lockDragHandle', false);\n    }\n\n    return () => {\n      props.editor.commands.setMeta('lockDragHandle', false);\n    };\n  }, [menuOpen]);\n\n  useEffect(() => {\n    return () => {\n      if (pluginRef.current) {\n        props.editor.unregisterPlugin(pluginKey);\n        pluginRef.current = null;\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (props.editor?.isDestroyed && pluginRef.current) {\n      props.editor.unregisterPlugin(pluginKey);\n      pluginRef.current = null;\n    }\n  }, [props.editor?.isDestroyed]);\n\n  const handleMenuOpenChange = (open: any) => {\n    if (props?.disabled) {\n      return;\n    }\n    setMenuOpen(open);\n  };\n\n  return (\n    <div\n      ref={dragElement}\n      className={\n        `drag-handle richtext-duration-200 richtext-ease-in-out [transition-property:top,_left] ${props?.className}`\n      }\n      style={{\n        opacity: props?.disabled ? 0 : 1,\n      }}\n    >\n      <div className=\"richtext-flex richtext-items-center richtext-gap-0.5 richtext-duration-200 richtext-ease-in-out [transition-property:top,_left]\">\n        <Button\n          className=\"!richtext-size-7 richtext-cursor-grab\"\n          disabled={props?.disabled}\n          onClick={handleAdd}\n          size=\"icon\"\n          type=\"button\"\n          variant=\"ghost\"\n        >\n          <IconComponent className=\"richtext-text-lg richtext-text-neutral-600 dark:richtext-text-neutral-200\"\n            name=\"Plus\"\n          />\n        </Button>\n\n        <DropdownMenu onOpenChange={handleMenuOpenChange}\n          open={menuOpen}\n        >\n          <div className=\"richtext-relative richtext-flex richtext-flex-col\">\n            <Tooltip>\n              <TooltipTrigger asChild\n                disabled={props?.disabled}\n              >\n                <Button\n                  className=\"richtext-relative richtext-z-[1] !richtext-size-7 richtext-cursor-grab\"\n                  disabled={props?.disabled}\n                  size=\"icon\"\n                  type=\"button\"\n                  variant=\"ghost\"\n                  onMouseUp={(e) => {\n                    e.preventDefault();\n                    if (props?.disabled) {\n                      return;\n                    }\n                    setMenuOpen(true);\n                  }}\n                >\n                  <IconComponent className=\"richtext-text-sm richtext-text-neutral-600 dark:richtext-text-neutral-200\"\n                    name=\"Grip\"\n                  />\n                </Button>\n              </TooltipTrigger>\n\n              <TooltipContent>\n                {t('editor.draghandle.tooltip')}\n              </TooltipContent>\n            </Tooltip>\n\n            <DropdownMenuTrigger className=\"richtext-absolute richtext-left-0 richtext-top-0 richtext-z-0 richtext-size-[28px]\" />\n          </div>\n\n          <DropdownMenuContent align=\"start\"\n            className=\"richtext-w-48\"\n            side=\"bottom\"\n            sideOffset={0}\n          >\n            <DropdownMenuItem\n              className=\"richtext-flex richtext-gap-3 richtext-bg-opacity-10 hover:richtext-bg-red-400 hover:richtext-bg-opacity-20 focus:richtext-bg-red-400 focus:richtext-bg-opacity-30 focus:richtext-text-red-500 dark:hover:richtext-bg-opacity-20 dark:hover:richtext-text-red-500\"\n              onClick={deleteNode}\n            >\n              <IconComponent name=\"Trash2\" />\n\n              <span>\n                {t('editor.remove')}\n              </span>\n            </DropdownMenuItem>\n\n            {hasClearExtension\n              ? (\n                <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                  onClick={resetTextFormatting}\n                >\n                  <IconComponent name=\"PaintRoller\" />\n\n                  <span>\n                    {t('editor.clear.tooltip')}\n                  </span>\n                </DropdownMenuItem>\n              )\n              : null}\n\n            <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n              onClick={copyNodeToClipboard}\n            >\n              <IconComponent name=\"Clipboard\" />\n\n              <span>\n                {t('editor.copyToClipboard')}\n              </span>\n            </DropdownMenuItem>\n\n            <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n              onClick={duplicateNode}\n            >\n              <IconComponent name=\"Copy\" />\n\n              <span>\n                {t('editor.copy')}\n              </span>\n            </DropdownMenuItem>\n\n            {hasTextAlignExtension || hasIndentExtension\n              ? (\n                <DropdownMenuSeparator />\n              )\n              : null}\n\n            {hasTextAlignExtension\n              ? (\n                <DropdownMenuSub>\n                  <DropdownMenuSubTrigger className=\"richtext-flex richtext-gap-3\">\n                    <IconComponent name=\"AlignCenter\" />\n\n                    <span>\n                      {t('editor.textalign.tooltip')}\n                    </span>\n                  </DropdownMenuSubTrigger>\n\n                  <DropdownMenuPortal>\n                    <DropdownMenuSubContent>\n                      <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                        onClick={() => setTextAlign('left')}\n                      >\n                        <IconComponent name=\"AlignLeft\" />\n\n                        <span>\n                          {t('editor.textalign.left.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n\n                      <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                        onClick={() => setTextAlign('center')}\n                      >\n                        <IconComponent name=\"AlignCenter\" />\n\n                        <span>\n                          {t('editor.textalign.center.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n\n                      <DropdownMenuItem className=\"richtext-flex richtext-gap-3\"\n                        onClick={() => setTextAlign('right')}\n                      >\n                        <IconComponent name=\"AlignRight\" />\n\n                        <span>\n                          {t('editor.textalign.right.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n                    </DropdownMenuSubContent>\n                  </DropdownMenuPortal>\n                </DropdownMenuSub>\n              )\n              : null}\n\n            {hasIndentExtension\n              ? (\n                <DropdownMenuSub>\n                  <DropdownMenuSubTrigger className=\"richtext-flex richtext-gap-3\">\n                    <IconComponent name=\"IndentIncrease\" />\n\n                    <span>\n                      {t('editor.indent')}\n                    </span>\n                  </DropdownMenuSubTrigger>\n\n                  <DropdownMenuPortal>\n                    <DropdownMenuSubContent>\n                      <DropdownMenuItem\n                        className=\"richtext-flex richtext-gap-3\"\n                        disabled={currentNode?.attrs?.indent >= IndentProps.max}\n                        onClick={increaseIndent}\n                      >\n                        <IconComponent name=\"IndentIncrease\" />\n\n                        <span>\n                          {t('editor.indent.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n\n                      <DropdownMenuItem\n                        className=\"richtext-flex richtext-gap-3\"\n                        disabled={currentNode?.attrs?.indent <= IndentProps.min}\n                        onClick={decreaseIndent}\n                      >\n                        <IconComponent name=\"IndentDecrease\" />\n\n                        <span>\n                          {t('editor.outdent.tooltip')}\n                        </span>\n                      </DropdownMenuItem>\n                    </DropdownMenuSubContent>\n                  </DropdownMenuPortal>\n                </DropdownMenuSub>\n              )\n              : null}\n\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </div>\n  );\n}\n\nexport { ContentMenu };\n","import { useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/core';\nimport { TextSelection } from '@tiptap/pm/state';\nimport { BubbleMenu } from '@tiptap/react';\n\nimport { Separator, getBubbleText } from '@/components';\nimport { useLocale } from '@/locales';\n\nexport interface BubbleMenuTextProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Comp\n      {...item.componentProps}\n      disabled={disabled || item?.componentProps?.disabled}\n      editor={editor}\n    />\n  );\n}\n\nfunction BubbleMenuText(props: BubbleMenuTextProps) {\n  const { t, lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n\n    // check content select length is not empty\n    if ($from.pos === to) {\n      return false;\n    }\n\n    return selection instanceof TextSelection;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled || !props?.editor) {\n      return [];\n    }\n\n    return getBubbleText(props.editor, t);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang, t]);\n\n  return (\n    <BubbleMenu editor={props?.editor}\n      shouldShow={shouldShow}\n      tippyOptions={tippyOptions as any}\n    >\n      {items?.length\n        ? (\n          <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n            <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-gap-[4px] richtext-whitespace-nowrap\">\n              {items?.map((item: any, key: any) => {\n                if (item?.type === 'divider') {\n                  return (\n                    <Separator\n                      className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n                      key={`bubbleMenu-divider-${key}`}\n                      orientation=\"vertical\"\n                    />\n                  );\n                }\n\n                return (\n                  <ItemA\n                    disabled={props.disabled}\n                    editor={props.editor}\n                    item={item}\n                    key={`bubbleMenu-text-${key}`}\n                  />\n                );\n              })}\n            </div>\n          </div>\n        )\n        : (\n          <></>\n        )}\n    </BubbleMenu>\n  );\n}\n\nexport { BubbleMenuText };\n","import type { Editor } from '@tiptap/core';\nimport { isActive } from '@tiptap/core';\nimport { BubbleMenu } from '@tiptap/react';\nimport type { GetReferenceClientRect } from 'tippy.js';\nimport { sticky } from 'tippy.js';\n\nimport { ActionButton, Separator } from '@/components';\nimport HighlightActionButton from '@/extensions/Highlight/components/HighlightActionButton';\nimport { useLocale } from '@/locales';\n\nexport interface TableBubbleMenuProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nfunction TableBubbleMenu({ editor, disabled }: TableBubbleMenuProps) {\n  const shouldShow = ({ editor }: { editor: Editor }) => {\n    return isActive(editor.view.state, 'table');\n  };\n  const { t } = useLocale();\n\n  function onAddColumnBefore() {\n    editor.chain().focus().addColumnBefore().run();\n  }\n\n  function onAddColumnAfter() {\n    editor.chain().focus().addColumnAfter().run();\n  }\n\n  function onDeleteColumn() {\n    editor.chain().focus().deleteColumn().run();\n  }\n  function onAddRowAbove() {\n    editor.chain().focus().addRowBefore().run();\n  }\n\n  function onAddRowBelow() {\n    editor.chain().focus().addRowAfter().run();\n  }\n\n  function onDeleteRow() {\n    editor.chain().focus().deleteRow().run();\n  }\n\n  function onMergeCell() {\n    editor.chain().focus().mergeCells().run();\n  }\n  function onSplitCell() {\n    editor?.chain().focus().splitCell().run();\n  }\n  function onDeleteTable() {\n    editor.chain().focus().deleteTable().run();\n  }\n\n  function onSetCellBackground(color: string) {\n    editor.chain().focus().setTableCellBackground(color).run();\n  }\n  const getReferenceClientRect: GetReferenceClientRect = () => {\n    const {\n      view,\n      state: {\n        selection: { from },\n      },\n    } = editor;\n\n    const node = view.domAtPos(from).node as HTMLElement;\n    if (!node) {\n      return new DOMRect(-1000, -1000, 0, 0);\n    }\n\n    const tableWrapper = node?.closest?.('.tableWrapper');\n    if (!tableWrapper) {\n      return new DOMRect(-1000, -1000, 0, 0);\n    }\n\n    const rect = tableWrapper.getBoundingClientRect();\n\n    return rect;\n  };\n\n  return (\n    <BubbleMenu\n      editor={editor}\n      pluginKey=\"table\"\n      shouldShow={shouldShow}\n      updateDelay={0}\n      tippyOptions={{\n        offset: [0, 8],\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        maxWidth: 'auto',\n        getReferenceClientRect,\n        plugins: [sticky],\n        sticky: 'popper',\n      }}\n    >\n      {\n        disabled\n          ? <></>\n          : (\n            <div className=\"richtext-min-w-32 richtext-flex richtext-flex-row richtext-h-full richtext-items-center richtext-leading-none richtext-gap-0.5 richtext-p-2 richtext-w-full richtext-bg-background richtext-rounded-lg richtext-shadow-sm !richtext-border richtext-border-border\">\n              <ActionButton\n                icon=\"BetweenHorizonalEnd\"\n                tooltip={t('editor.table.menu.insertColumnBefore')}\n                action={onAddColumnBefore}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.addColumnBefore?.()}\n              />\n              <ActionButton\n                icon=\"BetweenHorizonalStart\"\n                tooltip={t('editor.table.menu.insertColumnAfter')}\n                action={onAddColumnAfter}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.addColumnAfter?.()}\n              />\n              <ActionButton\n                icon=\"DeleteColumn\"\n                action={onDeleteColumn}\n                tooltip={t('editor.table.menu.deleteColumn')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can().deleteColumn?.()}\n              />\n              <Separator orientation=\"vertical\" className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\" />\n\n              <ActionButton\n                icon=\"BetweenVerticalEnd\"\n                action={onAddRowAbove}\n                tooltip={t('editor.table.menu.insertRowAbove')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can().addRowBefore?.()}\n              />\n\n              <ActionButton\n                icon=\"BetweenVerticalStart\"\n                action={onAddRowBelow}\n                tooltip={t('editor.table.menu.insertRowBelow')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.addRowAfter?.()}\n              />\n              <ActionButton\n                icon=\"DeleteRow\"\n                action={onDeleteRow}\n                tooltip={t('editor.table.menu.deleteRow')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.deleteRow?.()}\n              />\n              <Separator orientation=\"vertical\" className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\" />\n              <ActionButton\n                icon=\"TableCellsMerge\"\n                action={onMergeCell}\n                tooltip={t('editor.table.menu.mergeCells')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.mergeCells?.()}\n              />\n              <ActionButton\n                icon=\"TableCellsSplit\"\n                action={onSplitCell}\n                tooltip={t('editor.table.menu.splitCells')}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.splitCell?.()}\n              />\n              <Separator orientation=\"vertical\" className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\" />\n\n              <HighlightActionButton\n                editor={editor}\n                tooltip={t('editor.table.menu.setCellsBgColor')}\n                action={onSetCellBackground}\n                tooltipOptions={{\n                  sideOffset: 15,\n                }}\n              />\n              <ActionButton\n                icon=\"Trash2\"\n                tooltip={t('editor.table.menu.deleteTable')}\n                action={onDeleteTable}\n                tooltip-options={{\n                  sideOffset: 15,\n                }}\n                disabled={!editor?.can()?.deleteTable?.()}\n              />\n            </div>\n          )\n      }\n\n    </BubbleMenu>\n  );\n}\n\nexport { TableBubbleMenu };\n","import React from 'react';\n\nimport { truncate } from 'lodash-es';\n\nimport { ActionButton, Separator } from '@/components';\nimport { useLocale } from '@/locales';\n\ninterface IPropsLinkViewBlock {\n  editor: any\n  link: string\n  onClear?: any\n  onEdit?: any\n}\n\nfunction LinkViewBlock(props: IPropsLinkViewBlock) {\n  const { t } = useLocale();\n\n  return (\n    <div className=\"richtext-flex richtext-items-center richtext-gap-2 richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800\">\n      <a\n        href={props?.link}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"richtext-text-sm richtext-underline richtext-break-all\"\n      >\n        {truncate(props?.link, {\n          length: 50,\n          omission: '…',\n        })}\n      </a>\n      {props?.link && <Separator orientation=\"vertical\" className=\"!richtext-h-4\" />}\n      <div className=\"richtext-flex richtext-flex-nowrap\">\n        <ActionButton\n          icon=\"Pencil\"\n          tooltip={t('editor.link.edit.tooltip')}\n          action={() => {\n            props?.onEdit();\n          }}\n          tooltipOptions={{ sideOffset: 15 }}\n        />\n        <ActionButton\n          icon=\"Unlink\"\n          tooltip={t('editor.link.unlink.tooltip')}\n          action={() => {\n            props?.onClear();\n          }}\n          tooltipOptions={{ sideOffset: 15 }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default LinkViewBlock;\n","import { useCallback, useMemo, useState } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu } from '@tiptap/react';\n\nimport LinkEditBlock from '@/extensions/Link/components/LinkEditBlock';\nimport LinkViewBlock from '@/extensions/Link/components/LinkViewBlock';\n\nexport interface BubbleMenuLinkProps {\n  editor: Editor\n  disabled?: boolean\n}\n\nfunction BubbleMenuLink({ editor, disabled }: BubbleMenuLinkProps) {\n  const [showEdit, setShowEdit] = useState(false);\n\n  const link = useMemo(() => {\n    const { href: link } = editor.getAttributes('link');\n    return link as string;\n  }, [editor]);\n\n  const shouldShow = useCallback(({ editor }: { editor: Editor }) => {\n    const isActive = editor.isActive('link');\n    return isActive;\n  }, []);\n\n  const onSetLink = (url: string, text?: string, openInNewTab?: boolean) => {\n    editor\n      .chain()\n      .extendMarkRange('link')\n      .insertContent({\n        type: 'text',\n        text,\n        marks: [\n          {\n            type: 'link',\n            attrs: {\n              href: url,\n              target: openInNewTab ? '_blank' : '',\n            },\n          },\n        ],\n      })\n      .setLink({ href: url })\n      .focus()\n      .run();\n    setShowEdit(false);\n  };\n\n  const unSetLink = useCallback(() => {\n    editor.chain().extendMarkRange('link').unsetLink().focus().run();\n    setShowEdit(false);\n  }, [editor]);\n\n  return (\n    <>\n      <BubbleMenu\n        editor={editor}\n        shouldShow={shouldShow}\n        tippyOptions={{\n          popperOptions: {\n            modifiers: [{ name: 'flip', enabled: false }],\n          },\n          placement: 'bottom-start',\n          offset: [-2, 16],\n          zIndex: 9999,\n          onHidden: () => {\n            setShowEdit(false);\n          },\n        }}\n      >\n        {disabled\n          ? (\n            <></>\n          )\n          : (\n            <>\n              {showEdit\n                ? (\n                  <LinkEditBlock onSetLink={onSetLink} editor={editor} />\n                )\n                : (\n                  <LinkViewBlock\n                    editor={editor}\n                    onClear={unSetLink}\n                    onEdit={() => {\n                      setShowEdit(true);\n                    }}\n                    link={link}\n                  />\n                )}\n            </>\n          )}\n      </BubbleMenu>\n    </>\n  );\n}\n\nexport { BubbleMenuLink };\n","import { Fragment, useMemo } from 'react';\n\nimport type { Editor } from '@tiptap/react';\nimport { BubbleMenu as BubbleMenuReact } from '@tiptap/react';\n\nimport { Separator, getBubbleImage, getBubbleImageGif, getBubbleVideo } from '@/components';\nimport { Image, ImageGif, Video } from '@/extensions';\nimport { useLocale } from '@/locales';\n\ninterface IPropsBubbleMenu {\n  editor: Editor\n  disabled?: boolean\n}\n\nconst tippyOptions = {\n  maxWidth: 'auto',\n  zIndex: 20,\n  appendTo: 'parent',\n  moveTransition: 'transform 0.1s ease-out',\n};\n\nfunction ItemA({ item, disabled, editor }: any) {\n  const Comp = item.component;\n\n  if (!Comp) {\n    return <></>;\n  }\n\n  return (\n    <Fragment>\n      {item.type === 'divider'\n        ? (\n          <Separator className=\"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]\"\n            orientation=\"vertical\"\n          />\n        )\n        : (\n          <Comp\n            {...item.componentProps}\n            disabled={disabled || item?.componentProps?.disabled}\n            editor={editor}\n          />\n        )}\n    </Fragment>\n  );\n}\n\nfunction isImageNode(node: any) {\n  return node.type.name === Image.name;\n}\n\nfunction isImageGifNode(node: any) {\n  return node.type.name === ImageGif.name;\n}\n\nfunction isVideoNode(node: any) {\n  return node.type.name === Video.name;\n}\n\nfunction BubbleMenuImage(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isImage = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isImageNode(node)) {\n        isImage = true;\n        return false; // Stop iteration if an image is found\n      }\n    });\n\n    return isImage;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleImage(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-image-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nfunction BubbleMenuImageGif(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isImage = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isImageGifNode(node)) {\n        isImage = true;\n        return false; // Stop iteration if an image is found\n      }\n    });\n\n    return isImage;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n    return getBubbleImageGif(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.disabled, props.editor, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-image-gif-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nfunction BubbleMenuVideo(props: IPropsBubbleMenu) {\n  const { lang } = useLocale();\n\n  const shouldShow = ({ editor }: any) => {\n    const { selection } = editor.view.state;\n    const { $from, to } = selection;\n    let isVideo = false;\n\n    editor.view.state.doc.nodesBetween($from.pos, to, (node: any) => {\n      if (isVideoNode(node)) {\n        isVideo = true;\n        return false;\n      }\n    });\n\n    return isVideo;\n  };\n\n  const items = useMemo(() => {\n    if (props.disabled) {\n      return [];\n    }\n\n    return getBubbleVideo(props.editor);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.editor, props.disabled, lang]);\n\n  return (\n    <>\n      <BubbleMenuReact\n        editor={props?.editor}\n        shouldShow={shouldShow}\n        tippyOptions={tippyOptions as any}\n      >\n        {items?.length\n          ? (\n            <div className=\"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800\">\n              <div className=\"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap\">\n                {items?.map((item: any, key: any) => {\n                  return (\n                    <ItemA\n                      disabled={props.disabled}\n                      editor={props.editor}\n                      item={item}\n                      key={`bubbleMenu-video-${key}`}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          )\n          : (\n            <></>\n          )}\n      </BubbleMenuReact>\n    </>\n  );\n}\n\nexport { BubbleMenuImage, BubbleMenuVideo, BubbleMenuImageGif };\n","import { useCallback } from 'react';\n\nimport { BubbleMenu } from '@tiptap/react';\nimport { ActionButton } from '@/components/ActionButton';\nimport { deleteNode } from '@/utils/delete-node';\nimport { MultiColumn } from '@/extensions';\nimport { useLocale } from '@/locales';\n\nexport function ColumnsBubbleMenu({ editor }: any) {\n  const { t } = useLocale();\n\n  const shouldShow = useCallback(() => editor.isActive(MultiColumn.name), [editor]);\n  const deleteMe = useCallback(() => deleteNode(MultiColumn.name, editor), [editor]);\n  const addColBefore = useCallback(() => editor.chain().focus().addColBefore().run(), [editor]);\n  const addColAfter = useCallback(() => editor.chain().focus().addColAfter().run(), [editor]);\n  const deleteCol = useCallback(() => editor.chain().focus().deleteCol().run(), [editor]);\n\n  return (\n    <BubbleMenu\n      pluginKey=\"columns-bubble-menu\"\n      editor={editor}\n      shouldShow={shouldShow}\n      tippyOptions={{\n        popperOptions: {\n          modifiers: [{ name: 'flip', enabled: false }],\n        },\n        placement: 'bottom-start',\n        offset: [-2, 16],\n        zIndex: 9999,\n        // onHidden: () => {\n        //   toggleVisible(false)\n        // },\n      }}\n    >\n      <div className=\"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background\">\n        <ActionButton\n          action={addColBefore}\n          icon=\"ColumnAddLeft\"\n          tooltip={t('editor.table.menu.insertColumnBefore')}\n        />\n        <ActionButton\n          action={addColAfter}\n          icon=\"ColumnAddRight\"\n          tooltip={t('editor.table.menu.insertColumnAfter')}\n        />\n        <ActionButton\n          action={deleteCol}\n          icon=\"DeleteColumn\"\n          tooltip={t('editor.table.menu.deleteColumn')}\n        />\n        <ActionButton\n          action={deleteMe}\n          icon=\"Trash2\"\n          tooltip={t('editor.table.menu.delete_column')}\n        />\n      </div>\n    </BubbleMenu>\n  );\n}\n","import type { Editor } from '@tiptap/core';\nimport React, { useMemo } from 'react';\nimport { useLocale } from '@/locales';\n\ninterface IPropsCharactorCount {\n  editor: Editor\n  extensions: any\n}\n\nfunction CharactorCount({ editor, extensions }: IPropsCharactorCount) {\n  const { t } = useLocale();\n\n  const limit = useMemo(() => {\n    return extensions?.find((extension: any) => extension.name === 'base-kit')?.options?.characterCount?.limit;\n  }, [extensions]);\n\n  if (!limit) {\n    return (\n      <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t\">\n        <div className=\"richtext-flex richtext-flex-col\">\n          <div className=\"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm\">\n            <span>\n              {(editor as any).storage.characterCount.characters()}\n              {' '}\n              {t('editor.characters')}\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t\">\n      <div className=\"richtext-flex richtext-flex-col\">\n        <div className=\"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm\">\n          <span>\n            {editor.storage.characterCount.characters()}\n            /\n            {limit}\n            {' '}\n            {t('editor.characters')}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CharactorCount;\n","'use client';\n\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from '@/components/ui/toast';\nimport { useToast } from '@/components/ui/use-toast';\n\nexport function Toaster() {\n  const { toasts } = useToast();\n\n  return (\n    <ToastProvider>\n      {toasts.map(({ id, title, description, action, ...props }) => {\n        return (\n          <Toast key={id}\n            {...props}\n          >\n            <div className=\"richtext-grid richtext-gap-1\">\n              {title && <ToastTitle>\n                {title}\n              </ToastTitle>}\n\n              {description && (\n                <ToastDescription>\n                  {description}\n                </ToastDescription>\n              )}\n            </div>\n\n            {action}\n            <ToastClose />\n          </Toast>\n        );\n      })}\n\n      <ToastViewport />\n    </ToastProvider>\n  );\n}\n","export const RESET_CSS = `\n.reactjs-tiptap-editor, \n.richtext-dialog-content {\n  button,\n  input:where([type=button]),\n  input:where([type=reset]),\n  input:where([type=submit]) {\n    -webkit-appearance: button;\n    background-color: transparent;\n    background-image: none;\n  }\n\n  input,\n  optgroup,\n  select,\n  textarea {\n    font-family: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    font-size: 100%;\n    font-weight: inherit;\n    line-height: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n  }\n\n  button {\n    font-family: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    font-size: 100%;\n    font-weight: inherit;\n    line-height: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n  }\n\n  *,\n  ::before,\n  ::after {\n    box-sizing: border-box;\n    border-width: 0;\n    border-style: solid;\n    border-color: hsl(var(--richtext-border));\n  }\n\n  background-color: hsl(var(--richtext-background));\n  color: hsl(var(--richtext-foreground));\n\n  hr {\n    height: 0;\n    color: inherit;\n    border-top-width: 1px;\n  }\n\n  a {\n    color: inherit;\n    text-decoration: inherit;\n  }\n\n  b,\n  strong {\n    font-weight: bolder;\n  }\n\n  code,\n  kbd,\n  samp,\n  pre {\n    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;\n    font-feature-settings: normal;\n    font-variation-settings: normal;\n    font-size: 1em;\n  }\n\n  table {\n    text-indent: 0;\n    border-color: inherit;\n    border-collapse: collapse;\n  }\n\n  input, textarea {\n    border-width: 1px;\n  }\n\n  textarea {\n    resize: vertical;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    opacity: 1;\n    color: #9ca3af;\n  }\n\n  button, input, textarea {\n    cursor: pointer;\n    color: inherit;\n  }\n\n  img,\n  svg,\n  video,\n  canvas,\n  audio,\n  iframe,\n  embed,\n  object {\n    display: block;\n    vertical-align: middle;\n  }\n\n  img,\n  video {\n    max-width: 100%;\n    height: auto;\n  }\n}\n\ndiv[data-radix-popper-content-wrapper],\ndiv[data-tippy-root] {\n  *,\n  ::before,\n  ::after {\n    box-sizing: border-box;\n    border-width: 0;\n    border-style: solid;\n    border-color: hsl(var(--richtext-border));\n  }\n\n  background-color: hsl(var(--richtext-background));\n  color: hsl(var(--richtext-foreground));\n\n  button, input, textarea {\n    cursor: pointer;\n    color: inherit;\n  }\n}\n`;\n","/* eslint-disable react/display-name */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { memo, useEffect } from 'react';\n\nimport { ProviderEditableEditor, ProviderTheme, useStoreEditableEditor, useStoreTheme } from '@/store/store';\nimport { listenEvent } from '@/utils/customEvents/customEvents';\nimport { EVENTS } from '@/utils/customEvents/events.constant';\n\nconst EventInitial = memo(({ children, id }: any) => {\n  const [, setEditable] = useStoreEditableEditor(store => store.value);\n  const [, setTheme] = useStoreTheme(store => store.value);\n\n  const handleEditable = (evt: any) => {\n    setEditable({\n      value: evt.detail\n    });\n  };\n\n  const handleTheme = (evt: any) => {\n    setTheme({\n      value: evt.detail\n    });\n  };\n\n  useEffect(() => {\n    const rm3 = listenEvent(EVENTS.EDIT(id), handleEditable);\n    const rm4 = listenEvent(EVENTS.UPDATE_THEME(id), handleTheme);\n\n    return () => {\n      rm3();\n      rm4();\n    };\n  }, []);\n\n  return (\n    <>\n      {children}\n    </>\n  );\n});\n\nexport function ProviderRichText ({ children, id }: { children: React.ReactNode; id: any }) {\n\n  return (\n    <ProviderEditableEditor>\n      <ProviderTheme>\n        <EventInitial id={id}>\n          {children}\n        </EventInitial>\n      </ProviderTheme>\n    </ProviderEditableEditor>\n  );\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nconst APPEND_ORDER = 'data-rc-order';\nconst APPEND_PRIORITY = 'data-rc-priority';\nconst MARK_KEY = 'rc-util-key';\n\nconst containerCache = new Map<ContainerType, Node & ParentNode>();\n\nexport type ContainerType = Element | ShadowRoot;\nexport type Prepend = boolean | 'queue';\nexport type AppendType = 'prependQueue' | 'append' | 'prepend';\n\nexport default function contains(root: Node | null | undefined, n?: Node) {\n  if (!root) {\n    return false;\n  }\n\n  // Use native if support\n  if (root.contains) {\n    return root.contains(n as any);\n  }\n\n  // `document.contains` not support with IE11\n  let node = n;\n  while (node) {\n    if (node === root) {\n      return true;\n    }\n    // @ts-ignore\n    node = node.parentNode;\n  }\n\n  return false;\n}\n\ninterface Options {\n  attachTo?: ContainerType\n  csp?: { nonce?: string }\n  prepend?: Prepend\n  /**\n   * Config the `priority` of `prependQueue`. Default is `0`.\n   * It's useful if you need to insert style before other style.\n   */\n  priority?: number\n  mark?: string\n}\n\nfunction getMark({ mark }: Options = {}) {\n  if (mark) {\n    return mark.startsWith('data-') ? mark : `data-${mark}`;\n  }\n  return MARK_KEY;\n}\n\nfunction getContainer(option: Options) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  const head = document.querySelector('head');\n  return head || document.body;\n}\n\nfunction getOrder(prepend?: Prepend): AppendType {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n\n  return prepend ? 'prepend' : 'append';\n}\n\n/**\n * Find style which inject by rc-util\n */\nfunction findStyles(container: ContainerType) {\n  return [...(containerCache.get(container) || container).children].filter(\n    node => node.tagName === 'STYLE',\n  ) as HTMLStyleElement[];\n}\n\nexport function injectCSS(css: string, option: Options = {}) {\n  const { csp, prepend, priority = 0 } = option;\n  const mergedOrder = getOrder(prepend);\n  const isPrependQueue = mergedOrder === 'prependQueue';\n\n  const styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, mergedOrder);\n\n  if (isPrependQueue && priority) {\n    styleNode.setAttribute(APPEND_PRIORITY, `${priority}`);\n  }\n\n  if (csp?.nonce) {\n    styleNode.nonce = csp?.nonce;\n  }\n  styleNode.innerHTML = css;\n\n  const container = getContainer(option);\n  const { firstChild } = container as any;\n\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (isPrependQueue) {\n      const existStyle = findStyles(container).filter((node) => {\n        // Ignore style which not injected by rc-util with prepend\n        // @ts-ignore\n        if (!['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER))) {\n          return false;\n        }\n\n        // Ignore style which priority less then new style\n        const nodePriority = Number(node.getAttribute(APPEND_PRIORITY) || 0);\n        return priority >= nodePriority;\n      });\n\n      if (existStyle.length > 0) {\n        // @ts-ignore\n        container.insertBefore(styleNode, existStyle.at(-1).nextSibling);\n\n        return styleNode;\n      }\n    }\n\n    // Use `insertBefore` as `prepend`\n    firstChild.before(styleNode);\n  } else {\n    container.append(styleNode);\n  }\n\n  return styleNode;\n}\n\nfunction findExistNode(key: string, option: Options = {}) {\n  const container = getContainer(option);\n\n  return findStyles(container).find(node => node.getAttribute(getMark(option)) === key);\n}\n\nexport function removeCSS(key: string, option: Options = {}) {\n  const existNode = findExistNode(key, option);\n  if (existNode) {\n    // const container = getContainer(option);\n    existNode.remove();\n  }\n}\n\n/**\n * qiankun will inject `appendChild` to insert into other\n */\nfunction syncRealContainer(container: ContainerType, option: Options) {\n  const cachedRealContainer = containerCache.get(container);\n\n  // Find real container when not cached or cached container removed\n  if (!cachedRealContainer || !contains(document, cachedRealContainer)) {\n    const placeholderStyle = injectCSS('', option);\n    const { parentNode } = placeholderStyle;\n    // @ts-ignore\n    containerCache.set(container, parentNode);\n    placeholderStyle.remove();\n  }\n}\n\n/**\n * manually clear container cache to avoid global cache in unit testes\n */\nexport function clearContainerCache() {\n  containerCache.clear();\n}\n\nexport function updateCSS(css: string, key: string, option: Options = {}) {\n  const container = getContainer(option);\n\n  // Sync real parent\n  syncRealContainer(container, option);\n\n  const existNode = findExistNode(key, option);\n\n  if (existNode) {\n    if (option.csp?.nonce && existNode.nonce !== option.csp?.nonce) {\n      existNode.nonce = option.csp?.nonce;\n    }\n\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n\n    return existNode;\n  }\n\n  const newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}\n","import { forwardRef, useEffect, useId, useImperativeHandle, useLayoutEffect, useMemo } from 'react';\n\nimport type { AnyExtension, Editor as CoreEditor } from '@tiptap/core';\nimport type { UseEditorOptions } from '@tiptap/react';\nimport { EditorContent, useEditor } from '@tiptap/react';\nimport { differenceBy, throttle } from 'lodash-es';\n\nimport { BubbleMenu, Toolbar, TooltipProvider } from '@/components';\nimport CharactorCount from '@/components/CharactorCount';\nimport { Toaster } from '@/components/ui/toaster';\nimport { EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME } from '@/constants';\nimport { RESET_CSS } from '@/constants/resetCSS';\nimport { editableEditorActions } from '@/store/editableEditor';\nimport { ProviderRichText } from '@/store/ProviderRichText';\nimport { themeActions } from '@/theme/theme';\nimport type { BubbleMenuProps, ToolbarProps } from '@/types';\nimport { removeCSS, updateCSS } from '@/utils/dynamicCSS';\nimport { hasExtension } from '@/utils/utils';\n\nimport '../styles/index.scss';\n\n/**\n * Interface for RichTextEditor component props\n */\nexport interface RichTextEditorProps {\n  /** Content of the editor */\n  content: string\n  /** Extensions for the editor */\n  extensions: AnyExtension[]\n\n  /** Output format */\n  output: 'html' | 'json' | 'text'\n  /** Model value */\n  modelValue?: string | object\n  /** Dark mode flag */\n  dark?: boolean\n  /** Dense mode flag */\n  dense?: boolean\n  /** Disabled flag */\n  disabled?: boolean\n  /** Label for the editor */\n  label?: string\n  /** Hide toolbar flag */\n  hideToolbar?: boolean\n  /** Disable bubble menu flag */\n  disableBubble?: boolean\n  /** Hide bubble menu flag */\n  hideBubble?: boolean\n  /** Remove default wrapper flag */\n  removeDefaultWrapper?: boolean\n  /** Maximum width */\n  maxWidth?: string | number\n  /** Minimum height */\n  minHeight?: string | number\n  /** Maximum height */\n  maxHeight?: string | number\n  /** Content class */\n  contentClass?: string | string[] | Record<string, any>\n  /** Content change callback */\n  onChangeContent?: (val: any) => void\n  /** Bubble menu props */\n  bubbleMenu?: BubbleMenuProps\n  /** Toolbar props */\n  toolbar?: ToolbarProps\n\n  /** Use editor options */\n  useEditorOptions?: UseEditorOptions\n\n  /** Use editor options */\n  resetCSS?: boolean\n}\n\nfunction RichTextEditor(props: RichTextEditorProps, ref: React.ForwardedRef<{ editor: CoreEditor | null }>) {\n  const { content, extensions, useEditorOptions = {} } = props;\n\n  const id = useId();\n\n  const sortExtensions = useMemo(() => {\n    const diff = differenceBy(extensions, extensions, 'name');\n    const exts = extensions.map((k: any) => {\n      const find = extensions.find((ext: any) => ext.name === k.name);\n      if (!find) {\n        return k;\n      }\n      return k.configure(find.options);\n    });\n    return [...exts, ...diff].map((k, i) => k.configure({ sort: i }));\n  }, [extensions]);\n\n  const onValueChange = throttle((editor) => {\n    const output = getOutput(editor, props.output as any);\n\n    props?.onChangeContent?.(output as any);\n  }, EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME);\n\n  const editor = useEditor({\n    extensions: sortExtensions,\n    content,\n    onUpdate: ({ editor }) => {\n      if (onValueChange)\n        onValueChange(editor);\n    },\n    ...useEditorOptions,\n  }) as any;\n\n  useImperativeHandle(ref, () => {\n    return {\n      editor,\n    };\n  });\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('dark', props.dark);\n    themeActions.setTheme(id, props.dark ? 'dark' : 'light');\n  }, [props.dark]);\n\n  useEffect(() => {\n    editor?.setEditable(!props?.disabled);\n    editableEditorActions.setDisable(id, !props?.disabled);\n  }, [editor, props?.disabled]);\n\n  useEffect(() => {\n    if (props?.resetCSS !== false) {\n      updateCSS(RESET_CSS, 'react-tiptap-reset');\n    }\n\n    return () => {\n      removeCSS('react-tiptap-reset');\n    };\n  }, [props?.resetCSS]);\n\n  function getOutput(editor: CoreEditor, output: RichTextEditorProps['output']) {\n    if (props?.removeDefaultWrapper) {\n      if (output === 'html') {\n        return editor.isEmpty ? '' : editor.getHTML();\n      }\n      if (output === 'json') {\n        return editor.isEmpty ? {} : editor.getJSON();\n      }\n      if (output === 'text') {\n        return editor.isEmpty ? '' : editor.getText();\n      }\n      return '';\n    }\n\n    if (output === 'html') {\n      return editor.getHTML();\n    }\n    if (output === 'json') {\n      return editor.getJSON();\n    }\n    if (output === 'text') {\n      return editor.getText();\n    }\n    return '';\n  }\n\n  useLayoutEffect(() => {\n    if (editor) editor!.id = id;\n  }, [id, editor]);\n\n  useEffect(() => {\n    return () => {\n      editor?.destroy?.();\n    };\n  }, []);\n\n  const hasExtensionValue = hasExtension(editor, 'characterCount');\n\n  if (!editor) {\n    return <></>;\n  }\n\n  return (\n    <div className=\"reactjs-tiptap-editor\">\n      <ProviderRichText\n        id={id}\n      >\n        <TooltipProvider delayDuration={0}\n          disableHoverableContent\n        >\n          <div className=\"richtext-overflow-hidden richtext-rounded-[0.5rem] richtext-bg-background richtext-shadow richtext-outline richtext-outline-1\">\n            <div className=\"richtext-flex richtext-max-h-full richtext-w-full richtext-flex-col\">\n              {!props?.hideToolbar && <Toolbar disabled={!!props?.disabled}\n                editor={editor}\n                toolbar={props.toolbar}\n              />}\n\n              <EditorContent className={`richtext-relative ${props?.contentClass || ''}`}\n                editor={editor}\n\n              />\n\n              {hasExtensionValue && <CharactorCount editor={editor}\n                extensions={extensions}\n              />}\n\n              {!props?.hideBubble && <BubbleMenu bubbleMenu={props?.bubbleMenu}\n                disabled={props?.disabled}\n                editor={editor}\n              />}\n            </div>\n          </div>\n        </TooltipProvider>\n      </ProviderRichText>\n\n      <Toaster />\n    </div>\n  );\n}\n\nexport default forwardRef(RichTextEditor);\n"],"names":["cn","inputs","twMerge","clsx","isMacResult","isMac","getShortcutKey","key","getShortcutKeys","keys","ActionButton","React","props","ref","icon","tooltip","disabled","customClass","loading","shortcutKeys","tooltipOptions","action","isActive","children","asChild","upload","rest","Icon","icons","Comp","Slot","Toggle","Tooltip","jsx","TooltipTrigger","jsxs","TooltipContent","createFastContext","initialState","useStoreData","store","useRef","get","useCallback","subscribers","set","value","callback","subscribe","StoreContext","createContext","Provider","useStore","selector","useContext","useSyncExternalStore","ProviderEditableEditor","useStoreEditableEditor","ProviderTheme","useStoreTheme","createSignal","listenEvent","eventName","dispatchEvent","detail","EVENTS","id","useEditableEditor","v","editableEditorActions","disable","deleteNode","nodeType","editor","state","$pos","done","d","node","pos","clamp","val","min","max","isNumber","isString","isFunction","getCssUnitWithDefault","defaultUnit","stringValue","num","unitMatch","unit","hasExtension","name","extensions","i","ensureNameValueOptions","arr","item","buttonVariants","cva","Button","className","variant","size","DropdownMenu","DropdownMenuPrimitive","DropdownMenuTrigger","DropdownMenuPortal","DropdownMenuSub","DropdownMenuSubTrigger","inset","ChevronRight","DropdownMenuSubContent","DropdownMenuContent","sideOffset","DropdownMenuItem","DropdownMenuCheckboxItem","checked","Check","DropdownMenuRadioItem","Circle","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuShortcut","Input","type","labelVariants","Label","LabelPrimitive","Popover","PopoverPrimitive","PopoverTrigger","PopoverContent","align","Separator","orientation","decorative","SeparatorPrimitive","Switch","SwitchPrimitives","Tabs","TabsPrimitive","TabsList","TabsTrigger","TabsContent","ToastProvider","ToastPrimitives","ToastViewport","toastVariants","Toast","ToastAction","ToastClose","X","ToastTitle","ToastDescription","toggleVariants","TogglePrimitive","TooltipProvider","TooltipPrimitive","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","t","toast","listeners","memoryState","listener","update","dismiss","open","useToast","setState","index","Checkbox","CheckboxPrimitive","AspectRatio","BlockquoteLeft","DeleteColumn","DeleteRow","FileWordOutline","IconComponent","FormatLineHeight","MenuDown","SizeL","SizeM","SizeS","ColumnAddLeft","ColumnAddRight","Direction","Excalidraw","ExportPdf","ExportWord","GifIcon","LeftToRight","Mermaid","RightToLeft","Twitter","ImportWord","Bold","LoaderCircle","Italic","Underline","Quote","Strikethrough","Minus","Eraser","PaintRoller","Redo2","Undo2","TextAlignCenterIcon","TextAlignJustifyIcon","TextAlignLeftIcon","TextAlignRightIcon","ChevronDown","Subscript","Superscript","Code","CodeXml","Type","IndentIncrease","IndentDecrease","List","ListOrdered","ListTodo","Link","ImageUp","Video","Maximize","Minimize","Table","Sparkles","Pencil","Unlink","BetweenHorizonalEnd","BetweenHorizonalStart","BetweenVerticalStart","BetweenVerticalEnd","TableCellsMerge","TableCellsSplit","Trash2","Trash","Replace","ChevronsUpDown","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","Columns2","Columns3","Columns4","Plus","GripVertical","Copy","Clipboard","PanelLeft","PanelRight","Frame","SmilePlus","SmilePlusIcon","Sigma","BookMarked","ZoomIn","ZoomOut","Settings","Eye","Paperclip","ChevronUp","CropIcon","FlipVertical","FlipHorizontal","PencilRuler","IconC","fill","HighlightActionButton","selectedColor","setSelectedColor","useState","onChange","color","_a","toggleColor","setSelectedColorDebounce","debounce","ColorPicker","LinkEditBlock","useLocale","form","setForm","openInNewTab","setOpenInNewTab","useEffect","link","target","from","to","text","handleSubmit","event","e","createColumn","colType","colContent","getColumnsNodeTypes","schema","roles","createColumns","colsCount","types","cols","col","addOrDeleteCol","maybeColumns","findParentNode","MultiColumn","maybeColumn","Column","colIndex","colsJSON","nextIndex","colJSON","nextCols","Node","nextSelectPos","tr","TextSelection","gotoCol","EXTENSION_PRIORITY_HIGHEST","element","HTMLAttributes","mergeAttributes","attrs","offset","IndentProps","updateIndentLevel","delta","doc","selection","AllSelection","setNodeIndentMarkup","isList","indent","nodeAttrs","createIndentCommand","actionDialogImage","Dialog","DialogPrimitive","DialogTrigger","DialogPortal","DialogOverlay","DialogContent","DialogHeader","DialogFooter","DialogTitle","DialogDescription","extractFilename","src","extractFileExtension","fileName","normalizeFileSize","normalizeFileType","fileType","readImageAsBase64","file","resolve","reader","dataURLtoFile","dataurl","filename","mime","bstr","n","u8arr","ImageCropper","imageInline","onClose","dialogOpen","setDialogOpen","imgRef","crop","setCrop","croppedImageUrl","setCroppedImageUrl","fileInput","urlUpload","setUrlUpload","onCropComplete","getCroppedImg","image","canvas","scaleX","scaleY","ctx","onCrop","fileCrop","uploadOptions","_b","extension","ExtensionImage","error","handleClick","handleFile","files","base64","Fragment","ReactCrop","c","ActionImageButton","setOpen","handleUploadImage","evt","setLink","setImageInline","Image","useMemo","rm1","handleLink","ResizeDirection","ImageView","maxSize","setMaxSize","IMAGE_MAX_SIZE","originalSize","setOriginalSize","resizeDirections","resizing","setResizing","resizerState","setResizerState","inline","imgAttrs","alt","w","h","flipX","flipY","width","height","transformStyles","transform","imageMaxStyle","onImageLoad","selectImage","getPos","getMaxSize","throttle","prev","IMAGE_THROTTLE_WAIT_TIME","onMouseDown","dir","originalWidth","originalHeight","aspectRatio","maxWidth","onMouseMove","x","dx","IMAGE_MIN_SIZE","onMouseUp","onEvents","offEvents","resizeOb","NodeViewWrapper","direction","uploadKey","PluginKey","UploadImagesPlugin","Plugin","DecorationSet","placeholder","createPlaceholder","deco","Decoration","spec","findPlaceholder","found","createImageUpload","validateFn","onUpload","postUpload","defaultInline","view","result","placeholderPos","imageSrc","transaction","handleImagePaste","uploadFn","handleImageDrop","moved","coordinates","DEFAULT_OPTIONS","TiptapImage","attributes","ReactNodeViewRenderer","options","commands","transformStyle","textAlignStyle","img","_","checkIsVideo","url","ActionVideoButton","setError","handleUploadVideo","linkConvert","VIDEO_SIZE","iframeHTMLAttributes","responsiveStyle","responsiveSizesStyle","responsiveDOM","IframeNodeView","updateAttributes","isEditable","originalLink","setOriginalLink","handleConfirm","Iframe","onResize","Resizable","styles","jsonToStr","json","getDatasetAttribute","attribute","transformToJSON","dataKey","texts","str","accu","toNumber","nodeAttrsToDataset","encodeValue","chain","_c","nodeInputRule","Textarea","mapSelf","useAttributes","attrbute","defaultValue","map","mapFn","setValue","prevValueCache","nextAttrs","deepEqual","KatexActiveButton","Katex","defaultShowPicker","currentValue","setCurrentValue","submit","formatText","katex","previewContent","HelpCircle","useTheme","themeActions","theme","convertColorToRGBA","hexCode","opacity","r","g","b","rgb","hex","KatexWrapper","backgroundColor","content","getEventEmitter","mitt","OPEN_EXCALIDRAW_SETTING_MODAL","subject","handler","cancelSubject","triggerOpenExcalidrawSettingModal","data","ExcalidrawActiveButton","setExcalidraw","setData","initialData","setInitialData","visible","toggleVisible","toggleLoading","renderEditor","div","res","renderExcalidraw","app","elements","appState","save","MIN_ZOOM","MAX_ZOOM","ZOOM_STEP","INHERIT_SIZE_STYLE","NodeViewExcalidraw","exportToSvgRef","Svg","setSvg","zoom","setZoomState","onViewportChange","setZoom","currentZoom","isUnmount","err","svg","VisibilitySensor","NodeViewExcalidraw$1","prevProps","nextProps","DEFAULT_MIND_DATA","ImageGifWrap","giphyApiKey","gifs","setGifs","limit","inputRef","search","term","kind","response","handleInputChange","o","ImageGifActionButton","giphyblock","ImageGifView","ImageGif","shortId","length","defaultCode","MermaidActiveButton","mermaidCode","setMermaidCode","svgCode","setSvgCode","mermaidRef","renderMermaid","mermaid","mermaidInit","setMermaid","svg64","NodeViewMermaid","selected","wI","hI","ratio","replace","NodeViewTweet","tweetId","Tweet","FormEditLinkTwitter","setSrc","srcInit","TwitterActiveButton","onSetLink","TWITTER_REGEX_GLOBAL","TWITTER_REGEX","isValidTwitterUrl","nodePasteRule","match","HugeiconsCursorRectangleSelection01","MdiFormatLetterCase","MaterialSymbolsEdit","PhHighlighter","OuiEraser","MdiSquareOutline","MaterialSymbolsRectangleOutline","MaterialSymbolsCircleOutline","TablerTriangle","MaterialSymbolsHexagonOutline","MingcuteDiamondSquareLine","IcSharpArrowRightAlt","SolarUndoLeftRoundBold","SolarUndoRightRoundBold","MaterialSymbolsDelete","PhLineSegmentFill","IcSharpFavorite","MaterialSymbolsKidStar","MaterialSymbolsCloud","AkarIconsParallelogram","highlightC","Color4","COLOR","ColorPickerHighlight","setSelected","PencilOption","setColorPen","setThicknessPen","thickness","setThickness","HighlightOption","setColorHighlight","ShapeOption","changeColorShape","changeBorderColorShape","onThicknessChange","ControlDrawer","refEditor","onUndo","changeShape","onRedo","onClear","tool","setTool","setType","penTool","clear","DrawerActiveButton","refWidget","parentElement","Editor4","makeDropdownToolbar","contentHtml","shapeWidget","NodeViewDrawer","Drawer","EditDrawerBlock","useExtension","setExtension","tippyOptions","ItemA","isDrawerNode","BubbleMenuDrawer","lang","shouldShow","$from","isDrawer","items","getBubbleDrawer","BubbleMenuReact","containerStyle","SizeSetter","onOk","cache","getEditorContainerDOMSize","targetNode","config","observer","BubbleMenuExcalidraw","createUser","setSize","openEditLinkModal","deleteMe","BubbleMenu","BubbleMenuIframe","formUrl","setFormUrl","handleCancel","handleOk","visitLink","BubbleMenuKatex","EditMermaidBlock","isMermaidNode","BubbleMenuMermaid","isMermaid","getBubbleMermaid","BubbleMenuTwitter","showEdit","setShowEdit","bubbleMenu","extensionsNames","ext","renderMenuItems","ColumnsBubbleMenu","TableBubbleMenu","BubbleMenuLink","_d","BubbleMenuImage","_e","BubbleMenuImageGif","_f","BubbleMenuVideo","_g","_h","_i","_j","_k","_l","ContentMenu","_m","BubbleMenuText","_n","NoFill","highlight","colors","DEFAULT_COLORS_LIST","chunkedColors","colorsArray","chunked","recentColorsStore","setRecentColorsStore","setRecentColor","newRecentColors","setColor","idx","AddMoreColor","colorMore","setColorMore","openColorMore","setOpenColorMore","HexColorPicker","Toolbar","toolbar","toolbarItems","sortExtensions","acc","a","menus","button","divider","spacer","_button","menu","k","containerDom","innerContent","dom","ButtonComponent","imageSizeMenus","localeActions","IMAGE_SIZE","imageGifSizeMenus","imageAlignMenus","iconMap","imageGifAlignMenus","imageMermaidAlignMenus","imageDrawerAlignMenus","videoSizeMenus","getBubbleImage","deleteSelection","getBubbleImageGif","getBubbleVideo","getBubbleText","BUBBLE_TEXT_LIST","getSelectionRanges","range","depth","ranges","root","nodeRange","NodeRange","startIndex","selectionRange","SelectionRange","NodeRangeBookmark","anchor","head","__publicField","mapping","NodeRangeSelection","Selection","bias","isSamePosition","isAtDocEnd","resolvedTo","resolvedFrom","selectionRanges","other","newFrom","newTo","remainingRanges","currentRange","newPosition","cloneElement","clonedNode","originalElements","clonedElements","computedStyles","getComputedStyles","styleProperty","minMax","minimum","maximum","removeNode","findElementNextToCoords","y","targetElement","documentPosition","currentX","elementsAtPoint","proseMirrorIndex","el","relevantElements","currentElement","getSelectionRangesNearCursor","editorDocument","nearestElement","mouseXPosition","cursorPosition","mouseX","mouseY","editorPaddingLeft","editorPaddingRight","editorBorderLeft","editorBorderRight","editorRect","positionAtCoords","startResolvedPosition","endResolvedPosition","getPreviousNodeStartPosition","document","position","resolvedPosition","nodeDepth","getAncestorNodeAtDepth","currentNode","currentDepth","ancestorNode","parentNode","getOuterNodePos","dragHandlePluginDefaultKey","DragHandlePlugin","customPluginKey","dragHandleElement","onNodeChange","dragHandleContainer","tippyInstance","isDragLocked","selectedNode","selectedNodePosition","editorView","isSelectionEmpty","selectionStart","selectionEnd","nearCursorRanges","currentSelectionRanges","hasOverlappingRanges","nearRange","selectedRanges","dragPreviewElement","startPos","endPos","nodeSelection","selectionSlice","oldState","isLocked","shouldHide","newPos","initializeDragHandle","setupDragHandleContainer","tippy","getDefaultTippyConfig","canUpdateDragHandle","shouldUpdatePosition","getValidTargetElement","updateNodeInformation","cleanup","domPosition","previousNodePos","updateTippyPosition","shouldHideDragHandle","hideDragHandle","resetSelectedState","mouseEvent","previousNodePosition","pluginKey","setCurrentNode","currentNodePos","setCurrentNodePos","dragElement","pluginRef","menuOpen","setMenuOpen","hasTextAlignExtension","hasIndentExtension","hasClearExtension","handleNodeChange","resetTextFormatting","copyNodeToClipboard","duplicateNode","$anchor","setTextAlign","alignments","increaseIndent","indentTr","decreaseIndent","handleAdd","currentNodeSize","insertPos","currentNodeIsEmptyParagraph","focusPos","handleMenuOpenChange","onAddColumnBefore","onAddColumnAfter","onDeleteColumn","onAddRowAbove","onAddRowBelow","onDeleteRow","onMergeCell","onSplitCell","onDeleteTable","onSetCellBackground","getReferenceClientRect","tableWrapper","sticky","_p","_o","_r","_q","LinkViewBlock","truncate","unSetLink","isImageNode","isImageGifNode","isVideoNode","isImage","isVideo","addColBefore","addColAfter","deleteCol","CharactorCount","Toaster","toasts","title","description","RESET_CSS","EventInitial","memo","setEditable","setTheme","handleEditable","handleTheme","rm3","rm4","ProviderRichText","APPEND_ORDER","APPEND_PRIORITY","MARK_KEY","containerCache","contains","getMark","mark","getContainer","option","getOrder","prepend","findStyles","container","injectCSS","css","csp","priority","mergedOrder","isPrependQueue","styleNode","firstChild","existStyle","nodePriority","findExistNode","removeCSS","existNode","syncRealContainer","cachedRealContainer","placeholderStyle","updateCSS","newNode","RichTextEditor","useEditorOptions","useId","diff","differenceBy","find","onValueChange","output","getOutput","EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME","useEditor","useImperativeHandle","useLayoutEffect","hasExtensionValue","EditorContent","forwardRef"],"mappings":"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"}